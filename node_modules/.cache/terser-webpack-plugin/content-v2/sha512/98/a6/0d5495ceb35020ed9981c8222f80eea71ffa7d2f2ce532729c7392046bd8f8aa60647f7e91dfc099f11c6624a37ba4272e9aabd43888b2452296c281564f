{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(module,exports,__webpack_require__){module.exports=__webpack_require__(\"zUnb\")},\"3Kre\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"factory\",(function(){return factory})),__webpack_require__.d(__webpack_exports__,\"getGlobalVars\",(function(){return getGlobalVars})),__webpack_require__.d(__webpack_exports__,\"registerAnalytics\",(function(){return registerAnalytics})),__webpack_require__.d(__webpack_exports__,\"resetGlobalVars\",(function(){return resetGlobalVars})),__webpack_require__.d(__webpack_exports__,\"settings\",(function(){return settings}));var _a,tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"mrSG\"),_firebase_app__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"wj3C\"),_firebase_app__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_firebase_app__WEBPACK_IMPORTED_MODULE_1__),_firebase_logger__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(\"fSjL\"),__webpack_require__(\"q/0M\")),_firebase_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"zVF4\"),_firebase_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"S+S0\"),GTAG_URL=\"https://www.googletagmanager.com/gtag/js\",GtagCommand=function(GtagCommand){return GtagCommand.EVENT=\"event\",GtagCommand.SET=\"set\",GtagCommand.CONFIG=\"config\",GtagCommand}({}),EventName=function(EventName){return EventName.ADD_SHIPPING_INFO=\"add_shipping_info\",EventName.ADD_PAYMENT_INFO=\"add_payment_info\",EventName.ADD_TO_CART=\"add_to_cart\",EventName.ADD_TO_WISHLIST=\"add_to_wishlist\",EventName.BEGIN_CHECKOUT=\"begin_checkout\",EventName.CHECKOUT_PROGRESS=\"checkout_progress\",EventName.EXCEPTION=\"exception\",EventName.GENERATE_LEAD=\"generate_lead\",EventName.LOGIN=\"login\",EventName.PAGE_VIEW=\"page_view\",EventName.PURCHASE=\"purchase\",EventName.REFUND=\"refund\",EventName.REMOVE_FROM_CART=\"remove_from_cart\",EventName.SCREEN_VIEW=\"screen_view\",EventName.SEARCH=\"search\",EventName.SELECT_CONTENT=\"select_content\",EventName.SELECT_ITEM=\"select_item\",EventName.SELECT_PROMOTION=\"select_promotion\",EventName.SET_CHECKOUT_OPTION=\"set_checkout_option\",EventName.SHARE=\"share\",EventName.SIGN_UP=\"sign_up\",EventName.TIMING_COMPLETE=\"timing_complete\",EventName.VIEW_CART=\"view_cart\",EventName.VIEW_ITEM=\"view_item\",EventName.VIEW_ITEM_LIST=\"view_item_list\",EventName.VIEW_PROMOTION=\"view_promotion\",EventName.VIEW_SEARCH_RESULTS=\"view_search_results\",EventName}({}),logger=new _firebase_logger__WEBPACK_IMPORTED_MODULE_3__.Logger(\"@firebase/analytics\");function gtagOnConfig(gtagCore,initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,measurementId,gtagParams){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var correspondingAppId,dynamicConfigResults,foundConfig,e_1;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:correspondingAppId=measurementIdToAppId[measurementId],_a.label=1;case 1:return _a.trys.push([1,7,,8]),correspondingAppId?[4,initializationPromisesMap[correspondingAppId]]:[3,3];case 2:return _a.sent(),[3,6];case 3:return[4,Promise.all(dynamicConfigPromisesList)];case 4:return dynamicConfigResults=_a.sent(),(foundConfig=dynamicConfigResults.find((function(config){return config.measurementId===measurementId})))?[4,initializationPromisesMap[foundConfig.appId]]:[3,6];case 5:_a.sent(),_a.label=6;case 6:return[3,8];case 7:return e_1=_a.sent(),logger.error(e_1),[3,8];case 8:return gtagCore(GtagCommand.CONFIG,measurementId,gtagParams),[2]}}))}))}function gtagOnEvent(gtagCore,initializationPromisesMap,dynamicConfigPromisesList,measurementId,gtagParams){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var initializationPromisesToWaitFor,gaSendToList,dynamicConfigResults,_loop_1,_i,gaSendToList_1,e_2;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,4,,5]),initializationPromisesToWaitFor=[],gtagParams&&gtagParams.send_to?(gaSendToList=gtagParams.send_to,Array.isArray(gaSendToList)||(gaSendToList=[gaSendToList]),[4,Promise.all(dynamicConfigPromisesList)]):[3,2];case 1:for(dynamicConfigResults=_a.sent(),_loop_1=function(sendToId){var foundConfig=dynamicConfigResults.find((function(config){return config.measurementId===sendToId})),initializationPromise=foundConfig&&initializationPromisesMap[foundConfig.appId];if(!initializationPromise)return initializationPromisesToWaitFor=[],\"break\";initializationPromisesToWaitFor.push(initializationPromise)},_i=0,gaSendToList_1=gaSendToList;_i<gaSendToList_1.length&&\"break\"!==_loop_1(gaSendToList_1[_i]);_i++);_a.label=2;case 2:return 0===initializationPromisesToWaitFor.length&&(initializationPromisesToWaitFor=Object.values(initializationPromisesMap)),[4,Promise.all(initializationPromisesToWaitFor)];case 3:return _a.sent(),gtagCore(GtagCommand.EVENT,measurementId,gtagParams||{}),[3,5];case 4:return e_2=_a.sent(),logger.error(e_2),[3,5];case 5:return[2]}}))}))}var ERRORS=((_a={})[\"already-exists\"]=\"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.\",_a[\"already-initialized\"]=\"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.\",_a[\"interop-component-reg-failed\"]=\"Firebase Analytics Interop Component failed to instantiate: {$reason}\",_a[\"invalid-analytics-context\"]=\"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}\",_a[\"indexeddb-unavailable\"]=\"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}\",_a[\"fetch-throttle\"]=\"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.\",_a[\"config-fetch-failed\"]=\"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}\",_a[\"no-api-key\"]='The \"apiKey\" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',_a[\"no-app-id\"]='The \"appId\" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',_a),ERROR_FACTORY=new _firebase_util__WEBPACK_IMPORTED_MODULE_4__.ErrorFactory(\"analytics\",\"Analytics\",ERRORS),defaultRetryData=new(function(){function RetryData(throttleMetadata,intervalMillis){void 0===throttleMetadata&&(throttleMetadata={}),void 0===intervalMillis&&(intervalMillis=1e3),this.throttleMetadata=throttleMetadata,this.intervalMillis=intervalMillis}return RetryData.prototype.getThrottleMetadata=function(appId){return this.throttleMetadata[appId]},RetryData.prototype.setThrottleMetadata=function(appId,metadata){this.throttleMetadata[appId]=metadata},RetryData.prototype.deleteThrottleMetadata=function(appId){delete this.throttleMetadata[appId]},RetryData}());function fetchDynamicConfig(appFields){var _a;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var appId,request,appUrl,response,errorMessage,jsonResponse;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_b){switch(_b.label){case 0:return appId=appFields.appId,request={method:\"GET\",headers:(apiKey=appFields.apiKey,new Headers({Accept:\"application/json\",\"x-goog-api-key\":apiKey}))},appUrl=\"https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig\".replace(\"{app-id}\",appId),[4,fetch(appUrl,request)];case 1:if(200===(response=_b.sent()).status||304===response.status)return[3,6];errorMessage=\"\",_b.label=2;case 2:return _b.trys.push([2,4,,5]),[4,response.json()];case 3:return jsonResponse=_b.sent(),(null===(_a=jsonResponse.error)||void 0===_a?void 0:_a.message)&&(errorMessage=jsonResponse.error.message),[3,5];case 4:return _b.sent(),[3,5];case 5:throw ERROR_FACTORY.create(\"config-fetch-failed\",{httpStatus:response.status,responseMessage:errorMessage});case 6:return[2,response.json()]}var apiKey}))}))}function attemptFetchDynamicConfigWithRetry(appFields,_a,signal,retryData){var throttleEndTimeMillis=_a.throttleEndTimeMillis,backoffCount=_a.backoffCount;return void 0===retryData&&(retryData=defaultRetryData),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var appId,measurementId,e_1,response,e_2,backoffMillis,throttleMetadata;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_b){switch(_b.label){case 0:appId=appFields.appId,measurementId=appFields.measurementId,_b.label=1;case 1:return _b.trys.push([1,3,,4]),[4,setAbortableTimeout(signal,throttleEndTimeMillis)];case 2:return _b.sent(),[3,4];case 3:if(e_1=_b.sent(),measurementId)return logger.warn(\"Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID \"+measurementId+' provided in the \"measurementId\" field in the local Firebase config. ['+e_1.message+\"]\"),[2,{appId:appId,measurementId:measurementId}];throw e_1;case 4:return _b.trys.push([4,6,,7]),[4,fetchDynamicConfig(appFields)];case 5:return response=_b.sent(),retryData.deleteThrottleMetadata(appId),[2,response];case 6:if(!function(e){if(!(e instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_4__.FirebaseError))return!1;var httpStatus=Number(e.httpStatus);return 429===httpStatus||500===httpStatus||503===httpStatus||504===httpStatus}(e_2=_b.sent())){if(retryData.deleteThrottleMetadata(appId),measurementId)return logger.warn(\"Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID \"+measurementId+' provided in the \"measurementId\" field in the local Firebase config. ['+e_2.message+\"]\"),[2,{appId:appId,measurementId:measurementId}];throw e_2}return backoffMillis=503===Number(e_2.httpStatus)?Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.calculateBackoffMillis)(backoffCount,retryData.intervalMillis,30):Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.calculateBackoffMillis)(backoffCount,retryData.intervalMillis),throttleMetadata={throttleEndTimeMillis:Date.now()+backoffMillis,backoffCount:backoffCount+1},retryData.setThrottleMetadata(appId,throttleMetadata),logger.debug(\"Calling attemptFetch again in \"+backoffMillis+\" millis\"),[2,attemptFetchDynamicConfigWithRetry(appFields,throttleMetadata,signal,retryData)];case 7:return[2]}}))}))}function setAbortableTimeout(signal,throttleEndTimeMillis){return new Promise((function(resolve,reject){var backoffMillis=Math.max(throttleEndTimeMillis-Date.now(),0),timeout=setTimeout(resolve,backoffMillis);signal.addEventListener((function(){clearTimeout(timeout),reject(ERROR_FACTORY.create(\"fetch-throttle\",{throttleEndTimeMillis:throttleEndTimeMillis}))}))}))}var gtagCoreFunction,wrappedGtagFunction,AnalyticsAbortSignal=function(){function AnalyticsAbortSignal(){this.listeners=[]}return AnalyticsAbortSignal.prototype.addEventListener=function(listener){this.listeners.push(listener)},AnalyticsAbortSignal.prototype.abort=function(){this.listeners.forEach((function(listener){return listener()}))},AnalyticsAbortSignal}(),initializationPromisesMap={},dynamicConfigPromisesList=[],measurementIdToAppId={},dataLayerName=\"dataLayer\",gtagName=\"gtag\",globalInitDone=!1;function resetGlobalVars(newGlobalInitDone,newInitializationPromisesMap,newDynamicPromises){void 0===newGlobalInitDone&&(newGlobalInitDone=!1),void 0===newInitializationPromisesMap&&(newInitializationPromisesMap={}),void 0===newDynamicPromises&&(newDynamicPromises=[]),globalInitDone=newGlobalInitDone,initializationPromisesMap=newInitializationPromisesMap,dynamicConfigPromisesList=newDynamicPromises,dataLayerName=\"dataLayer\",gtagName=\"gtag\"}function getGlobalVars(){return{initializationPromisesMap:initializationPromisesMap,dynamicConfigPromisesList:dynamicConfigPromisesList}}function settings(options){if(globalInitDone)throw ERROR_FACTORY.create(\"already-initialized\");options.dataLayerName&&(dataLayerName=options.dataLayerName),options.gtagName&&(gtagName=options.gtagName)}function factory(app,installations){!function(){var mismatchedEnvMessages=[];if(Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.isBrowserExtension)()&&mismatchedEnvMessages.push(\"This is a browser extension environment.\"),Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.areCookiesEnabled)()||mismatchedEnvMessages.push(\"Cookies are not available.\"),mismatchedEnvMessages.length>0){var details=mismatchedEnvMessages.map((function(message,index){return\"(\"+(index+1)+\") \"+message})).join(\" \"),err=ERROR_FACTORY.create(\"invalid-analytics-context\",{errorInfo:details});logger.warn(err.message)}}();var appId=app.options.appId;if(!appId)throw ERROR_FACTORY.create(\"no-app-id\");if(!app.options.apiKey){if(!app.options.measurementId)throw ERROR_FACTORY.create(\"no-api-key\");logger.warn('The \"apiKey\" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+app.options.measurementId+' provided in the \"measurementId\" field in the local Firebase config.')}if(null!=initializationPromisesMap[appId])throw ERROR_FACTORY.create(\"already-exists\",{id:appId});if(!globalInitDone){(function(){for(var scriptTags=window.document.getElementsByTagName(\"script\"),_i=0,_a=Object.values(scriptTags);_i<_a.length;_i++){var tag=_a[_i];if(tag.src&&tag.src.includes(GTAG_URL))return tag}return null})()||function(dataLayerName){var script=document.createElement(\"script\");script.src=GTAG_URL+\"?l=\"+dataLayerName,script.async=!0,document.head.appendChild(script)}(dataLayerName),function(dataLayerName){var dataLayer=[];Array.isArray(window[dataLayerName])?dataLayer=window[dataLayerName]:window[dataLayerName]=dataLayer}(dataLayerName);var _a=function(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagFunctionName){var gtagCore=function(){for(var _args=[],_i=0;_i<arguments.length;_i++)_args[_i]=arguments[_i];window[dataLayerName].push(arguments)};return window[gtagFunctionName]&&\"function\"==typeof window[gtagFunctionName]&&(gtagCore=window[gtagFunctionName]),window[gtagFunctionName]=function(gtagCore,initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId){return function(command,idOrNameOrParams,gtagParams){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var e_3;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,6,,7]),command!==GtagCommand.EVENT?[3,2]:[4,gtagOnEvent(gtagCore,initializationPromisesMap,dynamicConfigPromisesList,idOrNameOrParams,gtagParams)];case 1:return _a.sent(),[3,5];case 2:return command!==GtagCommand.CONFIG?[3,4]:[4,gtagOnConfig(gtagCore,initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,idOrNameOrParams,gtagParams)];case 3:return _a.sent(),[3,5];case 4:gtagCore(GtagCommand.SET,idOrNameOrParams),_a.label=5;case 5:return[3,7];case 6:return e_3=_a.sent(),logger.error(e_3),[3,7];case 7:return[2]}}))}))}}(gtagCore,initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId),{gtagCore:gtagCore,wrappedGtag:window[gtagFunctionName]}}(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=_a.wrappedGtag,gtagCoreFunction=_a.gtagCore,globalInitDone=!0}return initializationPromisesMap[appId]=function(app,dynamicConfigPromisesList,measurementIdToAppId,installations,gtagCore){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var dynamicConfigPromise,fidPromise,_a,dynamicConfig,fid,configProperties,_b;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_c){switch(_c.label){case 0:return(dynamicConfigPromise=function(app,retryData,timeoutMillis){return void 0===retryData&&(retryData=defaultRetryData),Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var _a,appId,apiKey,measurementId,throttleMetadata,signal,_this=this;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_b){if(apiKey=(_a=app.options).apiKey,measurementId=_a.measurementId,!(appId=_a.appId))throw ERROR_FACTORY.create(\"no-app-id\");if(!apiKey){if(measurementId)return[2,{measurementId:measurementId,appId:appId}];throw ERROR_FACTORY.create(\"no-api-key\")}return throttleMetadata=retryData.getThrottleMetadata(appId)||{backoffCount:0,throttleEndTimeMillis:Date.now()},signal=new AnalyticsAbortSignal,setTimeout((function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(_this,void 0,void 0,(function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){return signal.abort(),[2]}))}))}),6e4),[2,attemptFetchDynamicConfigWithRetry({appId:appId,apiKey:apiKey,measurementId:measurementId},throttleMetadata,signal,retryData)]}))}))}(app)).then((function(config){measurementIdToAppId[config.measurementId]=config.appId,app.options.measurementId&&config.measurementId!==app.options.measurementId&&logger.warn(\"The measurement ID in the local Firebase config (\"+app.options.measurementId+\") does not match the measurement ID fetched from the server (\"+config.measurementId+\"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.\")})).catch((function(e){return logger.error(e)})),dynamicConfigPromisesList.push(dynamicConfigPromise),fidPromise=function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var e_1;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:return Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.isIndexedDBAvailable)()?[3,1]:(logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\",{errorInfo:\"IndexedDB is not available in this environment.\"}).message),[2,!1]);case 1:return _a.trys.push([1,3,,4]),[4,Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.validateIndexedDBOpenable)()];case 2:return _a.sent(),[3,4];case 3:return e_1=_a.sent(),logger.warn(ERROR_FACTORY.create(\"indexeddb-unavailable\",{errorInfo:e_1}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(envIsValid){return envIsValid?installations.getId():void 0})),[4,Promise.all([dynamicConfigPromise,fidPromise])];case 1:return _a=_c.sent(),dynamicConfig=_a[0],fid=_a[1],gtagCore(\"js\",new Date),(_b={}).origin=\"firebase\",_b.update=!0,configProperties=_b,null!=fid&&(configProperties.firebase_id=fid),gtagCore(GtagCommand.CONFIG,dynamicConfig.measurementId,configProperties),[2,dynamicConfig.measurementId]}}))}))}(app,dynamicConfigPromisesList,measurementIdToAppId,installations,gtagCoreFunction),{app:app,logEvent:function(eventName,eventParams,options){(function(gtagFunction,initializationPromise,eventName,eventParams,options){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var measurementId,params;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:return options&&options.global?(gtagFunction(GtagCommand.EVENT,eventName,eventParams),[2]):[3,1];case 1:return[4,initializationPromise];case 2:measurementId=_a.sent(),params=Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__assign)({},eventParams),{send_to:measurementId}),gtagFunction(GtagCommand.EVENT,eventName,params),_a.label=3;case 3:return[2]}}))}))})(wrappedGtagFunction,initializationPromisesMap[appId],eventName,eventParams,options).catch((function(e){return logger.error(e)}))},setCurrentScreen:function(screenName,options){(function(gtagFunction,initializationPromise,screenName,options){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var measurementId;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:return options&&options.global?(gtagFunction(GtagCommand.SET,{screen_name:screenName}),[2,Promise.resolve()]):[3,1];case 1:return[4,initializationPromise];case 2:measurementId=_a.sent(),gtagFunction(GtagCommand.CONFIG,measurementId,{update:!0,screen_name:screenName}),_a.label=3;case 3:return[2]}}))}))})(wrappedGtagFunction,initializationPromisesMap[appId],screenName,options).catch((function(e){return logger.error(e)}))},setUserId:function(id,options){(function(gtagFunction,initializationPromise,id,options){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var measurementId;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:return options&&options.global?(gtagFunction(GtagCommand.SET,{user_id:id}),[2,Promise.resolve()]):[3,1];case 1:return[4,initializationPromise];case 2:measurementId=_a.sent(),gtagFunction(GtagCommand.CONFIG,measurementId,{update:!0,user_id:id}),_a.label=3;case 3:return[2]}}))}))})(wrappedGtagFunction,initializationPromisesMap[appId],id,options).catch((function(e){return logger.error(e)}))},setUserProperties:function(properties,options){(function(gtagFunction,initializationPromise,properties,options){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var flatProperties,_i,_a,key,measurementId;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_b){switch(_b.label){case 0:if(!options||!options.global)return[3,1];for(flatProperties={},_i=0,_a=Object.keys(properties);_i<_a.length;_i++)flatProperties[\"user_properties.\"+(key=_a[_i])]=properties[key];return gtagFunction(GtagCommand.SET,flatProperties),[2,Promise.resolve()];case 1:return[4,initializationPromise];case 2:measurementId=_b.sent(),gtagFunction(GtagCommand.CONFIG,measurementId,{update:!0,user_properties:properties}),_b.label=3;case 3:return[2]}}))}))})(wrappedGtagFunction,initializationPromisesMap[appId],properties,options).catch((function(e){return logger.error(e)}))},setAnalyticsCollectionEnabled:function(enabled){(function(initializationPromise,enabled){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){var measurementId;return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,initializationPromise];case 1:return measurementId=_a.sent(),window[\"ga-disable-\"+measurementId]=!enabled,[2]}}))}))})(initializationPromisesMap[appId],enabled).catch((function(e){return logger.error(e)}))},INTERNAL:{delete:function(){return delete initializationPromisesMap[appId],Promise.resolve()}}}}function registerAnalytics(instance){instance.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_5__.Component(\"analytics\",(function(container){return factory(container.getProvider(\"app\").getImmediate(),container.getProvider(\"installations\").getImmediate())}),\"PUBLIC\").setServiceProps({settings:settings,EventName:EventName,isSupported:isSupported})),instance.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_5__.Component(\"analytics-internal\",(function(container){try{return{logEvent:container.getProvider(\"analytics\").getImmediate().logEvent}}catch(e){throw ERROR_FACTORY.create(\"interop-component-reg-failed\",{reason:e})}}),\"PRIVATE\")),instance.registerVersion(\"@firebase/analytics\",\"0.6.0\")}function isSupported(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__awaiter)(this,void 0,void 0,(function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_0__.__generator)(this,(function(_a){switch(_a.label){case 0:if(Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.isBrowserExtension)())return[2,!1];if(!Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.areCookiesEnabled)())return[2,!1];if(!Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.isIndexedDBAvailable)())return[2,!1];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,Object(_firebase_util__WEBPACK_IMPORTED_MODULE_4__.validateIndexedDBOpenable)()];case 2:return[2,_a.sent()];case 3:return _a.sent(),[2,!1];case 4:return[2]}}))}))}registerAnalytics(_firebase_app__WEBPACK_IMPORTED_MODULE_1___default.a)},\"6Joi\":function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var t=__webpack_require__(\"mrSG\"),e=__webpack_require__(\"wj3C\"),n=__webpack_require__(\"q/0M\"),r=__webpack_require__(\"zVF4\"),i=__webpack_require__(\"x7I3\"),o=__webpack_require__(\"S+S0\"),u=function(t){return t&&\"object\"==typeof t&&\"default\"in t?t:{default:t}}(e),a={OK:\"ok\",CANCELLED:\"cancelled\",UNKNOWN:\"unknown\",INVALID_ARGUMENT:\"invalid-argument\",DEADLINE_EXCEEDED:\"deadline-exceeded\",NOT_FOUND:\"not-found\",ALREADY_EXISTS:\"already-exists\",PERMISSION_DENIED:\"permission-denied\",UNAUTHENTICATED:\"unauthenticated\",RESOURCE_EXHAUSTED:\"resource-exhausted\",FAILED_PRECONDITION:\"failed-precondition\",ABORTED:\"aborted\",OUT_OF_RANGE:\"out-of-range\",UNIMPLEMENTED:\"unimplemented\",INTERNAL:\"internal\",UNAVAILABLE:\"unavailable\",DATA_LOSS:\"data-loss\"},c=function(e){function n(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name=\"FirebaseError\",r.toString=function(){return r.name+\": [code=\"+r.code+\"]: \"+r.message},r}return t.__extends(n,e),n}(Error),h=new n.Logger(\"@firebase/firestore\");function f(){return h.logLevel}function l(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(h.logLevel<=n.LogLevel.DEBUG){var o=r.map(v);h.debug.apply(h,t.__spreadArrays([\"Firestore (7.24.0): \"+e],o))}}function p(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(h.logLevel<=n.LogLevel.ERROR){var o=r.map(v);h.error.apply(h,t.__spreadArrays([\"Firestore (7.24.0): \"+e],o))}}function d(e){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(h.logLevel<=n.LogLevel.WARN){var o=r.map(v);h.warn.apply(h,t.__spreadArrays([\"Firestore (7.24.0): \"+e],o))}}function v(t){if(\"string\"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function y(t){void 0===t&&(t=\"Unexpected state\");var e=\"FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: \"+t;throw p(e),new Error(e)}function g(t,e){t||y()}function m(t,e){return t}function w(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function b(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var I=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y(),void 0===n?n=t.length-e:n>t.length-e&&y(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,\"length\",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return this.o(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),E=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.o=function(t,e,r){return new n(t,e,r)},n.prototype.R=function(){return this.A().join(\"/\")},n.prototype.toString=function(){return this.R()},n.g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf(\"//\")>=0)throw new c(a.INVALID_ARGUMENT,\"Invalid segment (\"+s+\"). Paths must not contain // in them.\");r.push.apply(r,s.split(\"/\").filter((function(t){return t.length>0})))}return new n(r)},n.P=function(){return new n([])},n}(I),T=/^[_a-zA-Z][_a-zA-Z0-9]*$/,N=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.o=function(t,e,r){return new n(t,e,r)},n.V=function(t){return T.test(t)},n.prototype.R=function(){return this.A().map((function(t){return t=t.replace(\"\\\\\",\"\\\\\\\\\").replace(\"`\",\"\\\\`\"),n.V(t)||(t=\"`\"+t+\"`\"),t})).join(\".\")},n.prototype.toString=function(){return this.R()},n.prototype.p=function(){return 1===this.length&&\"__name__\"===this.get(0)},n.v=function(){return new n([\"__name__\"])},n.S=function(t){for(var e=[],r=\"\",i=0,o=function(){if(0===r.length)throw new c(a.INVALID_ARGUMENT,\"Invalid field path (\"+t+\"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");e.push(r),r=\"\"},s=!1;i<t.length;){var u=t[i];if(\"\\\\\"===u){if(i+1===t.length)throw new c(a.INVALID_ARGUMENT,\"Path has trailing escape character: \"+t);var h=t[i+1];if(\"\\\\\"!==h&&\".\"!==h&&\"`\"!==h)throw new c(a.INVALID_ARGUMENT,\"Path has invalid escape sequence: \"+t);r+=h,i+=2}else\"`\"===u?(s=!s,i++):\".\"!==u||s?(r+=u,i++):(o(),i++)}if(o(),s)throw new c(a.INVALID_ARGUMENT,\"Unterminated ` in path: \"+t);return new n(e)},n.P=function(){return new n([])},n}(I),A=function(){function t(t){this.path=t}return t.D=function(e){return new t(E.g(e))},t.C=function(e){return new t(E.g(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===E.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return E.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new E(e.slice()))},t}();function S(t,e){if(0!==e.length)throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() does not support arguments, but was called with \"+W(e.length,\"argument\")+\".\")}function D(t,e,n){if(e.length!==n)throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires \"+W(n,\"argument\")+\", but was called with \"+W(e.length,\"argument\")+\".\")}function x(t,e,n){if(e.length<n)throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires at least \"+W(n,\"argument\")+\", but was called with \"+W(e.length,\"argument\")+\".\")}function L(t,e,n,r){if(e.length<n||e.length>r)throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires between \"+n+\" and \"+r+\" arguments, but was called with \"+W(e.length,\"argument\")+\".\")}function k(t,e,n,r){C(t,e,B(n)+\" argument\",r)}function R(t,e,n,r){void 0!==r&&k(t,e,n,r)}function O(t,e,n,r){C(t,e,n+\" option\",r)}function P(t,e,n,r){void 0!==r&&O(t,e,n,r)}function V(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,u=i;s<u.length;s++){var h=u[s];if(h===r)return;o.push(M(h))}var f=M(r);throw new c(a.INVALID_ARGUMENT,\"Invalid value \"+f+\" provided to function \"+t+'() for option \"'+n+'\". Acceptable values: '+o.join(\", \"))}(t,0,n,r,i)}function U(t,e,n,r){if(!e.some((function(t){return t===r})))throw new c(a.INVALID_ARGUMENT,\"Invalid value \"+M(r)+\" provided to function \"+t+\"() for its \"+B(n)+\" argument. Acceptable values: \"+e.join(\", \"));return r}function C(t,e,n,r){if(!(\"object\"===e?F(r):\"non-empty string\"===e?\"string\"==typeof r&&\"\"!==r:typeof r===e)){var i=M(r);throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires its \"+n+\" to be of type \"+e+\", but it was: \"+i)}}function F(t){return\"object\"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function M(t){if(void 0===t)return\"undefined\";if(null===t)return\"null\";if(\"string\"==typeof t)return t.length>20&&(t=t.substring(0,20)+\"...\"),JSON.stringify(t);if(\"number\"==typeof t||\"boolean\"==typeof t)return\"\"+t;if(\"object\"==typeof t){if(t instanceof Array)return\"an array\";var e=function(t){if(t.constructor){var e=/function\\s+([^\\s(]+)\\s*\\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?\"a custom \"+e+\" object\":\"an object\"}return\"function\"==typeof t?\"a function\":y()}function q(t,e,n){if(void 0===n)throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires a valid \"+B(e)+\" argument, but it was undefined.\")}function j(t,e,n){_(e,(function(e,r){if(n.indexOf(e)<0)throw new c(a.INVALID_ARGUMENT,\"Unknown option '\"+e+\"' passed to function \"+t+\"(). Available options: \"+n.join(\", \"))}))}function G(t,e,n,r){var i=M(r);return new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires its \"+B(n)+\" argument to be a \"+e+\", but it was: \"+i)}function z(t,e,n){if(n<=0)throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires its \"+B(e)+\" argument to be a positive number, but it was: \"+n+\".\")}function B(t){switch(t){case 1:return\"first\";case 2:return\"second\";case 3:return\"third\";default:return t+\"th\"}}function W(t,e){return t+\" \"+e+(1===t?\"\":\"s\")}function K(t){var e=\"undefined\"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&\"function\"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Q=function(){function t(){}return t.k=function(){for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",e=Math.floor(256/t.length)*t.length,n=\"\";n.length<20;)for(var r=K(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function H(t,e){return t<e?-1:t>e?1:0}function Y(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function $(t){return t+\"\\0\"}var X=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e=\"\",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.M)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return H(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();X.B=new X(\"\");var J=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t(X.fromBase64String(e))}catch(e){throw new c(a.INVALID_ARGUMENT,\"Failed to construct Bytes from Base64 string: \"+e)}},t.fromUint8Array=function(e){return new t(X.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return\"Bytes(base64: \"+this.toBase64()+\")\"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}();function Z(){if(\"undefined\"==typeof Uint8Array)throw new c(a.UNIMPLEMENTED,\"Uint8Arrays are not available in this environment.\")}function tt(){if(\"undefined\"==typeof atob)throw new c(a.UNIMPLEMENTED,\"Blobs are unavailable in Firestore in this environment.\")}var et=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.fromBase64String=function(t){D(\"Blob.fromBase64String\",arguments,1),k(\"Blob.fromBase64String\",\"string\",1,t),tt();try{return new n(X.fromBase64String(t))}catch(t){throw new c(a.INVALID_ARGUMENT,\"Failed to construct Blob from Base64 string: \"+t)}},n.fromUint8Array=function(t){if(D(\"Blob.fromUint8Array\",arguments,1),Z(),!(t instanceof Uint8Array))throw G(\"Blob.fromUint8Array\",\"Uint8Array\",1,t);return new n(X.fromUint8Array(t))},n.prototype.toBase64=function(){return D(\"Blob.toBase64\",arguments,0),tt(),e.prototype.toBase64.call(this)},n.prototype.toUint8Array=function(){return D(\"Blob.toUint8Array\",arguments,0),Z(),e.prototype.toUint8Array.call(this)},n.prototype.toString=function(){return\"Blob(base64: \"+this.toBase64()+\")\"},n}(J),nt=function(t,e,n,r,i,o){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.W=o},rt=function(){function t(t,e){this.projectId=t,this.database=e||\"(default)\"}return Object.defineProperty(t.prototype,\"j\",{get:function(){return\"(default)\"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return H(this.projectId,t.projectId)||H(this.database,t.database)},t}(),it=function(){function t(t,e){this.K=t,this.G=e,this.H={}}return t.prototype.get=function(t){var e=this.K(t),n=this.H[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],u=o[1];if(this.G(o[0],t))return u}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.K(t),r=this.H[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.H[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.K(t),n=this.H[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],t))return 1===n.length?delete this.H[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){_(this.H,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.m=function(){return b(this.H)},t}(),ot=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new c(a.INVALID_ARGUMENT,\"Timestamp nanoseconds out of range: \"+e);if(e>=1e9)throw new c(a.INVALID_ARGUMENT,\"Timestamp nanoseconds out of range: \"+e);if(t<-62135596800)throw new c(a.INVALID_ARGUMENT,\"Timestamp seconds out of range: \"+t);if(t>=253402300800)throw new c(a.INVALID_ARGUMENT,\"Timestamp seconds out of range: \"+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.Y=function(t){return this.seconds===t.seconds?H(this.nanoseconds,t.nanoseconds):H(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return\"Timestamp(seconds=\"+this.seconds+\", nanoseconds=\"+this.nanoseconds+\")\"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,\"0\")+\".\"+String(this.nanoseconds).padStart(9,\"0\")},t}(),st=function(){function t(t){this.timestamp=t}return t.J=function(e){return new t(e)},t.min=function(){return new t(new ot(0,0))},t.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return\"SnapshotVersion(\"+this.timestamp.toString()+\")\"},t.prototype.Z=function(){return this.timestamp},t}();function ut(t){return null==t}function at(t){return 0===t&&1/t==-1/0}function ct(t){return\"number\"==typeof t&&Number.isInteger(t)&&!at(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ht=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function ft(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ht(t,e,n,r,i,o,s)}function lt(t){var e=m(t);if(null===e.tt){var n=e.path.R();null!==e.collectionGroup&&(n+=\"|cg:\"+e.collectionGroup),n+=\"|f:\",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+re(t.value)}(t)})).join(\",\"),n+=\"|ob:\",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(\",\"),ut(e.limit)||(n+=\"|l:\",n+=e.limit),e.startAt&&(n+=\"|lb:\",n+=ar(e.startAt)),e.endAt&&(n+=\"|ub:\",n+=ar(e.endAt)),e.tt=n}return e.tt}function pt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!pr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Zt(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hr(t.startAt,e.startAt)&&hr(t.endAt,e.endAt)}function dt(t){return A.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}var vt,yt,gt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=st.min()),void 0===o&&(o=st.min()),void 0===s&&(s=X.B),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),mt=function(t){this.count=t};function wt(t){switch(t){case a.OK:return y();case a.CANCELLED:case a.UNKNOWN:case a.DEADLINE_EXCEEDED:case a.RESOURCE_EXHAUSTED:case a.INTERNAL:case a.UNAVAILABLE:case a.UNAUTHENTICATED:return!1;case a.INVALID_ARGUMENT:case a.NOT_FOUND:case a.ALREADY_EXISTS:case a.PERMISSION_DENIED:case a.FAILED_PRECONDITION:case a.ABORTED:case a.OUT_OF_RANGE:case a.UNIMPLEMENTED:case a.DATA_LOSS:return!0;default:return y()}}function _t(t){if(void 0===t)return p(\"GRPC error has no .code\"),a.UNKNOWN;switch(t){case vt.OK:return a.OK;case vt.CANCELLED:return a.CANCELLED;case vt.UNKNOWN:return a.UNKNOWN;case vt.DEADLINE_EXCEEDED:return a.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return a.RESOURCE_EXHAUSTED;case vt.INTERNAL:return a.INTERNAL;case vt.UNAVAILABLE:return a.UNAVAILABLE;case vt.UNAUTHENTICATED:return a.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return a.INVALID_ARGUMENT;case vt.NOT_FOUND:return a.NOT_FOUND;case vt.ALREADY_EXISTS:return a.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return a.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return a.FAILED_PRECONDITION;case vt.ABORTED:return a.ABORTED;case vt.OUT_OF_RANGE:return a.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return a.UNIMPLEMENTED;case vt.DATA_LOSS:return a.DATA_LOSS;default:return y()}}(yt=vt||(vt={}))[yt.OK=0]=\"OK\",yt[yt.CANCELLED=1]=\"CANCELLED\",yt[yt.UNKNOWN=2]=\"UNKNOWN\",yt[yt.INVALID_ARGUMENT=3]=\"INVALID_ARGUMENT\",yt[yt.DEADLINE_EXCEEDED=4]=\"DEADLINE_EXCEEDED\",yt[yt.NOT_FOUND=5]=\"NOT_FOUND\",yt[yt.ALREADY_EXISTS=6]=\"ALREADY_EXISTS\",yt[yt.PERMISSION_DENIED=7]=\"PERMISSION_DENIED\",yt[yt.UNAUTHENTICATED=16]=\"UNAUTHENTICATED\",yt[yt.RESOURCE_EXHAUSTED=8]=\"RESOURCE_EXHAUSTED\",yt[yt.FAILED_PRECONDITION=9]=\"FAILED_PRECONDITION\",yt[yt.ABORTED=10]=\"ABORTED\",yt[yt.OUT_OF_RANGE=11]=\"OUT_OF_RANGE\",yt[yt.UNIMPLEMENTED=12]=\"UNIMPLEMENTED\",yt[yt.INTERNAL=13]=\"INTERNAL\",yt[yt.UNAVAILABLE=14]=\"UNAVAILABLE\",yt[yt.DATA_LOSS=15]=\"DATA_LOSS\";var bt=function(){function t(t,e){this.i=t,this.root=e||Et.EMPTY}return t.prototype.ot=function(e,n){return new t(this.i,this.root.ot(e,n,this.i).copy(null,null,Et.at,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,Et.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,\"size\",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+\":\"+n),!1})),\"{\"+t.join(\", \")+\"}\"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new It(this.root,null,this.i,!1)},t.prototype.ft=function(t){return new It(this.root,t,this.i,!1)},t.prototype.dt=function(){return new It(this.root,null,this.i,!0)},t.prototype.wt=function(t){return new It(this.root,t,this.i,!0)},t}(),It=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return e},t.prototype.At=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),Et=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).gt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).gt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.m()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.gt()},t.prototype.yt=function(){return this.color},t.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw y();if(this.right.yt())throw y();var t=this.left.Nt();if(t!==this.right.Nt())throw y();return t+(this.yt()?0:1)},t}();Et.EMPTY=null,Et.RED=!0,Et.at=!1,Et.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,\"key\",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"value\",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"color\",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"left\",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"right\",{get:function(){throw y()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new Et(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var Tt=function(){function t(t){this.i=t,this.data=new bt(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,\"size\",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.Ft=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.$t=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new Nt(this.data._t())},t.prototype.ft=function(t){return new Nt(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.i(i,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),\"SortedSet(\"+t.toString()+\")\"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),Nt=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),At=new bt(A.i);function St(){return At}function Dt(){return St()}var xt=new bt(A.i);function Lt(){return xt}var kt=new bt(A.i),Rt=new Tt(A.i);function Ot(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Rt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Pt=new Tt(H);function Vt(){return Pt}var Ut=function(){function t(t){this.i=t?function(e,n){return t(e,n)||A.i(e.key,n.key)}:function(t,e){return A.i(t.key,e.key)},this.Ot=Lt(),this.Lt=new bt(this.i)}return t.Bt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Ot.get(t)},t.prototype.get=function(t){return this.Ot.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.m=function(){return this.Lt.m()},t.prototype.indexOf=function(t){var e=this.Ot.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,\"size\",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?\"DocumentSet ()\":\"DocumentSet (\\n  \"+t.join(\"  \\n\")+\"\\n)\"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Ot=e,r.Lt=n,r},t}(),Ct=function(){function t(){this.qt=new bt(A.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):y():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),Ft=function(){function t(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.Qt=n,this.docChanges=r,this.Wt=i,this.fromCache=o,this.jt=s,this.Kt=u}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ut.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,\"hasPendingWrites\",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&Qn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Mt=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,qt.Zt(e,n)),new t(st.min(),r,Vt(),St(),Ot())},t}(),qt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(X.B,n,Ot(),Ot(),Ot())},t}(),jt=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Gt=function(t,e){this.targetId=t,this.oe=e},zt=function(t,e,n,r){void 0===n&&(n=X.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Bt=function(){function t(){this.ae=0,this.ce=Qt(),this.ue=X.B,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,\"te\",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"resumeToken\",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"_e\",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"fe\",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.O()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=Ot(),e=Ot(),n=Ot();return this.ce.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:y()}})),new qt(this.ue,this.he,t,e,n)},t.prototype.me=function(){this.le=!1,this.ce=Qt()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.Ie=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),Wt=function(){function t(t){this.ge=t,this.Pe=new Map,this.ye=St(),this.Ve=Kt(),this.pe=new Tt(H)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof kn?this.ve(r,t.re):t.re instanceof Rn&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Se(o[i],t.key,t.re)},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.Fe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.me(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.Fe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.Fe(n)&&(e.xe(n),r.de(t.resumeToken));break;default:y()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Fe(r)&&e(r)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(dt(i))if(0===n){var o=new A(i.path);this.Se(e,o,new Rn(o,st.min()))}else g(1===n);else this.Me(e)!==n&&(this.xe(e),this.pe=this.pe.add(e))}},t.prototype.Oe=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.ke(i);if(o){if(r.te&&dt(o.target)){var s=new A(o.target.path);null!==e.ye.get(s)||e.Le(i,s)||e.Se(i,s,new Rn(s,t))}r.fe&&(n.set(i,r.we()),r.me())}}));var r=Ot();this.Ve.forEach((function(t,n){var i=!0;n.xt((function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Mt(t,n,this.pe,this.ye,r);return this.ye=St(),this.Ve=Kt(),this.pe=new Tt(H),i},t.prototype.ve=function(t,e){if(this.Fe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.Fe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.ge.qe(t).size+e.ee.size-e.se.size},t.prototype.Ie=function(t){this.Ne(t).Ie()},t.prototype.Ne=function(t){var e=this.Pe.get(t);return e||(e=new Bt,this.Pe.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new Tt(H),this.Ve=this.Ve.ot(t,e)),e},t.prototype.Fe=function(t){var e=null!==this.ke(t);return e||l(\"WatchChangeAggregator\",\"Detected inactive target\",t),e},t.prototype.ke=function(t){var e=this.Pe.get(t);return e&&e._e?null:this.ge.Ue(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new Bt),this.ge.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.ge.qe(t).has(e)},t}();function Kt(){return new bt(A.i)}function Qt(){return new bt(A.i)}function Ht(t){var e,n;return\"server_timestamp\"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function $t(t){var e=oe(t.mapValue.fields.__local_write_time__.timestampValue);return new ot(e.seconds,e.nanos)}var Xt=new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);function Jt(t){return\"nullValue\"in t?0:\"booleanValue\"in t?1:\"integerValue\"in t||\"doubleValue\"in t?2:\"timestampValue\"in t?3:\"stringValue\"in t?5:\"bytesValue\"in t?6:\"referenceValue\"in t?7:\"geoPointValue\"in t?8:\"arrayValue\"in t?9:\"mapValue\"in t?Ht(t)?4:10:y()}function Zt(t,e){var n=Jt(t);if(n!==Jt(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $t(t).isEqual($t(e));case 3:return function(t,e){if(\"string\"==typeof t.timestampValue&&\"string\"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=oe(t.timestampValue),r=oe(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return ue(t.bytesValue).isEqual(ue(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return se(t.geoPointValue.latitude)===se(e.geoPointValue.latitude)&&se(t.geoPointValue.longitude)===se(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if(\"integerValue\"in t&&\"integerValue\"in e)return se(t.integerValue)===se(e.integerValue);if(\"doubleValue\"in t&&\"doubleValue\"in e){var n=se(t.doubleValue),r=se(e.doubleValue);return n===r?at(n)===at(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Y(t.arrayValue.values||[],e.arrayValue.values||[],Zt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(w(n)!==w(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zt(n[i],r[i])))return!1;return!0}(t,e);default:return y()}}function te(t,e){return void 0!==(t.values||[]).find((function(t){return Zt(t,e)}))}function ee(t,e){var n=Jt(t),r=Jt(e);if(n!==r)return H(n,r);switch(n){case 0:return 0;case 1:return H(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=se(t.integerValue||t.doubleValue),r=se(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ne(t.timestampValue,e.timestampValue);case 4:return ne($t(t),$t(e));case 5:return H(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ue(t),r=ue(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split(\"/\"),r=e.split(\"/\"),i=0;i<n.length&&i<r.length;i++){var o=H(n[i],r[i]);if(0!==o)return o}return H(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=H(se(t.latitude),se(e.latitude));return 0!==n?n:H(se(t.longitude),se(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ee(n[i],r[i]);if(o)return o}return H(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=H(r[s],o[s]);if(0!==u)return u;var a=ee(n[r[s]],i[o[s]]);if(0!==a)return a}return H(r.length,o.length)}(t.mapValue,e.mapValue);default:throw y()}}function ne(t,e){if(\"string\"==typeof t&&\"string\"==typeof e&&t.length===e.length)return H(t,e);var n=oe(t),r=oe(e),i=H(n.seconds,r.seconds);return 0!==i?i:H(n.nanos,r.nanos)}function re(t){return function ie(t){return\"nullValue\"in t?\"null\":\"booleanValue\"in t?\"\"+t.booleanValue:\"integerValue\"in t?\"\"+t.integerValue:\"doubleValue\"in t?\"\"+t.doubleValue:\"timestampValue\"in t?function(t){var e=oe(t);return\"time(\"+e.seconds+\",\"+e.nanos+\")\"}(t.timestampValue):\"stringValue\"in t?t.stringValue:\"bytesValue\"in t?ue(t.bytesValue).toBase64():\"referenceValue\"in t?A.C(t.referenceValue).toString():\"geoPointValue\"in t?\"geo(\"+(e=t.geoPointValue).latitude+\",\"+e.longitude+\")\":\"arrayValue\"in t?function(t){for(var e=\"[\",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=\",\",e+=ie(i[r]);return e+\"]\"}(t.arrayValue):\"mapValue\"in t?function(t){for(var e=\"{\",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=\",\",e+=o+\":\"+ie(t.fields[o])}return e+\"}\"}(t.mapValue):y();var e}(t)}function oe(t){if(g(!!t),\"string\"==typeof t){var e=0,n=Xt.exec(t);if(g(!!n),n[1]){var r=n[1];r=(r+\"000000000\").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:se(t.seconds),nanos:se(t.nanos)}}function se(t){return\"number\"==typeof t?t:\"string\"==typeof t?Number(t):0}function ue(t){return\"string\"==typeof t?X.fromBase64String(t):X.fromUint8Array(t)}function ae(t,e){return{referenceValue:\"projects/\"+t.projectId+\"/databases/\"+t.database+\"/documents/\"+e.path.R()}}function ce(t){return!!t&&\"integerValue\"in t}function he(t){return!!t&&\"arrayValue\"in t}function fe(t){return!!t&&\"nullValue\"in t}function le(t){return!!t&&\"doubleValue\"in t&&isNaN(Number(t.doubleValue))}function pe(t){return!!t&&\"mapValue\"in t}var de={asc:\"ASCENDING\",desc:\"DESCENDING\"},ve={\"<\":\"LESS_THAN\",\"<=\":\"LESS_THAN_OR_EQUAL\",\">\":\"GREATER_THAN\",\">=\":\"GREATER_THAN_OR_EQUAL\",\"==\":\"EQUAL\",\"!=\":\"NOT_EQUAL\",\"array-contains\":\"ARRAY_CONTAINS\",in:\"IN\",\"not-in\":\"NOT_IN\",\"array-contains-any\":\"ARRAY_CONTAINS_ANY\"},ye=function(t,e){this.U=t,this.Qe=e};function ge(t){return{integerValue:\"\"+t}}function me(t,e){if(t.Qe){if(isNaN(e))return{doubleValue:\"NaN\"};if(e===1/0)return{doubleValue:\"Infinity\"};if(e===-1/0)return{doubleValue:\"-Infinity\"}}return{doubleValue:at(e)?\"-0\":e}}function we(t,e){return ct(e)?ge(e):me(t,e)}function _e(t,e){return t.Qe?new Date(1e3*e.seconds).toISOString().replace(/\\.\\d*/,\"\").replace(\"Z\",\"\")+\".\"+(\"000000000\"+e.nanoseconds).slice(-9)+\"Z\":{seconds:\"\"+e.seconds,nanos:e.nanoseconds}}function be(t,e){return t.Qe?e.toBase64():e.toUint8Array()}function Ie(t,e){return _e(t,e.Z())}function Ee(t){return g(!!t),st.J(function(t){var e=oe(t);return new ot(e.seconds,e.nanos)}(t))}function Te(t,e){return function(t){return new E([\"projects\",t.projectId,\"databases\",t.database])}(t).child(\"documents\").child(e).R()}function Ne(t){var e=E.g(t);return g(He(e)),e}function Ae(t,e){return Te(t.U,e.path)}function Se(t,e){var n=Ne(e);return g(n.get(1)===t.U.projectId),g(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new A(ke(n))}function De(t,e){return Te(t.U,e)}function xe(t){var e=Ne(t);return 4===e.length?E.P():ke(e)}function Le(t){return new E([\"projects\",t.U.projectId,\"databases\",t.U.database]).R()}function ke(t){return g(t.length>4&&\"documents\"===t.get(4)),t.u(5)}function Re(t,e,n){return{name:Ae(t,e),fields:n.proto.mapValue.fields}}function Oe(t,e){var n;if(e instanceof wn)n={update:Re(t,e.key,e.value)};else if(e instanceof Nn)n={delete:Ae(t,e.key)};else if(e instanceof _n)n={update:Re(t,e.key,e.data),updateMask:Qe(e.We)};else if(e instanceof In)n={transform:{document:Ae(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ze)return{fieldPath:e.field.R(),setToServerValue:\"REQUEST_TIME\"};if(n instanceof tn)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof nn)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof on)return{fieldPath:e.field.R(),increment:n.je};throw y()}(0,t)}))}};else{if(!(e instanceof An))return y();n={verify:Ae(t,e.key)}}return e.Ge.Ke||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ie(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y()}(t,e.Ge)),n}function Pe(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?fn.updateTime(Ee(t.updateTime)):void 0!==t.exists?fn.exists(t.exists):fn.ze()}(e.currentDocument):fn.ze();if(e.update){var r=Se(t,e.update.name),i=new Sn({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new an((t.fieldPaths||[]).map((function(t){return N.S(t)})))}(e.updateMask);return new _n(r,i,o,n)}return new wn(r,i,n)}if(e.delete){var s=Se(t,e.delete);return new Nn(s,n)}if(e.transform){var u=Se(t,e.transform.document),a=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;\"setToServerValue\"in e?(g(\"REQUEST_TIME\"===e.setToServerValue),n=new Ze):\"appendMissingElements\"in e?n=new tn(e.appendMissingElements.values||[]):\"removeAllFromArray\"in e?n=new nn(e.removeAllFromArray.values||[]):\"increment\"in e?n=new on(t,e.increment):y();var o=N.S(e.fieldPath);return new cn(o,n)}(t,e)}));return g(!0===n.exists),new In(u,a)}if(e.verify){var c=Se(t,e.verify);return new An(c,n)}return y()}function Ve(t,e){return{documents:[De(t,e.path)]}}function Ue(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=De(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=De(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if(\"==\"===t.op){if(le(t.value))return{unaryFilter:{field:ze(t.field),op:\"IS_NAN\"}};if(fe(t.value))return{unaryFilter:{field:ze(t.field),op:\"IS_NULL\"}}}else if(\"!=\"===t.op){if(le(t.value))return{unaryFilter:{field:ze(t.field),op:\"IS_NOT_NAN\"}};if(fe(t.value))return{unaryFilter:{field:ze(t.field),op:\"IS_NOT_NULL\"}}}return{fieldFilter:{field:ze(t.field),op:Ge(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:\"AND\",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:ze(t.field),direction:je(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Qe||ut(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Me(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Me(e.endAt)),n}function Me(t){return{before:t.before,values:t.position}}function qe(t){return new ur(t.values||[],!!t.before)}function je(t){return de[t]}function Ge(t){return ve[t]}function ze(t){return{fieldPath:t.R()}}function Be(t){return N.S(t.fieldPath)}function We(t){return Jn.create(Be(t.fieldFilter.field),function(t){switch(t){case\"EQUAL\":return\"==\";case\"NOT_EQUAL\":return\"!=\";case\"GREATER_THAN\":return\">\";case\"GREATER_THAN_OR_EQUAL\":return\">=\";case\"LESS_THAN\":return\"<\";case\"LESS_THAN_OR_EQUAL\":return\"<=\";case\"ARRAY_CONTAINS\":return\"array-contains\";case\"IN\":return\"in\";case\"NOT_IN\":return\"not-in\";case\"ARRAY_CONTAINS_ANY\":return\"array-contains-any\";case\"OPERATOR_UNSPECIFIED\":default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ke(t){switch(t.unaryFilter.op){case\"IS_NAN\":var e=Be(t.unaryFilter.field);return Jn.create(e,\"==\",{doubleValue:NaN});case\"IS_NULL\":var n=Be(t.unaryFilter.field);return Jn.create(n,\"==\",{nullValue:\"NULL_VALUE\"});case\"IS_NOT_NAN\":var r=Be(t.unaryFilter.field);return Jn.create(r,\"!=\",{doubleValue:NaN});case\"IS_NOT_NULL\":var i=Be(t.unaryFilter.field);return Jn.create(i,\"!=\",{nullValue:\"NULL_VALUE\"});case\"OPERATOR_UNSPECIFIED\":default:return y()}}function Qe(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function He(t){return t.length>=4&&\"projects\"===t.get(0)&&\"databases\"===t.get(2)}var Ye=function(){this.He=void 0};function $e(t,e,n){return t instanceof Ze?function(t,e){var n={fields:{__type__:{stringValue:\"server_timestamp\"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof tn?en(t,e):t instanceof nn?rn(t,e):function(t,e){var n=Je(t,e),r=sn(n)+sn(t.je);return ce(n)&&ce(t.je)?ge(r):me(t.serializer,r)}(t,e)}function Xe(t,e,n){return t instanceof tn?en(t,e):t instanceof nn?rn(t,e):n}function Je(t,e){return t instanceof on?ce(n=e)||function(t){return!!t&&\"doubleValue\"in t}(n)?e:{integerValue:0}:null;var n}var Ze=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n}(Ye),tn=function(e){function n(t){var n=this;return(n=e.call(this)||this).elements=t,n}return t.__extends(n,e),n}(Ye);function en(t,e){for(var n=un(e),r=function(t){n.some((function(e){return Zt(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nn=function(e){function n(t){var n=this;return(n=e.call(this)||this).elements=t,n}return t.__extends(n,e),n}(Ye);function rn(t,e){for(var n=un(e),r=function(t){n=n.filter((function(e){return!Zt(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var on=function(e){function n(t,n){var r=this;return(r=e.call(this)||this).serializer=t,r.je=n,r}return t.__extends(n,e),n}(Ye);function sn(t){return se(t.integerValue||t.doubleValue)}function un(t){return he(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var an=function(){function t(t){this.fields=t,t.sort(N.i)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return Y(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),cn=function(t,e){this.field=t,this.transform=e},hn=function(t,e){this.version=t,this.transformResults=e},fn=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,\"Ke\",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ln(t,e){return void 0!==t.updateTime?e instanceof kn&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof kn}var pn=function(){};function dn(t,e,n){return t instanceof wn?function(t,e,n){return new kn(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof _n?function(t,e,n){if(!ln(t.Ge,e))return new On(t.key,n.version);var r=bn(t,e);return new kn(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof In?function(t,e,n){if(g(null!=n.transformResults),!ln(t.Ge,e))return new On(t.key,n.version);var r=En(0,e),i=function(t,e,n){var r=[];g(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof kn&&(u=e.field(o.field)),r.push(Xe(s,u,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Tn(t,r.data(),i);return new kn(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Rn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function vn(t,e,n,r){return t instanceof wn?function(t,e){if(!ln(t.Ge,e))return e;var n=mn(e);return new kn(t.key,n,t.value,{Je:!0})}(t,e):t instanceof _n?function(t,e){if(!ln(t.Ge,e))return e;var n=mn(e),r=bn(t,e);return new kn(t.key,n,r,{Je:!0})}(t,e):t instanceof In?function(t,e,n,r){if(!ln(t.Ge,e))return e;var i=En(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var u=s[o],a=u.transform,c=null;n instanceof kn&&(c=n.field(u.field)),null===c&&r instanceof kn&&(c=r.field(u.field)),i.push($e(a,c,e))}return i}(t.fieldTransforms,n,e,r),s=Tn(t,i.data(),o);return new kn(t.key,i.version,s,{Je:!0})}(t,e,r,n):function(t,e){return ln(t.Ge,e)?new Rn(t.key,st.min()):e}(t,e)}function yn(t,e){return t instanceof In?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof kn?e.field(o.field):void 0,u=Je(o.transform,s||null);null!=u&&(n=null==n?(new Dn).set(o.field,u):n.set(o.field,u))}return n?n.Xe():null}(t,e):null}function gn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.We.isEqual(e.We):2!==t.type||Y(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof tn&&e instanceof tn||t instanceof nn&&e instanceof nn?Y(t.elements,e.elements,Zt):t instanceof on&&e instanceof on?Zt(t.je,e.je):t instanceof Ze&&e instanceof Ze}(t.transform,e.transform)}(t,e)})))}function mn(t){return t instanceof kn?t.version:st.min()}var wn=function(e){function n(t,n,r){var i=this;return(i=e.call(this)||this).key=t,i.value=n,i.Ge=r,i.type=0,i}return t.__extends(n,e),n}(pn),_n=function(e){function n(t,n,r,i){var o=this;return(o=e.call(this)||this).key=t,o.data=n,o.We=r,o.Ge=i,o.type=1,o}return t.__extends(n,e),n}(pn);function bn(t,e){return function(t,e){var n=new Dn(e);return t.We.fields.forEach((function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof kn?e.data():Sn.empty())}var In=function(e){function n(t,n){var r=this;return(r=e.call(this)||this).key=t,r.fieldTransforms=n,r.type=2,r.Ge=fn.exists(!0),r}return t.__extends(n,e),n}(pn);function En(t,e){return e}function Tn(t,e,n){for(var r=new Dn(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.Xe()}var Nn=function(e){function n(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Ge=n,r.type=3,r}return t.__extends(n,e),n}(pn),An=function(e){function n(t,n){var r=this;return(r=e.call(this)||this).key=t,r.Ge=n,r.type=4,r}return t.__extends(n,e),n}(pn),Sn=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!pe(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return Zt(this.proto,t.proto)},t}(),Dn=function(){function t(t){void 0===t&&(t=Sn.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Jt(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t._(),e)},t.prototype.Xe=function(){var t=this.nn(N.P(),this.tn);return null!=t?new Sn(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=pe(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.nn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function xn(t){var e=[];return _(t.fields||{},(function(t,n){var r=new N([t]);if(pe(n)){var i=xn(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new an(e)}var Ln=function(t,e){this.key=t,this.version=e},kn=function(e){function n(t,n,r,i){var o=this;return(o=e.call(this,t,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return t.__extends(n,e),n.prototype.field=function(t){return this.sn.field(t)},n.prototype.data=function(){return this.sn},n.prototype.rn=function(){return this.sn.proto},n.prototype.isEqual=function(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},n.prototype.toString=function(){return\"Document(\"+this.key+\", \"+this.version+\", \"+this.sn.toString()+\", {hasLocalMutations: \"+this.Je+\"}), {hasCommittedMutations: \"+this.hasCommittedMutations+\"})\"},Object.defineProperty(n.prototype,\"hasPendingWrites\",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n}(Ln),Rn=function(e){function n(t,n,r){var i=this;return(i=e.call(this,t,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return t.__extends(n,e),n.prototype.toString=function(){return\"NoDocument(\"+this.key+\", \"+this.version+\")\"},Object.defineProperty(n.prototype,\"hasPendingWrites\",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(Ln),On=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.toString=function(){return\"UnknownDocument(\"+this.key+\", \"+this.version+\")\"},Object.defineProperty(n.prototype,\"hasPendingWrites\",{get:function(){return!0},enumerable:!1,configurable:!0}),n.prototype.isEqual=function(t){return t instanceof n&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},n}(Ln),Pn=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=\"F\"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=u,this.cn=null,this.un=null};function Vn(t,e,n,r,i,o,s,u){return new Pn(t,e,n,r,i,o,s,u)}function Un(t){return new Pn(t)}function Cn(t){return!ut(t.limit)&&\"F\"===t.an}function Fn(t){return!ut(t.limit)&&\"L\"===t.an}function Mn(t){return t.on.length>0?t.on[0].field:null}function qn(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function jn(t){return null!==t.collectionGroup}function Gn(t){var e=m(t);if(null===e.cn){e.cn=[];var n=qn(e),r=Mn(e);if(null!==n&&null===r)n.p()||e.cn.push(new fr(n)),e.cn.push(new fr(N.v(),\"asc\"));else{for(var i=!1,o=0,s=e.on;o<s.length;o++){var u=s[o];e.cn.push(u),u.field.p()&&(i=!0)}if(!i){var a=e.on.length>0?e.on[e.on.length-1].dir:\"asc\";e.cn.push(new fr(N.v(),a))}}}return e.cn}function zn(t){var e=m(t);if(!e.un)if(\"F\"===e.an)e.un=ft(e.path,e.collectionGroup,Gn(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Gn(e);r<i.length;r++){var o=i[r];n.push(new fr(o.field,\"desc\"===o.dir?\"asc\":\"desc\"))}var u=e.endAt?new ur(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ur(e.startAt.position,!e.startAt.before):null;e.un=ft(e.path,e.collectionGroup,n,e.filters,e.limit,u,a)}return e.un}function Bn(t,e,n){return new Pn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wn(t,e){return new Pn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Kn(t,e){return new Pn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Qn(t,e){return pt(zn(t),zn(e))&&t.an===e.an}function Hn(t){return lt(zn(t))+\"|lt:\"+t.an}function Yn(t){return\"Query(target=\"+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=\" collectionGroup=\"+t.collectionGroup),t.filters.length>0&&(e+=\", filters: [\"+t.filters.map((function(t){return(e=t).field.R()+\" \"+e.op+\" \"+re(e.value);var e})).join(\", \")+\"]\"),ut(t.limit)||(e+=\", limit: \"+t.limit),t.orderBy.length>0&&(e+=\", orderBy: [\"+t.orderBy.map((function(t){return(e=t).field.R()+\" (\"+e.dir+\")\";var e})).join(\", \")+\"]\"),t.startAt&&(e+=\", startAt: \"+ar(t.startAt)),t.endAt&&(e+=\", endAt: \"+ar(t.endAt)),\"Target(\"+e+\")\"}(zn(t))+\"; limitType=\"+t.an+\")\"}function $n(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):A.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!cr(t.startAt,Gn(t),e)||t.endAt&&cr(t.endAt,Gn(t),e))}(t,e)}function Xn(t){return function(e,n){for(var r=!1,i=0,o=Gn(t);i<o.length;i++){var s=o[i],u=lr(s,e,n);if(0!==u)return u;r=r||s.field.p()}return 0}}var Jn=function(e){function n(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return t.__extends(n,e),n.create=function(t,e,r){if(t.p())return\"in\"===e||\"not-in\"===e?this.ln(t,e,r):new Zn(t,e,r);if(fe(r)){if(\"==\"!==e&&\"!=\"!==e)throw new c(a.INVALID_ARGUMENT,\"Invalid query. Null only supports '==' and '!=' comparisons.\");return new n(t,e,r)}if(le(r)){if(\"==\"!==e&&\"!=\"!==e)throw new c(a.INVALID_ARGUMENT,\"Invalid query. NaN only supports '==' and '!=' comparisons.\");return new n(t,e,r)}return\"array-contains\"===e?new rr(t,r):\"in\"===e?new ir(t,r):\"not-in\"===e?new or(t,r):\"array-contains-any\"===e?new sr(t,r):new n(t,e,r)},n.ln=function(t,e,n){return\"in\"===e?new tr(t,n):new er(t,n)},n.prototype.matches=function(t){var e=t.field(this.field);return\"!=\"===this.op?null!==e&&this._n(ee(e,this.value)):null!==e&&Jt(this.value)===Jt(e)&&this._n(ee(e,this.value))},n.prototype._n=function(t){switch(this.op){case\"<\":return t<0;case\"<=\":return t<=0;case\"==\":return 0===t;case\"!=\":return 0!==t;case\">\":return t>0;case\">=\":return t>=0;default:return y()}},n.prototype.hn=function(){return[\"<\",\"<=\",\">\",\">=\",\"!=\",\"not-in\"].indexOf(this.op)>=0},n}((function(){})),Zn=function(e){function n(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=A.C(r.referenceValue),i}return t.__extends(n,e),n.prototype.matches=function(t){var e=A.i(t.key,this.key);return this._n(e)},n}(Jn),tr=function(e){function n(t,n){var r=this;return(r=e.call(this,t,\"in\",n)||this).keys=nr(0,n),r}return t.__extends(n,e),n.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},n}(Jn),er=function(e){function n(t,n){var r=this;return(r=e.call(this,t,\"not-in\",n)||this).keys=nr(0,n),r}return t.__extends(n,e),n.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},n}(Jn);function nr(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return A.C(t.referenceValue)}))}var rr=function(e){function n(t,n){return e.call(this,t,\"array-contains\",n)||this}return t.__extends(n,e),n.prototype.matches=function(t){var e=t.field(this.field);return he(e)&&te(e.arrayValue,this.value)},n}(Jn),ir=function(e){function n(t,n){return e.call(this,t,\"in\",n)||this}return t.__extends(n,e),n.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&te(this.value.arrayValue,e)},n}(Jn),or=function(e){function n(t,n){return e.call(this,t,\"not-in\",n)||this}return t.__extends(n,e),n.prototype.matches=function(t){if(te(this.value.arrayValue,{nullValue:\"NULL_VALUE\"}))return!1;var e=t.field(this.field);return null!==e&&!te(this.value.arrayValue,e)},n}(Jn),sr=function(e){function n(t,n){return e.call(this,t,\"array-contains-any\",n)||this}return t.__extends(n,e),n.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!he(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return te(e.value.arrayValue,t)}))},n}(Jn),ur=function(t,e){this.position=t,this.before=e};function ar(t){return(t.before?\"b\":\"a\")+\":\"+t.position.map((function(t){return re(t)})).join(\",\")}function cr(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.p()?A.i(A.C(s.referenceValue),n.key):ee(s,n.field(o.field)),\"desc\"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function hr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Zt(t.position[n],e.position[n]))return!1;return!0}var fr=function(t,e){void 0===e&&(e=\"asc\"),this.field=t,this.dir=e};function lr(t,e,n){var r=t.field.p()?A.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?ee(r,i):y()}(t.field,e,n);switch(t.dir){case\"asc\":return r;case\"desc\":return-1*r;default:return y()}}function pr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var dr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},vr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.mn=r,this.Tn=i,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.En=0},t.prototype.Rn=function(){this.En=this.Tn},t.prototype.gn=function(t){var e=this;this.cancel();var n=Math.floor(this.En+this.Pn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&l(\"ExponentialBackoff\",\"Backing off for \"+i+\" ms (base delay: \"+this.En+\" ms, delay with jitter: \"+n+\" ms, last attempt: \"+r+\" ms ago)\"),this.In=this.fn.yn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},t.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},t.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.En},t}(),yr=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&y(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.Fn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.xn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.xn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.xn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),gr=function(){function e(t,n,i){this.name=t,this.version=n,this.Mn=i,12.2===e.On(r.getUA())&&p(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\")}return e.delete=function(t){return l(\"SimpleDb\",\"Removing database:\",t),Er(window.indexedDB.deleteDatabase(t)).Fn()},e.Ln=function(){if(\"undefined\"==typeof indexedDB)return!1;if(e.Bn())return!0;var t=r.getUA(),n=e.On(t),i=0<n&&n<10,o=e.qn(t),s=0<o&&o<4.5;return!(t.indexOf(\"MSIE \")>0||t.indexOf(\"Trident/\")>0||t.indexOf(\"Edge/\")>0||i||s)},e.Bn=function(){var t;return\"undefined\"!=typeof process&&\"YES\"===(null===(t=process.env)||void 0===t?void 0:t.Un)},e.Qn=function(t,e){return t.store(e)},e.On=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\\d_]+)/i),n=e?e[1].split(\"_\").slice(0,2).join(\".\"):\"-1\";return Number(n)},e.qn=function(t){var e=t.match(/Android ([\\d.]+)/i),n=e?e[1].split(\".\").slice(0,2).join(\".\"):\"-1\";return Number(n)},e.prototype.Wn=function(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r=this;return t.__generator(this,(function(t){switch(t.label){case 0:return this.db?[3,2]:(l(\"SimpleDb\",\"Opening database:\",this.name),n=this,[4,new Promise((function(t,n){var i=indexedDB.open(r.name,r.version);i.onsuccess=function(e){t(e.target.result)},i.onblocked=function(){n(new wr(e,\"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"))},i.onerror=function(t){var r=t.target.error;n(\"VersionError\"===r.name?new c(a.FAILED_PRECONDITION,\"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\"):new wr(e,r))},i.onupgradeneeded=function(t){l(\"SimpleDb\",'Database \"'+r.name+'\" requires upgrade from version:',t.oldVersion),r.Mn.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,r.version).next((function(){l(\"SimpleDb\",\"Database upgrade to version \"+r.version+\" complete\")}))}}))]);case 1:n.db=t.sent(),t.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(t){return r.jn(t)}),this.db)]}}))}))},e.prototype.Kn=function(t){this.jn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(e,n,r,i){return t.__awaiter(this,void 0,void 0,(function(){var o,s,u,a,c;return t.__generator(this,(function(h){switch(h.label){case 0:o=\"readonly\"===n,s=0,u=function(){var n,u,c,h,f;return t.__generator(this,(function(t){switch(t.label){case 0:++s,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,a.Wn(e)];case 2:return a.db=t.sent(),n=br.open(a.db,e,o?\"readonly\":\"readwrite\",r),u=i(n).catch((function(t){return n.abort(t),yr.reject(t)})).Fn(),c={},u.catch((function(){})),[4,n.Gn];case 3:return[2,(c.value=(t.sent(),u),c)];case 4:return l(\"SimpleDb\",\"Transaction failed with error:\",(h=t.sent()).message,\"Retrying:\",f=\"FirebaseError\"!==h.name&&s<3),a.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},a=this,h.label=1;case 1:return[5,u()];case 2:if(\"object\"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),mr=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,\"Sn\",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"Jn\",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"cursor\",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return Er(this.zn.delete())},t}(),wr=function(e){function n(t,n){var r=this;return(r=e.call(this,a.UNAVAILABLE,\"IndexedDB transaction '\"+t+\"' failed: \"+n)||this).name=\"IndexedDbTransactionError\",r}return t.__extends(n,e),n}(c);function _r(t){return\"IndexedDbTransactionError\"===t.name}var br=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new dr,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new wr(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=Nr(e.target.error);n.Zn.reject(new wr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new wr(n,e)}},Object.defineProperty(t.prototype,\"Gn\",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(l(\"SimpleDb\",\"Aborting transaction:\",t?t.message:\"Client-initiated abort\"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ir(e)},t}(),Ir=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(l(\"SimpleDb\",\"PUT\",this.store.name,t,e),n=this.store.put(e,t)):(l(\"SimpleDb\",\"PUT\",this.store.name,\"<auto-key>\",t),n=this.store.put(t)),Er(n)},t.prototype.add=function(t){return l(\"SimpleDb\",\"ADD\",this.store.name,t,t),Er(this.store.add(t))},t.prototype.get=function(t){var e=this;return Er(this.store.get(t)).next((function(n){return void 0===n&&(n=null),l(\"SimpleDb\",\"GET\",e.store.name,t,n),n}))},t.prototype.delete=function(t){return l(\"SimpleDb\",\"DELETE\",this.store.name,t),Er(this.store.delete(t))},t.prototype.count=function(){return l(\"SimpleDb\",\"COUNT\",this.store.name),Er(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){l(\"SimpleDb\",\"DELETE ALL\",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new yr((function(n,r){e.onerror=function(t){var e=Nr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new yr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new mr(i),s=e(i.primaryKey,i.value,o);if(s instanceof yr){var u=s.catch((function(t){return o.done(),yr.reject(t)}));n.push(u)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}})).next((function(){return yr.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&(\"string\"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e=\"next\";if(t.reverse&&(e=\"prev\"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Er(t){return new yr((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Nr(t.target.error);n(e)}}))}var Tr=!1;function Nr(t){var e=gr.On(r.getUA());if(e>=12.2&&e<13){var n=\"An internal error was encountered in the Indexed Database server\";if(t.message.indexOf(n)>=0){var i=new c(\"internal\",\"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\"+n+\"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");return Tr||(Tr=!0,setTimeout((function(){throw i}),0)),i}}return t}function Ar(){return\"undefined\"!=typeof window?window:null}function Sr(){return\"undefined\"!=typeof document?document:null}var Dr=function(){function t(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new dr,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new c(a.CANCELLED,\"Operation cancelled\"+(t?\": \"+t:\"\"))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),xr=function(){function e(){var t=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new vr(this,\"async_queue_retry\"),this.Vs=function(){var e=Sr();e&&l(\"AsyncQueue\",\"Visibility state changed to  \",e.visibilityState),t.ys.Vn()};var e=Sr();e&&\"function\"==typeof e.addEventListener&&e.addEventListener(\"visibilitychange\",this.Vs)}return Object.defineProperty(e.prototype,\"ps\",{get:function(){return this.Is},enumerable:!1,configurable:!0}),e.prototype.ws=function(t){this.enqueue(t)},e.prototype.bs=function(t){this.vs(),this.Ss(t)},e.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=Sr();t&&\"function\"==typeof t.removeEventListener&&t.removeEventListener(\"visibilitychange\",this.Vs)}},e.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},e.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Es.push(t),e.Ns()}))},e.prototype.Ns=function(){return t.__awaiter(this,void 0,void 0,(function(){var e,n=this;return t.__generator(this,(function(t){switch(t.label){case 0:if(0===this.Es.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return t.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!_r(e=t.sent()))throw e;return l(\"AsyncQueue\",\"Operation failed with retryable error: \"+e),[3,4];case 4:this.Es.length>0&&this.ys.gn((function(){return n.Ns()})),t.label=5;case 5:return[2]}}))}))},e.prototype.Ss=function(t){var e=this,n=this.Ts.then((function(){return e.gs=!0,t().catch((function(t){throw e.Rs=t,e.gs=!1,p(\"INTERNAL UNHANDLED ERROR: \",function(t){var e=t.message||\"\";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+\"\\n\"+t.stack),e}(t)),t})).then((function(t){return e.gs=!1,t}))}));return this.Ts=n,n},e.prototype.yn=function(t,e,n){var r=this;this.vs(),this.Ps.indexOf(t)>-1&&(e=0);var i=Dr._s(this,t,e,n,(function(t){return r.Fs(t)}));return this.As.push(i),i},e.prototype.vs=function(){this.Rs&&y()},e.prototype.xs=function(){},e.prototype.$s=function(){return t.__awaiter(this,void 0,void 0,(function(){var e;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,e=this.Ts];case 1:t.sent(),t.label=2;case 2:if(e!==this.Ts)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},e.prototype.Ms=function(t){var e=this;return this.$s().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),\"all\"!==t&&i.dn===t)break}return e.$s()}))},e.prototype.Os=function(t){this.Ps.push(t)},e.prototype.Fs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},e}();function Lr(t,e){if(p(\"AsyncQueue\",e+\": \"+t),_r(t))return new c(a.UNAVAILABLE,e+\": \"+t);throw t}var kr=function(){this.Ls=void 0,this.listeners=[]},Rr=function(){this.Bs=new it((function(t){return Hn(t)}),Qn),this.onlineState=\"Unknown\",this.qs=new Set};function Or(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,a,c;return t.__generator(this,(function(t){switch(t.label){case 0:if(r=m(e),o=!1,(s=r.Bs.get(i=n.query))||(o=!0,s=new kr),!o)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),u=s,[4,r.Us(i)];case 2:return u.Ls=t.sent(),[3,4];case 3:return a=t.sent(),c=Lr(a,\"Initialization of query '\"+Yn(n.query)+\"' failed\"),[2,void n.onError(c)];case 4:return r.Bs.set(i,s),s.listeners.push(n),n.Qs(r.onlineState),s.Ls&&n.Ws(s.Ls)&&Cr(r),[2]}}))}))}function Pr(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u;return t.__generator(this,(function(t){return r=m(e),o=!1,(s=r.Bs.get(i=n.query))&&(u=s.listeners.indexOf(n))>=0&&(s.listeners.splice(u,1),o=0===s.listeners.length),o?[2,(r.Bs.delete(i),r.js(i))]:[2]}))}))}function Vr(t,e){for(var n=m(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.Bs.get(s.query);if(a){for(var c=0,h=a.listeners;c<h.length;c++)h[c].Ws(s)&&(r=!0);a.Ls=s}}r&&Cr(n)}function Ur(t,e,n){var r=m(t),i=r.Bs.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.Bs.delete(e)}function Cr(t){t.qs.forEach((function(t){t.next()}))}var Fr=function(){function t(t,e,n){this.query=t,this.Ks=e,this.Gs=!1,this.zs=null,this.onlineState=\"Unknown\",this.options=n||{}}return t.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ft(t.query,t.docs,t.Qt,e,t.Wt,t.fromCache,t.jt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.Ks.error(t)},t.prototype.Qs=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){return!t.fromCache||!(this.options.Xs&&\"Offline\"!==e||t.docs.m()&&\"Offline\"!==e)},t.prototype.Hs=function(t){return t.docChanges.length>0||!!(t.jt||this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=Ft.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},t}(),Mr=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?\"uid:\"+this.uid:\"anonymous-user\"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Mr.UNAUTHENTICATED=new Mr(null),Mr.ei=new Mr(\"google-credentials-uid\"),Mr.ni=new Mr(\"first-party-uid\");var qr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function jr(t,e){return\"firestore_clients_\"+t+\"_\"+e}function Gr(t,e,n){var r=\"firestore_mutations_\"+t+\"_\"+n;return e.Zs()&&(r+=\"_\"+e.uid),r}function zr(t,e){return\"firestore_targets_\"+t+\"_\"+e}qr.ai=-1;var Br=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ci=function(e,n,r){var i=JSON.parse(r),o=\"object\"==typeof i&&-1!==[\"pending\",\"acknowledged\",\"rejected\"].indexOf(i.state)&&(void 0===i.error||\"object\"==typeof i.error),s=void 0;return o&&i.error&&(o=\"string\"==typeof i.error.message&&\"string\"==typeof i.error.code)&&(s=new c(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(p(\"SharedClientState\",\"Failed to parse mutation state for ID '\"+n+\"': \"+r),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Wr=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ci=function(e,n){var r=JSON.parse(n),i=\"object\"==typeof r&&-1!==[\"not-current\",\"current\",\"rejected\"].indexOf(r.state)&&(void 0===r.error||\"object\"==typeof r.error),o=void 0;return i&&r.error&&(i=\"string\"==typeof r.error.message&&\"string\"==typeof r.error.code)&&(o=new c(r.error.code,r.error.message)),i?new t(e,r.state,o):(p(\"SharedClientState\",\"Failed to parse target state for ID '\"+e+\"': \"+n),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Kr=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ci=function(e,n){for(var r=JSON.parse(n),i=\"object\"==typeof r&&r.activeTargetIds instanceof Array,o=Vt(),s=0;i&&s<r.activeTargetIds.length;++s)i=ct(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(p(\"SharedClientState\",\"Failed to parse client data for instance '\"+e+\"': \"+n),null)},t}(),Qr=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ci=function(e){var n=JSON.parse(e);return\"object\"==typeof n&&-1!==[\"Unknown\",\"Online\",\"Offline\"].indexOf(n.onlineState)&&\"string\"==typeof n.clientId?new t(n.clientId,n.onlineState):(p(\"SharedClientState\",\"Failed to parse online state: \"+e),null)},t}(),Hr=function(){function t(){this.activeTargetIds=Vt()}return t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Yr=function(){function e(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new bt(H),this.Ei=!1,this.Ii=[];var o=n.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=jr(this.persistenceKey,this._i),this.Ri=function(t){return\"firestore_sequence_number_\"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new Hr),this.gi=new RegExp(\"^firestore_clients_\"+o+\"_([^_]*)$\"),this.Pi=new RegExp(\"^firestore_mutations_\"+o+\"_(\\\\d+)(?:_(.*))?$\"),this.yi=new RegExp(\"^firestore_targets_\"+o+\"_(\\\\d+)$\"),this.Vi=function(t){return\"firestore_online_state_\"+t}(this.persistenceKey),this.window.addEventListener(\"storage\",this.wi)}return e.Ln=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return t.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,s,u,a,c,h,l=this;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,this.fi.pi()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this._i&&(o=this.getItem(jr(this.persistenceKey,i)))&&(s=Kr.ci(i,o))&&(this.Ti=this.Ti.ot(s.clientId,s));for(this.bi(),(u=this.storage.getItem(this.Vi))&&(a=this.vi(u))&&this.Si(a),c=0,h=this.Ii;c<h.length;c++)this.mi(h[c]);return this.Ii=[],this.window.addEventListener(\"unload\",(function(){return l.Di()})),this.Ei=!0,[2]}}))}))},e.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},e.prototype.Ci=function(){return this.Ni(this.Ti)},e.prototype.Fi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},e.prototype.xi=function(t){this.$i(t,\"pending\")},e.prototype.ki=function(t,e,n){this.$i(t,e,n),this.Mi(t)},e.prototype.Oi=function(t){var e=\"not-current\";if(this.Fi(t)){var n=this.storage.getItem(zr(this.persistenceKey,t));if(n){var r=Wr.ci(t,n);r&&(e=r.state)}}return this.Li.hi(t),this.bi(),e},e.prototype.Bi=function(t){this.Li.li(t),this.bi()},e.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},e.prototype.Ui=function(t){this.removeItem(zr(this.persistenceKey,t))},e.prototype.Qi=function(t,e,n){this.Wi(t,e,n)},e.prototype.ji=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.xi(t)}))},e.prototype.Ki=function(t){this.Gi(t)},e.prototype.Di=function(){this.Ei&&(this.window.removeEventListener(\"storage\",this.wi),this.removeItem(this.Ai),this.Ei=!1)},e.prototype.getItem=function(t){var e=this.storage.getItem(t);return l(\"SharedClientState\",\"READ\",t,e),e},e.prototype.setItem=function(t,e){l(\"SharedClientState\",\"SET\",t,e),this.storage.setItem(t,e)},e.prototype.removeItem=function(t){l(\"SharedClientState\",\"REMOVE\",t),this.storage.removeItem(t)},e.prototype.mi=function(e){var n=this,r=e;if(r.storageArea===this.storage){if(l(\"SharedClientState\",\"EVENT\",r.key,r.newValue),r.key===this.Ai)return void p(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\");this.fn.Cs((function(){return t.__awaiter(n,void 0,void 0,(function(){var e,n,i,o,s,u;return t.__generator(this,(function(t){if(this.Ei){if(null!==r.key)if(this.gi.test(r.key)){if(null==r.newValue)return e=this.zi(r.key),[2,this.Hi(e,null)];if(n=this.Yi(r.key,r.newValue))return[2,this.Hi(n.clientId,n)]}else if(this.Pi.test(r.key)){if(null!==r.newValue&&(i=this.Ji(r.key,r.newValue)))return[2,this.Xi(i)]}else if(this.yi.test(r.key)){if(null!==r.newValue&&(o=this.Zi(r.key,r.newValue)))return[2,this.tr(o)]}else if(r.key===this.Vi){if(null!==r.newValue&&(s=this.vi(r.newValue)))return[2,this.Si(s)]}else r.key===this.Ri&&(u=function(t){var e=qr.ai;if(null!=t)try{var n=JSON.parse(t);g(\"number\"==typeof n),e=n}catch(t){p(\"SharedClientState\",\"Failed to read sequence number from WebStorage\",t)}return e}(r.newValue))!==qr.ai&&this.si(u)}else this.Ii.push(r);return[2]}))}))}))}},Object.defineProperty(e.prototype,\"Li\",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),e.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},e.prototype.$i=function(t,e,n){var r=new Br(this.currentUser,t,e,n),i=Gr(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ui())},e.prototype.Mi=function(t){var e=Gr(this.persistenceKey,this.currentUser,t);this.removeItem(e)},e.prototype.Gi=function(t){this.storage.setItem(this.Vi,JSON.stringify({clientId:this._i,onlineState:t}))},e.prototype.Wi=function(t,e,n){var r=zr(this.persistenceKey,t),i=new Wr(t,e,n);this.setItem(r,i.ui())},e.prototype.zi=function(t){var e=this.gi.exec(t);return e?e[1]:null},e.prototype.Yi=function(t,e){var n=this.zi(t);return Kr.ci(n,e)},e.prototype.Ji=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]);return Br.ci(new Mr(void 0!==n[2]?n[2]:null),r,e)},e.prototype.Zi=function(t,e){var n=this.yi.exec(t),r=Number(n[1]);return Wr.ci(r,e)},e.prototype.vi=function(t){return Qr.ci(t)},e.prototype.Xi=function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.fi.er(e.batchId,e.state,e.error)]:(l(\"SharedClientState\",\"Ignoring mutation for non-active user \"+e.user.uid),[2])}))}))},e.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},e.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],u=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||u.push(t)})),this.fi.sr(s,u).then((function(){n.Ti=r}))},e.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},e.prototype.Ni=function(t){var e=Vt();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},e}(),$r=function(){function t(){this.ir=new Hr,this.rr={},this.di=null,this.si=null}return t.prototype.xi=function(t){},t.prototype.ki=function(t,e,n){},t.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||\"not-current\"},t.prototype.Qi=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new Hr,Promise.resolve()},t.prototype.ji=function(t,e,n){},t.prototype.Ki=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Xr=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.cr=function(t,e,n){for(var r=n.ur,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=dn(o,e,r[i]))}return e},t.prototype.hr=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=vn(i,e,e,this.ar))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=vn(a,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.hr(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ot())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Y(this.mutations,t.mutations,(function(t,e){return gn(t,e)}))&&Y(this.baseMutations,t.baseMutations,(function(t,e){return gn(t,e)}))},t}(),Jr=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.ur=n,this.dr=r}return t.from=function(e,n,r){g(e.mutations.length===r.length);for(var i=kt,o=e.mutations,s=0;s<o.length;s++)i=i.ot(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Zr=function(){function t(){this.wr=new it((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mr=!1}return Object.defineProperty(t.prototype,\"readTime\",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Er=function(t,e){this.Ir(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.Ir(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.Ir();var n=this.wr.get(e);return void 0!==n?yr.resolve(n):this.gr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},t.prototype.Ir=function(){},t}(),ti=\"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",ei=function(){function t(){this.Vr=[]}return t.prototype.pr=function(t){this.Vr.push(t)},t.prototype.br=function(){this.Vr.forEach((function(t){return t()}))},t}(),ni=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].hr(e,t);return t}))},t.prototype.$r=function(t,e,n){var r=Dt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].hr(t,e);r=r.ot(t,e)})),r},t.prototype.kr=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.Or(t,e).next((function(r){var i=n.$r(t,e,r),o=St();return i.forEach((function(t,e){e||(e=new Rn(t,st.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return A.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):jn(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new A(e)).next((function(t){var e=Lt();return t instanceof kn&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=Lt();return this.Dr.Qr(t,i).next((function(s){return yr.forEach(s,(function(s){var u=function(t,e){return new Pn(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,s.child(i));return r.Ur(t,u,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,o.Sr.Wr(t,e)})).next((function(e){return o.jr(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,u=o.mutations;s<u.length;s++){var a=u[s],c=a.key,h=r.get(c),f=vn(a,h,h,o.ar);r=f instanceof kn?r.ot(c,f):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){$n(e,n)||(r=r.remove(t))})),r}))},t.prototype.jr=function(t,e,n){for(var r=Ot(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof _n&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof kn&&(c=c.ot(t,e))})),c}))},t}(),ri=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Kr=n,this.Gr=r}return t.zr=function(e,n){for(var r=Ot(),i=Ot(),o=0,s=n.docChanges;o<s.length;o++){var u=s[o];switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}}return new t(e,n.fromCache,r,i)},t}();function ii(t,e){var r=t[1],o=e[1],s=H(t[0],e[0]);return 0===s?H(r,o):s}var oi=function(){function t(t){this.Hr=t,this.buffer=new Tt(ii),this.Yr=0}return t.prototype.Jr=function(){return++this.Yr},t.prototype.Xr=function(t){var e=[t,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ii(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,\"maxValue\",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),si={Zr:!1,eo:0,no:0,so:0},ui=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.co,t.uo)},t}();ui.ho=-1,ui.lo=1048576,ui._o=41943040,ui.co=10,ui.uo=1e3,ui.fo=new ui(ui._o,ui.co,ui.uo),ui.do=new ui(ui.ho,0,0);var ai=function(){function e(t,e){this.wo=t,this.cs=e,this.mo=!1,this.To=null}return e.prototype.start=function(t){this.wo.params.io!==ui.ho&&this.Eo(t)},e.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(e.prototype,\"Ei\",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),e.prototype.Eo=function(e){var n=this,r=this.mo?3e5:6e4;l(\"LruGarbageCollector\",\"Garbage collection scheduled in \"+r+\"ms\"),this.To=this.cs.yn(\"lru_garbage_collection\",r,(function(){return t.__awaiter(n,void 0,void 0,(function(){var n;return t.__generator(this,(function(t){switch(t.label){case 0:this.To=null,this.mo=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,e.Io(this.wo)];case 2:return t.sent(),[3,7];case 3:return _r(n=t.sent())?(l(\"LruGarbageCollector\",\"Ignoring IndexedDB error during garbage collection: \",n),[3,6]):[3,4];case 4:return[4,Do(n)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Eo(e)];case 8:return t.sent(),[2]}}))}))}))},e}(),ci=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yo=function(t,e){var n=this;if(0===e)return yr.resolve(qr.ai);var r=new oi(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.Vo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===ui.ho?(l(\"LruGarbageCollector\",\"Garbage collection skipped; disabled\"),yr.resolve(si)):this.So(t).next((function(r){return r<n.params.io?(l(\"LruGarbageCollector\",\"Garbage collection skipped; Cache size \"+r+\" is lower than threshold \"+n.params.io),si):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var r,i,o,s,u,a,c,h=this,p=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>h.params.oo?(l(\"LruGarbageCollector\",\"Capping sequence numbers to collect down to the maximum of \"+h.params.oo+\" from \"+e),i=h.params.oo):i=e,s=Date.now(),h.yo(t,i)})).next((function(n){return r=n,u=Date.now(),h.po(t,r,e)})).next((function(e){return o=e,a=Date.now(),h.bo(t,r)})).next((function(t){return c=Date.now(),f()<=n.LogLevel.DEBUG&&l(\"LruGarbageCollector\",\"LRU Garbage Collection\\n\\tCounted targets in \"+(s-p)+\"ms\\n\\tDetermined least recently used \"+i+\" in \"+(u-s)+\"ms\\n\\tRemoved \"+o+\" targets in \"+(a-u)+\"ms\\n\\tRemoved \"+t+\" documents in \"+(c-a)+\"ms\\nTotal Duration: \"+(c-p)+\"ms\"),yr.resolve({Zr:!0,eo:i,no:o,so:t})}))},t}();function hi(t){for(var e=\"\",n=0;n<t.length;n++)e.length>0&&(e=li(e)),e=fi(t.get(n),e);return li(e)}function fi(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case\"\\0\":n+=\"\u0001\u0010\";break;case\"\u0001\":n+=\"\u0001\u0011\";break;default:n+=o}}return n}function li(t){return t+\"\u0001\u0001\"}function pi(t){var e=t.length;if(g(e>=2),2===e)return g(\"\u0001\"===t.charAt(0)&&\"\u0001\"===t.charAt(1)),E.P();for(var n=e-2,r=[],i=\"\",o=0;o<e;){var s=t.indexOf(\"\u0001\",o);switch((s<0||s>n)&&y(),t.charAt(s+1)){case\"\u0001\":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=\"\"),r.push(a);break;case\"\u0010\":i+=t.substring(o,s),i+=\"\\0\";break;case\"\u0011\":i+=t.substring(o,s+1);break;default:y()}o=s+2}return new E(r)}var di=function(t){this.Co=t};function vi(t,e){if(e.document)return function(t,e,n){var r=Se(t,e.name),i=Ee(e.updateTime),o=new Sn({mapValue:{fields:e.fields}});return new kn(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=A.$(e.noDocument.path),r=_i(e.noDocument.readTime);return new Rn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=A.$(e.unknownDocument.path),o=_i(e.unknownDocument.version);return new On(i,o)}return y()}function yi(t,e,n){var r=gi(n),i=e.key.path.h().A();if(e instanceof kn){var o=function(t,e){return{name:Ae(t,e.key),fields:e.rn().mapValue.fields,updateTime:_e(t,e.version.Z())}}(t.Co,e);return new Ki(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof Rn){var u=e.key.path.A(),a=wi(e.version),c=e.hasCommittedMutations;return new Ki(null,new Bi(u,a),null,c,r,i)}if(e instanceof On){var h=e.key.path.A(),f=wi(e.version);return new Ki(new Wi(h,f),null,null,!0,r,i)}return y()}function gi(t){var e=t.Z();return[e.seconds,e.nanoseconds]}function mi(t){var e=new ot(t[0],t[1]);return st.J(e)}function wi(t){var e=t.Z();return new Mi(e.seconds,e.nanoseconds)}function _i(t){var e=new ot(t.seconds,t.nanoseconds);return st.J(e)}function bi(t,e){var n=(e.baseMutations||[]).map((function(e){return Pe(t.Co,e)})),r=e.mutations.map((function(e){return Pe(t.Co,e)})),i=ot.fromMillis(e.localWriteTimeMs);return new Xr(e.batchId,i,n,r)}function Ii(t){var e,n,r=_i(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?_i(t.lastLimboFreeSnapshotVersion):st.min();return void 0!==t.query.documents?(g(1===(n=t.query).documents.length),e=zn(Un(xe(n.documents[0])))):e=function(t){var e=xe(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){g(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function Fe(t){return t?void 0!==t.unaryFilter?[Ke(t)]:void 0!==t.fieldFilter?[We(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Fe(t)})).reduce((function(t,e){return t.concat(e)})):y():[]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(t){return function(t){return new fr(Be(t.field),function(t){switch(t){case\"ASCENDING\":return\"asc\";case\"DESCENDING\":return\"desc\";default:return}}(t.direction))}(t)})));var a=null;n.limit&&(a=function(t){var e;return ut(e=\"object\"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=qe(n.startAt));var h=null;return n.endAt&&(h=qe(n.endAt)),zn(Vn(e,i,u,s,a,\"F\",c,h))}(t.query),new gt(e,t.targetId,0,t.lastListenSequenceNumber,r,i,X.fromBase64String(t.resumeToken))}function Ei(t,e){var n,r=wi(e.nt),i=wi(e.lastLimboFreeSnapshotVersion);n=dt(e.target)?Ve(t.Co,e.target):Ue(t.Co,e.target);var o=e.resumeToken.toBase64();return new Hi(e.targetId,lt(e.target),r,o,e.sequenceNumber,i,n)}var Ti=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.Fo={}}return t.xo=function(e,n,r,i){return g(\"\"!==e.uid),new t(e.Zs()?e.uid:\"\",n,r,i)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Si(t).rs({index:Gi.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.ko=function(t,e,n,r){var i=this,o=Di(t),s=Si(t);return s.add({}).next((function(u){g(\"number\"==typeof u);for(var a=new Xr(u,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Oe(t.Co,e)})),i=n.mutations.map((function(e){return Oe(t.Co,e)}));return new Gi(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,a),h=[],f=new Tt((function(t,e){return H(t.R(),e.R())})),l=0,p=r;l<p.length;l++){var d=p[l],v=zi.key(i.userId,d.key.path,u);f=f.add(d.key.path.h()),h.push(s.put(c)),h.push(o.put(v,zi.PLACEHOLDER))}return f.forEach((function(e){h.push(i.Dr.Mo(t,e))})),t.pr((function(){i.Fo[u]=a.keys()})),yr.$n(h).next((function(){return a}))}))},t.prototype.Oo=function(t,e){var n=this;return Si(t).get(e).next((function(t){return t?(g(t.userId===n.userId),bi(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.Fo[e]?yr.resolve(this.Fo[e]):this.Oo(t,e).next((function(t){if(t){var r=t.keys();return n.Fo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Si(t).rs({index:Gi.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(g(e.batchId>=r),o=bi(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Si(t).rs({index:Gi.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Si(t).ts(Gi.userMutationsIndex,n).next((function(t){return t.map((function(t){return bi(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=zi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Di(t).rs({range:i},(function(r,i,s){var u=r[0],c=r[2],h=pi(r[1]);if(u===n.userId&&e.path.isEqual(h))return Si(t).get(c).next((function(t){if(!t)throw y();g(t.userId===n.userId),o.push(bi(n.serializer,t))}));s.done()})).next((function(){return o}))},t.prototype.Or=function(t,e){var n=this,r=new Tt(H),i=[];return e.forEach((function(e){var o=zi.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),u=Di(t).rs({range:s},(function(t,i,o){var s=t[0],a=t[2],c=pi(t[1]);s===n.userId&&e.path.isEqual(c)?r=r.add(a):o.done()}));i.push(u)})),yr.$n(i).next((function(){return n.Qo(t,r)}))},t.prototype.Wr=function(t,e){var n=this,r=e.path,i=r.length+1,o=zi.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),u=new Tt(H);return Di(t).rs({range:s},(function(t,e,o){var s=t[0],c=t[2],h=pi(t[1]);s===n.userId&&r.T(h)?h.length===i&&(u=u.add(c)):o.done()})).next((function(){return n.Qo(t,u)}))},t.prototype.Qo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Si(t).get(e).next((function(t){if(null===t)throw y();g(t.userId===n.userId),r.push(bi(n.serializer,t))})))})),yr.$n(i).next((function(){return r}))},t.prototype.Wo=function(t,e){var n=this;return Ai(t.jo,this.userId,e).next((function(r){return t.pr((function(){n.Ko(e.batchId)})),yr.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.Ko=function(t){delete this.Fo[t]},t.prototype.zo=function(t){var e=this;return this.$o(t).next((function(n){if(!n)return yr.resolve();var r=IDBKeyRange.lowerBound(zi.prefixForUser(e.userId)),i=[];return Di(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=pi(t[1]);i.push(o)}else r.done()})).next((function(){g(0===i.length)}))}))},t.prototype.Ho=function(t,e){return Ni(t,this.userId,e)},t.prototype.Yo=function(t){var e=this;return xi(t).get(this.userId).next((function(t){return t||new ji(e.userId,-1,\"\")}))},t}();function Ni(t,e,n){var r=zi.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Di(t).rs({range:o,ss:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function Ai(t,e,n){var r=t.store(Gi.store),i=t.store(zi.store),o=[],s=IDBKeyRange.only(n.batchId),u=0,a=r.rs({range:s},(function(t,e,n){return u++,n.delete()}));o.push(a.next((function(){g(1===u)})));for(var c=[],h=0,f=n.mutations;h<f.length;h++){var l=f[h],p=zi.key(e,l.key.path,n.batchId);o.push(i.delete(p)),c.push(l.key)}return yr.$n(o).next((function(){return c}))}function Si(t){return ho.Qn(t,Gi.store)}function Di(t){return ho.Qn(t,zi.store)}function xi(t){return ho.Qn(t,ji.store)}var Li=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Er=function(t,e,n){return Oi(t).put(Pi(e),n)},t.prototype.Ar=function(t,e){var n=Oi(t),r=Pi(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Jo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return Oi(t).get(Pi(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return Oi(t).get(Pi(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:Vi(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Dt();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=Dt(),i=new bt(A.i);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,Vi(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.m())return yr.resolve();var r=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),i=e._t(),o=i.It();return Oi(t).rs({range:r},(function(t,e,r){for(var s=A.$(t);o&&A.i(o,s)<0;)n(o,null),o=i.It();o&&o.isEqual(s)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.A()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=Lt(),o=e.path.length+1,s={};if(n.isEqual(st.min())){var u=e.path.A();s.range=IDBKeyRange.lowerBound(u)}else{var a=e.path.A(),c=gi(n);s.range=IDBKeyRange.lowerBound([a,c],!0),s.index=Ki.collectionReadTimeIndex}return Oi(t).rs(s,(function(t,n,s){if(t.length===o){var u=vi(r.serializer,n);e.path.T(u.key.path)?u instanceof kn&&$n(e,u)&&(i=i.ot(u.key,u)):s.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new ki(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ri(t).get(Qi.key).next((function(t){return g(!!t),t}))},t.prototype.Jo=function(t,e){return Ri(t).put(Qi.key,e)},t.prototype.Xo=function(t){if(t){var e=vi(this.serializer,t);return e instanceof Rn&&e.version.isEqual(st.min())?null:e}return null},t}(),ki=function(e){function n(t,n){var r=this;return(r=e.call(this)||this).ca=t,r.oa=n,r.ua=new it((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return t.__extends(n,e),n.prototype.yr=function(t){var e=this,n=[],r=0,i=new Tt((function(t,e){return H(t.R(),e.R())}));return this.wr.forEach((function(o,s){var u=e.ua.get(o);if(s){var a=yi(e.ca.serializer,s,e.readTime);i=i.add(o.path.h());var c=Vi(a);r+=c-u,n.push(e.ca.Er(t,o,a))}else if(r-=u,e.oa){var h=yi(e.ca.serializer,new Rn(o,st.min()),e.readTime);n.push(e.ca.Er(t,o,h))}else n.push(e.ca.Ar(t,o))})),i.forEach((function(r){n.push(e.ca.Dr.Mo(t,r))})),n.push(this.ca.updateMetadata(t,r)),yr.$n(n)},n.prototype.gr=function(t,e){var n=this;return this.ca.Zo(t,e).next((function(t){return null===t?(n.ua.set(e,0),null):(n.ua.set(e,t.size),t.ta)}))},n.prototype.Pr=function(t,e){var n=this;return this.ca.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ua.set(t,e)})),e}))},n}(Zr);function Ri(t){return ho.Qn(t,Qi.store)}function Oi(t){return ho.Qn(t,Ki.store)}function Pi(t){return t.path.A()}function Vi(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y();e=t.noDocument}return JSON.stringify(e).length}var Ui=function(){function t(){this.ha=new Ci}return t.prototype.Mo=function(t,e){return this.ha.add(e),yr.resolve()},t.prototype.Qr=function(t,e){return yr.resolve(this.ha.getEntries(e))},t}(),Ci=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new Tt(E.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Tt(E.i)).A()},t}(),Fi=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;g(n<r&&n>=0&&r<=10);var o=new br(\"createOrUpgrade\",e);n<1&&r>=1&&(function(t){t.createObjectStore(qi.store)}(t),function(t){t.createObjectStore(ji.store,{keyPath:ji.keyPath}),t.createObjectStore(Gi.store,{keyPath:Gi.keyPath,autoIncrement:!0}).createIndex(Gi.userMutationsIndex,Gi.userMutationsKeyPath,{unique:!0}),t.createObjectStore(zi.store)}(t),Ji(t),function(t){t.createObjectStore(Ki.store)}(t));var s=yr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Yi.store),t.deleteObjectStore(Hi.store),t.deleteObjectStore($i.store)}(t),Ji(t)),s=s.next((function(){return function(t){var e=t.store($i.store),n=new $i(0,0,st.min().Z(),0);return e.put($i.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Gi.store).ts().next((function(n){t.deleteObjectStore(Gi.store),t.createObjectStore(Gi.store,{keyPath:Gi.keyPath,autoIncrement:!0}).createIndex(Gi.userMutationsIndex,Gi.userMutationsKeyPath,{unique:!0});var r=e.store(Gi.store),i=n.map((function(t){return r.put(t)}));return yr.$n(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Zi.store,{keyPath:Zi.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Qi.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains(\"remoteDocumentChanges\")&&t.deleteObjectStore(\"remoteDocumentChanges\")}(t),function(t){var e=t.objectStore(Ki.store);e.createIndex(Ki.readTimeIndex,Ki.readTimeIndexPath,{unique:!1}),e.createIndex(Ki.collectionReadTimeIndex,Ki.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.rewriteCanonicalIds(o)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Ki.store).rs((function(t,n){e+=Vi(n)})).next((function(){var n=new Qi(e);return t.store(Qi.store).put(Qi.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(ji.store),r=t.store(Gi.store);return n.ts().next((function(n){return yr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Gi.userMutationsIndex,i).next((function(r){return yr.forEach(r,(function(r){g(r.userId===n.userId);var i=bi(e.serializer,r);return Ai(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Yi.store),n=t.store(Ki.store);return t.store($i.store).get($i.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new E(n),s=function(t){return[0,hi(t)]}(o);r.push(e.get(s).next((function(n){return n?yr.resolve():function(n){return e.put(new Yi(0,hi(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return yr.$n(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Xi.store,{keyPath:Xi.keyPath});var n=e.store(Xi.store),r=new Ci,i=function(t){if(r.add(t)){var e=t._(),i=t.h();return n.put({collectionId:e,parent:hi(i)})}};return e.store(Ki.store).rs({ss:!0},(function(t,e){var n=new E(t);return i(n.h())})).next((function(){return e.store(zi.store).rs({ss:!0},(function(t,e){var r=pi(t[1]);return i(r.h())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Hi.store);return n.rs((function(t,r){var i=Ii(r),o=Ei(e.serializer,i);return n.put(o)}))},t}(),Mi=function(t,e){this.seconds=t,this.nanoseconds=e},qi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};qi.store=\"owner\",qi.key=\"owner\";var ji=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ji.store=\"mutationQueues\",ji.keyPath=\"userId\";var Gi=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Gi.store=\"mutations\",Gi.keyPath=\"batchId\",Gi.userMutationsIndex=\"userMutationsIndex\",Gi.userMutationsKeyPath=[\"userId\",\"batchId\"];var zi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,hi(e)]},t.key=function(t,e,n){return[t,hi(e),n]},t}();zi.store=\"documentMutations\",zi.PLACEHOLDER=new zi;var Bi=function(t,e){this.path=t,this.readTime=e},Wi=function(t,e){this.path=t,this.version=e},Ki=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ki.store=\"remoteDocuments\",Ki.readTimeIndex=\"readTimeIndex\",Ki.readTimeIndexPath=\"readTime\",Ki.collectionReadTimeIndex=\"collectionReadTimeIndex\",Ki.collectionReadTimeIndexPath=[\"parentPath\",\"readTime\"];var Qi=function(t){this.byteSize=t};Qi.store=\"remoteDocumentGlobal\",Qi.key=\"remoteDocumentGlobalKey\";var Hi=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Hi.store=\"targets\",Hi.keyPath=\"targetId\",Hi.queryTargetsIndexName=\"queryTargetsIndex\",Hi.queryTargetsKeyPath=[\"canonicalId\",\"targetId\"];var Yi=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Yi.store=\"targetDocuments\",Yi.keyPath=[\"targetId\",\"path\"],Yi.documentTargetsIndex=\"documentTargetsIndex\",Yi.documentTargetsKeyPath=[\"path\",\"targetId\"];var $i=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};$i.key=\"targetGlobalKey\",$i.store=\"targetGlobal\";var Xi=function(t,e){this.collectionId=t,this.parent=e};function Ji(t){t.createObjectStore(Yi.store,{keyPath:Yi.keyPath}).createIndex(Yi.documentTargetsIndex,Yi.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Hi.store,{keyPath:Hi.keyPath}).createIndex(Hi.queryTargetsIndexName,Hi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore($i.store)}Xi.store=\"collectionParents\",Xi.keyPath=[\"collectionId\",\"parent\"];var Zi=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Zi.store=\"clientMetadata\",Zi.keyPath=\"clientId\";var to=t.__spreadArrays(t.__spreadArrays(t.__spreadArrays([ji.store,Gi.store,zi.store,Ki.store,Hi.store,qi.store,$i.store,Yi.store],[Zi.store]),[Qi.store]),[Xi.store]),eo=function(){function t(){this.la=new Ci}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e._(),i=e.h();t.pr((function(){n.la.add(e)}));var o={collectionId:r,parent:hi(i)};return no(t).put(o)}return yr.resolve()},t.prototype.Qr=function(t,e){var n=[],r=IDBKeyRange.bound([e,\"\"],[$(e),\"\"],!1,!0);return no(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(pi(o.parent))}return n}))},t}();function no(t){return ho.Qn(t,Xi.store)}var ro=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),io=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.ma(t).next((function(n){var r=new ro(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ea=function(t){return this.ma(t).next((function(t){return st.J(new ot(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ia=function(t){return this.ma(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.ma(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Z()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.ga(t,e).next((function(){return n.ma(t).next((function(r){return r.targetCount+=1,n.Pa(e,r),n.Ta(t,r)}))}))},t.prototype.ya=function(t,e){return this.ga(t,e)},t.prototype.Va=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return oo(t).delete(e.targetId)})).next((function(){return n.ma(t)})).next((function(e){return g(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return oo(t).rs((function(s,u){var a=Ii(u);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,o.push(r.Va(t,a)))})).next((function(){return yr.$n(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return oo(t).rs((function(t,n){var r=Ii(n);e(r)}))},t.prototype.ma=function(t){return so(t).get($i.key).next((function(t){return g(null!==t),t}))},t.prototype.Ta=function(t,e){return so(t).put($i.key,e)},t.prototype.ga=function(t,e){return oo(t).put(Ei(this.serializer,e))},t.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.ma(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=lt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return oo(t).rs({range:r,index:Hi.queryTargetsIndexName},(function(t,n,r){var o=Ii(n);pt(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=uo(t);return e.forEach((function(e){var s=hi(e.path);i.push(o.put(new Yi(n,s))),i.push(r.No.Da(t,n,e))})),yr.$n(i)},t.prototype.Ca=function(t,e,n){var r=this,i=uo(t);return yr.forEach(e,(function(e){var o=hi(e.path);return yr.$n([i.delete([n,o]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=uo(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Fa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=uo(t),i=Ot();return r.rs({range:n,ss:!0},(function(t,e,n){var r=pi(t[1]),o=new A(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=hi(e.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0),i=0;return uo(t).rs({index:Yi.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return oo(t).get(e).next((function(t){return t?Ii(t):null}))},t}();function oo(t){return ho.Qn(t,Hi.store)}function so(t){return ho.Qn(t,$i.store)}function uo(t){return ho.Qn(t,Yi.store)}var ao=\"Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.\",co=function(e){function n(t,n){var r=this;return(r=e.call(this)||this).jo=t,r.xa=n,r}return t.__extends(n,e),n}(ei),ho=function(){function e(t,n,r,i,o,s,u,h,f,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=s,this.document=u,this.$a=f,this.ka=l,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(t){return Promise.resolve()},!e.Ln())throw new c(a.UNIMPLEMENTED,\"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\");this.No=new po(this,i),this.Wa=n+\"main\",this.serializer=new di(h),this.ja=new gr(this.Wa,10,new Fi(this.serializer)),this.Ka=new io(this.No,this.serializer),this.Dr=new eo,this.vr=function(t,e){return new Li(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===l&&p(\"IndexedDbPersistence\",\"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.\"))}return e.Qn=function(t,e){if(t instanceof co)return gr.Qn(t.jo,e);throw y()},e.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new c(a.FAILED_PRECONDITION,ao);return t.Ha(),t.Ya(),t.Ja(),t.runTransaction(\"getHighestListenSequenceNumber\",\"readonly\",(function(e){return t.Ka.Ia(e)}))})).then((function(e){t.Ma=new qr(e,t.$a)})).then((function(){t.Oa=!0})).catch((function(e){return t.ja&&t.ja.close(),Promise.reject(e)}))},e.prototype.Xa=function(e){var n=this;return this.Qa=function(r){return t.__awaiter(n,void 0,void 0,(function(){return t.__generator(this,(function(t){return this.Ei?[2,e(r)]:[2]}))}))},e(this.isPrimary)},e.prototype.Za=function(e){var n=this;this.ja.Kn((function(r){return t.__awaiter(n,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return null===r.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.tc=function(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.fn.ws((function(){return t.__awaiter(n,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},e.prototype.za=function(){var t=this;return this.runTransaction(\"updateClientMetadataAndTryBecomePrimary\",\"readwrite\",(function(e){return lo(e).put(new Zi(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ec(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Qa(!1)})))}))})).next((function(){return t.nc(e)})).next((function(n){return t.isPrimary&&!n?t.sc(e).next((function(){return!1})):!!n&&t.ic(e).next((function(){return!0}))}))})).catch((function(e){if(_r(e))return l(\"IndexedDbPersistence\",\"Failed to extend owner lease: \",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return l(\"IndexedDbPersistence\",\"Releasing owner lease after error during lease refresh\",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Qa(e)})),t.isPrimary=e}))},e.prototype.ec=function(t){var e=this;return fo(t).get(qi.key).next((function(t){return yr.resolve(e.rc(t))}))},e.prototype.oc=function(t){return lo(t).delete(this.clientId)},e.prototype.ac=function(){return t.__awaiter(this,void 0,void 0,(function(){var n,r,i,s=this;return t.__generator(this,(function(t){switch(t.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction(\"maybeGarbageCollectMultiClientState\",\"readwrite-primary\",(function(t){var n=e.Qn(t,Zi.store);return n.ts().next((function(t){var e=s.uc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return yr.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(n=t.sent(),this.Ga)for(r=0,i=n;r<i.length;r++)this.Ga.removeItem(this.hc(i[r].clientId));t.label=2;case 2:return[2]}}))}))},e.prototype.Ja=function(){var t=this;this.qa=this.fn.yn(\"client_metadata_refresh\",4e3,(function(){return t.za().then((function(){return t.ac()})).then((function(){return t.Ja()}))}))},e.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.nc=function(t){var e=this;return this.ka?yr.resolve(!0):fo(t).get(qi.key).next((function(n){if(null!==n&&e.cc(n.leaseTimestampMs,5e3)&&!e.lc(n.ownerId)){if(e.rc(n)&&e.networkEnabled)return!0;if(!e.rc(n)){if(!n.allowTabSynchronization)throw new c(a.FAILED_PRECONDITION,ao);return!1}}return!(!e.networkEnabled||!e.inForeground)||lo(t).ts().next((function(t){return void 0===e.uc(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&l(\"IndexedDbPersistence\",\"Client \"+(t?\"is\":\"is not\")+\" eligible for a primary lease.\"),t}))},e.prototype.Di=function(){return t.__awaiter(this,void 0,void 0,(function(){var e=this;return t.__generator(this,(function(t){switch(t.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction(\"shutdown\",\"readwrite\",[qi.store,Zi.store],(function(t){var n=new co(t,qr.ai);return e.sc(n).next((function(){return e.oc(n)}))}))];case 1:return t.sent(),this.ja.close(),this.wc(),[2]}}))}))},e.prototype.uc=function(t,e){var n=this;return t.filter((function(t){return n.cc(t.updateTimeMs,e)&&!n.lc(t.clientId)}))},e.prototype.pi=function(){var t=this;return this.runTransaction(\"getActiveClients\",\"readonly\",(function(e){return lo(e).ts().next((function(e){return t.uc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(e.prototype,\"Ei\",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),e.prototype.mc=function(t){return Ti.xo(t,this.serializer,this.Dr,this.No)},e.prototype.Tc=function(){return this.Ka},e.prototype.Ec=function(){return this.vr},e.prototype.Ic=function(){return this.Dr},e.prototype.runTransaction=function(t,e,n){var i,r=this;return l(\"IndexedDbPersistence\",\"Starting transaction:\",t),this.ja.runTransaction(t,\"readonly\"===e?\"readonly\":\"readwrite\",to,(function(o){return i=new co(o,r.Ma?r.Ma.next():qr.ai),\"readwrite-primary\"===e?r.ec(i).next((function(t){return!!t||r.nc(i)})).next((function(e){if(!e)throw p(\"Failed to obtain primary lease for action '\"+t+\"'.\"),r.isPrimary=!1,r.fn.Cs((function(){return r.Qa(!1)})),new c(a.FAILED_PRECONDITION,ti);return n(i)})).next((function(t){return r.ic(i).next((function(){return t}))})):r.Ac(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},e.prototype.Ac=function(t){var e=this;return fo(t).get(qi.key).next((function(t){if(null!==t&&e.cc(t.leaseTimestampMs,5e3)&&!e.lc(t.ownerId)&&!e.rc(t)&&!(e.ka||e.allowTabSynchronization&&t.allowTabSynchronization))throw new c(a.FAILED_PRECONDITION,ao)}))},e.prototype.ic=function(t){var e=new qi(this.clientId,this.allowTabSynchronization,Date.now());return fo(t).put(qi.key,e)},e.Ln=function(){return gr.Ln()},e.prototype.sc=function(t){var e=this,n=fo(t);return n.get(qi.key).next((function(t){return e.rc(t)?(l(\"IndexedDbPersistence\",\"Releasing primary lease.\"),n.delete(qi.key)):yr.resolve()}))},e.prototype.cc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(p(\"Detected an update time that is in the future: \"+t+\" > \"+n),1))},e.prototype.Ha=function(){var t=this;null!==this.document&&\"function\"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground=\"visible\"===t.document.visibilityState,t.za()}))},this.document.addEventListener(\"visibilitychange\",this.Ba),this.inForeground=\"visible\"===this.document.visibilityState)},e.prototype.fc=function(){this.Ba&&(this.document.removeEventListener(\"visibilitychange\",this.Ba),this.Ba=null)},e.prototype.Ya=function(){var t,e=this;\"function\"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e._c(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener(\"unload\",this.La))},e.prototype.dc=function(){this.La&&(this.window.removeEventListener(\"unload\",this.La),this.La=null)},e.prototype.lc=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.hc(t)));return l(\"IndexedDbPersistence\",\"Client '\"+t+\"' \"+(n?\"is\":\"is not\")+\" zombied in LocalStorage\"),n}catch(t){return p(\"IndexedDbPersistence\",\"Failed to get zombied client id.\",t),!1}},e.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(t){p(\"Failed to set zombie client id.\",t)}},e.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(t){}},e.prototype.hc=function(t){return\"firestore_zombie_\"+this.persistenceKey+\"_\"+t},e}();function fo(t){return ho.Qn(t,qi.store)}function lo(t){return ho.Qn(t,Zi.store)}var po=function(){function t(t,e){this.db=t,this.wo=new ci(this,e)}return t.prototype.Po=function(t){var e=this.Rc(t);return this.db.Tc().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Rc=function(t){var e=0;return this.Vo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Tc().Ce(t,e)},t.prototype.Vo=function(t,e){return this.gc(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return vo(t,n)},t.prototype.Na=function(t,e,n){return vo(t,n)},t.prototype.po=function(t,e,n){return this.db.Tc().po(t,e,n)},t.prototype.Go=function(t,e){return vo(t,e)},t.prototype.Pc=function(t,e){return function(t,e){var n=!1;return xi(t).os((function(r){return Ni(t,r,e).next((function(t){return t&&(n=!0),yr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.Ec().ra(),i=[],o=0;return this.gc(t,(function(s,u){if(u<=e){var a=n.Pc(t,s).next((function(e){if(!e)return o++,r.Rr(t,s).next((function(){return r.Ar(s),uo(t).delete([0,hi(s.path)])}))}));i.push(a)}})).next((function(){return yr.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.xa);return this.db.Tc().ya(t,n)},t.prototype.yc=function(t,e){return vo(t,e)},t.prototype.gc=function(t,e){var n,r=uo(t),i=qr.ai;return r.rs({index:Yi.documentTargetsIndex},(function(t,r){var s=r.path,u=r.sequenceNumber;0===t[0]?(i!==qr.ai&&e(new A(pi(n)),i),i=u,n=s):i=qr.ai})).next((function(){i!==qr.ai&&e(new A(pi(n)),i)}))},t.prototype.So=function(t){return this.db.Ec().aa(t)},t}();function vo(t,e){return uo(t).put(function(t,e){return new Yi(0,hi(t.path),e)}(e,t.xa))}function yo(t,e){var n=t.projectId;return t.j||(n+=\".\"+t.database),\"firestore/\"+e+\"/\"+n+\"/\"}var go=function(){function t(t,e,n){this.persistence=t,this.Vc=e,this.bc=new bt(H),this.vc=new it((function(t){return lt(t)}),pt),this.Sc=st.min(),this.Sr=t.mc(n),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new ni(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction(\"Collect garbage\",\"readwrite-primary\",(function(n){return t.vo(n,e.bc)}))},t}();function mo(t,e){var n=m(t);return n.persistence.runTransaction(\"Acknowledge batch\",\"readwrite-primary\",(function(t){var r=e.batch.keys(),i=n.Dc.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=yr.resolve();return o.forEach((function(t){s=s.next((function(){return r.Rr(e,t)})).next((function(e){var o=e,s=n.dr.get(t);g(null!==s),(!o||o.version.L(s)<0)&&(o=i.cr(t,o,n))&&r.Er(o,n._r)}))})),s.next((function(){return t.Sr.Wo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}function wo(t){var e=m(t);return e.persistence.runTransaction(\"Get last remote snapshot version\",\"readonly\",(function(t){return e.Ka.Ea(t)}))}function _o(t,e){var n=m(t),r=e.nt,i=n.bc;return n.persistence.runTransaction(\"Apply remote event\",\"readwrite-primary\",(function(t){var o=n.Dc.ra({oa:!0});i=n.bc;var s=[];e.zt.forEach((function(e,o){var u=i.get(o);if(u){s.push(n.Ka.Ca(t,e.se,o).next((function(){return n.Ka.Sa(t,e.ee,o)})));var a=e.resumeToken;if(a.O()>0){var c=u.it(a,r).st(t.xa);i=i.ot(o,c),function(t,e,n){return g(e.resumeToken.O()>0),0===t.resumeToken.O()||e.nt.X()-t.nt.X()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(u,c,e)&&s.push(n.Ka.ya(t,c))}}}));var u=St(),a=Ot();if(e.Yt.forEach((function(t,e){a=a.add(t)})),s.push(o.getEntries(t,a).next((function(i){e.Yt.forEach((function(a,c){var h=i.get(a);c instanceof Rn&&c.version.isEqual(st.min())?(o.Ar(a,r),u=u.ot(a,c)):null==h||c.version.L(h.version)>0||0===c.version.L(h.version)&&h.hasPendingWrites?(o.Er(c,r),u=u.ot(a,c)):l(\"LocalStore\",\"Ignoring outdated watch update for \",a,\". Current version:\",h.version,\" Watch version:\",c.version),e.Jt.has(a)&&s.push(n.persistence.No.yc(t,a))}))}))),!r.isEqual(st.min())){var c=n.Ka.Ea(t).next((function(e){return n.Ka.Aa(t,t.xa,r)}));s.push(c)}return yr.$n(s).next((function(){return o.apply(t)})).next((function(){return n.Cc.Mr(t,u)}))})).then((function(t){return n.bc=i,t}))}function bo(t,e){var n=m(t);return n.persistence.runTransaction(\"Get next mutation batch\",\"readonly\",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function Io(t,e){var n=m(t);return n.persistence.runTransaction(\"Allocate target\",\"readwrite\",(function(t){var r;return n.Ka.va(t,e).next((function(i){return i?yr.resolve(r=i):n.Ka.wa(t).next((function(i){return r=new gt(e,i,0,t.xa),n.Ka.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bc.get(t.targetId);return(null===r||t.nt.L(r.nt)>0)&&(n.bc=n.bc.ot(t.targetId,t),n.vc.set(e,t.targetId)),t}))}function Eo(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return t.__generator(this,(function(t){switch(t.label){case 0:i=m(e),o=i.bc.get(n),s=r?\"readwrite\":\"readwrite-primary\",t.label=1;case 1:return t.trys.push([1,4,,5]),r?[3,3]:[4,i.persistence.runTransaction(\"Release target\",s,(function(t){return i.persistence.No.removeTarget(t,o)}))];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!_r(u=t.sent()))throw u;return l(\"LocalStore\",\"Failed to update sequence numbers for target \"+n+\": \"+u),[3,5];case 5:return i.bc=i.bc.remove(n),i.vc.delete(o.target),[2]}}))}))}function To(t,e,n){var r=m(t),i=st.min(),o=Ot();return r.persistence.runTransaction(\"Execute query\",\"readonly\",(function(t){return function(t,e,n){var r=m(t),i=r.vc.get(n);return void 0!==i?yr.resolve(r.bc.get(i)):r.Ka.va(e,n)}(r,t,zn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ka.Fa(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Vc.Lr(t,e,n?i:st.min(),n?o:Ot())})).next((function(t){return{documents:t,Fc:o}}))}))}function No(t,e){var n=m(t),r=m(n.Ka),i=n.bc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction(\"Get target data\",\"readonly\",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function Ao(t){var e=m(t);return e.persistence.runTransaction(\"Get new document changes\",\"readonly\",(function(t){return function(t,e,n){var r=m(t),i=St(),o=gi(n),s=Oi(e),u=IDBKeyRange.lowerBound(o,!0);return s.rs({index:Ki.readTimeIndex,range:u},(function(t,e){var n=vi(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{xc:i,readTime:mi(o)}}))}(e.Dc,t,e.Sc)})).then((function(t){var n=t.xc;return e.Sc=t.readTime,n}))}function So(e){return t.__awaiter(this,void 0,void 0,(function(){var n;return t.__generator(this,(function(t){return[2,(n=m(e)).persistence.runTransaction(\"Synchronize last document change read time\",\"readonly\",(function(t){return function(t){var e=Oi(t),n=st.min();return e.rs({index:Ki.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=mi(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){n.Sc=t}))]}))}))}function Do(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){if(e.code!==a.FAILED_PRECONDITION||e.message!==ti)throw e;return l(\"LocalStore\",\"Unexpectedly lost primary lease\"),[2]}))}))}var xo=function(){function t(){this.$c=new Tt(Lo.kc),this.Mc=new Tt(Lo.Oc)}return t.prototype.m=function(){return this.$c.m()},t.prototype.Da=function(t,e){var n=new Lo(t,e);this.$c=this.$c.add(n),this.Mc=this.Mc.add(n)},t.prototype.Lc=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.Bc(new Lo(t,e))},t.prototype.qc=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Uc=function(t){var e=this,n=new A(new E([])),r=new Lo(n,t),i=new Lo(n,t+1),o=[];return this.Mc.Ft([r,i],(function(t){e.Bc(t),o.push(t.key)})),o},t.prototype.Qc=function(){var t=this;this.$c.forEach((function(e){return t.Bc(e)}))},t.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},t.prototype.Wc=function(t){var e=new A(new E([])),n=new Lo(e,t),r=new Lo(e,t+1),i=Ot();return this.Mc.Ft([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new Lo(t,0),n=this.$c.$t(e);return null!==n&&t.isEqual(n.key)},t}(),Lo=function(){function t(t,e){this.key=t,this.jc=e}return t.kc=function(t,e){return A.i(t.key,e.key)||H(t.jc,e.jc)},t.Oc=function(t,e){return H(t.jc,e.jc)||A.i(t.key,e.key)},t}(),ko=function(t,e){this.user=e,this.type=\"OAuth\",this.Kc={},this.Kc.Authorization=\"Bearer \"+t},Ro=function(){function t(){this.Gc=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.zc=function(){},t.prototype.Hc=function(t){this.Gc=t,t(Mr.UNAUTHENTICATED)},t.prototype.Yc=function(){this.Gc=null},t}(),Oo=function(){function t(t){var e=this;this.Jc=null,this.currentUser=Mr.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){e.Zc++,e.currentUser=e.tu(),e.Xc=!0,e.Gc&&e.Gc(e.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then((function(t){e.auth=t,e.Jc&&e.auth.addAuthTokenListener(e.Jc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Zc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Zc!==e?(l(\"FirebaseCredentialsProvider\",\"getToken aborted due to token change.\"),t.getToken()):n?(g(\"string\"==typeof n.accessToken),new ko(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.zc=function(){this.forceRefresh=!0},t.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},t.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},t.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return g(null===t||\"string\"==typeof t),new Mr(t)},t}(),Po=function(){function t(t,e){this.eu=t,this.nu=e,this.type=\"FirstParty\",this.user=Mr.ni}return Object.defineProperty(t.prototype,\"Kc\",{get:function(){var t={\"X-Goog-AuthUser\":this.nu},e=this.eu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Vo=function(){function t(t,e){this.eu=t,this.nu=e}return t.prototype.getToken=function(){return Promise.resolve(new Po(this.eu,this.nu))},t.prototype.Hc=function(t){t(Mr.ni)},t.prototype.Yc=function(){},t.prototype.zc=function(){},t}(),Uo=function(){function e(t,e,n,r,i,o){this.fn=t,this.su=n,this.iu=r,this.ru=i,this.listener=o,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new vr(t,e)}return e.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.uu=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.hu()},e.prototype.stop=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.lu=function(){this.state=0,this.ys.reset()},e.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,(function(){return t.fu()})))},e.prototype.du=function(t){this.wu(),this.stream.send(t)},e.prototype.fu=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return this.uu()?[2,this.close(0)]:[2]}))}))},e.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},e.prototype.close=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==e?this.ys.reset():n&&n.code===a.RESOURCE_EXHAUSTED?(p(n.toString()),p(\"Using maximum backoff delay to prevent overloading the backend.\"),this.ys.Rn()):n&&n.code===a.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Tu(n)];case 1:return t.sent(),[2]}}))}))},e.prototype.mu=function(){},e.prototype.auth=function(){var t=this;this.state=1;var e=this.Eu(this.ou),n=this.ou;this.ru.getToken().then((function(e){t.ou===n&&t.Iu(e)}),(function(n){e((function(){var e=new c(a.UNKNOWN,\"Fetching auth token failed: \"+n.message);return t.Au(e)}))}))},e.prototype.Iu=function(t){var e=this,n=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu((function(){n((function(){return e.state=2,e.listener.gu()}))})),this.stream.Tu((function(t){n((function(){return e.Au(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},e.prototype.hu=function(){var e=this;this.state=4,this.ys.gn((function(){return t.__awaiter(e,void 0,void 0,(function(){return t.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},e.prototype.Au=function(t){return l(\"PersistentStream\",\"close with error: \"+t),this.stream=null,this.close(3,t)},e.prototype.Eu=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ou===t?n():(l(\"PersistentStream\",\"stream callback skipped by getCloseGuardedDispatcher.\"),Promise.resolve())}))}},e}(),Co=function(e){function n(t,n,r,i,o){var s=this;return(s=e.call(this,t,\"listen_stream_connection_backoff\",\"listen_stream_idle\",n,r,o)||this).serializer=i,s}return t.__extends(n,e),n.prototype.Ru=function(t){return this.iu.Pu(\"Listen\",t)},n.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if(\"targetChange\"in e){var r=function(t){return\"NO_CHANGE\"===t?0:\"ADD\"===t?1:\"REMOVE\"===t?2:\"CURRENT\"===t?3:\"RESET\"===t?4:y()}(e.targetChange.targetChangeType||\"NO_CHANGE\"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Qe?(g(void 0===e||\"string\"==typeof e),X.fromBase64String(e||\"\")):(g(void 0===e||e instanceof Uint8Array),X.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?a.UNKNOWN:_t(t.code);return new c(e,t.message||\"\")}(s);n=new zt(r,i,o,u||null)}else if(\"documentChange\"in e){var h=e.documentChange,f=Se(t,h.document.name),l=Ee(h.document.updateTime),p=new Sn({mapValue:{fields:h.document.fields}}),d=new kn(f,l,p,{});n=new jt(h.targetIds||[],h.removedTargetIds||[],d.key,d)}else if(\"documentDelete\"in e){var w=e.documentDelete,_=Se(t,w.document),b=w.readTime?Ee(w.readTime):st.min(),I=new Rn(_,b);n=new jt([],w.removedTargetIds||[],I.key,I)}else if(\"documentRemove\"in e){var T=e.documentRemove,N=Se(t,T.document);n=new jt([],T.removedTargetIds||[],N,null)}else{if(!(\"filter\"in e))return y();var S=e.filter,x=new mt(S.count||0);n=new Gt(S.targetId,x)}return n}(this.serializer,t),n=function(t){if(!(\"targetChange\"in t))return st.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?st.min():e.readTime?Ee(e.readTime):st.min()}(t);return this.listener.yu(e,n)},n.prototype.Vu=function(t){var e={};e.database=Le(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=dt(r)?{documents:Ve(t,r)}:{query:Ue(t,r)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=be(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return\"existence-filter-mismatch\";case 2:return\"limbo-document\";default:return y()}}(0,e.et);return null==n?null:{\"goog-listen-tags\":n}}(0,t);n&&(e.labels=n),this.du(e)},n.prototype.pu=function(t){var e={};e.database=Le(this.serializer),e.removeTarget=t,this.du(e)},n}(Uo),Fo=function(e){function n(t,n,r,i,o){var s=this;return(s=e.call(this,t,\"write_stream_connection_backoff\",\"write_stream_idle\",n,r,o)||this).serializer=i,s.bu=!1,s}return t.__extends(n,e),Object.defineProperty(n.prototype,\"vu\",{get:function(){return this.bu},enumerable:!1,configurable:!0}),n.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},n.prototype.mu=function(){this.bu&&this.Su([])},n.prototype.Ru=function(t){return this.iu.Pu(\"Write\",t)},n.prototype.onMessage=function(t){if(g(!!t.streamToken),this.lastStreamToken=t.streamToken,this.bu){this.ys.reset();var e=function(t,e){return t&&t.length>0?(g(void 0!==e),t.map((function(t){return function(t,e){var n=Ee(t.updateTime?t.updateTime:e);n.isEqual(st.min())&&(n=Ee(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new hn(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Ee(t.commitTime);return this.listener.Du(n,e)}return g(!t.writeResults||0===t.writeResults.length),this.bu=!0,this.listener.Cu()},n.prototype.Nu=function(){var t={};t.database=Le(this.serializer),this.du(t)},n.prototype.Su=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Oe(e.serializer,t)}))};this.du(n)},n}(Uo),Mo=function(e){function n(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.iu=n,i.serializer=r,i.Fu=!1,i}return t.__extends(n,e),n.prototype.xu=function(){if(this.Fu)throw new c(a.FAILED_PRECONDITION,\"The client has already been terminated.\")},n.prototype.$u=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.$u(t,e,n,i)})).catch((function(t){throw t.code===a.UNAUTHENTICATED&&r.credentials.zc(),t}))},n.prototype.ku=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.ku(t,e,n,i)})).catch((function(t){throw t.code===a.UNAUTHENTICATED&&r.credentials.zc(),t}))},n.prototype.terminate=function(){this.Fu=!1},n}((function(){})),qo=function(){function t(t,e){this.cs=t,this.di=e,this.state=\"Unknown\",this.Mu=0,this.Ou=null,this.Lu=!0}return t.prototype.Bu=function(){var t=this;0===this.Mu&&(this.qu(\"Unknown\"),this.Ou=this.cs.yn(\"online_state_timeout\",1e4,(function(){return t.Ou=null,t.Uu(\"Backend didn't respond within 10 seconds.\"),t.qu(\"Offline\"),Promise.resolve()})))},t.prototype.Qu=function(t){\"Online\"===this.state?this.qu(\"Unknown\"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu(\"Connection failed 1 times. Most recent error: \"+t.toString()),this.qu(\"Offline\")))},t.prototype.set=function(t){this.Wu(),this.Mu=0,\"Online\"===t&&(this.Lu=!1),this.qu(t)},t.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Uu=function(t){var e=\"Could not reach Cloud Firestore backend. \"+t+\"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";this.Lu?(p(e),this.Lu=!1):l(\"OnlineStateTracker\",e)},t.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t}(),jo=function(e,n,r,i,o){var s=this;this.ju=e,this.Ku=n,this.cs=r,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=o,this.Xu.Zu((function(e){r.ws((function(){return t.__awaiter(s,void 0,void 0,(function(){return t.__generator(this,(function(e){switch(e.label){case 0:return Xo(this)?(l(\"RemoteStore\",\"Restarting streams for network reachability change.\"),[4,function(e){return t.__awaiter(this,void 0,void 0,(function(){var n;return t.__generator(this,(function(t){switch(t.label){case 0:return(n=m(e)).Yu.add(4),[4,zo(n)];case 1:return t.sent(),n.th.set(\"Unknown\"),n.Yu.delete(4),[4,Go(n)];case 2:return t.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.th=new qo(r,i)};function Go(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r;return t.__generator(this,(function(t){switch(t.label){case 0:if(!Xo(e))return[3,4];n=0,r=e.Ju,t.label=1;case 1:return n<r.length?[4,(0,r[n])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function zo(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r;return t.__generator(this,(function(t){switch(t.label){case 0:n=0,r=e.Ju,t.label=1;case 1:return n<r.length?[4,(0,r[n])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))}function Bo(e){return t.__awaiter(this,void 0,void 0,(function(){var n;return t.__generator(this,(function(t){switch(t.label){case 0:return n=m(e),l(\"RemoteStore\",\"RemoteStore shutting down.\"),n.Yu.add(5),[4,zo(n)];case 1:return t.sent(),n.Xu.Di(),n.th.set(\"Unknown\"),[2]}}))}))}function Wo(t,e){var n=m(t);n.Hu.has(e.targetId)||(n.Hu.set(e.targetId,e),$o(n)?Yo(n):ls(n).uu()&&Qo(n,e))}function Ko(t,e){var n=m(t),r=ls(n);n.Hu.delete(e),r.uu()&&Ho(n,e),0===n.Hu.size&&(r.uu()?r._u():Xo(n)&&n.th.set(\"Unknown\"))}function Qo(t,e){t.eh.Ie(e.targetId),ls(t).Vu(e)}function Ho(t,e){t.eh.Ie(e),ls(t).pu(e)}function Yo(t){t.eh=new Wt({qe:function(e){return t.Gu.qe(e)},Ue:function(e){return t.Hu.get(e)||null}}),ls(t).start(),t.th.Bu()}function $o(t){return Xo(t)&&!ls(t).cu()&&t.Hu.size>0}function Xo(t){return 0===m(t).Yu.size}function Jo(t){t.eh=void 0}function Zo(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return e.Hu.forEach((function(t,n){Qo(e,t)})),[2]}))}))}function ts(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return Jo(e),$o(e)?(e.th.Qu(n),Yo(e)):e.th.set(\"Unknown\"),[2]}))}))}function es(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s;return t.__generator(this,(function(u){switch(u.label){case 0:if(e.th.set(\"Online\"),!(n instanceof zt&&2===n.state&&n.cause))return[3,6];u.label=1;case 1:return u.trys.push([1,3,,5]),[4,function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s;return t.__generator(this,(function(t){switch(t.label){case 0:r=n.cause,i=0,o=n.targetIds,t.label=1;case 1:return i<o.length?e.Hu.has(s=o[i])?[4,e.Gu.nh(s,r)]:[3,3]:[3,5];case 2:t.sent(),e.Hu.delete(s),e.eh.removeTarget(s),t.label=3;case 3:t.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(e,n)];case 2:return u.sent(),[3,5];case 3:return i=u.sent(),l(\"RemoteStore\",\"Failed to remove targets %s: %s \",n.targetIds.join(\",\"),i),[4,ns(e,i)];case 4:return u.sent(),[3,5];case 5:return[3,13];case 6:if(n instanceof jt?e.eh.be(n):n instanceof Gt?e.eh.$e(n):e.eh.De(n),r.isEqual(st.min()))return[3,13];u.label=7;case 7:return u.trys.push([7,11,,13]),[4,wo(e.ju)];case 8:return o=u.sent(),r.L(o)>=0?[4,function(t,e){var n=t.eh.Oe(e);return n.zt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=t.Hu.get(r);i&&t.Hu.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Hu.get(e);if(n){t.Hu.set(e,n.it(X.B,n.nt)),Ho(t,e);var r=new gt(n.target,e,1,n.sequenceNumber);Qo(t,r)}})),t.Gu.sh(n)}(e,r)]:[3,10];case 9:u.sent(),u.label=10;case 10:return[3,13];case 11:return l(\"RemoteStore\",\"Failed to raise snapshot:\",s=u.sent()),[4,ns(e,s)];case 12:return u.sent(),[3,13];case 13:return[2]}}))}))}function ns(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i=this;return t.__generator(this,(function(o){switch(o.label){case 0:if(!_r(n))throw n;return e.Yu.add(1),[4,zo(e)];case 1:return o.sent(),e.th.set(\"Offline\"),r||(r=function(){return wo(e.ju)}),e.cs.Cs((function(){return t.__awaiter(i,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return l(\"RemoteStore\",\"Retrying IndexedDB access\"),[4,r()];case 1:return t.sent(),e.Yu.delete(1),[4,Go(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function rs(t,e){return e().catch((function(n){return ns(t,n,e)}))}function is(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s;return t.__generator(this,(function(t){switch(t.label){case 0:n=m(e),r=ps(n),i=n.zu.length>0?n.zu[n.zu.length-1].batchId:-1,t.label=1;case 1:if(!function(t){return Xo(t)&&t.zu.length<10}(n))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,bo(n.ju,i)];case 3:return null===(o=t.sent())?(0===n.zu.length&&r._u(),[3,7]):(i=o.batchId,function(t,e){t.zu.push(e);var n=ps(t);n.uu()&&n.vu&&n.Su(e.mutations)}(n,o),[3,6]);case 4:return s=t.sent(),[4,ns(n,s)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return os(n)&&ss(n),[2]}}))}))}function os(t){return Xo(t)&&!ps(t).cu()&&t.zu.length>0}function ss(t){ps(t).start()}function us(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){return ps(e).Nu(),[2]}))}))}function as(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r,i;return t.__generator(this,(function(t){for(n=ps(e),r=0,i=e.zu;r<i.length;r++)n.Su(i[r].mutations);return[2]}))}))}function cs(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o;return t.__generator(this,(function(t){switch(t.label){case 0:return i=e.zu.shift(),o=Jr.from(i,n,r),[4,rs(e,(function(){return e.Gu.ih(o)}))];case 1:return t.sent(),[4,is(e)];case 2:return t.sent(),[2]}}))}))}function hs(e,n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(r){switch(r.label){case 0:return n&&ps(e).vu?[4,function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i;return t.__generator(this,(function(t){switch(t.label){case 0:return wt(i=n.code)&&i!==a.ABORTED?(r=e.zu.shift(),ps(e).lu(),[4,rs(e,(function(){return e.Gu.rh(r.batchId,n)}))]):[3,3];case 1:return t.sent(),[4,is(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))}(e,n)]:[3,2];case 1:r.sent(),r.label=2;case 2:return os(e)&&ss(e),[2]}}))}))}function fs(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r;return t.__generator(this,(function(t){switch(t.label){case 0:return r=m(e),n?(r.Yu.delete(2),[4,Go(r)]):[3,2];case 1:return t.sent(),[3,5];case 2:return n?[3,4]:(r.Yu.add(2),[4,zo(r)]);case 3:t.sent(),r.th.set(\"Unknown\"),t.label=4;case 4:t.label=5;case 5:return[2]}}))}))}function ls(e){var n=this;return e.oh||(e.oh=function(t,e,n){var r=m(t);return r.xu(),new Co(e,r.iu,r.credentials,r.serializer,n)}(e.Ku,e.cs,{gu:Zo.bind(null,e),Tu:ts.bind(null,e),yu:es.bind(null,e)}),e.Ju.push((function(r){return t.__awaiter(n,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return r?(e.oh.lu(),$o(e)?Yo(e):e.th.set(\"Unknown\"),[3,3]):[3,1];case 1:return[4,e.oh.stop()];case 2:t.sent(),Jo(e),t.label=3;case 3:return[2]}}))}))}))),e.oh}function ps(e){var n=this;return e.ah||(e.ah=function(t,e,n){var r=m(t);return r.xu(),new Fo(e,r.iu,r.credentials,r.serializer,n)}(e.Ku,e.cs,{gu:us.bind(null,e),Tu:hs.bind(null,e),Cu:as.bind(null,e),Du:cs.bind(null,e)}),e.Ju.push((function(r){return t.__awaiter(n,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return r?(e.ah.lu(),[4,is(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.ah.stop()];case 3:t.sent(),e.zu.length>0&&(l(\"RemoteStore\",\"Stopping write stream with \"+e.zu.length+\" pending writes\"),e.zu=[]),t.label=4;case 4:return[2]}}))}))}))),e.ah}var ds=function(t){this.key=t},vs=function(t){this.key=t},ys=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=Ot(),this.Wt=Ot(),this._h=Xn(t),this.fh=new Ut(this._h)}return Object.defineProperty(t.prototype,\"dh\",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.mh:new Ct,i=e?e.fh:this.fh,o=e?e.Wt:this.Wt,s=i,u=!1,a=Cn(this.query)&&i.size===this.query.limit?i.last():null,c=Fn(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var h=i.get(t),f=e instanceof kn?e:null;f&&(f=$n(n.query,f)?f:null);var l=!!h&&n.Wt.has(h.key),p=!!f&&(f.Je||n.Wt.has(f.key)&&f.hasCommittedMutations),d=!1;h&&f?h.data().isEqual(f.data())?l!==p&&(r.track({type:3,doc:f}),d=!0):n.Th(h,f)||(r.track({type:2,doc:f}),d=!0,(a&&n._h(f,a)>0||c&&n._h(f,c)<0)&&(u=!0)):!h&&f?(r.track({type:0,doc:f}),d=!0):h&&!f&&(r.track({type:1,doc:h}),d=!0,(a||c)&&(u=!0)),d&&(f?(s=s.add(f),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Cn(this.query)||Fn(this.query))for(;s.size>this.query.limit;){var h=Cn(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fh:s,mh:r,Eh:u,Wt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.yr=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Wt=t.Wt;var o=t.mh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)})),this.Ih(n);var s=e?this.Ah():[],u=0===this.lh.size&&this.te?1:0,a=u!==this.hh;return this.hh=u,0!==o.length||a?{snapshot:new Ft(this.query,t.fh,i,o,t.Wt,0===u,a,!1),Rh:s}:{Rh:s}},t.prototype.Qs=function(t){return this.te&&\"Offline\"===t?(this.te=!1,this.yr({fh:this.fh,mh:new Ct,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},t.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.Ih=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=Ot(),this.fh.forEach((function(e){t.gh(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new vs(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new ds(t))})),n},t.prototype.Ph=function(t){this.uh=t.Fc,this.lh=Ot();var e=this.wh(t.documents);return this.yr(e,!0)},t.prototype.yh=function(){return Ft.Gt(this.query,this.fh,this.Wt,0===this.hh)},t}(),gs=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ms=function(t){this.key=t,this.Vh=!1},ws=function(){function t(t,e,n,r,i,o){this.ju=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new it((function(t){return Hn(t)}),Qn),this.Fh=new Map,this.xh=[],this.$h=new bt(A.i),this.kh=new Map,this.Mh=new xo,this.Oh={},this.Lh=new Map,this.Bh=ro.da(),this.onlineState=\"Unknown\",this.qh=void 0}return Object.defineProperty(t.prototype,\"Uh\",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function _s(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,o,s,u,a;return t.__generator(this,(function(t){switch(t.label){case 0:return r=Ks(e),(s=r.Nh.get(n))?(r.Sh.Oi(s.targetId),o=s.view.yh(),[3,4]):[3,1];case 1:return[4,Io(r.ju,zn(n))];case 2:return u=t.sent(),a=r.Sh.Oi(u.targetId),[4,bs(r,n,u.targetId,\"current\"===a)];case 3:o=t.sent(),r.Uh&&Wo(r.ph,u),t.label=4;case 4:return[2,o]}}))}))}function bs(e,n,r,i){return t.__awaiter(this,void 0,void 0,(function(){var o,s,u,a,c,h;return t.__generator(this,(function(f){switch(f.label){case 0:return e.Qh=function(n,r,i){return function(e,n,r,i){return t.__awaiter(this,void 0,void 0,(function(){var o,s,u;return t.__generator(this,(function(t){switch(t.label){case 0:return(o=n.view.wh(r)).Eh?[4,To(e.ju,n.query,!1).then((function(t){return n.view.wh(t.documents,o)}))]:[3,2];case 1:o=t.sent(),t.label=2;case 2:return s=i&&i.zt.get(n.targetId),u=n.view.yr(o,e.Uh,s),[2,(Rs(e,n.targetId,u.Rh),u.snapshot)]}}))}))}(e,n,r,i)},[4,To(e.ju,n,!0)];case 1:return o=f.sent(),s=new ys(n,o.Fc),u=s.wh(o.documents),a=qt.Zt(r,i&&\"Offline\"!==e.onlineState),c=s.yr(u,e.Uh,a),Rs(e,r,c.Rh),h=new gs(n,r,s),[2,(e.Nh.set(n,h),e.Fh.has(r)?e.Fh.get(r).push(n):e.Fh.set(r,[n]),c.snapshot)]}}))}))}function Is(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o;return t.__generator(this,(function(t){switch(t.label){case 0:return r=m(e),i=r.Nh.get(n),(o=r.Fh.get(i.targetId)).length>1?[2,(r.Fh.set(i.targetId,o.filter((function(t){return!Qn(t,n)}))),void r.Nh.delete(n))]:r.Uh?(r.Sh.Bi(i.targetId),r.Sh.Fi(i.targetId)?[3,2]:[4,Eo(r.ju,i.targetId,!1).then((function(){r.Sh.Ui(i.targetId),Ko(r.ph,i.targetId),Ls(r,i.targetId)})).catch(Do)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return Ls(r,i.targetId),[4,Eo(r.ju,i.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}}))}))}function Es(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i;return t.__generator(this,(function(t){switch(t.label){case 0:r=m(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,_o(r.ju,n)];case 2:return i=t.sent(),n.zt.forEach((function(t,e){var n=r.kh.get(e);n&&(g(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?n.Vh=!0:t.ne.size>0?g(n.Vh):t.se.size>0&&(g(n.Vh),n.Vh=!1))})),[4,Vs(r,i,n)];case 3:return t.sent(),[3,6];case 4:return[4,Do(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}}))}))}function Ts(t,e,n){var r=m(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(t,n){var r=n.view.Qs(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=m(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Qs(e)&&(r=!0)})),r&&Cr(n)}(r.bh,e),i.length&&r.Ch.yu(i),r.onlineState=e,r.Uh&&r.Sh.Ki(e)}}function Ns(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s,u,a,c;return t.__generator(this,(function(t){switch(t.label){case 0:return(i=m(e)).Sh.Qi(n,\"rejected\",r),o=i.kh.get(n),(s=o&&o.key)?(u=(u=new bt(A.i)).ot(s,new Rn(s,st.min())),a=Ot().add(s),c=new Mt(st.min(),new Map,new Tt(H),u,a),[4,Es(i,c)]):[3,2];case 1:return t.sent(),i.$h=i.$h.remove(s),i.kh.delete(n),Ps(i),[3,4];case 2:return[4,Eo(i.ju,n,!1).then((function(){return Ls(i,n,r)})).catch(Do)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}function As(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o;return t.__generator(this,(function(t){switch(t.label){case 0:r=m(e),i=n.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,mo(r.ju,n)];case 2:return o=t.sent(),xs(r,i,null),Ds(r,i),r.Sh.ki(i,\"acknowledged\"),[4,Vs(r,o)];case 3:return t.sent(),[3,6];case 4:return[4,Do(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}}))}))}function Ss(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o;return t.__generator(this,(function(t){switch(t.label){case 0:i=m(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction(\"Reject batch\",\"readwrite-primary\",(function(t){var r;return n.Sr.Oo(t,e).next((function(e){return g(null!==e),r=e.keys(),n.Sr.Wo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}(i.ju,n)];case 2:return o=t.sent(),xs(i,n,r),Ds(i,n),i.Sh.ki(n,\"rejected\",r),[4,Vs(i,o)];case 3:return t.sent(),[3,6];case 4:return[4,Do(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}}))}))}function Ds(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function xs(t,e,n){var r=m(t),i=r.Oh[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Oh[r.currentUser.ti()]=i}}function Ls(t,e,n){void 0===n&&(n=null),t.Sh.Bi(e);for(var r=0,i=t.Fh.get(e);r<i.length;r++){var o=i[r];t.Nh.delete(o),n&&t.Ch.Wh(o,n)}t.Fh.delete(e),t.Uh&&t.Mh.Uc(e).forEach((function(e){t.Mh.Ho(e)||ks(t,e)}))}function ks(t,e){var n=t.$h.get(e);null!==n&&(Ko(t.ph,n),t.$h=t.$h.remove(e),t.kh.delete(n),Ps(t))}function Rs(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ds?(t.Mh.Da(o.key,e),Os(t,o)):o instanceof vs?(l(\"SyncEngine\",\"Document no longer in limbo: \"+o.key),t.Mh.Na(o.key,e),t.Mh.Ho(o.key)||ks(t,o.key)):y()}}function Os(t,e){var n=e.key;t.$h.get(n)||(l(\"SyncEngine\",\"New document in limbo: \"+n),t.xh.push(n),Ps(t))}function Ps(t){for(;t.xh.length>0&&t.$h.size<t.Dh;){var e=t.xh.shift(),n=t.Bh.next();t.kh.set(n,new ms(e)),t.$h=t.$h.ot(e,n),Wo(t.ph,new gt(zn(Un(e.path)),n,2,qr.ai))}}function Vs(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return t.__generator(this,(function(a){switch(a.label){case 0:return i=m(e),o=[],s=[],u=[],i.Nh.m()?[3,3]:(i.Nh.forEach((function(t,e){u.push(i.Qh(e,n,r).then((function(t){if(t){i.Uh&&i.Sh.Qi(e.targetId,t.fromCache?\"not-current\":\"current\"),o.push(t);var n=ri.zr(e.targetId,t);s.push(n)}})))})),[4,Promise.all(u)]);case 1:return a.sent(),i.Ch.yu(o),[4,function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,f;return t.__generator(this,(function(t){switch(t.label){case 0:r=m(e),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction(\"notifyLocalViewChanges\",\"readwrite\",(function(t){return yr.forEach(n,(function(e){return yr.forEach(e.Kr,(function(n){return r.persistence.No.Da(t,e.targetId,n)})).next((function(){return yr.forEach(e.Gr,(function(n){return r.persistence.No.Na(t,e.targetId,n)}))}))}))}))];case 2:return t.sent(),[3,4];case 3:if(!_r(i=t.sent()))throw i;return l(\"LocalStore\",\"Failed to update sequence numbers: \"+i),[3,4];case 4:for(o=0,s=n;o<s.length;o++)a=(u=s[o]).targetId,u.fromCache||(c=r.bc.get(a),f=c.rt(c.nt),r.bc=r.bc.ot(a,f));return[2]}}))}))}(i.ju,s)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Us(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i;return t.__generator(this,(function(o){switch(o.label){case 0:return(r=m(e)).currentUser.isEqual(n)?[3,3]:(l(\"SyncEngine\",\"User change. New user:\",n.ti()),[4,function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s;return t.__generator(this,(function(t){switch(t.label){case 0:return r=m(e),i=r.Sr,o=r.Cc,[4,r.persistence.runTransaction(\"Handle user change\",\"readonly\",(function(t){var e;return r.Sr.Uo(t).next((function(s){return e=s,i=r.persistence.mc(n),o=new ni(r.Dc,i,r.persistence.Ic()),i.Uo(t)})).next((function(n){for(var r=[],i=[],s=Ot(),u=0,a=e;u<a.length;u++){var c=a[u];r.push(c.batchId);for(var h=0,f=c.mutations;h<f.length;h++)s=s.add(f[h].key)}for(var p=0,d=n;p<d.length;p++){var v=d[p];i.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++)s=s.add(g[y].key)}return o.kr(t,s).next((function(t){return{jh:t,Kh:r,Gh:i}}))}))}))];case 1:return s=t.sent(),[2,(r.Sr=i,r.Cc=o,r.Vc.Nc(r.Cc),s)]}}))}))}(r.ju,n)]);case 1:return i=o.sent(),r.currentUser=n,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new c(a.CANCELLED,\"'waitForPendingWrites' promise is rejected due to a user change.\"))}))})),t.Lh.clear()}(r),r.Sh.ji(n,i.Kh,i.Gh),[4,Vs(r,i.jh)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Cs(t,e){var n=m(t),r=n.kh.get(e);if(r&&r.Vh)return Ot().add(r.key);var i=Ot(),o=n.Fh.get(e);if(!o)return i;for(var s=0,u=o;s<u.length;s++){var c=n.Nh.get(u[s]);i=i.kt(c.view.dh)}return i}function Fs(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,To((r=m(e)).ju,n.query,!0)];case 1:return i=t.sent(),o=n.view.Ph(i),[2,(r.Uh&&Rs(r,n.targetId,o.Rh),o)]}}))}))}function Ms(e,n,r,i){return t.__awaiter(this,void 0,void 0,(function(){var o,s;return t.__generator(this,(function(t){switch(t.label){case 0:return[4,function(t,e){var n=m(t),r=m(n.Sr);return n.persistence.runTransaction(\"Lookup mutation documents\",\"readonly\",(function(t){return r.Lo(t,e).next((function(e){return e?n.Cc.kr(t,e):yr.resolve(null)}))}))}((o=m(e)).ju,n)];case 1:return null===(s=t.sent())?[3,6]:\"pending\"!==r?[3,3]:[4,is(o.ph)];case 2:return t.sent(),[3,4];case 3:\"acknowledged\"===r||\"rejected\"===r?(xs(o,n,i||null),Ds(o,n),function(t,e){m(m(t).Sr).Ko(e)}(o.ju,n)):y(),t.label=4;case 4:return[4,Vs(o,s)];case 5:return t.sent(),[3,7];case 6:l(\"SyncEngine\",\"Cannot apply mutation batch with id: \"+n),t.label=7;case 7:return[2]}}))}))}function qs(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,c,h;return t.__generator(this,(function(t){switch(t.label){case 0:return Ks(r=m(e)),Qs(r),!0!==n||!0===r.qh?[3,3]:(i=r.Sh.Ci(),[4,js(r,i.A())]);case 1:return o=t.sent(),r.qh=!0,[4,fs(r.ph,!0)];case 2:for(t.sent(),s=0,u=o;s<u.length;s++)Wo(r.ph,u[s]);return[3,7];case 3:return!1!==n||!1===r.qh?[3,7]:(c=[],h=Promise.resolve(),r.Fh.forEach((function(t,e){r.Sh.qi(e)?c.push(e):h=h.then((function(){return Ls(r,e),Eo(r.ju,e,!0)})),Ko(r.ph,e)})),[4,h]);case 4:return t.sent(),[4,js(r,c)];case 5:return t.sent(),function(t){var e=m(t);e.kh.forEach((function(t,n){Ko(e.ph,n)})),e.Mh.Qc(),e.kh=new Map,e.$h=new bt(A.i)}(r),r.qh=!1,[4,fs(r.ph,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}}))}))}function js(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,a,c,h,f,l,d,v,y;return t.__generator(this,(function(t){switch(t.label){case 0:r=m(e),i=[],o=[],s=0,u=n,t.label=1;case 1:return s<u.length?(c=void 0,(h=r.Fh.get(a=u[s]))&&0!==h.length?[4,Io(r.ju,zn(h[0]))]:[3,7]):[3,13];case 2:c=t.sent(),f=0,l=h,t.label=3;case 3:return f<l.length?(d=r.Nh.get(l[f]),[4,Fs(r,d)]):[3,6];case 4:(v=t.sent()).snapshot&&o.push(v.snapshot),t.label=5;case 5:return f++,[3,3];case 6:return[3,11];case 7:return[4,No(r.ju,a)];case 8:return y=t.sent(),[4,Io(r.ju,y)];case 9:return c=t.sent(),[4,bs(r,Gs(y),a,!1)];case 10:t.sent(),t.label=11;case 11:i.push(c),t.label=12;case 12:return s++,[3,1];case 13:return[2,(r.Ch.yu(o),i)]}}))}))}function Gs(t){return Vn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,\"F\",t.startAt,t.endAt)}function zs(t){var e=m(t);return m(m(e.ju).persistence).pi()}function Bs(e,n,r,i){return t.__awaiter(this,void 0,void 0,(function(){var o,s,u;return t.__generator(this,(function(t){switch(t.label){case 0:return(o=m(e)).qh?(l(\"SyncEngine\",\"Ignoring unexpected query state notification.\"),[3,8]):[3,1];case 1:if(!o.Fh.has(n))return[3,8];switch(r){case\"current\":case\"not-current\":return[3,2];case\"rejected\":return[3,5]}return[3,7];case 2:return[4,Ao(o.ju)];case 3:return s=t.sent(),u=Mt.Xt(n,\"current\"===r),[4,Vs(o,s,u)];case 4:return t.sent(),[3,8];case 5:return[4,Eo(o.ju,n,!0)];case 6:return t.sent(),Ls(o,n,i),[3,8];case 7:y(),t.label=8;case 8:return[2]}}))}))}function Ws(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s,u,a,c,h,f,p;return t.__generator(this,(function(v){switch(v.label){case 0:if(!(i=Ks(e)).qh)return[3,10];o=0,s=n,v.label=1;case 1:return o<s.length?i.Fh.has(u=s[o])?(l(\"SyncEngine\",\"Adding an already active target \"+u),[3,5]):[4,No(i.ju,u)]:[3,6];case 2:return a=v.sent(),[4,Io(i.ju,a)];case 3:return c=v.sent(),[4,bs(i,Gs(a),c.targetId,!1)];case 4:v.sent(),Wo(i.ph,c),v.label=5;case 5:return o++,[3,1];case 6:h=function(e){return t.__generator(this,(function(t){switch(t.label){case 0:return i.Fh.has(e)?[4,Eo(i.ju,e,!1).then((function(){Ko(i.ph,e),Ls(i,e)})).catch(Do)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},f=0,p=r,v.label=7;case 7:return f<p.length?[5,h(p[f])]:[3,10];case 8:v.sent(),v.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function Ks(t){var e=m(t);return e.ph.Gu.sh=Es.bind(null,e),e.ph.Gu.qe=Cs.bind(null,e),e.ph.Gu.nh=Ns.bind(null,e),e.Ch.yu=Vr.bind(null,e.bh),e.Ch.Wh=Ur.bind(null,e.bh),e}function Qs(t){var e=m(t);return e.ph.Gu.ih=As.bind(null,e),e.ph.Gu.rh=Ss.bind(null,e),e}var Hs=function(){function t(){}return t.prototype.Nc=function(t){this.zh=t},t.prototype.Lr=function(t,e,r,i){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.p())}(e)||r.isEqual(st.min())?this.Hh(t,e):this.zh.kr(t,i).next((function(s){var u=o.Yh(e,s);return(Cn(e)||Fn(e))&&o.Eh(e.an,u,i,r)?o.Hh(t,e):(f()<=n.LogLevel.DEBUG&&l(\"IndexFreeQueryEngine\",\"Re-using previous result from %s to execute query: %s\",r.toString(),Yn(e)),o.zh.Lr(t,e,r).next((function(t){return u.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Yh=function(t,e){var n=new Tt(Xn(t));return e.forEach((function(e,r){r instanceof kn&&$n(t,r)&&(n=n.add(r))})),n},t.prototype.Eh=function(t,e,n,r){if(n.size!==e.size)return!0;var i=\"F\"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.Hh=function(t,e){return f()<=n.LogLevel.DEBUG&&l(\"IndexFreeQueryEngine\",\"Using full collection scan to execute query:\",Yn(e)),this.zh.Lr(t,e,st.min())},t}(),Ys=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Jh=1,this.Xh=new Tt(Lo.kc)}return t.prototype.$o=function(t){return yr.resolve(0===this.Sr.length)},t.prototype.ko=function(t,e,n,r){var i=this.Jh;this.Jh++;var o=new Xr(i,e,n,r);this.Sr.push(o);for(var s=0,u=r;s<u.length;s++){var a=u[s];this.Xh=this.Xh.add(new Lo(a.key,i)),this.Dr.Mo(t,a.key.path.h())}return yr.resolve(o)},t.prototype.Oo=function(t,e){return yr.resolve(this.Zh(e))},t.prototype.Bo=function(t,e){var r=this.tl(e+1),i=r<0?0:r;return yr.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return yr.resolve(0===this.Sr.length?-1:this.Jh-1)},t.prototype.Uo=function(t){return yr.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new Lo(e,0),i=new Lo(e,Number.POSITIVE_INFINITY),o=[];return this.Xh.Ft([r,i],(function(t){var e=n.Zh(t.jc);o.push(e)})),yr.resolve(o)},t.prototype.Or=function(t,e){var n=this,r=new Tt(H);return e.forEach((function(t){var e=new Lo(t,0),i=new Lo(t,Number.POSITIVE_INFINITY);n.Xh.Ft([e,i],(function(t){r=r.add(t.jc)}))})),yr.resolve(this.el(r))},t.prototype.Wr=function(t,e){var n=e.path,r=n.length+1,i=n;A.F(i)||(i=i.child(\"\"));var o=new Lo(new A(i),0),s=new Tt(H);return this.Xh.xt((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(s=s.add(t.jc)),!0)}),o),yr.resolve(this.el(s))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zh(t);null!==r&&n.push(r)})),n},t.prototype.Wo=function(t,e){var n=this;g(0===this.nl(e.batchId,\"removed\")),this.Sr.shift();var r=this.Xh;return yr.forEach(e.mutations,(function(i){var o=new Lo(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)})).next((function(){n.Xh=r}))},t.prototype.Ko=function(t){},t.prototype.Ho=function(t,e){var n=new Lo(e,0),r=this.Xh.$t(n);return yr.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return yr.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zh=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),$s=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new bt(A.i),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:s,readTime:n}),this.size+=s-o,this.Dr.Mo(t,r.path.h())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return yr.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=Dt();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),yr.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=Lt(),i=new A(e.path.child(\"\")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.value,c=a.ta,h=a.readTime;if(!e.path.T(s.key.path))break;h.L(n)<=0||c instanceof kn&&$n(e,c)&&(r=r.ot(c.key,c))}return yr.resolve(r)},t.prototype.il=function(t,e){return yr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Xs(this)},t.prototype.aa=function(t){return yr.resolve(this.size)},t}(),Xs=function(e){function n(t){var n=this;return(n=e.call(this)||this).ca=t,n}return t.__extends(n,e),n.prototype.yr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ca.Er(t,i,e.readTime)):e.ca.Ar(r)})),yr.$n(n)},n.prototype.gr=function(t,e){return this.ca.Rr(t,e)},n.prototype.Pr=function(t,e){return this.ca.getEntries(t,e)},n}(Zr),Js=function(){function t(t){this.persistence=t,this.rl=new it((function(t){return lt(t)}),pt),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.ol=0,this.al=new xo,this.targetCount=0,this.cl=ro.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),yr.resolve()},t.prototype.Ea=function(t){return yr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ia=function(t){return yr.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),yr.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),yr.resolve()},t.prototype.ga=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.cl=new ro(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.ga(e),this.targetCount+=1,yr.resolve()},t.prototype.ya=function(t,e){return this.ga(e),yr.resolve()},t.prototype.Va=function(t,e){return this.rl.delete(e.target),this.al.Uc(e.targetId),this.targetCount-=1,yr.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach((function(s,u){u.sequenceNumber<=e&&null===n.get(u.targetId)&&(r.rl.delete(s),o.push(r.pa(t,u.targetId)),i++)})),yr.$n(o).next((function(){return i}))},t.prototype.ba=function(t){return yr.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return yr.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Lc(e,n),yr.resolve()},t.prototype.Ca=function(t,e,n){this.al.qc(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),yr.$n(i)},t.prototype.pa=function(t,e){return this.al.Uc(e),yr.resolve()},t.prototype.Fa=function(t,e){var n=this.al.Wc(e);return yr.resolve(n)},t.prototype.Ho=function(t,e){return yr.resolve(this.al.Ho(e))},t}(),Zs=function(){function t(t){var e=this;this.ul={},this.Ma=new qr(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new Js(this),this.Dr=new Ui,this.vr=function(t,n){return new $s(t,(function(t){return e.No.hl(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(t.prototype,\"Ei\",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.tc=function(){},t.prototype.Ic=function(){return this.Dr},t.prototype.mc=function(t){var e=this.ul[t.ti()];return e||(e=new Ys(this.Dr,this.No),this.ul[t.ti()]=e),e},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;l(\"MemoryPersistence\",\"Starting transaction:\",t);var i=new tu(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).Fn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return yr.kn(Object.values(this.ul).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),tu=function(e){function n(t){var n=this;return(n=e.call(this)||this).xa=t,n}return t.__extends(n,e),n}(ei),eu=function(){function t(t){this.persistence=t,this.dl=new xo,this.wl=null}return t.ml=function(e){return new t(e)},Object.defineProperty(t.prototype,\"Tl\",{get:function(){if(this.wl)return this.wl;throw y()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),yr.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),yr.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),yr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Uc(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Tc();return r.Fa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.Va(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.Ec().ra();return yr.forEach(this.Tl,(function(r){var i=A.D(r);return e.El(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yc=function(t,e){var n=this;return this.El(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.hl=function(t){return 0},t.prototype.El=function(t,e){var n=this;return yr.kn([function(){return yr.resolve(n.dl.Ho(e))},function(){return n.persistence.Tc().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),nu=function(){function t(t){this.Il=t.Il,this.Al=t.Al}return t.prototype.gu=function(t){this.Rl=t},t.prototype.Tu=function(t){this.gl=t},t.prototype.onMessage=function(t){this.Pl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.Il(t)},t.prototype.yl=function(){this.Rl()},t.prototype.Vl=function(t){this.gl(t)},t.prototype.pl=function(t){this.Pl(t)},t}(),ru={BatchGetDocuments:\"batchGet\",Commit:\"commit\",RunQuery:\"runQuery\"},iu=function(e){function n(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.W=t.W,n}return t.__extends(n,e),n.prototype.Nl=function(t,e,n,r){return new Promise((function(o,s){var u=new i.XhrIo;u.listenOnce(i.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case i.ErrorCode.NO_ERROR:var e=u.getResponseJson();l(\"Connection\",\"XHR received:\",JSON.stringify(e)),o(e);break;case i.ErrorCode.TIMEOUT:l(\"Connection\",'RPC \"'+t+'\" timed out'),s(new c(a.DEADLINE_EXCEEDED,\"Request time out\"));break;case i.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(l(\"Connection\",'RPC \"'+t+'\" failed with status:',n,\"response text:\",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var h=function(t){var e=t.toLowerCase().replace(\"_\",\"-\");return Object.values(a).indexOf(e)>=0?e:a.UNKNOWN}(r.status);s(new c(h,r.message))}else s(new c(a.UNKNOWN,\"Server responded with status \"+u.getStatus()))}else s(new c(a.UNAVAILABLE,\"Connection failed.\"));break;default:y()}}finally{l(\"Connection\",'RPC \"'+t+'\" completed.')}}));var h=JSON.stringify(r);u.send(e,\"POST\",h,n,15)}))},n.prototype.Pu=function(t,e){var n=[this.vl,\"/\",\"google.firestore.v1.Firestore\",\"/\",t,\"/channel\"],o=i.createWebChannelTransport(),s={httpSessionIdParam:\"gsessionid\",initMessageHeaders:{},messageUrlParams:{database:\"projects/\"+this.U.projectId+\"/databases/\"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(s.initMessageHeaders,e),r.isMobileCordova()||r.isReactNative()||r.isElectron()||r.isIE()||r.isUWP()||r.isBrowserExtension()||(s.httpHeadersOverwriteParam=\"$httpHeaders\");var u=n.join(\"\");l(\"Connection\",\"Creating WebChannel: \"+u,s);var h=o.createWebChannel(u,s),f=!1,p=!1,v=new nu({Il:function(t){p?l(\"Connection\",\"Not sending because WebChannel is closed:\",t):(f||(l(\"Connection\",\"Opening WebChannel transport.\"),h.open(),f=!0),l(\"Connection\",\"WebChannel sending:\",t),h.send(t))},Al:function(){return h.close()}}),y=function(t,e){h.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return y(i.WebChannel.EventType.OPEN,(function(){p||l(\"Connection\",\"WebChannel transport opened.\")})),y(i.WebChannel.EventType.CLOSE,(function(){p||(p=!0,l(\"Connection\",\"WebChannel transport closed\"),v.Vl())})),y(i.WebChannel.EventType.ERROR,(function(t){p||(p=!0,d(\"Connection\",\"WebChannel transport errored:\",t),v.Vl(new c(a.UNAVAILABLE,\"The operation could not be completed\")))})),y(i.WebChannel.EventType.MESSAGE,(function(t){var e;if(!p){var n=t.data[0];g(!!n);var i=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(i){l(\"Connection\",\"WebChannel received error:\",i);var o=i.status,s=function(t){var e=vt[t];if(void 0!==e)return _t(e)}(o),u=i.message;void 0===s&&(s=a.INTERNAL,u=\"Unknown error status: \"+o+\" with message \"+i.message),p=!0,v.Vl(new c(s,u)),h.close()}else l(\"Connection\",\"WebChannel received:\",n),v.pl(n)}})),setTimeout((function(){v.yl()}),0),v},n}(function(){function t(t){this.bl=t,this.U=t.U,this.vl=(t.ssl?\"https\":\"http\")+\"://\"+t.host,this.Sl=\"projects/\"+this.U.projectId+\"/databases/\"+this.U.database+\"/documents\"}return t.prototype.$u=function(t,e,n,r){var i=this.Dl(t,e);l(\"RestConnection\",\"Sending: \",i,n);var o={};return this.Cl(o,r),this.Nl(t,i,o,n).then((function(t){return l(\"RestConnection\",\"Received: \",t),t}),(function(e){throw d(\"RestConnection\",t+\" failed with error: \",e,\"url: \",i,\"request:\",n),e}))},t.prototype.ku=function(t,e,n,r){return this.$u(t,e,n,r)},t.prototype.Cl=function(t,e){if(t[\"X-Goog-Api-Client\"]=\"gl-js/ fire/7.24.0\",t[\"Content-Type\"]=\"text/plain\",e)for(var n in e.Kc)e.Kc.hasOwnProperty(n)&&(t[n]=e.Kc[n])},t.prototype.Dl=function(t,e){return this.vl+\"/v1/\"+e+\":\"+ru[t]},t}()),ou=function(){function t(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}return t.prototype.Zu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener(\"online\",this.Fl),window.removeEventListener(\"offline\",this.$l)},t.prototype.Ol=function(){window.addEventListener(\"online\",this.Fl),window.addEventListener(\"offline\",this.$l)},t.prototype.xl=function(){l(\"ConnectivityMonitor\",\"Network connectivity changed: AVAILABLE\");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.kl=function(){l(\"ConnectivityMonitor\",\"Network connectivity changed: UNAVAILABLE\");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return\"undefined\"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),su=function(){function t(){}return t.prototype.Zu=function(t){},t.prototype.Di=function(){},t}();function uu(t){return new ye(t,!0)}var au=\"You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.\",cu=function(){function e(){}return e.prototype.initialize=function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.Sh=this.Ll(e),this.persistence=this.Bl(e),[4,this.persistence.start()];case 1:return t.sent(),this.ql=this.Ul(e),this.ju=this.Ql(e),[2]}}))}))},e.prototype.Ul=function(t){return null},e.prototype.Ql=function(t){return e=this.persistence,n=new Hs,new go(e,n,t.Wl);var e,n},e.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new c(a.FAILED_PRECONDITION,au);return new Zs(eu.ml)},e.prototype.Ll=function(t){return new $r},e.prototype.terminate=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},e.prototype.clearPersistence=function(t,e){throw new c(a.FAILED_PRECONDITION,au)},e}(),hu=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.initialize=function(n){return t.__awaiter(this,void 0,void 0,(function(){var r,i=this;return t.__generator(this,(function(o){switch(o.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return o.sent(),r=this.Kl.fi,this.Sh instanceof Yr?(this.Sh.fi={er:Ms.bind(null,r),nr:Bs.bind(null,r),sr:Ws.bind(null,r),pi:zs.bind(null,r)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Xa((function(e){return t.__awaiter(i,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,qs(this.Kl.fi,e)];case 1:return t.sent(),this.ql&&(e&&!this.ql.Ei?this.ql.start(this.ju):e||this.ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},n.prototype.Ll=function(t){if(t.persistenceSettings.jl&&t.persistenceSettings.synchronizeTabs){var e=Ar();if(!Yr.Ln(e))throw new c(a.UNIMPLEMENTED,\"IndexedDB persistence is only available on platforms that support LocalStorage.\");var n=yo(t.bl.U,t.bl.persistenceKey);return new Yr(e,t.cs,n,t.clientId,t.Wl)}return new $r},n}(function(e){function n(t){var n=this;return(n=e.call(this)||this).Kl=t,n}return t.__extends(n,e),n.prototype.initialize=function(n){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return t.sent(),[4,So(this.ju)];case 2:return t.sent(),[4,this.Kl.initialize(this,n)];case 3:return t.sent(),[4,Qs(this.Kl.fi)];case 4:return t.sent(),[4,is(this.Kl.ph)];case 5:return t.sent(),[2]}}))}))},n.prototype.Ul=function(t){return new ai(this.persistence.No.wo,t.cs)},n.prototype.Bl=function(t){var e=yo(t.bl.U,t.bl.persistenceKey),n=uu(t.bl.U);return new ho(t.persistenceSettings.synchronizeTabs,e,t.clientId,ui.ao(t.persistenceSettings.cacheSizeBytes),t.cs,Ar(),Sr(),n,this.Sh,t.persistenceSettings.ka)},n.prototype.Ll=function(t){return new $r},n.prototype.clearPersistence=function(e,n){return function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return gr.Ln()?[4,gr.delete(e+\"main\")]:[2,Promise.resolve()];case 1:return t.sent(),[2]}}))}))}(yo(e,n))},n}(cu)),fu=function(){function e(){}return e.prototype.initialize=function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r=this;return t.__generator(this,(function(t){switch(t.label){case 0:return this.ju?[3,2]:(this.ju=e.ju,this.Sh=e.Sh,this.Ku=this.Gl(n),this.ph=this.zl(n),this.bh=this.Hl(n),this.fi=this.Yl(n),this.Sh.di=function(t){return Ts(r.fi,t,1)},this.ph.Gu.Jl=Us.bind(null,this.fi),[4,fs(this.ph,this.fi.Uh)]);case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.Hl=function(t){return new Rr},e.prototype.Gl=function(t){var n=uu(t.bl.U),r=new iu(t.bl);return function(t,e,n){return new Mo(t,e,n)}(t.credentials,r,n)},e.prototype.zl=function(t){var e,n,r,i,o,s=this;return e=this.ju,n=this.Ku,r=t.cs,i=function(t){return Ts(s.fi,t,0)},o=ou.Ln()?new ou:new su,new jo(e,n,r,i,o)},e.prototype.Yl=function(t){return function(t,e,n,r,i,o,s){var u=new ws(t,e,n,r,i,o);return s&&(u.qh=!0),u}(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh,!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs)},e.prototype.terminate=function(){return Bo(this.ph)},e}(),lu=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error(\"Uncaught Error in snapshot listener:\",t)},t.prototype.Zl=function(){this.muted=!0},t.prototype.Xl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),pu=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new c(a.INVALID_ARGUMENT,\"Function FieldPath() requires its fieldNames argument to be an array with at least \"+W(1,\"element\")+\".\")}(0,t);for(var e=0;e<t.length;++e)if(k(\"FieldPath\",\"string\",e,t[e]),0===t[e].length)throw new c(a.INVALID_ARGUMENT,\"Invalid field name at argument $(i + 1). Field names must not be empty.\");this.t_=new N(t)},du=function(e){function n(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.call(this,t)||this}return t.__extends(n,e),n.documentId=function(){return new n(N.v().R())},n.prototype.isEqual=function(t){if(!(t instanceof n))throw G(\"isEqual\",\"FieldPath\",1,t);return this.t_.isEqual(t.t_)},n}(pu),vu=new RegExp(\"[~\\\\*/\\\\[\\\\]]\"),yu=function(t){this.e_=t},gu=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.n_=function(t){if(2!==t.s_)throw t.i_(1===t.s_?this.e_+\"() can only appear at the top level of your update data\":this.e_+\"() cannot be used with set() unless you pass {merge:true}\");return t.We.push(t.path),null},n.prototype.isEqual=function(t){return t instanceof n},n}(yu);function mu(t,e,n){return new Lu({s_:3,r_:e.settings.r_,methodName:t.e_,o_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var wu=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.n_=function(t){return new cn(t.path,new Ze)},n.prototype.isEqual=function(t){return t instanceof n},n}(yu),_u=function(e){function n(t,n){var r=this;return(r=e.call(this,t)||this).a_=n,r}return t.__extends(n,e),n.prototype.n_=function(t){var e=mu(this,t,!0),n=this.a_.map((function(t){return Uu(t,e)})),r=new tn(n);return new cn(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(yu),bu=function(e){function n(t,n){var r=this;return(r=e.call(this,t)||this).a_=n,r}return t.__extends(n,e),n.prototype.n_=function(t){var e=mu(this,t,!0),n=this.a_.map((function(t){return Uu(t,e)})),r=new nn(n);return new cn(t.path,r)},n.prototype.isEqual=function(t){return this===t},n}(yu),Iu=function(e){function n(t,n){var r=this;return(r=e.call(this,t)||this).c_=n,r}return t.__extends(n,e),n.prototype.n_=function(t){var e=new on(t.serializer,we(t.serializer,this.c_));return new cn(t.path,e)},n.prototype.isEqual=function(t){return this===t},n}(yu),Eu=function(){function t(t,e){if(D(\"GeoPoint\",arguments,2),k(\"GeoPoint\",\"number\",1,t),k(\"GeoPoint\",\"number\",2,e),!isFinite(t)||t<-90||t>90)throw new c(a.INVALID_ARGUMENT,\"Latitude must be a number between -90 and 90, but was: \"+t);if(!isFinite(e)||e<-180||e>180)throw new c(a.INVALID_ARGUMENT,\"Longitude must be a number between -180 and 180, but was: \"+e);this.u_=t,this.h_=e}return Object.defineProperty(t.prototype,\"latitude\",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"longitude\",{get:function(){return this.h_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},t.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},t.prototype.Y=function(t){return H(this.u_,t.u_)||H(this.h_,t.h_)},t}(),Tu=function(t){this.l_=t},Nu=/^__.*__$/,Au=function(t,e,n){this.__=t,this.f_=e,this.d_=n},Su=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[];return n.push(null!==this.We?new _n(t,this.data,this.We,e):new wn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new In(t,this.fieldTransforms)),n},t}(),Du=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[new _n(t,this.data,this.We,e)];return this.fieldTransforms.length>0&&n.push(new In(t,this.fieldTransforms)),n},t}();function xu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var Lu=function(){function t(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.m_(),this.fieldTransforms=i||[],this.We=o||[]}return Object.defineProperty(t.prototype,\"path\",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"s_\",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),t.prototype.T_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.I_(t),r},t.prototype.A_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.m_(),r},t.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},t.prototype.i_=function(t){return Gu(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},t.prototype.contains=function(t){return void 0!==this.We.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.i_(\"Document fields must not be empty\");if(xu(this.s_)&&Nu.test(t))throw this.i_('Document fields cannot begin and end with \"__\"')},t}(),ku=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||uu(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new Lu({s_:t,methodName:e,r_:n,path:N.P(),o_:!1,g_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},t}();function Ru(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Mu(\"Data must be an object, but it was:\",s,r);var u,h,f=Cu(r,s);if(o.merge)u=new an(s.We),h=s.fieldTransforms;else if(o.mergeFields){for(var l=[],p=0,d=o.mergeFields;p<d.length;p++){var v=d[p],g=void 0;if(v instanceof pu)g=v.t_;else{if(\"string\"!=typeof v)throw y();g=ju(e,v,n)}if(!s.contains(g))throw new c(a.INVALID_ARGUMENT,\"Field '\"+g+\"' is specified in your field mask but missing from your input data.\");zu(l,g)||l.push(g)}u=new an(l),h=s.fieldTransforms.filter((function(t){return u.Ye(t.field)}))}else u=null,h=s.fieldTransforms;return new Su(new Sn(f),u,h)}function Ou(t,e,n,r){var i=t.P_(1,e,n);Mu(\"Data must be an object, but it was:\",i,r);var o=[],s=new Dn;_(r,(function(t,r){var u=ju(e,t,n),a=i.A_(u);if(r instanceof gu||r instanceof Tu&&r.l_ instanceof gu)o.push(u);else{var c=Uu(r,a);null!=c&&(o.push(u),s.set(u,c))}}));var u=new an(o);return new Du(s.Xe(),u,i.fieldTransforms)}function Pu(t,e,n,r,i,o){var s=t.P_(1,e,n),u=[qu(e,r,n)],h=[i];if(o.length%2!=0)throw new c(a.INVALID_ARGUMENT,\"Function \"+e+\"() needs to be called with an even number of arguments that alternate between field names and values.\");for(var f=0;f<o.length;f+=2)u.push(qu(e,o[f])),h.push(o[f+1]);for(var l=[],p=new Dn,d=u.length-1;d>=0;--d)if(!zu(l,u[d])){var v=u[d],y=h[d],g=s.A_(v);if(y instanceof gu||y instanceof Tu&&y.l_ instanceof gu)l.push(v);else{var m=Uu(y,g);null!=m&&(l.push(v),p.set(v,m))}}var w=new an(l);return new Du(p.Xe(),w,s.fieldTransforms)}function Vu(t,e,n,r){return void 0===r&&(r=!1),Uu(n,t.P_(r?4:3,e))}function Uu(t,e){if(t instanceof Tu&&(t=t.l_),Fu(t))return Mu(\"Unsupported field value:\",e,t),Cu(t,e);if(t instanceof yu)return function(t,e){if(!xu(e.s_))throw e.i_(t.e_+\"() can only be used with update() and set()\");if(!e.path)throw e.i_(t.e_+\"() is not currently supported inside arrays\");var n=t.n_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.We.push(e.path),t instanceof Array){if(e.settings.o_&&4!==e.s_)throw e.i_(\"Nested arrays are not supported\");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Uu(o[i],e.R_(r));null==s&&(s={nullValue:\"NULL_VALUE\"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:\"NULL_VALUE\"};if(\"number\"==typeof t)return we(e.serializer,t);if(\"boolean\"==typeof t)return{booleanValue:t};if(\"string\"==typeof t)return{stringValue:t};if(t instanceof Date){var n=ot.fromDate(t);return{timestampValue:_e(e.serializer,n)}}if(t instanceof ot){var r=new ot(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:_e(e.serializer,r)}}if(t instanceof Eu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof J)return{bytesValue:be(e.serializer,t.q)};if(t instanceof Au){var i=e.U,o=t.__;if(!o.isEqual(i))throw e.i_(\"Document reference is for database \"+o.projectId+\"/\"+o.database+\" but should be for database \"+i.projectId+\"/\"+i.database);return{referenceValue:Te(t.__||e.U,t.f_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.i_(\"Unsupported field value: \"+M(t))}(t,e)}function Cu(t,e){var n={};return b(t)?e.path&&e.path.length>0&&e.We.push(e.path):_(t,(function(t,r){var i=Uu(r,e.E_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Fu(t){return!(\"object\"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ot||t instanceof Eu||t instanceof J||t instanceof Au||t instanceof yu)}function Mu(t,e,n){if(!Fu(n)||!F(n)){var r=M(n);throw e.i_(\"an object\"===r?t+\" a custom object\":t+\" \"+r)}}function qu(t,e,n){if(e instanceof pu)return e.t_;if(\"string\"==typeof e)return ju(t,e);throw Gu(\"Field path arguments must be of type string or FieldPath.\",t,!1,void 0,n)}function ju(e,n,r){try{return function(e){if(e.search(vu)>=0)throw new c(a.INVALID_ARGUMENT,\"Invalid field path (\"+e+\"). Paths must not contain '~', '*', '/', '[', or ']'\");try{return new(du.bind.apply(du,t.__spreadArrays([void 0],e.split(\".\"))))}catch(t){throw new c(a.INVALID_ARGUMENT,\"Invalid field path (\"+e+\"). Paths must not be empty, begin with '.', end with '.', or contain '..'\")}}(n).t_}catch(n){throw Gu((i=n)instanceof Error?i.message:i.toString(),e,!1,void 0,r)}var i}function Gu(t,e,n,r,i){var o=r&&!r.m(),s=void 0!==i,u=\"Function \"+e+\"() called with invalid data\";n&&(u+=\" (via `toFirestore()`)\");var h=\"\";return(o||s)&&(h+=\" (found\",o&&(h+=\" in field \"+r),s&&(h+=\" in document \"+i),h+=\")\"),new c(a.INVALID_ARGUMENT,(u+=\". \")+t+h)}function zu(t,e){return t.some((function(t){return t.isEqual(e)}))}var Bu=function(){function e(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return e.prototype.v_=function(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r=this;return t.__generator(this,(function(i){switch(i.label){case 0:if(this.S_(),this.mutations.length>0)throw new c(a.INVALID_ARGUMENT,\"Firestore transactions require all reads to be executed before all writes.\");return[4,function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u,a;return t.__generator(this,(function(t){switch(t.label){case 0:return r=m(e),i=Le(r.serializer)+\"/documents\",o={documents:n.map((function(t){return Ae(r.serializer,t)}))},[4,r.ku(\"BatchGetDocuments\",i,o)];case 1:return s=t.sent(),u=new Map,s.forEach((function(t){var e=function(t,e){return\"found\"in e?function(t,e){g(!!e.found);var n=Se(t,e.found.name),r=Ee(e.found.updateTime),i=new Sn({mapValue:{fields:e.found.fields}});return new kn(n,r,i,{})}(t,e):\"missing\"in e?function(t,e){g(!!e.missing),g(!!e.readTime);var n=Se(t,e.missing),r=Ee(e.readTime);return new Rn(n,r)}(t,e):y()}(r.serializer,t);u.set(e.key.toString(),e)})),a=[],[2,(n.forEach((function(t){var e=u.get(t.toString());g(!!e),a.push(e)})),a)]}}))}))}(this.Ku,e)];case 1:return[2,((n=i.sent()).forEach((function(t){t instanceof Rn||t instanceof kn?r.D_(t):y()})),n)]}}))}))},e.prototype.set=function(t,e){this.write(e.w_(t,this.Ge(t))),this.b_.add(t.toString())},e.prototype.update=function(t,e){try{this.write(e.w_(t,this.C_(t)))}catch(t){this.p_=t}this.b_.add(t.toString())},e.prototype.delete=function(t){this.write([new Nn(t,this.Ge(t))]),this.b_.add(t.toString())},e.prototype.commit=function(){return t.__awaiter(this,void 0,void 0,(function(){var e,n=this;return t.__generator(this,(function(r){switch(r.label){case 0:if(this.S_(),this.p_)throw this.p_;return e=this.y_,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(t,e){var r=A.D(e);n.mutations.push(new An(r,n.Ge(r)))})),[4,function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o;return t.__generator(this,(function(t){switch(t.label){case 0:return r=m(e),i=Le(r.serializer)+\"/documents\",o={writes:n.map((function(t){return Oe(r.serializer,t)}))},[4,r.$u(\"Commit\",i,o)];case 1:return t.sent(),[2]}}))}))}(this.Ku,this.mutations)];case 1:return r.sent(),this.V_=!0,[2]}}))}))},e.prototype.D_=function(t){var e;if(t instanceof kn)e=t.version;else{if(!(t instanceof Rn))throw y();e=st.min()}var n=this.y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new c(a.ABORTED,\"Document version changed between two reads.\")}else this.y_.set(t.key.toString(),e)},e.prototype.Ge=function(t){var e=this.y_.get(t.toString());return!this.b_.has(t.toString())&&e?fn.updateTime(e):fn.ze()},e.prototype.C_=function(t){var e=this.y_.get(t.toString());if(!this.b_.has(t.toString())&&e){if(e.isEqual(st.min()))throw new c(a.INVALID_ARGUMENT,\"Can't update a document that doesn't exist.\");return fn.updateTime(e)}return fn.exists(!0)},e.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},e.prototype.S_=function(){},e}(),Wu=function(){function e(t,e,n,r){this.cs=t,this.Ku=e,this.updateFunction=n,this.ls=r,this.N_=5,this.ys=new vr(this.cs,\"transaction_retry\")}return e.prototype.run=function(){this.F_()},e.prototype.F_=function(){var e=this;this.ys.gn((function(){return t.__awaiter(e,void 0,void 0,(function(){var e,n,r=this;return t.__generator(this,(function(t){return e=new Bu(this.Ku),(n=this.x_(e))&&n.then((function(t){r.cs.ws((function(){return e.commit().then((function(){r.ls.resolve(t)})).catch((function(t){r.k_(t)}))}))})).catch((function(t){r.k_(t)})),[2]}))}))}))},e.prototype.x_=function(t){try{var e=this.updateFunction(t);return!ut(e)&&e.catch&&e.then?e:(this.ls.reject(Error(\"Transaction callback must return a Promise\")),null)}catch(t){return this.ls.reject(t),null}},e.prototype.k_=function(t){var e=this;this.N_>0&&this.M_(t)?(this.N_-=1,this.cs.ws((function(){return e.F_(),Promise.resolve()}))):this.ls.reject(t)},e.prototype.M_=function(t){if(\"FirebaseError\"===t.name){var e=t.code;return\"aborted\"===e||\"failed-precondition\"===e||!wt(e)}return!1},e}(),Ku=function(){function e(t,e){this.credentials=t,this.cs=e,this.clientId=Q.k(),this.O_=new dr}return e.prototype.start=function(e,n,r,i){var o=this;this.L_(),this.bl=e;var s=new dr,u=!1;return this.credentials.Hc((function(e){if(!u)return u=!0,l(\"FirestoreClient\",\"Initializing. user=\",e.uid),o.B_(n,r,i,e,s).then(o.O_.resolve,o.O_.reject);o.cs.Cs((function(){return function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i;return t.__generator(this,(function(t){switch(t.label){case 0:return(r=m(e)).cs.xs(),l(\"RemoteStore\",\"RemoteStore received new credentials\"),i=Xo(r),r.Yu.add(3),[4,zo(r)];case 1:return t.sent(),i&&r.th.set(\"Unknown\"),[4,r.Gu.Jl(n)];case 2:return t.sent(),r.Yu.delete(3),[4,Go(r)];case 3:return t.sent(),[2]}}))}))}(o.ph,e)}))})),this.cs.ws((function(){return o.O_.promise})),s.promise},e.prototype.enableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!0),function(t){var e=m(t);return e.Yu.delete(0),Go(e)}(t.ph)}))},e.prototype.B_=function(e,n,r,i,o){return t.__awaiter(this,void 0,void 0,(function(){var s,u,a=this;return t.__generator(this,(function(c){switch(c.label){case 0:return c.trys.push([0,3,,4]),[4,e.initialize(s={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:i,Dh:100,persistenceSettings:r})];case 1:return c.sent(),[4,n.initialize(e,s)];case 2:return c.sent(),this.persistence=e.persistence,this.Sh=e.Sh,this.ju=e.ju,this.ql=e.ql,this.Ku=n.Ku,this.ph=n.ph,this.fi=n.fi,this.q_=n.bh,this.q_.Us=_s.bind(null,this.fi),this.q_.js=Is.bind(null,this.fi),this.persistence.Za((function(){return t.__awaiter(a,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(u=c.sent(),o.reject(u),!this.U_(u))throw u;return[2,(console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \"+u),this.B_(new cu,new fu,{jl:!1},i,o))];case 4:return[2]}}))}))},e.prototype.U_=function(t){return\"FirebaseError\"===t.name?t.code===a.FAILED_PRECONDITION||t.code===a.UNIMPLEMENTED:!(\"undefined\"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},e.prototype.L_=function(){if(this.cs.ps)throw new c(a.FAILED_PRECONDITION,\"The client has already been terminated.\")},e.prototype.disableNetwork=function(){var e=this;return this.L_(),this.cs.enqueue((function(){return e.persistence.tc(!1),function(e){return t.__awaiter(this,void 0,void 0,(function(){var n;return t.__generator(this,(function(t){switch(t.label){case 0:return(n=m(e)).Yu.add(0),[4,zo(n)];case 1:return t.sent(),n.th.set(\"Offline\"),[2]}}))}))}(e.ph)}))},e.prototype.terminate=function(){var e=this;this.cs.Ds();var n=new dr;return this.cs.bs((function(){return t.__awaiter(e,void 0,void 0,(function(){var e,r;return t.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,Bo(this.ph)];case 1:return t.sent(),[4,this.Sh.Di()];case 2:return t.sent(),[4,this.persistence.Di()];case 3:return t.sent(),this.credentials.Yc(),n.resolve(),[3,5];case 4:return e=t.sent(),r=Lr(e,\"Failed to shutdown persistence\"),n.reject(r),[3,5];case 5:return[2]}}))}))})),n.promise},e.prototype.waitForPendingWrites=function(){var e=this;this.L_();var n=new dr;return this.cs.ws((function(){return function(e,n){return t.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,u;return t.__generator(this,(function(t){switch(t.label){case 0:Xo((r=m(e)).ph)||l(\"SyncEngine\",\"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.\"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,function(t){var e=m(t);return e.persistence.runTransaction(\"Get highest unacknowledged batch id\",\"readonly\",(function(t){return e.Sr.qo(t)}))}(r.ju)];case 2:return-1===(i=t.sent())?[2,void n.resolve()]:((o=r.Lh.get(i)||[]).push(n),r.Lh.set(i,o),[3,4]);case 3:return s=t.sent(),u=Lr(s,\"Initialization of waitForPendingWrites() operation failed\"),n.reject(u),[3,4];case 4:return[2]}}))}))}(e.fi,n)})),n.promise},e.prototype.listen=function(t,e,n){var r=this;this.L_();var i=new lu(n),o=new Fr(t,i,e);return this.cs.ws((function(){return Or(r.q_,o)})),function(){i.Zl(),r.cs.ws((function(){return Pr(r.q_,o)}))}},e.prototype.Q_=function(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r=this;return t.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),n=new dr,[2,(this.cs.ws((function(){return function(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s;return t.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction(\"read document\",\"readonly\",(function(t){return n.Cc.Cr(t,e)}))}(e,n)];case 1:return(i=t.sent())instanceof kn?r.resolve(i):i instanceof Rn?r.resolve(null):r.reject(new c(a.UNAVAILABLE,\"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\")),[3,3];case 2:return o=t.sent(),s=Lr(o,\"Failed to get document '\"+n+\" from cache\"),r.reject(s),[3,3];case 3:return[2]}}))}))}(r.ju,e,n)})),n.promise)]}}))}))},e.prototype.W_=function(e,n){return void 0===n&&(n={}),t.__awaiter(this,void 0,void 0,(function(){var r,i=this;return t.__generator(this,(function(t){switch(t.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return t.sent(),r=new dr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var o=new lu({next:function(o){e.ws((function(){return Pr(t,s)}));var u=o.docs.has(n);!u&&o.fromCache?i.reject(new c(a.UNAVAILABLE,\"Failed to get document because the client is offline.\")):u&&o.fromCache&&r&&\"server\"===r.source?i.reject(new c(a.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Fr(Un(n.path),o,{includeMetadataChanges:!0,Xs:!0});return Or(t,s)}(i.q_,i.cs,e,n,r)})),r.promise)]}}))}))},e.prototype.j_=function(e){return t.__awaiter(this,void 0,void 0,(function(){var n,r=this;return t.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),n=new dr,[2,(this.cs.ws((function(){return function(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s,u,a,c;return t.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,To(e,n,!0)];case 1:return i=t.sent(),o=new ys(n,i.Fc),s=o.wh(i.documents),u=o.yr(s,!1),r.resolve(u.snapshot),[3,3];case 2:return a=t.sent(),c=Lr(a,\"Failed to execute query '\"+n+\" against cache\"),r.reject(c),[3,3];case 3:return[2]}}))}))}(r.ju,e,n)})),n.promise)]}}))}))},e.prototype.K_=function(e,n){return void 0===n&&(n={}),t.__awaiter(this,void 0,void 0,(function(){var r,i=this;return t.__generator(this,(function(t){switch(t.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return t.sent(),r=new dr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var o=new lu({next:function(n){e.ws((function(){return Pr(t,s)})),n.fromCache&&\"server\"===r.source?i.reject(new c(a.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Fr(n,o,{includeMetadataChanges:!0,Xs:!0});return Or(t,s)}(i.q_,i.cs,e,n,r)})),r.promise)]}}))}))},e.prototype.write=function(e){var n=this;this.L_();var r=new dr;return this.cs.ws((function(){return function(e,n,r){return t.__awaiter(this,void 0,void 0,(function(){var i,o,s,u;return t.__generator(this,(function(t){switch(t.label){case 0:i=Qs(e),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,function(t,e){var n,r=m(t),i=ot.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ot());return r.persistence.runTransaction(\"Locally write mutations\",\"readwrite\",(function(t){return r.Cc.kr(t,o).next((function(o){n=o;for(var s=[],u=0,a=e;u<a.length;u++){var c=a[u],h=yn(c,n.get(c.key));null!=h&&s.push(new _n(c.key,h,xn(h.proto.mapValue),fn.exists(!0)))}return r.Sr.ko(t,i,s,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(i.ju,n)];case 2:return o=t.sent(),i.Sh.xi(o.batchId),function(t,e,n){var r=t.Oh[t.currentUser.ti()];r||(r=new bt(H)),r=r.ot(e,n),t.Oh[t.currentUser.ti()]=r}(i,o.batchId,r),[4,Vs(i,o.wr)];case 3:return t.sent(),[4,is(i.ph)];case 4:return t.sent(),[3,6];case 5:return s=t.sent(),u=Lr(s,\"Failed to persist write\"),r.reject(u),[3,6];case 6:return[2]}}))}))}(n.fi,e,r)})),r.promise},e.prototype.U=function(){return this.bl.U},e.prototype.G_=function(e){var n=this;this.L_();var r=new lu(e);return this.cs.ws((function(){return t.__awaiter(n,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,function(t,e){m(t).qs.add(e),e.next()}(this.q_,r)]}))}))})),function(){r.Zl(),n.cs.ws((function(){return t.__awaiter(n,void 0,void 0,(function(){return t.__generator(this,(function(t){return[2,function(t,e){m(t).qs.delete(e)}(this.q_,r)]}))}))}))}},Object.defineProperty(e.prototype,\"z_\",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),e.prototype.transaction=function(t){var e=this;this.L_();var n=new dr;return this.cs.ws((function(){return new Wu(e.cs,e.Ku,t,n).run(),Promise.resolve()})),n.promise},e}();function Qu(t){return function(t,e){if(\"object\"!=typeof t||null===t)return!1;for(var n=t,r=0,i=[\"next\",\"error\",\"complete\"];r<i.length;r++){var o=i[r];if(o in n&&\"function\"==typeof n[o])return!0}return!1}(t)}var Hu=function(){function t(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.H_=n,this.Y_=r,this.J_=i}return t.prototype.X_=function(t){switch(Jt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return se(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(ue(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw y()}},t.prototype.if=function(t){var e=this,n={};return _(t.fields||{},(function(t,r){n[t]=e.X_(r)})),n},t.prototype.nf=function(t){return new Eu(se(t.latitude),se(t.longitude))},t.prototype.sf=function(t){var e=this;return(t.values||[]).map((function(t){return e.X_(t)}))},t.prototype.tf=function(t){switch(this.H_){case\"previous\":var e=function Yt(t){var e=t.mapValue.fields.__previous_value__;return Ht(e)?Yt(e):e}(t);return null==e?null:this.X_(e);case\"estimate\":return this.Z_($t(t));default:return null}},t.prototype.Z_=function(t){var e=oe(t),n=new ot(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.ef=function(t){var e=E.g(t);g(He(e));var n=new rt(e.get(1),e.get(3)),r=new A(e.u(5));return n.isEqual(this.U)||p(\"Document \"+r+\" contains a document reference within a different database (\"+n.projectId+\"/\"+n.database+\") which is not supported. It will be treated as a reference in the current database (\"+this.U.projectId+\"/\"+this.U.database+\") instead.\"),this.Y_(r)},t}(),Yu=ui.ho,$u=function(){function t(t){var e,n,r,i,o;if(void 0===t.host){if(void 0!==t.ssl)throw new c(a.INVALID_ARGUMENT,\"Can't provide ssl option if host option is not set\");this.host=\"firestore.googleapis.com\",this.ssl=!0}else O(\"settings\",\"non-empty string\",\"host\",t.host),this.host=t.host,P(\"settings\",\"boolean\",\"ssl\",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(j(\"settings\",t,[\"host\",\"ssl\",\"credentials\",\"timestampsInSnapshots\",\"cacheSizeBytes\",\"experimentalForceLongPolling\",\"experimentalAutoDetectLongPolling\",\"ignoreUndefinedProperties\"]),P(\"settings\",\"object\",\"credentials\",t.credentials),this.credentials=t.credentials,P(\"settings\",\"boolean\",\"timestampsInSnapshots\",t.timestampsInSnapshots),P(\"settings\",\"boolean\",\"ignoreUndefinedProperties\",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?p(\"The setting 'timestampsInSnapshots: true' is no longer required and should be removed.\"):!1===t.timestampsInSnapshots&&p(\"Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects.\"),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,P(\"settings\",\"number\",\"cacheSizeBytes\",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=ui._o;else{if(t.cacheSizeBytes!==Yu&&t.cacheSizeBytes<ui.lo)throw new c(a.INVALID_ARGUMENT,\"cacheSizeBytes must be at least \"+ui.lo);this.cacheSizeBytes=t.cacheSizeBytes}P(\"settings\",\"boolean\",\"experimentalForceLongPolling\",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i,P(\"settings\",\"boolean\",\"experimentalAutoDetectLongPolling\",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(o=t.experimentalAutoDetectLongPolling)&&void 0!==o&&o,function(t,e,n,r){if(!0===e&&!0===r)throw new c(a.INVALID_ARGUMENT,\"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.\")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Xu=function(){function e(n,r,i,o){var s=this;if(void 0===i&&(i=new cu),void 0===o&&(o=new fu),this.rf=i,this.af=o,this.cf=null,this.uf=new xr,this.INTERNAL={delete:function(){return t.__awaiter(s,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},\"object\"==typeof n.options){var u=n;this.cf=u,this.__=e._f(u),this.ff=u.name,this.df=new Oo(r)}else{var h=n;if(!h.projectId)throw new c(a.INVALID_ARGUMENT,\"Must provide projectId\");this.__=new rt(h.projectId,h.database),this.ff=\"[DEFAULT]\",this.df=new Ro}this.wf=new $u({})}return Object.defineProperty(e.prototype,\"mf\",{get:function(){return this.Tf||(this.Tf=new ku(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){D(\"Firestore.settings\",arguments,1),k(\"Firestore.settings\",\"object\",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;var e=new $u(t);if(this.lf&&!this.wf.isEqual(e))throw new c(a.FAILED_PRECONDITION,\"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.\");this.wf=e,void 0!==e.credentials&&(this.df=function(t){if(!t)return new Ro;switch(t.type){case\"gapi\":var e=t.client;return g(!(\"object\"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Vo(e,t.sessionIndex||\"0\");case\"provider\":return t.client;default:throw new c(a.INVALID_ARGUMENT,\"makeCredentialsProvider failed due to invalid credential type\")}}(e.credentials))},e.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},e.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},e.prototype.enablePersistence=function(t){var e,n;if(this.lf)throw new c(a.FAILED_PRECONDITION,\"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.\");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&p(\"The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead.\"),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new c(a.INVALID_ARGUMENT,\"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.\");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:r,ka:i})},e.prototype.clearPersistence=function(){return t.__awaiter(this,void 0,void 0,(function(){var e,n=this;return t.__generator(this,(function(r){if(void 0!==this.lf&&!this.lf.z_)throw new c(a.FAILED_PRECONDITION,\"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.\");return e=new dr,[2,(this.uf.bs((function(){return t.__awaiter(n,void 0,void 0,(function(){var n;return t.__generator(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return t.sent(),e.resolve(),[3,3];case 2:return n=t.sent(),e.reject(n),[3,3];case 3:return[2]}}))}))})),e.promise)]}))}))},e.prototype.terminate=function(){return this.app._removeServiceInstance(\"firestore\"),this.INTERNAL.delete()},Object.defineProperty(e.prototype,\"If\",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),e.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},e.prototype.onSnapshotsInSync=function(t){return this.hf(),Qu(t)?this.lf.G_(t):(k(\"Firestore.onSnapshotsInSync\",\"function\",1,t),this.lf.G_({next:t}))},e.prototype.hf=function(){return this.lf||this.Ef(new cu,new fu,{jl:!1}),this.lf},e.prototype.Af=function(){return new nt(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},e.prototype.Ef=function(t,e,n){var r=this.Af();return this.lf=new Ku(this.df,this.uf),this.lf.start(r,t,e,n)},e._f=function(t){if(!Object.prototype.hasOwnProperty.call(t.options,\"projectId\"))throw new c(a.INVALID_ARGUMENT,'\"projectId\" not provided in firebase.initializeApp.');var n=t.options.projectId;if(!n||\"string\"!=typeof n)throw new c(a.INVALID_ARGUMENT,\"projectId must be a string in FirebaseApp.options\");return new rt(n)},Object.defineProperty(e.prototype,\"app\",{get:function(){if(!this.cf)throw new c(a.FAILED_PRECONDITION,\"Firestore was not initialized using the Firebase SDK. 'app' is not available\");return this.cf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){return D(\"Firestore.collection\",arguments,1),k(\"Firestore.collection\",\"non-empty string\",1,t),this.hf(),new la(E.g(t),this,null)},e.prototype.doc=function(t){return D(\"Firestore.doc\",arguments,1),k(\"Firestore.doc\",\"non-empty string\",1,t),this.hf(),ta.Rf(E.g(t),this,null)},e.prototype.collectionGroup=function(t){if(D(\"Firestore.collectionGroup\",arguments,1),k(\"Firestore.collectionGroup\",\"non-empty string\",1,t),t.indexOf(\"/\")>=0)throw new c(a.INVALID_ARGUMENT,\"Invalid collection ID '\"+t+\"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.\");return this.hf(),new ha(function(t){return new Pn(E.P(),t)}(t),this,null)},e.prototype.runTransaction=function(t){var e=this;return D(\"Firestore.runTransaction\",arguments,1),k(\"Firestore.runTransaction\",\"function\",1,t),this.hf().transaction((function(n){return t(new Ju(e,n))}))},e.prototype.batch=function(){return this.hf(),new Zu(this)},Object.defineProperty(e,\"logLevel\",{get:function(){switch(f()){case n.LogLevel.DEBUG:return\"debug\";case n.LogLevel.ERROR:return\"error\";case n.LogLevel.SILENT:return\"silent\";case n.LogLevel.WARN:return\"warn\";case n.LogLevel.INFO:return\"info\";case n.LogLevel.VERBOSE:return\"verbose\";default:return\"error\"}},enumerable:!1,configurable:!0}),e.setLogLevel=function(t){D(\"Firestore.setLogLevel\",arguments,1),U(\"setLogLevel\",[\"debug\",\"error\",\"silent\",\"warn\",\"info\",\"verbose\"],1,t),h.setLogLevel(t)},e.prototype.gf=function(){return this.wf.timestampsInSnapshots},e.prototype.Pf=function(){return this.wf},e}(),Ju=function(){function t(t,e){this.yf=t,this.Vf=e}return t.prototype.get=function(t){var e=this;D(\"Transaction.get\",arguments,1);var n=ya(\"Transaction.get\",t,this.yf);return this.Vf.v_([n.f_]).then((function(t){if(!t||1!==t.length)return y();var r=t[0];if(r instanceof Rn)return new na(e.yf,n.f_,null,!1,!1,n.d_);if(r instanceof kn)return new na(e.yf,n.f_,r,!1,!1,n.d_);throw y()}))},t.prototype.set=function(t,e,n){L(\"Transaction.set\",arguments,2,3);var r=ya(\"Transaction.set\",t,this.yf);n=pa(\"Transaction.set\",n);var i=ma(r.d_,e,n),o=Ru(this.yf.mf,\"Transaction.set\",r.f_,i,null!==r.d_,n);return this.Vf.set(r.f_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return\"string\"==typeof e||e instanceof du?(x(\"Transaction.update\",arguments,3),r=ya(\"Transaction.update\",t,this.yf),i=Pu(this.yf.mf,\"Transaction.update\",r.f_,e,n,o)):(D(\"Transaction.update\",arguments,2),r=ya(\"Transaction.update\",t,this.yf),i=Ou(this.yf.mf,\"Transaction.update\",r.f_,e)),this.Vf.update(r.f_,i),this},t.prototype.delete=function(t){D(\"Transaction.delete\",arguments,1);var e=ya(\"Transaction.delete\",t,this.yf);return this.Vf.delete(e.f_),this},t}(),Zu=function(){function t(t){this.yf=t,this.pf=[],this.bf=!1}return t.prototype.set=function(t,e,n){L(\"WriteBatch.set\",arguments,2,3),this.vf();var r=ya(\"WriteBatch.set\",t,this.yf);n=pa(\"WriteBatch.set\",n);var i=ma(r.d_,e,n),o=Ru(this.yf.mf,\"WriteBatch.set\",r.f_,i,null!==r.d_,n);return this.pf=this.pf.concat(o.w_(r.f_,fn.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.vf(),\"string\"==typeof e||e instanceof du?(x(\"WriteBatch.update\",arguments,3),r=ya(\"WriteBatch.update\",t,this.yf),i=Pu(this.yf.mf,\"WriteBatch.update\",r.f_,e,n,o)):(D(\"WriteBatch.update\",arguments,2),r=ya(\"WriteBatch.update\",t,this.yf),i=Ou(this.yf.mf,\"WriteBatch.update\",r.f_,e)),this.pf=this.pf.concat(i.w_(r.f_,fn.exists(!0))),this},t.prototype.delete=function(t){D(\"WriteBatch.delete\",arguments,1),this.vf();var e=ya(\"WriteBatch.delete\",t,this.yf);return this.pf=this.pf.concat(new Nn(e.f_,fn.ze())),this},t.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},t.prototype.vf=function(){if(this.bf)throw new c(a.FAILED_PRECONDITION,\"A write batch can no longer be used after commit() has been called.\")},t}(),ta=function(e){function n(t,n,r){var i=this;return(i=e.call(this,n.__,t,r)||this).f_=t,i.firestore=n,i.d_=r,i.lf=i.firestore.hf(),i}return t.__extends(n,e),n.Rf=function(t,e,r){if(t.length%2!=0)throw new c(a.INVALID_ARGUMENT,\"Invalid document reference. Document references must have an even number of segments, but \"+t.R()+\" has \"+t.length);return new n(new A(t),e,r)},Object.defineProperty(n.prototype,\"id\",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,\"parent\",{get:function(){return new la(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,\"path\",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),n.prototype.collection=function(t){if(D(\"DocumentReference.collection\",arguments,1),k(\"DocumentReference.collection\",\"non-empty string\",1,t),!t)throw new c(a.INVALID_ARGUMENT,\"Must provide a non-empty collection name to collection()\");var e=E.g(t);return new la(this.f_.path.child(e),this.firestore,null)},n.prototype.isEqual=function(t){if(!(t instanceof n))throw G(\"isEqual\",\"DocumentReference\",1,t);return this.firestore===t.firestore&&this.f_.isEqual(t.f_)&&this.d_===t.d_},n.prototype.set=function(t,e){L(\"DocumentReference.set\",arguments,1,2),e=pa(\"DocumentReference.set\",e);var n=ma(this.d_,t,e),r=Ru(this.firestore.mf,\"DocumentReference.set\",this.f_,n,null!==this.d_,e);return this.lf.write(r.w_(this.f_,fn.ze()))},n.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return\"string\"==typeof t||t instanceof du?(x(\"DocumentReference.update\",arguments,2),n=Pu(this.firestore.mf,\"DocumentReference.update\",this.f_,t,e,r)):(D(\"DocumentReference.update\",arguments,1),n=Ou(this.firestore.mf,\"DocumentReference.update\",this.f_,t)),this.lf.write(n.w_(this.f_,fn.exists(!0)))},n.prototype.delete=function(){return D(\"DocumentReference.delete\",arguments,0),this.lf.write([new Nn(this.f_,fn.ze())])},n.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];L(\"DocumentReference.onSnapshot\",arguments,1,4);var s={includeMetadataChanges:!1},u=0;\"object\"!=typeof i[u]||Qu(i[u])||(j(\"DocumentReference.onSnapshot\",s=i[u],[\"includeMetadataChanges\"]),P(\"DocumentReference.onSnapshot\",\"boolean\",\"includeMetadataChanges\",s.includeMetadataChanges),u++);var a={includeMetadataChanges:s.includeMetadataChanges};if(Qu(i[u])){var c=i[u];i[u]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[u+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[u+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else k(\"DocumentReference.onSnapshot\",\"function\",u,i[u]),R(\"DocumentReference.onSnapshot\",\"function\",u+1,i[u+1]),R(\"DocumentReference.onSnapshot\",\"function\",u+2,i[u+2]);var h={next:function(t){i[u]&&i[u](r.Sf(t))},error:i[u+1],complete:i[u+2]};return this.lf.listen(Un(this.f_.path),a,h)},n.prototype.get=function(t){var e=this;L(\"DocumentReference.get\",arguments,0,1),va(\"DocumentReference.get\",t);var n=this.firestore.hf();return t&&\"cache\"===t.source?n.Q_(this.f_).then((function(t){return new na(e.firestore,e.f_,t,!0,t instanceof kn&&t.Je,e.d_)})):n.W_(this.f_,t).then((function(t){return e.Sf(t)}))},n.prototype.withConverter=function(t){return new n(this.f_,this.firestore,t)},n.prototype.Sf=function(t){var e=t.docs.get(this.f_);return new na(this.firestore,this.f_,e,t.fromCache,t.hasPendingWrites,this.d_)},n}(Au),ea=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),na=function(){function t(t,e,n,r,i,o){this.yf=t,this.f_=e,this.Df=n,this.Cf=r,this.Nf=i,this.d_=o}return t.prototype.data=function(t){var e=this;if(L(\"DocumentSnapshot.data\",arguments,0,1),t=da(\"DocumentSnapshot.data\",t),this.Df){if(this.d_){var n=new ra(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,t)}return new Hu(this.yf.__,this.yf.gf(),t.serverTimestamps||\"none\",(function(t){return new ta(t,e.yf,null)}),(function(t){return new et(t)})).X_(this.Df.rn())}},t.prototype.get=function(t,e){var n=this;if(L(\"DocumentSnapshot.get\",arguments,1,2),e=da(\"DocumentSnapshot.get\",e),this.Df){var r=this.Df.data().field(qu(\"DocumentSnapshot.get\",t,this.f_));if(null!==r)return new Hu(this.yf.__,this.yf.gf(),e.serverTimestamps||\"none\",(function(t){return new ta(t,n.yf,n.d_)}),(function(t){return new et(t)})).X_(r)}},Object.defineProperty(t.prototype,\"id\",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"ref\",{get:function(){return new ta(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"exists\",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"metadata\",{get:function(){return new ea(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw G(\"isEqual\",\"DocumentSnapshot\",1,e);return this.yf===e.yf&&this.Cf===e.Cf&&this.f_.isEqual(e.f_)&&(null===this.Df?null===e.Df:this.Df.isEqual(e.Df))&&this.d_===e.d_},t}(),ra=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.prototype.data=function(t){return e.prototype.data.call(this,t)},n}(na);function ia(t,e,n,r,i,o,s){var u;if(i.p()){if(\"array-contains\"===o||\"array-contains-any\"===o)throw new c(a.INVALID_ARGUMENT,\"Invalid Query. You can't perform '\"+o+\"' queries on FieldPath.documentId().\");if(\"in\"===o||\"not-in\"===o){ua(s,o);for(var h=[],f=0,l=s;f<l.length;f++)h.push(sa(r,t,l[f]));u={arrayValue:{values:h}}}else u=sa(r,t,s)}else\"in\"!==o&&\"not-in\"!==o&&\"array-contains-any\"!==o||ua(s,o),u=Vu(n,e,s,\"in\"===o||\"not-in\"===o);var d=Jn.create(i,o,u);return function(t,e){if(e.hn()){var n=qn(t);if(null!==n&&!n.isEqual(e.field))throw new c(a.INVALID_ARGUMENT,\"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '\"+n.toString()+\"' and '\"+e.field.toString()+\"'\");var r=Mn(t);null!==r&&aa(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case\"!=\":return[\"!=\",\"not-in\"];case\"array-contains\":return[\"array-contains\",\"array-contains-any\",\"not-in\"];case\"in\":return[\"array-contains-any\",\"in\",\"not-in\"];case\"array-contains-any\":return[\"array-contains\",\"array-contains-any\",\"in\",\"not-in\"];case\"not-in\":return[\"array-contains\",\"array-contains-any\",\"in\",\"not-in\",\"!=\"];default:return[]}}(e.op));if(null!==i)throw new c(a.INVALID_ARGUMENT,i===e.op?\"Invalid query. You cannot use more than one '\"+e.op.toString()+\"' filter.\":\"Invalid query. You cannot use '\"+e.op.toString()+\"' filters with '\"+i.toString()+\"' filters.\")}(t,d),d}function oa(t,e,n){if(null!==t.startAt)throw new c(a.INVALID_ARGUMENT,\"Invalid query. You must not call startAt() or startAfter() before calling orderBy().\");if(null!==t.endAt)throw new c(a.INVALID_ARGUMENT,\"Invalid query. You must not call endAt() or endBefore() before calling orderBy().\");var r=new fr(e,n);return function(t,e){if(null===Mn(t)){var n=qn(t);null!==n&&aa(0,n,e.field)}}(t,r),r}function sa(t,e,n){if(\"string\"==typeof n){if(\"\"===n)throw new c(a.INVALID_ARGUMENT,\"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.\");if(!jn(e)&&-1!==n.indexOf(\"/\"))throw new c(a.INVALID_ARGUMENT,\"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '\"+n+\"' contains a '/' character.\");var r=e.path.child(E.g(n));if(!A.F(r))throw new c(a.INVALID_ARGUMENT,\"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\"+r+\"' is not because it has an odd number of segments (\"+r.length+\").\");return ae(t,new A(r))}if(n instanceof Au)return ae(t,n.f_);throw new c(a.INVALID_ARGUMENT,\"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: \"+M(n)+\".\")}function ua(t,e){if(!Array.isArray(t)||0===t.length)throw new c(a.INVALID_ARGUMENT,\"Invalid Query. A non-empty array is required for '\"+e.toString()+\"' filters.\");if(t.length>10)throw new c(a.INVALID_ARGUMENT,\"Invalid Query. '\"+e.toString()+\"' filters support a maximum of 10 elements in the value array.\");if(\"in\"===e||\"array-contains-any\"===e){if(t.indexOf(null)>=0)throw new c(a.INVALID_ARGUMENT,\"Invalid Query. '\"+e.toString()+\"' filters cannot contain 'null' in the value array.\");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new c(a.INVALID_ARGUMENT,\"Invalid Query. '\"+e.toString()+\"' filters cannot contain 'NaN' in the value array.\")}}function aa(t,e,n){if(!n.isEqual(e))throw new c(a.INVALID_ARGUMENT,\"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '\"+e.toString()+\"' and so you must also use '\"+e.toString()+\"' as your first orderBy(), but your first orderBy() is on field '\"+n.toString()+\"' instead.\")}function ca(t){if(Fn(t)&&0===t.on.length)throw new c(a.UNIMPLEMENTED,\"limitToLast() queries require specifying at least one orderBy() clause\")}var ha=function(){function e(t,e,n){this.Ff=t,this.firestore=e,this.d_=n}return e.prototype.where=function(t,n,r){D(\"Query.where\",arguments,3),q(\"Query.where\",3,r);var i=U(\"Query.where\",[\"<\",\"<=\",\"==\",\"!=\",\">=\",\">\",\"array-contains\",\"in\",\"array-contains-any\",\"not-in\"],2,n),o=qu(\"Query.where\",t),s=ia(this.Ff,\"Query.where\",this.firestore.mf,this.firestore.__,o,i,r);return new e(function(t,e){var n=t.filters.concat([e]);return new Pn(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Ff,s),this.firestore,this.d_)},e.prototype.orderBy=function(t,n){var r;if(L(\"Query.orderBy\",arguments,1,2),R(\"Query.orderBy\",\"non-empty string\",2,n),void 0===n||\"asc\"===n)r=\"asc\";else{if(\"desc\"!==n)throw new c(a.INVALID_ARGUMENT,\"Function Query.orderBy() has unknown direction '\"+n+\"', expected 'asc' or 'desc'.\");r=\"desc\"}var i=qu(\"Query.orderBy\",t),o=oa(this.Ff,i,r);return new e(function(t,e){var n=t.on.concat([e]);return new Pn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Ff,o),this.firestore,this.d_)},e.prototype.limit=function(t){return D(\"Query.limit\",arguments,1),k(\"Query.limit\",\"number\",1,t),z(\"Query.limit\",1,t),new e(Bn(this.Ff,t,\"F\"),this.firestore,this.d_)},e.prototype.limitToLast=function(t){return D(\"Query.limitToLast\",arguments,1),k(\"Query.limitToLast\",\"number\",1,t),z(\"Query.limitToLast\",1,t),new e(Bn(this.Ff,t,\"L\"),this.firestore,this.d_)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x(\"Query.startAt\",arguments,1);var i=this.xf(\"Query.startAt\",t,n,!0);return new e(Wn(this.Ff,i),this.firestore,this.d_)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x(\"Query.startAfter\",arguments,1);var i=this.xf(\"Query.startAfter\",t,n,!1);return new e(Wn(this.Ff,i),this.firestore,this.d_)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x(\"Query.endBefore\",arguments,1);var i=this.xf(\"Query.endBefore\",t,n,!0);return new e(Kn(this.Ff,i),this.firestore,this.d_)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];x(\"Query.endAt\",arguments,1);var i=this.xf(\"Query.endAt\",t,n,!1);return new e(Kn(this.Ff,i),this.firestore,this.d_)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G(\"isEqual\",\"Query\",1,t);return this.firestore===t.firestore&&Qn(this.Ff,t.Ff)&&this.d_===t.d_},e.prototype.withConverter=function(t){return new e(this.Ff,this.firestore,t)},e.prototype.xf=function(e,n,r,i){if(q(e,1,n),n instanceof na)return D(e,t.__spreadArrays([n],r),1),function(t,e,n,r,i){if(!r)throw new c(a.NOT_FOUND,\"Can't use a DocumentSnapshot that doesn't exist for \"+n+\"().\");for(var o=[],s=0,u=Gn(t);s<u.length;s++){var h=u[s];if(h.field.p())o.push(ae(e,r.key));else{var f=r.field(h.field);if(Ht(f))throw new c(a.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field \"'+h.field+'\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===f){var l=h.field.R();throw new c(a.INVALID_ARGUMENT,\"Invalid query. You are trying to start or end a query using a document for which the field '\"+l+\"' (used as the orderBy) does not exist.\")}o.push(f)}}return new ur(o,i)}(this.Ff,this.firestore.__,e,n.Df,i);var o=[n].concat(r);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new c(a.INVALID_ARGUMENT,\"Too many arguments provided to \"+r+\"(). The number of arguments must be less than or equal to the number of orderBy() clauses\");for(var u=[],h=0;h<i.length;h++){var f=i[h];if(s[h].field.p()){if(\"string\"!=typeof f)throw new c(a.INVALID_ARGUMENT,\"Invalid query. Expected a string for document ID in \"+r+\"(), but got a \"+typeof f);if(!jn(t)&&-1!==f.indexOf(\"/\"))throw new c(a.INVALID_ARGUMENT,\"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \"+r+\"() must be a plain document ID, but '\"+f+\"' contains a slash.\");var l=t.path.child(E.g(f));if(!A.F(l))throw new c(a.INVALID_ARGUMENT,\"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \"+r+\"() must result in a valid document path, but '\"+l+\"' is not because it contains an odd number of segments.\");var p=new A(l);u.push(ae(e,p))}else{var d=Vu(n,r,f);u.push(d)}}return new ur(u,o)}(this.Ff,this.firestore.__,this.firestore.mf,e,o,i)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];L(\"Query.onSnapshot\",arguments,1,4);var s={},u=0;if(\"object\"!=typeof i[u]||Qu(i[u])||(j(\"Query.onSnapshot\",s=i[u],[\"includeMetadataChanges\"]),P(\"Query.onSnapshot\",\"boolean\",\"includeMetadataChanges\",s.includeMetadataChanges),u++),Qu(i[u])){var a=i[u];i[u]=null===(t=a.next)||void 0===t?void 0:t.bind(a),i[u+1]=null===(e=a.error)||void 0===e?void 0:e.bind(a),i[u+2]=null===(n=a.complete)||void 0===n?void 0:n.bind(a)}else k(\"Query.onSnapshot\",\"function\",u,i[u]),R(\"Query.onSnapshot\",\"function\",u+1,i[u+1]),R(\"Query.onSnapshot\",\"function\",u+2,i[u+2]);var c={next:function(t){i[u]&&i[u](new fa(r.firestore,r.Ff,t,r.d_))},error:i[u+1],complete:i[u+2]};return ca(this.Ff),this.firestore.hf().listen(this.Ff,s,c)},e.prototype.get=function(t){var e=this;L(\"Query.get\",arguments,0,1),va(\"Query.get\",t),ca(this.Ff);var n=this.firestore.hf();return(t&&\"cache\"===t.source?n.j_(this.Ff):n.K_(this.Ff,t)).then((function(t){return new fa(e.firestore,e.Ff,t,e.d_)}))},e}(),fa=function(){function t(t,e,n,r){this.yf=t,this.$f=e,this.kf=n,this.d_=r,this.Mf=null,this.Of=null,this.metadata=new ea(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,\"docs\",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"empty\",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"size\",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;L(\"QuerySnapshot.forEach\",arguments,1,2),k(\"QuerySnapshot.forEach\",\"function\",1,t),this.kf.docs.forEach((function(r){t.call(e,n.Lf(r,n.metadata.fromCache,n.kf.Wt.has(r.key)))}))},Object.defineProperty(t.prototype,\"query\",{get:function(){return new ha(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(j(\"QuerySnapshot.docChanges\",t,[\"includeMetadataChanges\"]),P(\"QuerySnapshot.docChanges\",\"boolean\",\"includeMetadataChanges\",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.kf.Kt)throw new c(a.INVALID_ARGUMENT,\"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");return this.Mf&&this.Of===e||(this.Mf=function(t,e,n){if(t.Qt.m()){var r=0;return t.docChanges.map((function(e){return{type:\"added\",doc:n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),oldIndex:-1,newIndex:r++}}))}var i=t.Qt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),o=-1,s=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(s=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:ga(e.type),doc:r,oldIndex:o,newIndex:s}}))}(this.kf,e,this.Lf.bind(this)),this.Of=e),this.Mf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G(\"isEqual\",\"QuerySnapshot\",1,e);return this.yf===e.yf&&Qn(this.$f,e.$f)&&this.kf.isEqual(e.kf)&&this.d_===e.d_},t.prototype.Lf=function(t,e,n){return new ra(this.yf,t.key,t,e,n,this.d_)},t}(),la=function(e){function n(t,n,r){var i=this;if((i=e.call(this,Un(t),n,r)||this).Bf=t,t.length%2!=1)throw new c(a.INVALID_ARGUMENT,\"Invalid collection reference. Collection references must have an odd number of segments, but \"+t.R()+\" has \"+t.length);return i}return t.__extends(n,e),Object.defineProperty(n.prototype,\"id\",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,\"parent\",{get:function(){var t=this.Ff.path.h();return t.m()?null:new ta(new A(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,\"path\",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),n.prototype.doc=function(t){L(\"CollectionReference.doc\",arguments,0,1),0===arguments.length&&(t=Q.k()),k(\"CollectionReference.doc\",\"non-empty string\",1,t);var e=E.g(t);return ta.Rf(this.Ff.path.child(e),this.firestore,this.d_)},n.prototype.add=function(t){D(\"CollectionReference.add\",arguments,1);var e=this.d_?this.d_.toFirestore(t):t;k(\"CollectionReference.add\",\"object\",1,e);var n=this.doc();return new ta(n.f_,this.firestore,null).set(e).then((function(){return n}))},n.prototype.withConverter=function(t){return new n(this.Bf,this.firestore,t)},n}(ha);function pa(t,e){if(void 0===e)return{merge:!1};if(j(t,e,[\"merge\",\"mergeFields\"]),P(t,\"boolean\",\"merge\",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires its \"+e+\" option to be an array, but it was: \"+M(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new c(a.INVALID_ARGUMENT,\"Function \"+t+\"() requires all \"+e+\" elements to be a string or a FieldPath, but the value at index \"+o+\" was: \"+M(r[o]))}(t,\"mergeFields\",0,r,(function(t){return\"string\"==typeof t||t instanceof du}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new c(a.INVALID_ARGUMENT,\"Invalid options passed to function \"+t+'(): You cannot specify both \"merge\" and \"mergeFields\".');return e}function da(t,e){return void 0===e?{}:(j(t,e,[\"serverTimestamps\"]),V(t,0,\"serverTimestamps\",e.serverTimestamps,[\"estimate\",\"previous\",\"none\"]),e)}function va(t,e){R(t,\"object\",1,e),e&&(j(t,e,[\"source\"]),V(t,0,\"source\",e.source,[\"default\",\"server\",\"cache\"]))}function ya(t,e,n){if(e instanceof Au){if(e.firestore!==n)throw new c(a.INVALID_ARGUMENT,\"Provided document reference is from a different Firestore instance.\");return e}throw G(t,\"DocumentReference\",1,e)}function ga(t){switch(t){case 0:return\"added\";case 2:case 3:return\"modified\";case 1:return\"removed\";default:return y()}}function ma(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var wa=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t.__extends(n,e),n.serverTimestamp=function(){S(\"FieldValue.serverTimestamp\",arguments);var t=new wu(\"serverTimestamp\");return t.e_=\"FieldValue.serverTimestamp\",new n(t)},n.delete=function(){S(\"FieldValue.delete\",arguments);var t=new gu(\"deleteField\");return t.e_=\"FieldValue.delete\",new n(t)},n.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x(\"FieldValue.arrayUnion\",arguments,1);var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x(\"arrayUnion()\",arguments,1),new _u(\"arrayUnion\",t)}).apply(void 0,t);return r.e_=\"FieldValue.arrayUnion\",new n(r)},n.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];x(\"FieldValue.arrayRemove\",arguments,1);var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x(\"arrayRemove()\",arguments,1),new bu(\"arrayRemove\",t)}).apply(void 0,t);return r.e_=\"FieldValue.arrayRemove\",new n(r)},n.increment=function(t){k(\"FieldValue.increment\",\"number\",1,t),D(\"FieldValue.increment\",arguments,1);var e=function(t){return new Iu(\"increment\",t)}(t);return e.e_=\"FieldValue.increment\",new n(e)},n.prototype.isEqual=function(t){return this.l_.isEqual(t.l_)},n}(Tu),_a={Firestore:Xu,GeoPoint:Eu,Timestamp:ot,Blob:et,Transaction:Ju,WriteBatch:Zu,DocumentReference:ta,DocumentSnapshot:na,Query:ha,QueryDocumentSnapshot:ra,QuerySnapshot:fa,CollectionReference:la,FieldPath:du,FieldValue:wa,setLogLevel:Xu.setLogLevel,CACHE_SIZE_UNLIMITED:Yu};function ba(t){!function(t,e){t.INTERNAL.registerComponent(new o.Component(\"firestore\",(function(t){return function(t,e){var n=new fu,r=new hu(n);return new Xu(t,e,r,n)}(t.getProvider(\"app\").getImmediate(),t.getProvider(\"auth-internal\"))}),\"PUBLIC\").setServiceProps(Object.assign({},_a)))}(t),t.registerVersion(\"@firebase/firestore\",\"1.18.0\")}ba(u.default),exports.__PRIVATE_registerFirestore=ba},ABqa:function(module,exports,__webpack_require__){\"use strict\";var firebase=__webpack_require__(\"wj3C\"),tslib=__webpack_require__(\"mrSG\"),component=__webpack_require__(\"S+S0\");function _interopDefaultLegacy(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var firebase__default=_interopDefaultLegacy(firebase),errorCodeMap={OK:\"ok\",CANCELLED:\"cancelled\",UNKNOWN:\"unknown\",INVALID_ARGUMENT:\"invalid-argument\",DEADLINE_EXCEEDED:\"deadline-exceeded\",NOT_FOUND:\"not-found\",ALREADY_EXISTS:\"already-exists\",PERMISSION_DENIED:\"permission-denied\",UNAUTHENTICATED:\"unauthenticated\",RESOURCE_EXHAUSTED:\"resource-exhausted\",FAILED_PRECONDITION:\"failed-precondition\",ABORTED:\"aborted\",OUT_OF_RANGE:\"out-of-range\",UNIMPLEMENTED:\"unimplemented\",INTERNAL:\"internal\",UNAVAILABLE:\"unavailable\",DATA_LOSS:\"data-loss\"},HttpsErrorImpl=function(_super){function HttpsErrorImpl(code,message,details){var _this=_super.call(this,message)||this;return Object.setPrototypeOf(_this,HttpsErrorImpl.prototype),_this.code=code,_this.details=details,_this}return tslib.__extends(HttpsErrorImpl,_super),HttpsErrorImpl}(Error),ContextProvider=function(){function ContextProvider(authProvider,messagingProvider){var _this=this;this.auth=null,this.messaging=null,this.auth=authProvider.getImmediate({optional:!0}),this.messaging=messagingProvider.getImmediate({optional:!0}),this.auth||authProvider.get().then((function(auth){return _this.auth=auth}),(function(){})),this.messaging||messagingProvider.get().then((function(messaging){return _this.messaging=messaging}),(function(){}))}return ContextProvider.prototype.getAuthToken=function(){return tslib.__awaiter(this,void 0,void 0,(function(){var token;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:if(!this.auth)return[2,void 0];_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(token=_a.sent())?[2,token.accessToken]:[2,void 0];case 3:return _a.sent(),[2,void 0];case 4:return[2]}}))}))},ContextProvider.prototype.getInstanceIdToken=function(){return tslib.__awaiter(this,void 0,void 0,(function(){return tslib.__generator(this,(function(_a){if(!this.messaging||!(\"Notification\"in self)||\"granted\"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]}))}))},ContextProvider.prototype.getContext=function(){return tslib.__awaiter(this,void 0,void 0,(function(){var authToken,instanceIdToken;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return[4,this.getAuthToken()];case 1:return authToken=_a.sent(),[4,this.getInstanceIdToken()];case 2:return instanceIdToken=_a.sent(),[2,{authToken:authToken,instanceIdToken:instanceIdToken}]}}))}))},ContextProvider}();function mapValues(o,f){var result={};for(var key in o)o.hasOwnProperty(key)&&(result[key]=f(o[key]));return result}var instance,fetchImpl,namespaceExports,Serializer=function(){function Serializer(){}return Serializer.prototype.encode=function(data){var _this=this;if(null==data)return null;if(data instanceof Number&&(data=data.valueOf()),\"number\"==typeof data&&isFinite(data))return data;if(!0===data||!1===data)return data;if(\"[object String]\"===Object.prototype.toString.call(data))return data;if(Array.isArray(data))return data.map((function(x){return _this.encode(x)}));if(\"function\"==typeof data||\"object\"==typeof data)return mapValues(data,(function(x){return _this.encode(x)}));throw new Error(\"Data cannot be encoded in JSON: \"+data)},Serializer.prototype.decode=function(json){var _this=this;if(null==json)return json;if(json[\"@type\"])switch(json[\"@type\"]){case\"type.googleapis.com/google.protobuf.Int64Value\":case\"type.googleapis.com/google.protobuf.UInt64Value\":var value=Number(json.value);if(isNaN(value))throw new Error(\"Data cannot be decoded from JSON: \"+json);return value;default:throw new Error(\"Data cannot be decoded from JSON: \"+json)}return Array.isArray(json)?json.map((function(x){return _this.decode(x)})):\"function\"==typeof json||\"object\"==typeof json?mapValues(json,(function(x){return _this.decode(x)})):json},Serializer}(),Service=function(){function Service(app_,authProvider,messagingProvider,regionOrCustomDomain_,fetchImpl){var _this=this;void 0===regionOrCustomDomain_&&(regionOrCustomDomain_=\"us-central1\"),this.app_=app_,this.fetchImpl=fetchImpl,this.serializer=new Serializer,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(_this.deleteService())}},this.contextProvider=new ContextProvider(authProvider,messagingProvider),this.cancelAllRequests=new Promise((function(resolve){_this.deleteService=function(){return resolve()}}));try{var url=new URL(regionOrCustomDomain_);this.customDomain=url.origin,this.region=\"us-central1\"}catch(e){this.customDomain=null,this.region=regionOrCustomDomain_}}return Object.defineProperty(Service.prototype,\"app\",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Service.prototype._url=function(name){var projectId=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+\"/\"+projectId+\"/\"+this.region+\"/\"+name:null!==this.customDomain?this.customDomain+\"/\"+name:\"https://\"+this.region+\"-\"+projectId+\".cloudfunctions.net/\"+name},Service.prototype.useFunctionsEmulator=function(origin){this.emulatorOrigin=origin},Service.prototype.httpsCallable=function(name,options){var _this=this;return function(data){return _this.call(name,data,options||{})}},Service.prototype.postJSON=function(url,body,headers){return tslib.__awaiter(this,void 0,void 0,(function(){var response,json;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:headers[\"Content-Type\"]=\"application/json\",_a.label=1;case 1:return _a.trys.push([1,3,,4]),[4,this.fetchImpl(url,{method:\"POST\",body:JSON.stringify(body),headers:headers})];case 2:return response=_a.sent(),[3,4];case 3:return _a.sent(),[2,{status:0,json:null}];case 4:json=null,_a.label=5;case 5:return _a.trys.push([5,7,,8]),[4,response.json()];case 6:return json=_a.sent(),[3,8];case 7:return _a.sent(),[3,8];case 8:return[2,{status:response.status,json:json}]}}))}))},Service.prototype.call=function(name,data,options){return tslib.__awaiter(this,void 0,void 0,(function(){var url,body,headers,context,_a,timer,failAfterPromise,response,error,responseData;return tslib.__generator(this,(function(_b){switch(_b.label){case 0:return url=this._url(name),data=this.serializer.encode(data),body={data:data},headers={},[4,this.contextProvider.getContext()];case 1:return(context=_b.sent()).authToken&&(headers.Authorization=\"Bearer \"+context.authToken),context.instanceIdToken&&(headers[\"Firebase-Instance-ID-Token\"]=context.instanceIdToken),_a=function(millis){var timer,promise=new Promise((function(_,reject){timer=setTimeout((function(){reject(new HttpsErrorImpl(\"deadline-exceeded\",\"deadline-exceeded\"))}),millis)}));return{timer:timer,promise:promise}}(options.timeout||7e4),timer=_a.timer,failAfterPromise=_a.promise,[4,Promise.race([clearTimeoutWrapper(timer,this.postJSON(url,body,headers)),failAfterPromise,clearTimeoutWrapper(timer,this.cancelAllRequests)])];case 2:if(!(response=_b.sent()))throw new HttpsErrorImpl(\"cancelled\",\"Firebase Functions instance was deleted.\");if(error=function(status,bodyJSON,serializer){var code=function(status){if(status>=200&&status<300)return\"ok\";switch(status){case 0:return\"internal\";case 400:return\"invalid-argument\";case 401:return\"unauthenticated\";case 403:return\"permission-denied\";case 404:return\"not-found\";case 409:return\"aborted\";case 429:return\"resource-exhausted\";case 499:return\"cancelled\";case 500:return\"internal\";case 501:return\"unimplemented\";case 503:return\"unavailable\";case 504:return\"deadline-exceeded\"}return\"unknown\"}(status),description=code,details=void 0;try{var errorJSON=bodyJSON&&bodyJSON.error;if(errorJSON){var status_1=errorJSON.status;if(\"string\"==typeof status_1){if(!errorCodeMap[status_1])return new HttpsErrorImpl(\"internal\",\"internal\");code=errorCodeMap[status_1],description=status_1}var message=errorJSON.message;\"string\"==typeof message&&(description=message),void 0!==(details=errorJSON.details)&&(details=serializer.decode(details))}}catch(e){}return\"ok\"===code?null:new HttpsErrorImpl(code,description,details)}(response.status,response.json,this.serializer))throw error;if(!response.json)throw new HttpsErrorImpl(\"internal\",\"Response is not valid JSON object.\");if(void 0===(responseData=response.json.data)&&(responseData=response.json.result),void 0===responseData)throw new HttpsErrorImpl(\"internal\",\"Response is missing data field.\");return[2,{data:this.serializer.decode(responseData)}]}}))}))},Service}();function clearTimeoutWrapper(timer,promise){return tslib.__awaiter(this,void 0,void 0,(function(){var result;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return[4,promise];case 1:return result=_a.sent(),clearTimeout(timer),[2,result]}}))}))}instance=firebase__default.default,fetchImpl=fetch.bind(self),namespaceExports={Functions:Service},instance.INTERNAL.registerComponent(new component.Component(\"functions\",(function(container,regionOrCustomDomain){var app=container.getProvider(\"app\").getImmediate(),authProvider=container.getProvider(\"auth-internal\"),messagingProvider=container.getProvider(\"messaging\");return new Service(app,authProvider,messagingProvider,regionOrCustomDomain,fetchImpl)}),\"PUBLIC\").setServiceProps(namespaceExports).setMultipleInstances(!0)),firebase__default.default.registerVersion(\"@firebase/functions\",\"0.5.1\")},LOEa:function(module,exports,__webpack_require__){(function(){var k,firebase=__webpack_require__(\"wj3C\").default,aa=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ca=function(a){a=[\"object\"==typeof window&&window,\"object\"==typeof self&&self,\"object\"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}return globalThis}(this);function ea(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function fa(a){var b=\"undefined\"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:ea(a)}}!function(a,b){if(b){var c=ca;a=a.split(\".\");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={}),c=c[e]}(b=b(d=c[a=a[a.length-1]]))!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}(\"Promise\",(function(a){function b(g){this.b=0,this.c=void 0,this.a=[];var h=this.f();try{g(h.resolve,h.reject)}catch(m){h.reject(m)}}function c(){this.a=null}function d(g){return g instanceof b?g:new b((function(h){h(g)}))}if(a)return a;c.prototype.b=function(g){if(null==this.a){this.a=[];var h=this;this.c((function(){h.g()}))}this.a.push(g)};var e=ca.setTimeout;c.prototype.c=function(g){e(g,0)},c.prototype.g=function(){for(;this.a&&this.a.length;){var g=this.a;this.a=[];for(var h=0;h<g.length;++h){var m=g[h];g[h]=null;try{m()}catch(p){this.f(p)}}}this.a=null},c.prototype.f=function(g){this.c((function(){throw g}))},b.prototype.f=function(){function g(p){return function(v){m||(m=!0,p.call(h,v))}}var h=this,m=!1;return{resolve:g(this.v),reject:g(this.g)}},b.prototype.v=function(g){if(g===this)this.g(new TypeError(\"A Promise cannot resolve to itself\"));else if(g instanceof b)this.o(g);else{a:switch(typeof g){case\"object\":var h=null!=g;break a;case\"function\":h=!0;break a;default:h=!1}h?this.m(g):this.h(g)}},b.prototype.m=function(g){var h=void 0;try{h=g.then}catch(m){return void this.g(m)}\"function\"==typeof h?this.u(h,g):this.h(g)},b.prototype.g=function(g){this.i(2,g)},b.prototype.h=function(g){this.i(1,g)},b.prototype.i=function(g,h){if(0!=this.b)throw Error(\"Cannot settle(\"+g+\", \"+h+\"): Promise already settled in state\"+this.b);this.b=g,this.c=h,this.l()},b.prototype.l=function(){if(null!=this.a){for(var g=0;g<this.a.length;++g)f.b(this.a[g]);this.a=null}};var f=new c;return b.prototype.o=function(g){var h=this.f();g.Pa(h.resolve,h.reject)},b.prototype.u=function(g,h){var m=this.f();try{g.call(h,m.resolve,m.reject)}catch(p){m.reject(p)}},b.prototype.then=function(g,h){function m(A,Q){return\"function\"==typeof A?function(xa){try{p(A(xa))}catch(yd){v(yd)}}:Q}var p,v,B=new b((function(A,Q){p=A,v=Q}));return this.Pa(m(g,p),m(h,v)),B},b.prototype.catch=function(g){return this.then(void 0,g)},b.prototype.Pa=function(g,h){function m(){switch(p.b){case 1:g(p.c);break;case 2:h(p.c);break;default:throw Error(\"Unexpected state: \"+p.b)}}var p=this;null==this.a?f.b(m):this.a.push(m)},b.resolve=d,b.reject=function(g){return new b((function(h,m){m(g)}))},b.race=function(g){return new b((function(h,m){for(var p=fa(g),v=p.next();!v.done;v=p.next())d(v.value).Pa(h,m)}))},b.all=function(g){var h=fa(g),m=h.next();return m.done?d([]):new b((function(p,v){function B(xa){return function(yd){A[xa]=yd,0==--Q&&p(A)}}var A=[],Q=0;do{A.push(void 0),Q++,d(m.value).Pa(B(A.length-1),v),m=h.next()}while(!m.done)}))},b}));var ha=ha||{},l=this||self,ia=/^[\\w+/_-]+[=]{0,2}$/,ja=null;function ka(){}function la(a){var b=typeof a;if(\"object\"==b){if(!a)return\"null\";if(a instanceof Array)return\"array\";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(\"[object Window]\"==c)return\"object\";if(\"[object Array]\"==c||\"number\"==typeof a.length&&void 0!==a.splice&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==c||void 0!==a.call&&void 0!==a.propertyIsEnumerable&&!a.propertyIsEnumerable(\"call\"))return\"function\"}else if(\"function\"==b&&void 0===a.call)return\"object\";return b}function ma(a){var b=la(a);return\"array\"==b||\"object\"==b&&\"number\"==typeof a.length}function na(a){return\"function\"==la(a)}function n(a){var b=typeof a;return\"object\"==b&&null!=a||\"function\"==b}function oa(a){return Object.prototype.hasOwnProperty.call(a,pa)&&a[pa]||(a[pa]=++qa)}var pa=\"closure_uid_\"+(1e9*Math.random()>>>0),qa=0;function ra(a,b,c){return a.call.apply(a.bind,arguments)}function sa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,d),a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?ra:sa).apply(null,arguments)}function ta(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();return d.push.apply(d,arguments),a.apply(this,d)}}var ua=Date.now||function(){return+new Date};function r(a,b){function c(){}c.prototype=b.prototype,a.$a=b.prototype,a.prototype=new c,a.prototype.constructor=a}function t(a,b,c){this.code=va+a,this.message=b||wa[a]||\"\",this.a=c||null}function ya(a){var b=a&&a.code;return b?new t(b.substring(va.length),a.message,a.serverResponse):null}r(t,Error),t.prototype.w=function(){var a={code:this.code,message:this.message};return this.a&&(a.serverResponse=this.a),a},t.prototype.toJSON=function(){return this.w()};var Ba,va=\"auth/\",wa={\"admin-restricted-operation\":\"This operation is restricted to administrators only.\",\"argument-error\":\"\",\"app-not-authorized\":\"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.\",\"app-not-installed\":\"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.\",\"captcha-check-failed\":\"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.\",\"code-expired\":\"The SMS code has expired. Please re-send the verification code to try again.\",\"cordova-not-ready\":\"Cordova framework is not ready.\",\"cors-unsupported\":\"This browser is not supported.\",\"credential-already-in-use\":\"This credential is already associated with a different user account.\",\"custom-token-mismatch\":\"The custom token corresponds to a different audience.\",\"requires-recent-login\":\"This operation is sensitive and requires recent authentication. Log in again before retrying this request.\",\"dynamic-link-not-activated\":\"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.\",\"email-change-needs-verification\":\"Multi-factor users must always have a verified email.\",\"email-already-in-use\":\"The email address is already in use by another account.\",\"expired-action-code\":\"The action code has expired. \",\"cancelled-popup-request\":\"This operation has been cancelled due to another conflicting popup being opened.\",\"internal-error\":\"An internal error has occurred.\",\"invalid-app-credential\":\"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.\",\"invalid-app-id\":\"The mobile app identifier is not registed for the current project.\",\"invalid-user-token\":\"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.\",\"invalid-auth-event\":\"An internal error has occurred.\",\"invalid-verification-code\":\"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.\",\"invalid-continue-uri\":\"The continue URL provided in the request is invalid.\",\"invalid-cordova-configuration\":\"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.\",\"invalid-custom-token\":\"The custom token format is incorrect. Please check the documentation.\",\"invalid-dynamic-link-domain\":\"The provided dynamic link domain is not configured or authorized for the current project.\",\"invalid-email\":\"The email address is badly formatted.\",\"invalid-api-key\":\"Your API key is invalid, please check you have copied it correctly.\",\"invalid-cert-hash\":\"The SHA-1 certificate hash provided is invalid.\",\"invalid-credential\":\"The supplied auth credential is malformed or has expired.\",\"invalid-message-payload\":\"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-multi-factor-session\":\"The request does not contain a valid proof of first factor successful sign-in.\",\"invalid-oauth-provider\":\"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.\",\"invalid-oauth-client-id\":\"The OAuth client ID provided is either invalid or does not match the specified API key.\",\"unauthorized-domain\":\"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.\",\"invalid-action-code\":\"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.\",\"wrong-password\":\"The password is invalid or the user does not have a password.\",\"invalid-persistence-type\":\"The specified persistence type is invalid. It can only be local, session or none.\",\"invalid-phone-number\":\"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].\",\"invalid-provider-id\":\"The specified provider ID is invalid.\",\"invalid-recipient-email\":\"The email corresponding to this action failed to send as the provided recipient email address is invalid.\",\"invalid-sender\":\"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-verification-id\":\"The verification ID used to create the phone auth credential is invalid.\",\"invalid-tenant-id\":\"The Auth instance's tenant ID is invalid.\",\"multi-factor-info-not-found\":\"The user does not have a second factor matching the identifier provided.\",\"multi-factor-auth-required\":\"Proof of ownership of a second factor is required to complete sign-in.\",\"missing-android-pkg-name\":\"An Android Package Name must be provided if the Android App is required to be installed.\",\"auth-domain-config-required\":\"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.\",\"missing-app-credential\":\"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.\",\"missing-verification-code\":\"The phone auth credential was created with an empty SMS verification code.\",\"missing-continue-uri\":\"A continue URL must be provided in the request.\",\"missing-iframe-start\":\"An internal error has occurred.\",\"missing-ios-bundle-id\":\"An iOS Bundle ID must be provided if an App Store ID is provided.\",\"missing-multi-factor-info\":\"No second factor identifier is provided.\",\"missing-multi-factor-session\":\"The request is missing proof of first factor successful sign-in.\",\"missing-or-invalid-nonce\":\"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.\",\"missing-phone-number\":\"To send verification codes, provide a phone number for the recipient.\",\"missing-verification-id\":\"The phone auth credential was created with an empty verification ID.\",\"app-deleted\":\"This instance of FirebaseApp has been deleted.\",\"account-exists-with-different-credential\":\"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.\",\"network-request-failed\":\"A network error (such as timeout, interrupted connection or unreachable host) has occurred.\",\"no-auth-event\":\"An internal error has occurred.\",\"no-such-provider\":\"User was not linked to an account with the given provider.\",\"null-user\":\"A null user object was provided as the argument for an operation which requires a non-null user object.\",\"operation-not-allowed\":\"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.\",\"operation-not-supported-in-this-environment\":'This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.',\"popup-blocked\":\"Unable to establish a connection with the popup. It may have been blocked by the browser.\",\"popup-closed-by-user\":\"The popup has been closed by the user before finalizing the operation.\",\"provider-already-linked\":\"User can only be linked to one identity for the given provider.\",\"quota-exceeded\":\"The project's quota for this operation has been exceeded.\",\"redirect-cancelled-by-user\":\"The redirect operation has been cancelled by the user before finalizing.\",\"redirect-operation-pending\":\"A redirect sign-in operation is already pending.\",\"rejected-credential\":\"The request contains malformed or mismatching credentials.\",\"second-factor-already-in-use\":\"The second factor is already enrolled on this account.\",\"maximum-second-factor-count-exceeded\":\"The maximum allowed number of second factors on a user has been exceeded.\",\"tenant-id-mismatch\":\"The provided tenant ID does not match the Auth instance's tenant ID\",timeout:\"The operation has timed out.\",\"user-token-expired\":\"The user's credential is no longer valid. The user must sign in again.\",\"too-many-requests\":\"We have blocked all requests from this device due to unusual activity. Try again later.\",\"unauthorized-continue-uri\":\"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.\",\"unsupported-first-factor\":\"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.\",\"unsupported-persistence-type\":\"The current environment does not support the specified persistence type.\",\"unsupported-tenant-operation\":\"This operation is not supported in a multi-tenant context.\",\"unverified-email\":\"The operation requires a verified email.\",\"user-cancelled\":\"The user did not grant your application the permissions it requested.\",\"user-not-found\":\"There is no user record corresponding to this identifier. The user may have been deleted.\",\"user-disabled\":\"The user account has been disabled by an administrator.\",\"user-mismatch\":\"The supplied credentials do not correspond to the previously signed in user.\",\"user-signed-out\":\"\",\"weak-password\":\"The password must be 6 characters long or more.\",\"web-storage-unsupported\":\"This browser is not supported or 3rd party cookies and data may be disabled.\"},za={kd:{Sa:\"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",Ya:\"https://staging-securetoken.sandbox.googleapis.com/v1/token\",Va:\"https://staging-identitytoolkit.sandbox.googleapis.com/v2/\",id:\"b\"},rd:{Sa:\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",Ya:\"https://securetoken.googleapis.com/v1/token\",Va:\"https://identitytoolkit.googleapis.com/v2/\",id:\"p\"},td:{Sa:\"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",Ya:\"https://staging-securetoken.sandbox.googleapis.com/v1/token\",Va:\"https://staging-identitytoolkit.sandbox.googleapis.com/v2/\",id:\"s\"},ud:{Sa:\"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/\",Ya:\"https://test-securetoken.sandbox.googleapis.com/v1/token\",Va:\"https://test-identitytoolkit.sandbox.googleapis.com/v2/\",id:\"t\"}};function Aa(a){for(var b in za)if(za[b].id===a)return{firebaseEndpoint:(a=za[b]).Sa,secureTokenEndpoint:a.Ya,identityPlatformEndpoint:a.Va};return null}function Ca(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}}function u(a){if(Error.captureStackTrace)Error.captureStackTrace(this,u);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}function Da(a,b){for(var c=\"\",d=(a=a.split(\"%s\")).length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:\"%s\");u.call(this,c+a[d])}function Ea(a,b){throw new Da(\"Failure\"+(a?\": \"+a:\"\"),Array.prototype.slice.call(arguments,1))}function Fa(a,b){this.c=a,this.f=b,this.b=0,this.a=null}function Ga(a,b){a.f(b),100>a.b&&(a.b++,b.next=a.a,a.a=b)}function Ha(){this.b=this.a=null}Ba=Aa(\"__EID__\")?\"__EID__\":void 0,r(u,Error),u.prototype.name=\"CustomError\",r(Da,u),Da.prototype.name=\"AssertionError\",Fa.prototype.get=function(){if(0<this.b){this.b--;var a=this.a;this.a=a.next,a.next=null}else a=this.c();return a};var Ja=new Fa((function(){return new Ia}),(function(a){a.reset()}));function Ka(){var a=La,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function Ia(){this.next=this.b=this.a=null}Ha.prototype.add=function(a,b){var c=Ja.get();c.set(a,b),this.b?this.b.next=c:this.a=c,this.b=c},Ia.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},Ia.prototype.reset=function(){this.next=this.b=this.a=null};var Ma=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(\"string\"==typeof a)return\"string\"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},w=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=\"string\"==typeof a?a.split(\"\"):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Oa=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=[],e=0,f=\"string\"==typeof a?a.split(\"\"):a,g=0;g<c;g++)if(g in f){var h=f[g];b.call(void 0,h,g,a)&&(d[e++]=h)}return d},Pa=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=Array(c),e=\"string\"==typeof a?a.split(\"\"):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},Qa=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=\"string\"==typeof a?a.split(\"\"):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};function Ta(a,b){return 0<=Ma(a,b)}function Ua(a,b){var c;return(c=0<=(b=Ma(a,b)))&&Array.prototype.splice.call(a,b,1),c}function Va(a,b){!function(a,b){for(var c=\"string\"==typeof a?a.split(\"\"):a,d=a.length-1;0<=d;--d)d in c&&b.call(void 0,c[d],d,a)}(a,(function(d,e){b.call(void 0,d,e,a)&&Array.prototype.splice.call(a,e,1)}))}function Wa(a){return Array.prototype.concat.apply([],arguments)}function Xa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}var gb,Ya=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]},Za=/&/g,$a=/</g,ab=/>/g,bb=/\"/g,cb=/'/g,db=/\\x00/g,eb=/[\\x00&<>\"']/;function x(a,b){return-1!=a.indexOf(b)}function fb(a,b){return a<b?-1:a>b?1:0}a:{var hb=l.navigator;if(hb){var ib=hb.userAgent;if(ib){gb=ib;break a}}gb=\"\"}function y(a){return x(gb,a)}function jb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function kb(a){for(var b in a)return!1;return!0}function lb(a){var c,b={};for(c in a)b[c]=a[c];return b}var mb=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");function z(a,b){for(var c,d,e=1;e<arguments.length;e++){for(c in d=arguments[e])a[c]=d[c];for(var f=0;f<mb.length;f++)c=mb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function nb(a,b){a:{try{var c=a&&a.ownerDocument,d=c&&(c.defaultView||c.parentWindow);if((d=d||l).Element&&d.Location){var e=d;break a}}catch(g){}e=null}if(e&&void 0!==e[b]&&(!a||!(a instanceof e[b])&&(a instanceof e.Location||a instanceof e.Element))){if(n(a))try{var f=a.constructor.displayName||a.constructor.name||Object.prototype.toString.call(a)}catch(g){f=\"<object could not be stringified>\"}else f=void 0===a?\"undefined\":null===a?\"null\":typeof a;Ea(\"Argument is not a %s (or a non-Element, non-Location mock); got: %s\",b,f)}}function ob(a,b){this.a=a===pb&&b||\"\",this.b=qb}function rb(a){return a instanceof ob&&a.constructor===ob&&a.b===qb?a.a:(Ea(\"expected object of type Const, got '\"+a+\"'\"),\"type_error:Const\")}ob.prototype.sa=!0,ob.prototype.ra=function(){return this.a},ob.prototype.toString=function(){return\"Const{\"+this.a+\"}\"};var qb={},pb={},sb=new ob(pb,\"\");function tb(a,b){this.a=a===ub&&b||\"\",this.b=vb}function wb(a){return a instanceof tb&&a.constructor===tb&&a.b===vb?a.a:(Ea(\"expected object of type TrustedResourceUrl, got '\"+a+\"' of type \"+la(a)),\"type_error:TrustedResourceUrl\")}function xb(a,b){var c=rb(a);if(!yb.test(c))throw Error(\"Invalid TrustedResourceUrl format: \"+c);return a=c.replace(zb,(function(d,e){if(!Object.prototype.hasOwnProperty.call(b,e))throw Error('Found marker, \"'+e+'\", in format string, \"'+c+'\", but no valid label mapping found in args: '+JSON.stringify(b));return(d=b[e])instanceof ob?rb(d):encodeURIComponent(String(d))})),new tb(ub,a)}tb.prototype.sa=!0,tb.prototype.ra=function(){return this.a.toString()},tb.prototype.toString=function(){return\"TrustedResourceUrl{\"+this.a+\"}\"};var zb=/%{(\\w+)}/g,yb=/^((https:)?\\/\\/[0-9a-z.:[\\]-]+\\/|\\/[^/\\\\]|[^:/\\\\%]+\\/|[^:/\\\\%]*[?#]|about:blank#)/i,vb={},ub={};function Ab(a,b){this.a=a===Bb&&b||\"\",this.b=Cb}function Db(a){return a instanceof Ab&&a.constructor===Ab&&a.b===Cb?a.a:(Ea(\"expected object of type SafeUrl, got '\"+a+\"' of type \"+la(a)),\"type_error:SafeUrl\")}Ab.prototype.sa=!0,Ab.prototype.ra=function(){return this.a.toString()},Ab.prototype.toString=function(){return\"SafeUrl{\"+this.a+\"}\"};var Eb=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Fb(a){return a instanceof Ab?a:(a=\"object\"==typeof a&&a.sa?a.ra():String(a),Eb.test(a)||(a=\"about:invalid#zClosurez\"),new Ab(Bb,a))}var Cb={},Bb={};function Gb(){this.a=\"\",this.b=Hb}function Ib(a){return a instanceof Gb&&a.constructor===Gb&&a.b===Hb?a.a:(Ea(\"expected object of type SafeHtml, got '\"+a+\"' of type \"+la(a)),\"type_error:SafeHtml\")}Gb.prototype.sa=!0,Gb.prototype.ra=function(){return this.a.toString()},Gb.prototype.toString=function(){return\"SafeHtml{\"+this.a+\"}\"};var Hb={};function Jb(a){var b=new Gb;return b.a=a,b}Jb(\"<!DOCTYPE html>\");var Kb=Jb(\"\");function Nb(a,b){for(var c=a.split(\"%s\"),d=\"\",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join(\"%s\")}function Ob(a){return eb.test(a)&&(-1!=a.indexOf(\"&\")&&(a=a.replace(Za,\"&amp;\")),-1!=a.indexOf(\"<\")&&(a=a.replace($a,\"&lt;\")),-1!=a.indexOf(\">\")&&(a=a.replace(ab,\"&gt;\")),-1!=a.indexOf('\"')&&(a=a.replace(bb,\"&quot;\")),-1!=a.indexOf(\"'\")&&(a=a.replace(cb,\"&#39;\")),-1!=a.indexOf(\"\\0\")&&(a=a.replace(db,\"&#0;\"))),a}function Pb(a){return Pb[\" \"](a),a}Jb(\"<br>\"),Pb[\" \"]=ka;var Zb,a,Sb=y(\"Opera\"),Tb=y(\"Trident\")||y(\"MSIE\"),Ub=y(\"Edge\"),Vb=Ub||Tb,Wb=y(\"Gecko\")&&!(x(gb.toLowerCase(),\"webkit\")&&!y(\"Edge\"))&&!(y(\"Trident\")||y(\"MSIE\"))&&!y(\"Edge\"),Xb=x(gb.toLowerCase(),\"webkit\")&&!y(\"Edge\");function Yb(){var a=l.document;return a?a.documentMode:void 0}a:{var $b=\"\",ac=(a=gb,Wb?/rv:([^\\);]+)(\\)|;)/.exec(a):Ub?/Edge\\/([\\d\\.]+)/.exec(a):Tb?/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a):Xb?/WebKit\\/(\\S+)/.exec(a):Sb?/(?:Version)[ \\/]?(\\S+)/.exec(a):void 0);if(ac&&($b=ac?ac[1]:\"\"),Tb){var bc=Yb();if(null!=bc&&bc>parseFloat($b)){Zb=String(bc);break a}}Zb=$b}var dc,Rb={};function cc(a){return function(a,b){var c=Rb;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b()}(a,(function(){for(var b=0,c=Ya(String(Zb)).split(\".\"),d=Ya(String(a)).split(\".\"),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||\"\",h=d[f]||\"\";do{if(g=/(\\d*)(\\D*)(.*)/.exec(g)||[\"\",\"\",\"\",\"\"],h=/(\\d*)(\\D*)(.*)/.exec(h)||[\"\",\"\",\"\",\"\"],0==g[0].length&&0==h[0].length)break;b=fb(0==g[1].length?0:parseInt(g[1],10),0==h[1].length?0:parseInt(h[1],10))||fb(0==g[2].length,0==h[2].length)||fb(g[2],h[2]),g=g[3],h=h[3]}while(0==b)}return 0<=b}))}dc=l.document&&Tb?Yb():void 0;try{new self.OffscreenCanvas(0,0).getContext(\"2d\")}catch(a){}var ec=!Tb||9<=Number(dc);function fc(a){var b=document;return\"string\"==typeof a?b.getElementById(a):a}function gc(a,b){jb(b,(function(c,d){c&&\"object\"==typeof c&&c.sa&&(c=c.ra()),\"style\"==d?a.style.cssText=c:\"class\"==d?a.className=c:\"for\"==d?a.htmlFor=c:hc.hasOwnProperty(d)?a.setAttribute(hc[d],c):0==d.lastIndexOf(\"aria-\",0)||0==d.lastIndexOf(\"data-\",0)?a.setAttribute(d,c):a[d]=c}))}var nc,qc,hc={cellpadding:\"cellPadding\",cellspacing:\"cellSpacing\",colspan:\"colSpan\",frameborder:\"frameBorder\",height:\"height\",maxlength:\"maxLength\",nonce:\"nonce\",role:\"role\",rowspan:\"rowSpan\",type:\"type\",usemap:\"useMap\",valign:\"vAlign\",width:\"width\"};function kc(a,b,c){function d(g){g&&b.appendChild(\"string\"==typeof g?a.createTextNode(g):g)}for(var e=2;e<c.length;e++){var f=c[e];!ma(f)||n(f)&&0<f.nodeType?d(f):w(lc(f)?Xa(f):f,d)}}function jc(a,b){return b=String(b),\"application/xhtml+xml\"===a.contentType&&(b=b.toLowerCase()),a.createElement(b)}function lc(a){if(a&&\"number\"==typeof a.length){if(n(a))return\"function\"==typeof a.item||\"string\"==typeof a.item;if(na(a))return\"function\"==typeof a.item}return!1}function mc(a){l.setTimeout((function(){throw a}),0)}function pc(a,b){qc||function(){if(l.Promise&&l.Promise.resolve){var a=l.Promise.resolve(void 0);qc=function(){a.then(tc)}}else qc=function(){var b=tc;!na(l.setImmediate)||l.Window&&l.Window.prototype&&!y(\"Edge\")&&l.Window.prototype.setImmediate==l.setImmediate?(nc||(nc=function(){var a=l.MessageChannel;if(void 0===a&&\"undefined\"!=typeof window&&window.postMessage&&window.addEventListener&&!y(\"Presto\")&&(a=function(){var e=jc(document,\"IFRAME\");e.style.display=\"none\",function(a){var b=new tb(ub,rb(sb));nb(a,\"HTMLIFrameElement\"),a.src=wb(b).toString()}(e),document.documentElement.appendChild(e);var f=e.contentWindow;(e=f.document).open(),e.write(Ib(Kb)),e.close();var g=\"callImmediate\"+Math.random(),h=\"file:\"==f.location.protocol?\"*\":f.location.protocol+\"//\"+f.location.host;e=q((function(m){\"*\"!=h&&m.origin!=h||m.data!=g||this.port1.onmessage()}),this),f.addEventListener(\"message\",e,!1),this.port1={},this.port2={postMessage:function(){f.postMessage(g,h)}}}),void 0!==a&&!y(\"Trident\")&&!y(\"MSIE\")){var b=new a,c={},d=c;return b.port1.onmessage=function(){if(void 0!==c.next){var e=(c=c.next).Fb;c.Fb=null,e()}},function(e){d.next={Fb:e},d=d.next,b.port2.postMessage(0)}}return function(e){l.setTimeout(e,0)}}()),nc(b)):l.setImmediate(b)}}(),sc||(qc(),sc=!0),La.add(a,b)}var sc=!1,La=new Ha;function tc(){for(var a;a=Ka();){try{a.a.call(a.b)}catch(b){mc(b)}Ga(Ja,a)}sc=!1}function C(a,b){if(this.a=uc,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,a!=ka)try{var c=this;a.call(b,(function(d){vc(c,wc,d)}),(function(d){if(!(d instanceof xc))try{if(d instanceof Error)throw d;throw Error(\"Promise rejected.\")}catch(e){}vc(c,yc,d)}))}catch(d){vc(this,yc,d)}}var uc=0,wc=2,yc=3;function zc(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}zc.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ac=new Fa((function(){return new zc}),(function(a){a.reset()}));function Bc(a,b,c){var d=Ac.get();return d.g=a,d.b=b,d.f=c,d}function D(a){if(a instanceof C)return a;var b=new C(ka);return vc(b,wc,a),b}function E(a){return new C((function(b,c){c(a)}))}function Cc(a,b,c){Dc(a,b,c,null)||pc(ta(b,a))}function Fc(a){return new C((function(b){var c=a.length,d=[];if(c)for(var e=function(h,m,p){c--,d[h]=m?{Ob:!0,value:p}:{Ob:!1,reason:p},0==c&&b(d)},f=0;f<a.length;f++)Cc(a[f],ta(e,f,!0),ta(e,f,!1));else b(d)}))}function Hc(a,b){a.b||a.a!=wc&&a.a!=yc||Lc(a),a.f?a.f.next=b:a.b=b,a.f=b}function Gc(a,b,c,d){var e=Bc(null,null,null);return e.a=new C((function(f,g){e.g=b?function(h){try{var m=b.call(d,h);f(m)}catch(p){g(p)}}:f,e.b=c?function(h){try{var m=c.call(d,h);void 0===m&&h instanceof xc?g(h):f(m)}catch(p){g(p)}}:g})),e.a.c=a,Hc(a,e),e.a}function vc(a,b,c){a.a==uc&&(a===c&&(b=yc,c=new TypeError(\"Promise cannot resolve to itself\")),a.a=1,Dc(c,a.Zc,a.$c,a)||(a.i=c,a.a=b,a.c=null,Lc(a),b!=yc||c instanceof xc||function(a,b){a.g=!0,pc((function(){a.g&&Pc.call(null,b)}))}(a,c)))}function Dc(a,b,c,d){if(a instanceof C)return Hc(a,Bc(b||ka,c||null,d)),!0;if(Ca(a))return a.then(b,c,d),!0;if(n(a))try{var e=a.then;if(na(e))return function(a,b,c,d,e){function f(m){h||(h=!0,d.call(e,m))}var h=!1;try{b.call(a,(function(m){h||(h=!0,c.call(e,m))}),f)}catch(m){f(m)}}(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1}function Lc(a){a.h||(a.h=!0,pc(a.fc,a))}function Jc(a){var b=null;return a.b&&(a.b=(b=a.b).next,b.next=null),a.b||(a.f=null),b}function Kc(a,b,c,d){if(c==yc&&b.b&&!b.c)for(;a&&a.g;a=a.c)a.g=!1;if(b.a)b.a.c=null,Oc(b,c,d);else try{b.c?b.g.call(b.f):Oc(b,c,d)}catch(e){Pc.call(null,e)}Ga(Ac,b)}function Oc(a,b,c){b==wc?a.g.call(a.f,c):a.b&&a.b.call(a.f,c)}C.prototype.then=function(a,b,c){return Gc(this,na(a)?a:null,na(b)?b:null,c)},C.prototype.$goog_Thenable=!0,(k=C.prototype).na=function(a,b){return(a=Bc(a,a,b)).c=!0,Hc(this,a),this},k.s=function(a,b){return Gc(this,null,a,b)},k.cancel=function(a){if(this.a==uc){var b=new xc(a);pc((function(){!function Ic(a,b){if(a.a==uc)if(a.c){var c=a.c;if(c.b){for(var d=0,e=null,f=null,g=c.b;g&&(g.c||(d++,g.a==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.a==uc&&1==d?Ic(c,b):(f?((d=f).next==c.f&&(c.f=d),d.next=d.next.next):Jc(c),Kc(c,e,yc,b)))}a.c=null}else vc(a,yc,b)}(this,b)}),this)}},k.Zc=function(a){this.a=uc,vc(this,wc,a)},k.$c=function(a){this.a=uc,vc(this,yc,a)},k.fc=function(){for(var a;a=Jc(this);)Kc(this,a,this.a,this.i);this.h=!1};var Pc=mc;function xc(a){u.call(this,a)}function Qc(){0!=Rc&&(Sc[oa(this)]=this),this.xa=this.xa,this.oa=this.oa}r(xc,u),xc.prototype.name=\"cancel\";var Rc=0,Sc={};function Tc(a){if(!a.xa&&(a.xa=!0,a.Da(),0!=Rc)){var b=oa(a);if(0!=Rc&&a.oa&&0<a.oa.length)throw Error(a+\" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.\");delete Sc[b]}}Qc.prototype.xa=!1,Qc.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Uc=Object.freeze||function(a){return a},Vc=!Tb||9<=Number(dc),Wc=Tb&&!cc(\"9\"),Xc=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},\"passive\",{get:function(){a=!0}});try{l.addEventListener(\"test\",ka,b),l.removeEventListener(\"test\",ka,b)}catch(c){}return a}();function F(a,b){this.type=a,this.b=this.target=b,this.defaultPrevented=!1}function Yc(a,b){if(F.call(this,a?a.type:\"\"),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=\"\",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType=\"\",this.a=null,a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.b=b,b=a.relatedTarget){if(Wb){a:{try{Pb(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else\"mouseover\"==c?b=a.fromElement:\"mouseout\"==c&&(b=a.toElement);this.relatedTarget=b,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||\"\",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=\"string\"==typeof a.pointerType?a.pointerType:Zc[a.pointerType]||\"\",this.a=a,a.defaultPrevented&&this.preventDefault()}}F.prototype.preventDefault=function(){this.defaultPrevented=!0},r(Yc,F);var Zc=Uc({2:\"touch\",3:\"pen\",4:\"mouse\"});Yc.prototype.preventDefault=function(){Yc.$a.preventDefault.call(this);var a=this.a;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Wc)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(b){}},Yc.prototype.g=function(){return this.a};var $c=\"closure_listenable_\"+(1e6*Math.random()|0),ad=0;function bd(a,b,c,d,e){this.listener=a,this.proxy=null,this.src=b,this.type=c,this.capture=!!d,this.Ua=e,this.key=++ad,this.va=this.Oa=!1}function cd(a){a.va=!0,a.listener=null,a.proxy=null,a.src=null,a.Ua=null}function dd(a){this.src=a,this.a={},this.b=0}function fd(a,b){var c=b.type;c in a.a&&Ua(a.a[c],b)&&(cd(b),0==a.a[c].length&&(delete a.a[c],a.b--))}function ed(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.va&&f.listener==b&&f.capture==!!c&&f.Ua==d)return e}return-1}dd.prototype.add=function(a,b,c,d,e){var f=a.toString();(a=this.a[f])||(a=this.a[f]=[],this.b++);var g=ed(a,b,d,e);return-1<g?(b=a[g],c||(b.Oa=!1)):((b=new bd(b,this.src,f,!!d,e)).Oa=c,a.push(b)),b};var gd=\"closure_lm_\"+(1e6*Math.random()|0),hd={};function jd(a,b,c,d,e){if(d&&d.once)kd(a,b,c,d,e);else if(Array.isArray(b))for(var f=0;f<b.length;f++)jd(a,b[f],c,d,e);else c=ld(c),a&&a[$c]?md(a,b,c,n(d)?!!d.capture:!!d,e):nd(a,b,c,!1,d,e)}function nd(a,b,c,d,e,f){if(!b)throw Error(\"Invalid event type\");var g=n(e)?!!e.capture:!!e,h=od(a);if(h||(a[gd]=h=new dd(a)),!(c=h.add(b,c,d,g,f)).proxy)if(d=function(){var a=rd,b=Vc?function(c){return a.call(b.src,b.listener,c)}:function(c){if(!(c=a.call(b.src,b.listener,c)))return c};return b}(),c.proxy=d,d.src=a,d.listener=c,a.addEventListener)Xc||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(qd(b.toString()),d);else{if(!a.addListener||!a.removeListener)throw Error(\"addEventListener and attachEvent are unavailable.\");a.addListener(d)}}function kd(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)kd(a,b[f],c,d,e);else c=ld(c),a&&a[$c]?sd(a,b,c,n(d)?!!d.capture:!!d,e):nd(a,b,c,!0,d,e)}function G(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)G(a,b[f],c,d,e);else d=n(d)?!!d.capture:!!d,c=ld(c),a&&a[$c]?(a=a.v,(b=String(b).toString())in a.a&&-1<(c=ed(f=a.a[b],c,d,e))&&(cd(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--))):a&&(a=od(a))&&(b=a.a[b.toString()],a=-1,b&&(a=ed(b,c,d,e)),(c=-1<a?b[a]:null)&&td(c))}function td(a){if(\"number\"!=typeof a&&a&&!a.va){var b=a.src;if(b&&b[$c])fd(b.v,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(qd(c),d):b.addListener&&b.removeListener&&b.removeListener(d),(c=od(b))?(fd(c,a),0==c.b&&(c.src=null,b[gd]=null)):cd(a)}}}function qd(a){return a in hd?hd[a]:hd[a]=\"on\"+a}function ud(a,b,c,d){var e=!0;if((a=od(a))&&(b=a.a[b.toString()]))for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.va&&(f=vd(f,d),e=e&&!1!==f)}return e}function vd(a,b){var c=a.listener,d=a.Ua||a.src;return a.Oa&&td(a),c.call(d,b)}function rd(a,b){if(a.va)return!0;if(!Vc){if(!b)a:{b=[\"window\",\"event\"];for(var c=l,d=0;d<b.length;d++)if(null==(c=c[b[d]])){b=null;break a}b=c}if(b=new Yc(d=b,this),c=!0,!(0>d.keyCode||null!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}(e||null==d.returnValue)&&(d.returnValue=!0)}for(d=[],e=b.b;e;e=e.parentNode)d.push(e);for(a=a.type,e=d.length-1;0<=e;e--){b.b=d[e];var f=ud(d[e],a,!0,b);c=c&&f}for(e=0;e<d.length;e++)b.b=d[e],f=ud(d[e],a,!1,b),c=c&&f}return c}return vd(a,new Yc(b,this))}function od(a){return(a=a[gd])instanceof dd?a:null}var wd=\"__closure_events_fn_\"+(1e9*Math.random()>>>0);function ld(a){return na(a)?a:(a[wd]||(a[wd]=function(b){return a.handleEvent(b)}),a[wd])}function H(){Qc.call(this),this.v=new dd(this),this.$b=this,this.fb=null}function md(a,b,c,d,e){a.v.add(String(b),c,!1,d,e)}function sd(a,b,c,d,e){a.v.add(String(b),c,!0,d,e)}function xd(a,b,c,d){if(!(b=a.v.a[String(b)]))return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.va&&g.capture==c){var h=g.listener,m=g.Ua||g.src;g.Oa&&fd(a.v,g),e=!1!==h.call(m,d)&&e}}return e&&!d.defaultPrevented}function zd(a,b,c){if(na(a))c&&(a=q(a,c));else{if(!a||\"function\"!=typeof a.handleEvent)throw Error(\"Invalid listener argument\");a=q(a.handleEvent,a)}return 2147483647<Number(b)?-1:l.setTimeout(a,b||0)}function Ad(a){var b=null;return new C((function(c,d){-1==(b=zd((function(){c(void 0)}),a))&&d(Error(\"Failed to schedule timer.\"))})).s((function(c){throw l.clearTimeout(b),c}))}function Bd(a){if(a.V&&\"function\"==typeof a.V)return a.V();if(\"string\"==typeof a)return a.split(\"\");if(ma(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}for(d in b=[],c=0,a)b[c++]=a[d];return b}function Cd(a){if(a.Y&&\"function\"==typeof a.Y)return a.Y();if(!a.V||\"function\"!=typeof a.V){if(ma(a)||\"string\"==typeof a){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}for(var d in b=[],c=0,a)b[c++]=d;return b}}function Ed(a,b){this.b={},this.a=[],this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error(\"Uneven number of arguments\");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof Ed)for(c=a.Y(),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}function Fd(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Gd(a.b,d)&&(a.a[c++]=d),b++}a.a.length=c}if(a.c!=a.a.length){var e={};for(c=b=0;b<a.a.length;)Gd(e,d=a.a[b])||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Gd(a,b){return Object.prototype.hasOwnProperty.call(a,b)}r(H,Qc),H.prototype[$c]=!0,H.prototype.addEventListener=function(a,b,c,d){jd(this,a,b,c,d)},H.prototype.removeEventListener=function(a,b,c,d){G(this,a,b,c,d)},H.prototype.dispatchEvent=function(a){var b,c=this.fb;if(c)for(b=[];c;c=c.fb)b.push(c);c=this.$b;var d=a.type||a;if(\"string\"==typeof a)a=new F(a,c);else if(a instanceof F)a.target=a.target||c;else{var e=a;z(a=new F(d,c),e)}if(e=!0,b)for(var f=b.length-1;0<=f;f--){var g=a.b=b[f];e=xd(g,d,!0,a)&&e}if(e=xd(g=a.b=c,d,!0,a)&&e,e=xd(g,d,!1,a)&&e,b)for(f=0;f<b.length;f++)e=xd(g=a.b=b[f],d,!1,a)&&e;return e},H.prototype.Da=function(){if(H.$a.Da.call(this),this.v){var c,a=this.v;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)cd(d[e]);delete a.a[c],a.b--}}this.fb=null},(k=Ed.prototype).V=function(){Fd(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},k.Y=function(){return Fd(this),this.a.concat()},k.clear=function(){this.b={},this.c=this.a.length=0},k.get=function(a,b){return Gd(this.b,a)?this.b[a]:b},k.set=function(a,b){Gd(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},k.forEach=function(a,b){for(var c=this.Y(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};var Hd=/^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\\\#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;function Jd(a,b){var c;this.a=this.l=this.f=\"\",this.g=null,this.h=this.c=\"\",this.i=!1,a instanceof Jd?(this.i=void 0!==b?b:a.i,Kd(this,a.f),this.l=a.l,this.a=a.a,Ld(this,a.g),this.c=a.c,Md(this,Nd(a.b)),this.h=a.h):a&&(c=String(a).match(Hd))?(this.i=!!b,Kd(this,c[1]||\"\",!0),this.l=Od(c[2]||\"\"),this.a=Od(c[3]||\"\",!0),Ld(this,c[4]),this.c=Od(c[5]||\"\",!0),Md(this,c[6]||\"\",!0),this.h=Od(c[7]||\"\")):(this.i=!!b,this.b=new Pd(null,this.i))}function Kd(a,b,c){a.f=c?Od(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,\"\"))}function Ld(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error(\"Bad port number \"+b);a.g=b}else a.g=null}function Md(a,b,c){b instanceof Pd?(a.b=b,function(a,b){b&&!a.f&&($d(a),a.c=null,a.a.forEach((function(c,d){var e=d.toLowerCase();d!=e&&(de(this,d),be(this,e,c))}),a)),a.f=b}(a.b,a.i)):(c||(b=Qd(b,Wd)),a.b=new Pd(b,a.i))}function I(a,b,c){a.b.set(b,c)}function Xd(a,b){return a.b.get(b)}function J(a){return a instanceof Jd?new Jd(a):new Jd(a,void 0)}function Yd(a,b,c,d){var e=new Jd(null,void 0);return a&&Kd(e,a),b&&(e.a=b),c&&Ld(e,c),d&&(e.c=d),e}function Od(a,b){return a?b?decodeURI(a.replace(/%25/g,\"%2525\")):decodeURIComponent(a):\"\"}function Qd(a,b,c){return\"string\"==typeof a?(a=encodeURI(a).replace(b,Zd),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),a):null}function Zd(a){return\"%\"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}Jd.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Qd(b,Rd,!0),\":\");var c=this.a;return(c||\"file\"==b)&&(a.push(\"//\"),(b=this.l)&&a.push(Qd(b,Rd,!0),\"@\"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),null!=(c=this.g)&&a.push(\":\",String(c))),(c=this.c)&&(this.a&&\"/\"!=c.charAt(0)&&a.push(\"/\"),a.push(Qd(c,\"/\"==c.charAt(0)?Sd:Td,!0))),(c=this.b.toString())&&a.push(\"?\",c),(c=this.h)&&a.push(\"#\",Qd(c,Ud)),a.join(\"\")},Jd.prototype.resolve=function(a){var b=new Jd(this),c=!!a.f;c?Kd(b,a.f):c=!!a.l,c?b.l=a.l:c=!!a.a,c?b.a=a.a:c=null!=a.g;var d=a.c;if(c)Ld(b,a.g);else if(c=!!a.c){if(\"/\"!=d.charAt(0))if(this.a&&!this.c)d=\"/\"+d;else{var e=b.c.lastIndexOf(\"/\");-1!=e&&(d=b.c.substr(0,e+1)+d)}if(\"..\"==(e=d)||\".\"==e)d=\"\";else if(x(e,\"./\")||x(e,\"/.\")){d=0==e.lastIndexOf(\"/\",0),e=e.split(\"/\");for(var f=[],g=0;g<e.length;){var h=e[g++];\".\"==h?d&&g==e.length&&f.push(\"\"):\"..\"==h?((1<f.length||1==f.length&&\"\"!=f[0])&&f.pop(),d&&g==e.length&&f.push(\"\")):(f.push(h),d=!0)}d=f.join(\"/\")}else d=e}return c?b.c=d:c=\"\"!==a.b.toString(),c?Md(b,Nd(a.b)):c=!!a.h,c&&(b.h=a.h),b};var Rd=/[#\\/\\?@]/g,Td=/[#\\?:]/g,Sd=/[#\\?]/g,Wd=/[#\\?@]/g,Ud=/#/g;function Pd(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function $d(a){a.a||(a.a=new Ed,a.b=0,a.c&&function(a,b){if(a){a=a.split(\"&\");for(var c=0;c<a.length;c++){var d=a[c].indexOf(\"=\"),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\\+/g,\" \")):\"\")}}}(a.c,(function(b,c){a.add(decodeURIComponent(b.replace(/\\+/g,\" \")),c)})))}function ae(a){var b=Cd(a);if(void 0===b)throw Error(\"Keys are undefined\");var c=new Pd(null,void 0);a=Bd(a);for(var d=0;d<b.length;d++){var e=b[d],f=a[d];Array.isArray(f)?be(c,e,f):c.add(e,f)}return c}function de(a,b){$d(a),b=ce(a,b),Gd(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,Gd((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Fd(a)))}function ee(a,b){return $d(a),b=ce(a,b),Gd(a.a.b,b)}function be(a,b,c){de(a,b),0<c.length&&(a.c=null,a.a.set(ce(a,b),Xa(c)),a.b+=c.length)}function Nd(a){var b=new Pd;return b.c=a.c,a.a&&(b.a=new Ed(a.a),b.b=a.b),b}function ce(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function fe(a){var b=[];return function ge(a,b,c){if(null==b)c.push(\"null\");else{if(\"object\"==typeof b){if(Array.isArray(b)){var d=b;b=d.length,c.push(\"[\");for(var e=\"\",f=0;f<b;f++)c.push(e),ge(a,d[f],c),e=\",\";return void c.push(\"]\")}if(!(b instanceof String||b instanceof Number||b instanceof Boolean)){for(d in c.push(\"{\"),e=\"\",b)Object.prototype.hasOwnProperty.call(b,d)&&\"function\"!=typeof(f=b[d])&&(c.push(e),ie(d,c),c.push(\":\"),ge(a,f,c),e=\",\");return void c.push(\"}\")}b=b.valueOf()}switch(typeof b){case\"string\":ie(b,c);break;case\"number\":c.push(isFinite(b)&&!isNaN(b)?String(b):\"null\");break;case\"boolean\":c.push(String(b));break;case\"function\":c.push(\"null\");break;default:throw Error(\"Unknown type: \"+typeof b)}}}(new he,a,b),b.join(\"\")}function he(){}(k=Pd.prototype).add=function(a,b){$d(this),this.c=null,a=ce(this,a);var c=this.a.get(a);return c||this.a.set(a,c=[]),c.push(b),this.b+=1,this},k.clear=function(){this.a=this.c=null,this.b=0},k.forEach=function(a,b){$d(this),this.a.forEach((function(c,d){w(c,(function(e){a.call(b,e,d,this)}),this)}),this)},k.Y=function(){$d(this);for(var a=this.a.V(),b=this.a.Y(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c},k.V=function(a){$d(this);var b=[];if(\"string\"==typeof a)ee(this,a)&&(b=Wa(b,this.a.get(ce(this,a))));else{a=this.a.V();for(var c=0;c<a.length;c++)b=Wa(b,a[c])}return b},k.set=function(a,b){return $d(this),this.c=null,ee(this,a=ce(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},k.get=function(a,b){return a&&0<(a=this.V(a)).length?String(a[0]):b},k.toString=function(){if(this.c)return this.c;if(!this.a)return\"\";for(var a=[],b=this.a.Y(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.V(d);for(var f=0;f<d.length;f++){var g=e;\"\"!==d[f]&&(g+=\"=\"+encodeURIComponent(String(d[f]))),a.push(g)}}return this.c=a.join(\"&\")};var je={'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\",\"/\":\"\\\\/\",\"\\b\":\"\\\\b\",\"\\f\":\"\\\\f\",\"\\n\":\"\\\\n\",\"\\r\":\"\\\\r\",\"\\t\":\"\\\\t\",\"\\v\":\"\\\\u000b\"},ke=/\\uffff/.test(\"\")?/[\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g:/[\\\\\"\\x00-\\x1f\\x7f-\\xff]/g;function ie(a,b){b.push('\"',a.replace(ke,(function(c){var d=je[c];return d||(d=\"\\\\u\"+(65536|c.charCodeAt(0)).toString(16).substr(1),je[c]=d),d})),'\"')}function le(){var a=K();return Tb&&!!dc&&11==dc||/Edge\\/\\d+/.test(a)}function me(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||\"\"}function ne(a,b){b=b||l.window;var c=\"about:blank\";a&&(c=Db(Fb(a))),b.location.href=c}function se(a){return!!((a=(a||K()).toLowerCase()).match(/android/)||a.match(/webos/)||a.match(/iphone|ipad|ipod/)||a.match(/blackberry/)||a.match(/windows phone/)||a.match(/iemobile/))}function te(a){a=a||l.window;try{a.close()}catch(b){}}function ue(a,b,c){var d=Math.floor(1e9*Math.random()).toString();b=b||500,c=c||600;var e=(window.screen.availHeight-c)/2,f=(window.screen.availWidth-b)/2;for(g in b={width:b,height:c,top:0<e?e:0,left:0<f?f:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},c=K().toLowerCase(),d&&(b.target=d,x(c,\"crios/\")&&(b.target=\"_blank\")),qe(K())==ve&&(a=a||\"http://localhost\",b.scrollbars=!0),c=a||\"\",(a=b)||(a={}),d=window,b=c instanceof Ab?c:Fb(void 0!==c.href?c.href:String(c)),c=a.target||c.target,e=[],a)switch(g){case\"width\":case\"height\":case\"top\":case\"left\":e.push(g+\"=\"+a[g]);break;case\"target\":case\"noopener\":case\"noreferrer\":break;default:e.push(g+\"=\"+(a[g]?1:0))}var g=e.join(\",\");if((y(\"iPhone\")&&!y(\"iPod\")&&!y(\"iPad\")||y(\"iPad\")||y(\"iPod\"))&&d.navigator&&d.navigator.standalone&&c&&\"_self\"!=c?(nb(g=jc(document,\"A\"),\"HTMLAnchorElement\"),b instanceof Ab||b instanceof Ab||(b=\"object\"==typeof b&&b.sa?b.ra():String(b),Eb.test(b)||(b=\"about:invalid#zClosurez\"),b=new Ab(Bb,b)),g.href=Db(b),g.setAttribute(\"target\",c),a.noreferrer&&g.setAttribute(\"rel\",\"noreferrer\"),(a=document.createEvent(\"MouseEvent\")).initMouseEvent(\"click\",!0,!0,d,1),g.dispatchEvent(a),g={}):a.noreferrer?(g=d.open(\"\",c,g),a=Db(b),g&&(Vb&&x(a,\";\")&&(a=\"'\"+a.replace(/'/g,\"%27\")+\"'\"),g.opener=null,a=Jb('<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url='+Ob(a)+'\">'),d=g.document)&&(d.write(Ib(a)),d.close())):(g=d.open(Db(b),c,g))&&a.noopener&&(g.opener=null),g)try{g.focus()}catch(h){}return g}var xe=/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/,ye=/^[^@]+@[^@]+$/;function ze(){var a=null;return new C((function(b){\"complete\"==l.document.readyState?b():(a=function(){b()},kd(window,\"load\",a))})).s((function(b){throw G(window,\"load\",a),b}))}function Be(a){return a=a||K(),!(\"file:\"!==Ce()&&\"ionic:\"!==Ce()||!a.toLowerCase().match(/iphone|ipad|ipod|android/))}function De(){var a=l.window;try{return!(!a||a==a.top)}catch(b){return!1}}function Ee(){return void 0!==l.WorkerGlobalScope&&\"function\"==typeof l.importScripts}function Fe(){return firebase.INTERNAL.hasOwnProperty(\"reactNative\")?\"ReactNative\":firebase.INTERNAL.hasOwnProperty(\"node\")?\"Node\":Ee()?\"Worker\":\"Browser\"}function Ge(){var a=Fe();return\"ReactNative\"===a||\"Node\"===a}var ve=\"Firefox\";function qe(a){var b=a.toLowerCase();return x(b,\"opera/\")||x(b,\"opr/\")||x(b,\"opios/\")?\"Opera\":x(b,\"iemobile\")?\"IEMobile\":x(b,\"msie\")||x(b,\"trident/\")?\"IE\":x(b,\"edge/\")?\"Edge\":x(b,\"firefox/\")?ve:x(b,\"silk/\")?\"Silk\":x(b,\"blackberry\")?\"Blackberry\":x(b,\"webos\")?\"Webos\":!x(b,\"safari/\")||x(b,\"chrome/\")||x(b,\"crios/\")||x(b,\"android\")?!x(b,\"chrome/\")&&!x(b,\"crios/\")||x(b,\"edge/\")?x(b,\"android\")?\"Android\":(a=a.match(/([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/))&&2==a.length?a[1]:\"Other\":\"Chrome\":\"Safari\"}var Ie={ld:\"FirebaseCore-web\",nd:\"FirebaseUI-web\"};function Je(a,b){b=b||[];var e,c=[],d={};for(e in Ie)d[Ie[e]]=!0;for(e=0;e<b.length;e++)void 0!==d[b[e]]&&(delete d[b[e]],c.push(b[e]));return c.sort(),(b=c).length||(b=[\"FirebaseCore-web\"]),\"Browser\"===(c=Fe())?c=qe(d=K()):\"Worker\"===c&&(c=qe(d=K())+\"-\"+c),c+\"/JsCore/\"+a+\"/\"+b.join(\",\")}function K(){return l.navigator&&l.navigator.userAgent||\"\"}function L(a,b){a=a.split(\".\"),b=b||l;for(var c=0;c<a.length&&\"object\"==typeof b&&null!=b;c++)b=b[a[c]];return c!=a.length&&(b=void 0),b}function Ke(){try{var a=l.localStorage,b=Le();if(a)return a.setItem(b,\"1\"),a.removeItem(b),!le()||!!l.indexedDB}catch(c){return Ee()&&!!l.indexedDB}return!1}function Me(){return(Ne()||\"chrome-extension:\"===Ce()||Be())&&!Ge()&&Ke()&&!Ee()}function Ne(){return\"http:\"===Ce()||\"https:\"===Ce()}function Ce(){return l.location&&l.location.protocol||null}function Oe(a){return!se(a=a||K())&&qe(a)!=ve}function Pe(a){return void 0===a?null:fe(a)}function Qe(a){var c,b={};for(c in a)a.hasOwnProperty(c)&&null!=a[c]&&(b[c]=a[c]);return b}function Re(a){if(null!==a)return JSON.parse(a)}function Le(a){return a||Math.floor(1e9*Math.random()).toString()}function Se(a){return\"Safari\"!=qe(a=a||K())&&!a.toLowerCase().match(/iphone|ipad|ipod/)}function Te(){var a=l.___jsl;if(a&&a.H)for(var b in a.H)if(a.H[b].r=a.H[b].r||[],a.H[b].L=a.H[b].L||[],a.H[b].r=a.H[b].L.concat(),a.CP)for(var c=0;c<a.CP.length;c++)a.CP[c]=null}function Ue(a,b){if(a>b)throw Error(\"Short delay should be less than long delay!\");this.a=a,this.c=b,a=K(),b=Fe(),this.b=se(a)||\"ReactNative\"===b}function Ve(){var a=l.document;return!a||void 0===a.visibilityState||\"visible\"==a.visibilityState}function Xe(a){\"undefined\"!=typeof console&&\"function\"==typeof console.warn&&console.warn(a)}function Ye(a){try{var b=new Date(parseInt(a,10));if(!isNaN(b.getTime())&&!/[^0-9]/.test(a))return b.toUTCString()}catch(c){}return null}function Ze(){return!(!L(\"fireauth.oauthhelper\",l)&&!L(\"fireauth.iframe\",l))}Ue.prototype.get=function(){var a=l.navigator;return!a||\"boolean\"!=typeof a.onLine||!Ne()&&\"chrome-extension:\"!==Ce()&&void 0===a.connection||a.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var df,bf={};function cf(a){bf[a]||(bf[a]=!0,Xe(a))}try{var ef={};Object.defineProperty(ef,\"abcd\",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(ef,\"abcd\",{configurable:!0,enumerable:!0,value:2}),df=2==ef.abcd}catch(a){df=!1}function M(a,b,c){df?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,value:c}):a[b]=c}function N(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&M(a,c,b[c])}function ff(a){var b={};return N(b,a),b}function jf(a){var b=a;if(\"object\"==typeof a&&null!=a)for(var c in b=\"length\"in a?[]:{},a)M(b,c,jf(a[c]));return b}function kf(a){var b=a&&(a[lf]?\"phone\":null);if(!(b&&a&&a[mf]))throw new t(\"internal-error\",\"Internal assert: invalid MultiFactorInfo object\");M(this,\"uid\",a[mf]),M(this,\"displayName\",a[nf]||null);var c=null;a[of]&&(c=new Date(a[of]).toUTCString()),M(this,\"enrollmentTime\",c),M(this,\"factorId\",b)}function pf(a){try{var b=new qf(a)}catch(c){b=null}return b}kf.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var nf=\"displayName\",of=\"enrolledAt\",mf=\"mfaEnrollmentId\",lf=\"phoneInfo\";function qf(a){kf.call(this,a),M(this,\"phoneNumber\",a[lf])}function rf(a){var b={},c=a[sf],d=a[tf],e=a[uf];if(a=pf(a[vf]),!e||e!=wf&&e!=xf&&!c||e==xf&&!d||e==yf&&!a)throw Error(\"Invalid checkActionCode response!\");e==xf?(b[zf]=c||null,b[Af]=c||null,b[Bf]=d):(b[zf]=d||null,b[Af]=d||null,b[Bf]=c||null),b[Cf]=a||null,M(this,Df,e),M(this,Ef,jf(b))}r(qf,kf),qf.prototype.w=function(){var a=qf.$a.w.call(this);return a.phoneNumber=this.phoneNumber,a};var yf=\"REVERT_SECOND_FACTOR_ADDITION\",wf=\"EMAIL_SIGNIN\",xf=\"VERIFY_AND_CHANGE_EMAIL\",sf=\"email\",vf=\"mfaInfo\",tf=\"newEmail\",uf=\"requestType\",Bf=\"email\",zf=\"fromEmail\",Cf=\"multiFactorInfo\",Af=\"previousEmail\",Ef=\"data\",Df=\"operation\";function Ff(a){var b=Xd(a=J(a),Gf)||null,c=Xd(a,Hf)||null,d=Xd(a,If)||null;if(d=d&&Jf[d]||null,!b||!c||!d)throw new t(\"argument-error\",Gf+\", \"+Hf+\"and \"+If+\" are required in a valid action code URL.\");N(this,{apiKey:b,operation:d,code:c,continueUrl:Xd(a,Kf)||null,languageCode:Xd(a,Lf)||null,tenantId:Xd(a,Mf)||null})}var Gf=\"apiKey\",Hf=\"oobCode\",Kf=\"continueUrl\",Lf=\"languageCode\",If=\"mode\",Mf=\"tenantId\",Jf={recoverEmail:\"RECOVER_EMAIL\",resetPassword:\"PASSWORD_RESET\",revertSecondFactorAddition:yf,signIn:wf,verifyAndChangeEmail:xf,verifyEmail:\"VERIFY_EMAIL\"};function Nf(a){try{return new Ff(a)}catch(b){return null}}function Of(a){var b=a[Pf];if(void 0===b)throw new t(\"missing-continue-uri\");if(\"string\"!=typeof b||\"string\"==typeof b&&!b.length)throw new t(\"invalid-continue-uri\");this.h=b,this.b=this.a=null,this.g=!1;var c=a[Qf];if(c&&\"object\"==typeof c){b=c[Rf];var d=c[Sf];if(c=c[Tf],\"string\"==typeof b&&b.length){if(this.a=b,void 0!==d&&\"boolean\"!=typeof d)throw new t(\"argument-error\",Sf+\" property must be a boolean when specified.\");if(this.g=!!d,void 0!==c&&(\"string\"!=typeof c||\"string\"==typeof c&&!c.length))throw new t(\"argument-error\",Tf+\" property must be a non empty string when specified.\");this.b=c||null}else{if(void 0!==b)throw new t(\"argument-error\",Rf+\" property must be a non empty string when specified.\");if(void 0!==d||void 0!==c)throw new t(\"missing-android-pkg-name\")}}else if(void 0!==c)throw new t(\"argument-error\",Qf+\" property must be a non null object when specified.\");if(this.f=null,(b=a[Uf])&&\"object\"==typeof b){if(\"string\"==typeof(b=b[Vf])&&b.length)this.f=b;else if(void 0!==b)throw new t(\"argument-error\",Vf+\" property must be a non empty string when specified.\")}else if(void 0!==b)throw new t(\"argument-error\",Uf+\" property must be a non null object when specified.\");if(void 0!==(b=a[Wf])&&\"boolean\"!=typeof b)throw new t(\"argument-error\",Wf+\" property must be a boolean when specified.\");if(this.c=!!b,void 0!==(a=a[Xf])&&(\"string\"!=typeof a||\"string\"==typeof a&&!a.length))throw new t(\"argument-error\",Xf+\" property must be a non empty string when specified.\");this.i=a||null}var Qf=\"android\",Xf=\"dynamicLinkDomain\",Wf=\"handleCodeInApp\",Uf=\"iOS\",Pf=\"url\",Sf=\"installApp\",Tf=\"minimumVersion\",Rf=\"packageName\",Vf=\"bundleId\";function Yf(a){var b={};for(var c in b.continueUrl=a.h,b.canHandleCodeInApp=a.c,(b.androidPackageName=a.a)&&(b.androidMinimumVersion=a.b,b.androidInstallApp=a.g),b.iOSBundleId=a.f,b.dynamicLinkDomain=a.i,b)null===b[c]&&delete b[c];return b}var $f=null;function dg(a){var b=eg(a);if(!(b&&b.sub&&b.iss&&b.aud&&b.exp))throw Error(\"Invalid JWT\");this.g=a,this.c=b.exp,this.h=b.sub,ua(),this.a=b.provider_id||b.firebase&&b.firebase.sign_in_provider||null,this.f=b.firebase&&b.firebase.tenant||null,this.b=!!b.is_anonymous||\"anonymous\"==this.a}function fg(a){try{return new dg(a)}catch(b){return null}}function eg(a){if(!a)return null;if(3!=(a=a.split(\".\")).length)return null;for(var b=(4-(a=a[1]).length%4)%4,c=0;c<b;c++)a+=\".\";try{return JSON.parse(function(a){var b=\"\";return function(a,b){function c(m){for(;d<a.length;){var p=a.charAt(d++),v=$f[p];if(null!=v)return v;if(!/^[\\s\\xa0]*$/.test(p))throw Error(\"Unknown base64 encoding at char: \"+p)}return m}!function(){if(!$f){$f={};for(var a=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\"),b=[\"+/=\",\"+/\",\"-_=\",\"-_.\",\"-_\"],c=0;5>c;c++)for(var d=a.concat(b[c].split(\"\")),e=0;e<d.length;e++){var f=d[e];void 0===$f[f]&&($f[f]=e)}}}();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),h=c(64);if(64===h&&-1===e)break;b(e<<2|f>>4),64!=g&&(b(f<<4&240|g>>2),64!=h&&b(g<<6&192|h))}}(a,(function(c){b+=String.fromCharCode(c)})),b}(a))}catch(d){}return null}dg.prototype.S=function(){return this.f},dg.prototype.i=function(){return this.b},dg.prototype.toString=function(){return this.g};var gg=\"oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version\".split(\" \"),hg=[\"client_id\",\"response_type\",\"scope\",\"redirect_uri\",\"state\"],ig={md:{Ja:\"locale\",ua:700,ta:600,fa:\"facebook.com\",Wa:hg},od:{Ja:null,ua:500,ta:750,fa:\"github.com\",Wa:hg},pd:{Ja:\"hl\",ua:515,ta:680,fa:\"google.com\",Wa:hg},vd:{Ja:\"lang\",ua:485,ta:705,fa:\"twitter.com\",Wa:gg},jd:{Ja:\"locale\",ua:640,ta:600,fa:\"apple.com\",Wa:[]}};function jg(a){for(var b in ig)if(ig[b].fa==a)return ig[b];return null}function kg(a){var b={};b[\"facebook.com\"]=lg,b[\"google.com\"]=mg,b[\"github.com\"]=ng,b[\"twitter.com\"]=og;var c=a&&a[pg];try{if(c)return b[c]?new b[c](a):new qg(a);if(void 0!==a[rg])return new sg(a)}catch(d){}return null}var rg=\"idToken\",pg=\"providerId\";function sg(a){var b=a[pg];if(!b&&a[rg]){var c=fg(a[rg]);c&&c.a&&(b=c.a)}if(!b)throw Error(\"Invalid additional user info!\");\"anonymous\"!=b&&\"custom\"!=b||(b=null),c=!1,void 0!==a.isNewUser?c=!!a.isNewUser:\"identitytoolkit#SignupNewUserResponse\"===a.kind&&(c=!0),M(this,\"providerId\",b),M(this,\"isNewUser\",c)}function qg(a){sg.call(this,a),M(this,\"profile\",jf((a=Re(a.rawUserInfo||\"{}\"))||{}))}function lg(a){if(qg.call(this,a),\"facebook.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}function ng(a){if(qg.call(this,a),\"github.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");M(this,\"username\",this.profile&&this.profile.login||null)}function mg(a){if(qg.call(this,a),\"google.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}function og(a){if(qg.call(this,a),\"twitter.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");M(this,\"username\",a.screenName||null)}function tg(a){var b=J(a),c=Xd(b,\"link\"),d=Xd(J(c),\"link\");return b=Xd(b,\"deep_link_id\"),Xd(J(b),\"link\")||b||d||c||a}function ug(a,b){if(!a&&!b)throw new t(\"internal-error\",\"Internal assert: no raw session string available\");if(a&&b)throw new t(\"internal-error\",\"Internal assert: unable to determine the session type\");this.a=a||null,this.b=b||null,this.type=this.a?vg:wg}r(qg,sg),r(lg,qg),r(ng,qg),r(mg,qg),r(og,qg);var vg=\"enroll\",wg=\"signin\";function xg(){}function yg(a,b){return a.then((function(c){if(c[zg]){var d=fg(c[zg]);if(!d||b!=d.h)throw new t(\"user-mismatch\");return c}throw new t(\"user-mismatch\")})).s((function(c){throw c&&c.code&&c.code==va+\"user-not-found\"?new t(\"user-mismatch\"):c}))}function Ag(a,b){if(!b)throw new t(\"internal-error\",\"failed to construct a credential\");this.a=b,M(this,\"providerId\",a),M(this,\"signInMethod\",a)}function Cg(a){return{pendingToken:a.a,requestUri:\"http://localhost\"}}function Fg(a){if(a&&a.providerId&&a.signInMethod&&0==a.providerId.indexOf(\"saml.\")&&a.pendingToken)try{return new Ag(a.providerId,a.pendingToken)}catch(b){}return null}function Gg(a,b,c){if(this.a=null,b.idToken||b.accessToken)b.idToken&&M(this,\"idToken\",b.idToken),b.accessToken&&M(this,\"accessToken\",b.accessToken),b.nonce&&!b.pendingToken&&M(this,\"nonce\",b.nonce),b.pendingToken&&(this.a=b.pendingToken);else{if(!b.oauthToken||!b.oauthTokenSecret)throw new t(\"internal-error\",\"failed to construct a credential\");M(this,\"accessToken\",b.oauthToken),M(this,\"secret\",b.oauthTokenSecret)}M(this,\"providerId\",a),M(this,\"signInMethod\",c)}function Hg(a){var b={};return a.idToken&&(b.id_token=a.idToken),a.accessToken&&(b.access_token=a.accessToken),a.secret&&(b.oauth_token_secret=a.secret),b.providerId=a.providerId,a.nonce&&!a.a&&(b.nonce=a.nonce),b={postBody:ae(b).toString(),requestUri:\"http://localhost\"},a.a&&(delete b.postBody,b.pendingToken=a.a),b}function Ig(a){if(a&&a.providerId&&a.signInMethod){var b={idToken:a.oauthIdToken,accessToken:a.oauthTokenSecret?null:a.oauthAccessToken,oauthTokenSecret:a.oauthTokenSecret,oauthToken:a.oauthTokenSecret&&a.oauthAccessToken,nonce:a.nonce,pendingToken:a.pendingToken};try{return new Gg(a.providerId,b,a.signInMethod)}catch(c){}}return null}function Jg(a,b){this.Pc=b||[],N(this,{providerId:a,isOAuthProvider:!0}),this.Hb={},this.ob=(jg(a)||{}).Ja||null,this.nb=null}function Kg(a){if(\"string\"!=typeof a||0!=a.indexOf(\"saml.\"))throw new t(\"argument-error\",'SAML provider IDs must be prefixed with \"saml.\"');Jg.call(this,a,[])}function Lg(a){Jg.call(this,a,hg),this.a=[]}function Mg(){Lg.call(this,\"facebook.com\")}function Ng(a){if(!a)throw new t(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var b=a;return n(a)&&(b=a.accessToken),(new Mg).credential({accessToken:b})}function Og(){Lg.call(this,\"github.com\")}function Pg(a){if(!a)throw new t(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var b=a;return n(a)&&(b=a.accessToken),(new Og).credential({accessToken:b})}function Qg(){Lg.call(this,\"google.com\"),this.Ca(\"profile\")}function Rg(a,b){var c=a;return n(a)&&(c=a.idToken,b=a.accessToken),(new Qg).credential({idToken:c,accessToken:b})}function Sg(){Jg.call(this,\"twitter.com\",gg)}function Tg(a,b){var c=a;if(n(c)||(c={oauthToken:a,oauthTokenSecret:b}),!c.oauthToken||!c.oauthTokenSecret)throw new t(\"argument-error\",\"credential failed: expected 2 arguments (the OAuth access token and secret).\");return new Gg(\"twitter.com\",c,\"twitter.com\")}function Ug(a,b,c){this.a=a,this.f=b,M(this,\"providerId\",\"password\"),M(this,\"signInMethod\",c===Vg.EMAIL_LINK_SIGN_IN_METHOD?Vg.EMAIL_LINK_SIGN_IN_METHOD:Vg.EMAIL_PASSWORD_SIGN_IN_METHOD)}function $g(a){return a&&a.email&&a.password?new Ug(a.email,a.password,a.signInMethod):null}function Vg(){N(this,{providerId:\"password\",isOAuthProvider:!1})}function ah(a,b){if(!(b=bh(b)))throw new t(\"argument-error\",\"Invalid email link!\");return new Ug(a,b.code,Vg.EMAIL_LINK_SIGN_IN_METHOD)}function bh(a){return(a=Nf(a=tg(a)))&&a.operation===wf?a:null}function ch(a){if(!(a.cb&&a.bb||a.La&&a.ea))throw new t(\"internal-error\");this.a=a,M(this,\"providerId\",\"phone\"),this.fa=\"phone\",M(this,\"signInMethod\",\"phone\")}function gh(a){if(a&&\"phone\"===a.providerId&&(a.verificationId&&a.verificationCode||a.temporaryProof&&a.phoneNumber)){var b={};return w([\"verificationId\",\"verificationCode\",\"temporaryProof\",\"phoneNumber\"],(function(c){a[c]&&(b[c]=a[c])})),new ch(b)}return null}function dh(a){return a.a.La&&a.a.ea?{temporaryProof:a.a.La,phoneNumber:a.a.ea}:{sessionInfo:a.a.cb,code:a.a.bb}}function hh(a){try{this.a=a||firebase.auth()}catch(b){throw new t(\"argument-error\",\"Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().\")}N(this,{providerId:\"phone\",isOAuthProvider:!1})}function lh(a,b){if(!a)throw new t(\"missing-verification-id\");if(!b)throw new t(\"missing-verification-code\");return new ch({cb:a,bb:b})}function mh(a){if(a.temporaryProof&&a.phoneNumber)return new ch({La:a.temporaryProof,ea:a.phoneNumber});var b=a&&a.providerId;if(!b||\"password\"===b)return null;var c=a&&a.oauthAccessToken,d=a&&a.oauthTokenSecret,e=a&&a.nonce,f=a&&a.oauthIdToken,g=a&&a.pendingToken;try{switch(b){case\"google.com\":return Rg(f,c);case\"facebook.com\":return Ng(c);case\"github.com\":return Pg(c);case\"twitter.com\":return Tg(c,d);default:return c||d||f||g?g?0==b.indexOf(\"saml.\")?new Ag(b,g):new Gg(b,{pendingToken:g,idToken:a.oauthIdToken,accessToken:a.oauthAccessToken},b):new Lg(b).credential({idToken:f,accessToken:c,rawNonce:e}):null}}catch(h){return null}}function nh(a){if(!a.isOAuthProvider)throw new t(\"invalid-oauth-provider\")}function oh(a,b,c,d,e,f,g){if(this.c=a,this.b=b||null,this.g=c||null,this.f=d||null,this.i=f||null,this.h=g||null,this.a=e||null,!this.g&&!this.a)throw new t(\"invalid-auth-event\");if(this.g&&this.a)throw new t(\"invalid-auth-event\");if(this.g&&!this.f)throw new t(\"invalid-auth-event\")}function ph(a){return(a=a||{}).type?new oh(a.type,a.eventId,a.urlResponse,a.sessionId,a.error&&ya(a.error),a.postBody,a.tenantId):null}function qh(){this.b=null,this.a=[]}ug.prototype.Ha=function(){return D(this.a?this.a:this.b)},ug.prototype.w=function(){return this.type==vg?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},xg.prototype.ja=function(){},xg.prototype.b=function(){},xg.prototype.c=function(){},xg.prototype.w=function(){},Ag.prototype.ja=function(a){return Bg(a,Cg(this))},Ag.prototype.b=function(a,b){var c=Cg(this);return c.idToken=b,Dg(a,c)},Ag.prototype.c=function(a,b){return yg(Eg(a,Cg(this)),b)},Ag.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Gg.prototype.ja=function(a){return Bg(a,Hg(this))},Gg.prototype.b=function(a,b){var c=Hg(this);return c.idToken=b,Dg(a,c)},Gg.prototype.c=function(a,b){return yg(Eg(a,Hg(this)),b)},Gg.prototype.w=function(){var a={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(a.oauthIdToken=this.idToken),this.accessToken&&(a.oauthAccessToken=this.accessToken),this.secret&&(a.oauthTokenSecret=this.secret),this.nonce&&(a.nonce=this.nonce),this.a&&(a.pendingToken=this.a),a},Jg.prototype.Ka=function(a){return this.Hb=lb(a),this},r(Kg,Jg),r(Lg,Jg),Lg.prototype.Ca=function(a){return Ta(this.a,a)||this.a.push(a),this},Lg.prototype.Pb=function(){return Xa(this.a)},Lg.prototype.credential=function(a,b){var c;if(!(c=n(a)?{idToken:a.idToken||null,accessToken:a.accessToken||null,nonce:a.rawNonce||null}:{idToken:a||null,accessToken:b||null}).idToken&&!c.accessToken)throw new t(\"argument-error\",\"credential failed: must provide the ID token and/or the access token.\");return new Gg(this.providerId,c,this.providerId)},r(Mg,Lg),M(Mg,\"PROVIDER_ID\",\"facebook.com\"),M(Mg,\"FACEBOOK_SIGN_IN_METHOD\",\"facebook.com\"),r(Og,Lg),M(Og,\"PROVIDER_ID\",\"github.com\"),M(Og,\"GITHUB_SIGN_IN_METHOD\",\"github.com\"),r(Qg,Lg),M(Qg,\"PROVIDER_ID\",\"google.com\"),M(Qg,\"GOOGLE_SIGN_IN_METHOD\",\"google.com\"),r(Sg,Jg),M(Sg,\"PROVIDER_ID\",\"twitter.com\"),M(Sg,\"TWITTER_SIGN_IN_METHOD\",\"twitter.com\"),Ug.prototype.ja=function(a){return this.signInMethod==Vg.EMAIL_LINK_SIGN_IN_METHOD?O(a,Wg,{email:this.a,oobCode:this.f}):O(a,Xg,{email:this.a,password:this.f})},Ug.prototype.b=function(a,b){return this.signInMethod==Vg.EMAIL_LINK_SIGN_IN_METHOD?O(a,Yg,{idToken:b,email:this.a,oobCode:this.f}):O(a,Zg,{idToken:b,email:this.a,password:this.f})},Ug.prototype.c=function(a,b){return yg(this.ja(a),b)},Ug.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},N(Vg,{PROVIDER_ID:\"password\"}),N(Vg,{EMAIL_LINK_SIGN_IN_METHOD:\"emailLink\"}),N(Vg,{EMAIL_PASSWORD_SIGN_IN_METHOD:\"password\"}),ch.prototype.ja=function(a){return a.eb(dh(this))},ch.prototype.b=function(a,b){var c=dh(this);return c.idToken=b,O(a,eh,c)},ch.prototype.c=function(a,b){var c=dh(this);return c.operation=\"REAUTH\",yg(a=O(a,fh,c),b)},ch.prototype.w=function(){var a={providerId:\"phone\"};return this.a.cb&&(a.verificationId=this.a.cb),this.a.bb&&(a.verificationCode=this.a.bb),this.a.La&&(a.temporaryProof=this.a.La),this.a.ea&&(a.phoneNumber=this.a.ea),a},hh.prototype.eb=function(a,b){var c=this.a.a;return D(b.verify()).then((function(d){if(\"string\"!=typeof d)throw new t(\"argument-error\",\"An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.\");switch(b.type){case\"recaptcha\":var e=n(a)?a.session:null,f=n(a)?a.phoneNumber:a;return(e&&e.type==vg?e.Ha().then((function(h){return function(a,b){return O(a,kj,b).then((function(c){return c.phoneSessionInfo.sessionInfo}))}(c,{idToken:h,phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:d}})})):e&&e.type==wg?e.Ha().then((function(h){return function(a,b){return O(a,mj,b).then((function(c){return c.phoneResponseInfo.sessionInfo}))}(c,{mfaPendingCredential:h,mfaEnrollmentId:a.multiFactorHint&&a.multiFactorHint.uid||a.multiFactorUid,phoneSignInInfo:{recaptchaToken:d}})})):function(a,b){return O(a,ij,b)}(c,{phoneNumber:f,recaptchaToken:d})).then((function(h){return\"function\"==typeof b.reset&&b.reset(),h}),(function(h){throw\"function\"==typeof b.reset&&b.reset(),h}));default:throw new t(\"argument-error\",'Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.')}}))},N(hh,{PROVIDER_ID:\"phone\"}),N(hh,{PHONE_SIGN_IN_METHOD:\"phone\"}),oh.prototype.getUid=function(){var a=[];return a.push(this.c),this.b&&a.push(this.b),this.f&&a.push(this.f),this.h&&a.push(this.h),a.join(\"-\")},oh.prototype.S=function(){return this.h},oh.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var yh,rh=null;function th(a){var b=\"unauthorized-domain\",c=void 0,d=J(a);a=d.a,\"chrome-extension\"==(d=d.f)?c=Nb(\"This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",a):\"http\"==d||\"https\"==d?c=Nb(\"This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",a):b=\"operation-not-supported-in-this-environment\",t.call(this,b,c)}function uh(a,b,c){t.call(this,a,c),(a=b||{}).Ib&&M(this,\"email\",a.Ib),a.ea&&M(this,\"phoneNumber\",a.ea),a.credential&&M(this,\"credential\",a.credential),a.Yb&&M(this,\"tenantId\",a.Yb)}function vh(a){if(a.code){var b=a.code||\"\";0==b.indexOf(va)&&(b=b.substring(va.length));var c={credential:mh(a),Yb:a.tenantId};if(a.email)c.Ib=a.email;else if(a.phoneNumber)c.ea=a.phoneNumber;else if(!c.credential)return new t(b,a.message||void 0);return new uh(b,c,a.message)}return null}function wh(){}function zh(){}function Ah(a){if(!a.f&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var b=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.f=d}catch(e){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\")}return a.f}function Bh(){}function Ch(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response=\"\",this.status=-1,this.statusText=\"\",this.a.onload=q(this.pc,this),this.a.onerror=q(this.Rb,this),this.a.onprogress=q(this.qc,this),this.a.ontimeout=q(this.uc,this)}function Dh(a,b){a.readyState=b,a.onreadystatechange&&a.onreadystatechange()}function Eh(a,b,c){this.reset(a,b,c,void 0,void 0)}function Gh(a){this.f=a,this.b=this.c=this.a=null}function Hh(a,b){this.name=a,this.value=b}r(th,t),r(uh,t),uh.prototype.w=function(){var a={code:this.code,message:this.message};this.email&&(a.email=this.email),this.phoneNumber&&(a.phoneNumber=this.phoneNumber),this.tenantId&&(a.tenantId=this.tenantId);var b=this.credential&&this.credential.w();return b&&z(a,b),a},uh.prototype.toJSON=function(){return this.w()},wh.prototype.c=null,r(zh,wh),zh.prototype.a=function(){var a=Ah(this);return a?new ActiveXObject(a):new XMLHttpRequest},zh.prototype.b=function(){var a={};return Ah(this)&&(a[0]=!0,a[1]=!0),a},yh=new zh,r(Bh,wh),Bh.prototype.a=function(){var a=new XMLHttpRequest;if(\"withCredentials\"in a)return a;if(\"undefined\"!=typeof XDomainRequest)return new Ch;throw Error(\"Unsupported browser\")},Bh.prototype.b=function(){return{}},(k=Ch.prototype).open=function(a,b,c){if(null!=c&&!c)throw Error(\"Only async requests are supported.\");this.a.open(a,b)},k.send=function(a){if(a){if(\"string\"!=typeof a)throw Error(\"Only string data is supported\");this.a.send(a)}else this.a.send()},k.abort=function(){this.a.abort()},k.setRequestHeader=function(){},k.getResponseHeader=function(a){return\"content-type\"==a.toLowerCase()?this.a.contentType:\"\"},k.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Dh(this,4)},k.Rb=function(){this.status=500,this.response=this.responseText=\"\",Dh(this,4)},k.uc=function(){this.Rb()},k.qc=function(){this.status=200,Dh(this,1)},k.getAllResponseHeaders=function(){return\"content-type: \"+this.a.contentType},Eh.prototype.a=null,Eh.prototype.reset=function(a,b,c,d,e){d||ua(),delete this.a},Hh.prototype.toString=function(){return this.name};var Ih=new Hh(\"SEVERE\",1e3),Jh=new Hh(\"WARNING\",900),Kh=new Hh(\"CONFIG\",700),Lh=new Hh(\"FINE\",500);Gh.prototype.log=function(a,b,c){if(a.value>=function Mh(a){return a.c?a.c:a.a?Mh(a.a):(Ea(\"Root logger has no level set.\"),null)}(this).value)for(na(b)&&(b=b()),a=new Eh(a,String(b),this.f),c&&(a.a=c),c=this;c;)c=c.a};var Nh={},Oh=null;function Ph(a){var b;if(Oh||(Oh=new Gh(\"\"),Nh[\"\"]=Oh,Oh.c=Kh),!(b=Nh[a])){b=new Gh(a);var c=a.lastIndexOf(\".\"),d=a.substr(c+1);(c=Ph(a.substr(0,c))).b||(c.b={}),c.b[d]=b,b.a=c,Nh[a]=b}return b}function Qh(a,b){a&&a.log(Lh,b,void 0)}function Rh(a){this.f=a}function Sh(a){H.call(this),this.o=a,this.readyState=Th,this.status=0,this.responseType=this.responseText=this.response=this.statusText=\"\",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m=\"GET\",this.g=\"\",this.a=!1,this.h=Ph(\"goog.net.FetchXmlHttp\"),this.l=this.c=this.f=null}r(Rh,wh),Rh.prototype.a=function(){return new Sh(this.f)},Rh.prototype.b=function(a){return function(){return a}}({}),r(Sh,H);var Th=0;function Wh(a){a.c.read().then(a.oc.bind(a)).catch(a.Ta.bind(a))}function Vh(a,b){b&&a.f&&(a.status=a.f.status,a.statusText=a.f.statusText),a.readyState=4,a.f=null,a.c=null,a.l=null,Uh(a)}function Uh(a){a.onreadystatechange&&a.onreadystatechange.call(a)}function Xh(a){H.call(this),this.headers=new Ed,this.O=a||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l=\"\",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=Yh,this.u=this.R=!1}(k=Sh.prototype).open=function(a,b){if(this.readyState!=Th)throw this.abort(),Error(\"Error reopening a connection\");this.m=a,this.g=b,this.readyState=1,Uh(this)},k.send=function(a){if(1!=this.readyState)throw this.abort(),Error(\"need to call open() first. \");this.a=!0;var b={headers:this.i,method:this.m,credentials:void 0,cache:void 0};a&&(b.body=a),this.o.fetch(new Request(this.g,b)).then(this.tc.bind(this),this.Ta.bind(this))},k.abort=function(){this.response=this.responseText=\"\",this.i=new Headers,this.status=0,this.c&&this.c.cancel(\"Request was aborted.\"),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Vh(this,!1)),this.readyState=Th},k.tc=function(a){this.a&&(this.f=a,this.b||(this.b=a.headers,this.readyState=2,Uh(this)),this.a&&(this.readyState=3,Uh(this),this.a&&(\"arraybuffer\"===this.responseType?a.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==l.ReadableStream&&\"body\"in a?(this.response=this.responseText=\"\",this.c=a.body.getReader(),this.l=new TextDecoder,Wh(this)):a.text().then(this.sc.bind(this),this.Ta.bind(this)))))},k.oc=function(a){if(this.a){var b=this.l.decode(a.value?a.value:new Uint8Array(0),{stream:!a.done});b&&(this.response=this.responseText+=b),a.done?Vh(this,!0):Uh(this),3==this.readyState&&Wh(this)}},k.sc=function(a){this.a&&(this.response=this.responseText=a,Vh(this,!0))},k.rc=function(a){this.a&&(this.response=a,Vh(this,!0))},k.Ta=function(a){var b=this.h;b&&b.log(Jh,\"Failed to fetch url \"+this.g,a instanceof Error?a:Error(a)),this.a&&Vh(this,!0)},k.setRequestHeader=function(a,b){this.i.append(a,b)},k.getResponseHeader=function(a){return this.b?this.b.get(a.toLowerCase())||\"\":((a=this.h)&&a.log(Jh,\"Attempting to get response header but no headers have been received for url: \"+this.g,void 0),\"\")},k.getAllResponseHeaders=function(){if(!this.b){var a=this.h;return a&&a.log(Jh,\"Attempting to get all response headers but no headers have been received for url: \"+this.g,void 0),\"\"}a=[];for(var b=this.b.entries(),c=b.next();!c.done;)a.push((c=c.value)[0]+\": \"+c[1]),c=b.next();return a.join(\"\\r\\n\")},r(Xh,H);var Yh=\"\";Xh.prototype.b=Ph(\"goog.net.XhrIo\");var Zh=/^https?$/i,$h=[\"POST\",\"PUT\"];function Sa(a){return\"content-type\"==a.toLowerCase()}function ci(a,b){a.c=!1,a.a&&(a.f=!0,a.a.abort(),a.f=!1),a.h=b,fi(a),gi(a)}function fi(a){a.G||(a.G=!0,a.dispatchEvent(\"complete\"),a.dispatchEvent(\"error\"))}function hi(a){if(a.c&&void 0!==ha)if(a.A[1]&&4==ii(a)&&2==ji(a))Qh(a.b,bi(a,\"Local request error detected and ignored\"));else if(a.i&&4==ii(a))zd(a.Ub,0,a);else if(a.dispatchEvent(\"readystatechange\"),4==ii(a)){Qh(a.b,bi(a,\"Request complete\")),a.c=!1;try{var d,b=ji(a);a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}if(!(d=c)){var e;if(e=0===b){var f=String(a.l).match(Hd)[1]||null;if(!f&&l.self&&l.self.location){var g=l.self.location.protocol;f=g.substr(0,g.length-1)}e=!Zh.test(f?f.toLowerCase():\"\")}d=e}if(d)a.dispatchEvent(\"complete\"),a.dispatchEvent(\"success\");else{try{var h=2<ii(a)?a.a.statusText:\"\"}catch(m){Qh(a.b,\"Can not get status: \"+m.message),h=\"\"}a.h=h+\" [\"+ji(a)+\"]\",fi(a)}}finally{gi(a)}}}function gi(a,b){if(a.a){di(a);var c=a.a,d=a.A[0]?ka:null;a.a=null,a.A=null,b||a.dispatchEvent(\"ready\");try{c.onreadystatechange=d}catch(e){(a=a.b)&&a.log(Ih,\"Problem encountered resetting onreadystatechange: \"+e.message,void 0)}}}function di(a){a.a&&a.u&&(a.a.ontimeout=null),a.o&&(l.clearTimeout(a.o),a.o=null)}function ii(a){return a.a?a.a.readyState:0}function ji(a){try{return 2<ii(a)?a.a.status:-1}catch(b){return-1}}function bi(a,b){return b+\" [\"+a.P+\" \"+a.l+\" \"+ji(a)+\"]\"}function li(a){var b=mi;this.g=[],this.u=b,this.o=a||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function pi(a,b,c){a.a=!0,a.c=c,a.f=!b,qi(a)}function oi(a){if(a.a){if(!a.m)throw new ri(a);a.m=!1}}function ti(a,b,c,d){a.g.push([b,c,d]),a.a&&qi(a)}function ui(a){return Qa(a.g,(function(b){return na(b[1])}))}function qi(a){if(a.h&&a.a&&ui(a)){var b=a.h,c=vi[b];c&&(l.clearTimeout(c.a),delete vi[b]),a.h=0}a.b&&(a.b.l--,delete a.b),b=a.c;for(var d=c=!1;a.g.length&&!a.i;){var e=a.g.shift(),f=e[0],g=e[1];if(e=e[2],f=a.f?g:f)try{var h=f.call(e||a.o,b);void 0!==h&&(a.f=a.f&&(h==b||h instanceof Error),a.c=b=h),(Ca(b)||\"function\"==typeof l.Promise&&b instanceof l.Promise)&&(d=!0,a.i=!0)}catch(m){b=m,a.f=!0,ui(a)||(c=!0)}}a.c=b,d&&(h=q(a.v,a,!0),d=q(a.v,a,!1),b instanceof li?(ti(b,h,d),b.A=!0):b.then(h,d)),c&&(b=new wi(b),vi[b.a]=b,a.h=b.a)}function ri(){u.call(this)}function ni(){u.call(this)}function wi(a){this.a=l.setTimeout(q(this.c,this),0),this.b=a}(k=Xh.prototype).Ma=function(){void 0!==ha&&this.a&&(this.h=\"Timed out after \"+this.g+\"ms, aborting\",Qh(this.b,bi(this,this.h)),this.dispatchEvent(\"timeout\"),this.abort(8))},k.abort=function(){this.a&&this.c&&(Qh(this.b,bi(this,\"Aborting\")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent(\"complete\"),this.dispatchEvent(\"abort\"),gi(this))},k.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),gi(this,!0)),Xh.$a.Da.call(this)},k.Ub=function(){this.xa||(this.N||this.i||this.f?hi(this):this.Ic())},k.Ic=function(){hi(this)},k.getResponse=function(){try{if(!this.a)return null;if(\"response\"in this.a)return this.a.response;switch(this.m){case Yh:case\"text\":return this.a.responseText;case\"arraybuffer\":if(\"mozResponseArrayBuffer\"in this.a)return this.a.mozResponseArrayBuffer}var a=this.b;return a&&a.log(Ih,\"Response type \"+this.m+\" is not supported on this browser\",void 0),null}catch(b){return Qh(this.b,\"Can not get response: \"+b.message),null}},li.prototype.cancel=function(a){if(this.a)this.c instanceof li&&this.c.cancel();else{if(this.b){var b=this.b;delete this.b,a?b.cancel(a):(b.l--,0>=b.l&&b.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(a=new ni(this),oi(this),pi(this,!1,a))}},li.prototype.v=function(a,b){this.i=!1,pi(this,a,b)},li.prototype.then=function(a,b,c){var d,e,f=new C((function(g,h){d=g,e=h}));return ti(this,d,(function(g){g instanceof ni?f.cancel():e(g)})),f.then(a,b,c)},li.prototype.$goog_Thenable=!0,r(ri,u),ri.prototype.message=\"Deferred has already fired\",ri.prototype.name=\"AlreadyCalledError\",r(ni,u),ni.prototype.message=\"Deferred was canceled\",ni.prototype.name=\"CanceledError\",wi.prototype.c=function(){throw delete vi[this.a],this.b};var vi={};function xi(a){var b={},c=b.document||document,d=wb(a).toString(),e=jc(document,\"SCRIPT\"),f={Vb:e,Ma:void 0},g=new li(f),h=null,m=null!=b.timeout?b.timeout:5e3;return 0<m&&(h=window.setTimeout((function(){yi(e,!0);var p=new zi(Ai,\"Timeout reached for loading script \"+d);oi(g),pi(g,!1,p)}),m),f.Ma=h),e.onload=e.onreadystatechange=function(){e.readyState&&\"loaded\"!=e.readyState&&\"complete\"!=e.readyState||(yi(e,b.wd||!1,h),oi(g),pi(g,!0,null))},e.onerror=function(){yi(e,!0,h);var p=new zi(Bi,\"Error while loading script \"+d);oi(g),pi(g,!1,p)},z(f=b.attributes||{},{type:\"text/javascript\",charset:\"UTF-8\"}),gc(e,f),function(a,b){nb(a,\"HTMLScriptElement\"),a.src=wb(b),null===ja&&(ja=(b=(b=l.document).querySelector&&b.querySelector(\"script[nonce]\"))&&(b=b.nonce||b.getAttribute(\"nonce\"))&&ia.test(b)?b:\"\"),(b=ja)&&a.setAttribute(\"nonce\",b)}(e,a),function(a){var b;return(b=(a||document).getElementsByTagName(\"HEAD\"))&&0!=b.length?b[0]:a.documentElement}(c).appendChild(e),g}function mi(){if(this&&this.Vb){var a=this.Vb;a&&\"SCRIPT\"==a.tagName&&yi(a,!0,this.Ma)}}function yi(a,b,c){null!=c&&l.clearTimeout(c),a.onload=ka,a.onerror=ka,a.onreadystatechange=ka,b&&window.setTimeout((function(){a&&a.parentNode&&a.parentNode.removeChild(a)}),0)}var Bi=0,Ai=1;function zi(a,b){var c=\"Jsloader error (code #\"+a+\")\";b&&(c+=\": \"+b),u.call(this,c),this.code=a}function Di(a){this.f=a}function Ei(a,b,c){if(this.c=a,this.l=(a=b||{}).secureTokenEndpoint||\"https://securetoken.googleapis.com/v1/token\",this.v=a.secureTokenTimeout||Fi,this.g=lb(a.secureTokenHeaders||Gi),this.h=a.firebaseEndpoint||\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",this.i=a.identityPlatformEndpoint||\"https://identitytoolkit.googleapis.com/v2/\",this.m=a.firebaseTimeout||Hi,this.a=lb(a.firebaseHeaders||Ii),c&&(this.a[\"X-Client-Version\"]=c,this.g[\"X-Client-Version\"]=c),c=\"Node\"==Fe(),!(c=l.XMLHttpRequest||c&&firebase.INTERNAL.node&&firebase.INTERNAL.node.XMLHttpRequest)&&!Ee())throw new t(\"internal-error\",\"The XMLHttpRequest compatibility library was not found.\");this.f=void 0,this.f=Ee()?new Rh(self):Ge()?new Di(c):new Bh,this.b=null}r(zi,u),r(Di,wh),Di.prototype.a=function(){return new this.f},Di.prototype.b=function(){return{}};var Ji,zg=\"idToken\",Fi=new Ue(3e4,6e4),Gi={\"Content-Type\":\"application/x-www-form-urlencoded\"},Hi=new Ue(3e4,6e4),Ii={\"Content-Type\":\"application/json\"};function Ki(a,b){b?a.a[\"X-Firebase-Locale\"]=b:delete a.a[\"X-Firebase-Locale\"]}function Li(a,b){b&&(a.l=Mi(\"https://securetoken.googleapis.com/v1/token\",b),a.h=Mi(\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",b),a.i=Mi(\"https://identitytoolkit.googleapis.com/v2/\",b))}function Mi(a,b){return a=J(a),b=J(b.url),a.c=a.a+a.c,Kd(a,b.f),a.a=b.a,Ld(a,b.g),a.toString()}function Ni(a,b){b?(a.a[\"X-Client-Version\"]=b,a.g[\"X-Client-Version\"]=b):(delete a.a[\"X-Client-Version\"],delete a.g[\"X-Client-Version\"])}function Oi(a,b,c,d,e,f,g){(function(){var a=K();return!((a=\"Chrome\"!=qe(a)?null:(a=a.match(/\\sChrome\\/(\\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&30>a||Tb&&dc&&!(9<dc))})()||Ee()?a=q(a.u,a):(Ji||(Ji=new C((function(h,m){!function(a,b){((window.gapi||{}).client||{}).request?a():(l[Ri]=function(){((window.gapi||{}).client||{}).request?a():b(Error(\"CORS_UNSUPPORTED\"))},function(a,b){ti(a,null,b,void 0)}(xi(xb(Qi,{onload:Ri})),(function(){b(Error(\"CORS_UNSUPPORTED\"))})))}(h,m)}))),a=q(a.o,a)),a(b,c,d,e,f,g)}Ei.prototype.S=function(){return this.b},Ei.prototype.u=function(a,b,c,d,e,f){if(Ee()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new t(\"operation-not-supported-in-this-environment\",\"fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.\");var g=new Xh(this.f);if(f){g.g=Math.max(0,f);var h=setTimeout((function(){g.dispatchEvent(\"timeout\")}),f)}md(g,\"complete\",(function(){h&&clearTimeout(h);var m=null;try{m=JSON.parse(function(a){try{return a.a?a.a.responseText:\"\"}catch(b){return Qh(a.b,\"Can not get responseText: \"+b.message),\"\"}}(this))||null}catch(p){m=null}b&&b(m)})),sd(g,\"ready\",(function(){h&&clearTimeout(h),Tc(this)})),sd(g,\"timeout\",(function(){h&&clearTimeout(h),Tc(this),b&&b(null)})),function(a,b,c,d,e){if(a.a)throw Error(\"[goog.net.XhrIo] Object is active with another request=\"+a.l+\"; newUri=\"+b);c=c?c.toUpperCase():\"GET\",a.l=b,a.h=\"\",a.P=c,a.G=!1,a.c=!0,a.a=a.O?a.O.a():yh.a(),a.A=function(a){return a.c||(a.c=a.b())}(a.O?a.O:yh),a.a.onreadystatechange=q(a.Ub,a);try{Qh(a.b,bi(a,\"Opening Xhr\")),a.N=!0,a.a.open(c,String(b),!0),a.N=!1}catch(g){return Qh(a.b,bi(a,\"Error opening Xhr: \"+g.message)),void ci(a,g)}b=d||\"\";var f=new Ed(a.headers);e&&function(a,b){if(a.forEach&&\"function\"==typeof a.forEach)a.forEach(b,void 0);else if(ma(a)||\"string\"==typeof a)w(a,b,void 0);else for(var c=Cd(a),d=Bd(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}(e,(function(g,h){f.set(h,g)})),e=function(a){a:{for(var b=Sa,c=a.length,d=\"string\"==typeof a?a.split(\"\"):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:\"string\"==typeof a?a.charAt(b):a[b]}(f.Y()),d=l.FormData&&b instanceof l.FormData,!Ta($h,c)||e||d||f.set(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\"),f.forEach((function(g,h){this.a.setRequestHeader(h,g)}),a),a.m&&(a.a.responseType=a.m),\"withCredentials\"in a.a&&a.a.withCredentials!==a.R&&(a.a.withCredentials=a.R);try{di(a),0<a.g&&(a.u=function(a){return Tb&&cc(9)&&\"number\"==typeof a.timeout&&void 0!==a.ontimeout}(a.a),Qh(a.b,bi(a,\"Will abort after \"+a.g+\"ms if incomplete, xhr2 \"+a.u)),a.u?(a.a.timeout=a.g,a.a.ontimeout=q(a.Ma,a)):a.o=zd(a.Ma,a.g,a)),Qh(a.b,bi(a,\"Sending request\")),a.i=!0,a.a.send(b),a.i=!1}catch(g){Qh(a.b,bi(a,\"Send error: \"+g.message)),ci(a,g)}}(g,a,c,d,e)};var Qi=new ob(pb,\"https://apis.google.com/js/client.js?onload=%{onload}\"),Ri=\"__fcb\"+Math.floor(1e6*Math.random()).toString();function Vi(a){if(\"string\"!=typeof(a=a.email)||!ye.test(a))throw new t(\"invalid-email\")}function Wi(a){\"email\"in a&&Vi(a)}function P(a){if(!a[zg]){if(a.mfaPendingCredential)throw new t(\"multi-factor-auth-required\",null,lb(a));throw new t(\"internal-error\")}}function aj(a){if(a.phoneNumber||a.temporaryProof){if(!a.phoneNumber||!a.temporaryProof)throw new t(\"internal-error\")}else{if(!a.sessionInfo)throw new t(\"missing-verification-id\");if(!a.code)throw new t(\"missing-verification-code\")}}Ei.prototype.o=function(a,b,c,d,e){var f=this;Ji.then((function(){window.gapi.client.setApiKey(f.c);var g=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:a,method:c,body:d,headers:e,authType:\"none\",callback:function(h){window.gapi.auth.setToken(g),b&&b(h)}})})).s((function(g){b&&b({error:{message:g&&g.message||\"CORS_UNSUPPORTED\"}})}))},Ei.prototype.yb=function(){return O(this,bj,{})},Ei.prototype.Ab=function(a,b){return O(this,cj,{idToken:a,email:b})},Ei.prototype.Bb=function(a,b){return O(this,Zg,{idToken:a,password:b})};var dj={displayName:\"DISPLAY_NAME\",photoUrl:\"PHOTO_URL\"};function lj(a){if(!a.phoneVerificationInfo)throw new t(\"internal-error\");if(!a.phoneVerificationInfo.sessionInfo)throw new t(\"missing-verification-id\");if(!a.phoneVerificationInfo.code)throw new t(\"missing-verification-code\")}function pj(a){if(!a.requestUri||!a.sessionId&&!a.postBody&&!a.pendingToken)throw new t(\"internal-error\")}function qj(a,b){return b.oauthIdToken&&b.providerId&&0==b.providerId.indexOf(\"oidc.\")&&!b.pendingToken&&(a.sessionId?b.nonce=a.sessionId:a.postBody&&ee(a=new Pd(a.postBody),\"nonce\")&&(b.nonce=a.get(\"nonce\"))),b}function rj(a){var b=null;if(a.needConfirmation?(a.code=\"account-exists-with-different-credential\",b=vh(a)):\"FEDERATED_USER_ID_ALREADY_LINKED\"==a.errorMessage?(a.code=\"credential-already-in-use\",b=vh(a)):\"EMAIL_EXISTS\"==a.errorMessage?(a.code=\"email-already-in-use\",b=vh(a)):a.errorMessage&&(b=sj(a.errorMessage)),b)throw b;P(a)}function Bg(a,b){return b.returnIdpCredential=!0,O(a,tj,b)}function Dg(a,b){return b.returnIdpCredential=!0,O(a,uj,b)}function Eg(a,b){return b.returnIdpCredential=!0,b.autoCreate=!1,O(a,vj,b)}function wj(a){if(!a.oobCode)throw new t(\"invalid-action-code\")}(k=Ei.prototype).Cb=function(a,b){var c={idToken:a},d=[];return jb(dj,(function(e,f){var g=b[f];null===g?d.push(e):f in b&&(c[f]=g)})),d.length&&(c.deleteAttribute=d),O(this,cj,c)},k.ub=function(a,b){return z(a={requestType:\"PASSWORD_RESET\",email:a},b),O(this,ej,a)},k.vb=function(a,b){return z(a={requestType:\"EMAIL_SIGNIN\",email:a},b),O(this,fj,a)},k.tb=function(a,b){return z(a={requestType:\"VERIFY_EMAIL\",idToken:a},b),O(this,gj,a)},k.Db=function(a,b,c){return z(a={requestType:\"VERIFY_AND_CHANGE_EMAIL\",idToken:a,newEmail:b},c),O(this,hj,a)},k.eb=function(a){return O(this,jj,a)},k.mb=function(a,b){return O(this,xj,{oobCode:a,newPassword:b})},k.Qa=function(a){return O(this,yj,{oobCode:a})},k.ib=function(a){return O(this,zj,{oobCode:a})};var zj={endpoint:\"setAccountInfo\",B:wj,Z:\"email\",C:!0},yj={endpoint:\"resetPassword\",B:wj,F:function(a){var b=a.requestType;if(!b||!a.email&&\"EMAIL_SIGNIN\"!=b&&\"VERIFY_AND_CHANGE_EMAIL\"!=b)throw new t(\"internal-error\")},C:!0},Aj={endpoint:\"signupNewUser\",B:function(a){if(Vi(a),!a.password)throw new t(\"weak-password\")},F:P,U:!0,C:!0},Yi={endpoint:\"createAuthUri\",C:!0},Bj={endpoint:\"deleteAccount\",M:[\"idToken\"]},oj={endpoint:\"setAccountInfo\",M:[\"idToken\",\"deleteProvider\"],B:function(a){if(\"array\"!=la(a.deleteProvider))throw new t(\"internal-error\")}},Wg={endpoint:\"emailLinkSignin\",M:[\"email\",\"oobCode\"],B:Vi,F:P,U:!0,C:!0},Yg={endpoint:\"emailLinkSignin\",M:[\"idToken\",\"email\",\"oobCode\"],B:Vi,F:P,U:!0},Cj={endpoint:\"accounts/mfaEnrollment:finalize\",M:[\"idToken\",\"phoneVerificationInfo\"],B:lj,F:P,C:!0,Na:!0},Dj={endpoint:\"accounts/mfaSignIn:finalize\",M:[\"mfaPendingCredential\",\"phoneVerificationInfo\"],B:lj,F:P,C:!0,Na:!0},Ej={endpoint:\"getAccountInfo\"},fj={endpoint:\"getOobConfirmationCode\",M:[\"requestType\"],B:function(a){if(\"EMAIL_SIGNIN\"!=a.requestType)throw new t(\"internal-error\");Vi(a)},Z:\"email\",C:!0},gj={endpoint:\"getOobConfirmationCode\",M:[\"idToken\",\"requestType\"],B:function(a){if(\"VERIFY_EMAIL\"!=a.requestType)throw new t(\"internal-error\")},Z:\"email\",C:!0},hj={endpoint:\"getOobConfirmationCode\",M:[\"idToken\",\"newEmail\",\"requestType\"],B:function(a){if(\"VERIFY_AND_CHANGE_EMAIL\"!=a.requestType)throw new t(\"internal-error\")},Z:\"email\",C:!0},ej={endpoint:\"getOobConfirmationCode\",M:[\"requestType\"],B:function(a){if(\"PASSWORD_RESET\"!=a.requestType)throw new t(\"internal-error\");Vi(a)},Z:\"email\",C:!0},$i={kb:!0,endpoint:\"getProjectConfig\",Tb:\"GET\"},Fj={kb:!0,endpoint:\"getRecaptchaParam\",Tb:\"GET\",F:function(a){if(!a.recaptchaSiteKey)throw new t(\"internal-error\")}},xj={endpoint:\"resetPassword\",B:wj,Z:\"email\",C:!0},ij={endpoint:\"sendVerificationCode\",M:[\"phoneNumber\",\"recaptchaToken\"],Z:\"sessionInfo\",C:!0},cj={endpoint:\"setAccountInfo\",M:[\"idToken\"],B:Wi,U:!0},Zg={endpoint:\"setAccountInfo\",M:[\"idToken\"],B:function(a){if(Wi(a),!a.password)throw new t(\"weak-password\")},F:P,U:!0},bj={endpoint:\"signupNewUser\",F:P,U:!0,C:!0},kj={endpoint:\"accounts/mfaEnrollment:start\",M:[\"idToken\",\"phoneEnrollmentInfo\"],B:function(a){if(!a.phoneEnrollmentInfo)throw new t(\"internal-error\");if(!a.phoneEnrollmentInfo.phoneNumber)throw new t(\"missing-phone-number\");if(!a.phoneEnrollmentInfo.recaptchaToken)throw new t(\"missing-app-credential\")},F:function(a){if(!a.phoneSessionInfo||!a.phoneSessionInfo.sessionInfo)throw new t(\"internal-error\")},C:!0,Na:!0},mj={endpoint:\"accounts/mfaSignIn:start\",M:[\"mfaPendingCredential\",\"mfaEnrollmentId\",\"phoneSignInInfo\"],B:function(a){if(!a.phoneSignInInfo||!a.phoneSignInInfo.recaptchaToken)throw new t(\"missing-app-credential\")},F:function(a){if(!a.phoneResponseInfo||!a.phoneResponseInfo.sessionInfo)throw new t(\"internal-error\")},C:!0,Na:!0},tj={endpoint:\"verifyAssertion\",B:pj,Xa:qj,F:rj,U:!0,C:!0},vj={endpoint:\"verifyAssertion\",B:pj,Xa:qj,F:function(a){if(a.errorMessage&&\"USER_NOT_FOUND\"==a.errorMessage)throw new t(\"user-not-found\");if(a.errorMessage)throw sj(a.errorMessage);P(a)},U:!0,C:!0},uj={endpoint:\"verifyAssertion\",B:function(a){if(pj(a),!a.idToken)throw new t(\"internal-error\")},Xa:qj,F:rj,U:!0},Gj={endpoint:\"verifyCustomToken\",B:function(a){if(!a.token)throw new t(\"invalid-custom-token\")},F:P,U:!0,C:!0},Xg={endpoint:\"verifyPassword\",B:function(a){if(Vi(a),!a.password)throw new t(\"wrong-password\")},F:P,U:!0,C:!0},jj={endpoint:\"verifyPhoneNumber\",B:aj,F:P,C:!0},eh={endpoint:\"verifyPhoneNumber\",B:function(a){if(!a.idToken)throw new t(\"internal-error\");aj(a)},F:function(a){if(a.temporaryProof)throw a.code=\"credential-already-in-use\",vh(a);P(a)}},fh={Gb:{USER_NOT_FOUND:\"user-not-found\"},endpoint:\"verifyPhoneNumber\",B:aj,F:P,C:!0},Hj={endpoint:\"accounts/mfaEnrollment:withdraw\",M:[\"idToken\",\"mfaEnrollmentId\"],F:function(a){if(!!a[zg]^!!a.refreshToken)throw new t(\"internal-error\")},C:!0,Na:!0};function O(a,b,c){if(!function(a,b){if(!b||!b.length)return!0;if(!a)return!1;for(var c=0;c<b.length;c++){var d=a[b[c]];if(null==d||\"\"===d)return!1}return!0}(c,b.M))return E(new t(\"internal-error\"));var f,d=!!b.Na,e=b.Tb||\"POST\";return D(c).then(b.B).then((function(){return b.U&&(c.returnSecureToken=!0),b.C&&a.b&&void 0===c.tenantId&&(c.tenantId=a.b),function(a,b,c,d,e,f,g){var h=J(b+c);I(h,\"key\",a.c),g&&I(h,\"cb\",ua().toString());var m=\"GET\"==d;if(m)for(var p in e)e.hasOwnProperty(p)&&I(h,p,e[p]);return new C((function(v,B){Oi(a,h.toString(),(function(A){A?A.error?B(Ti(A,f||{})):v(A):B(new t(\"network-request-failed\"))}),d,m?void 0:fe(Qe(e)),a.a,a.m.get())}))}(a,d?a.i:a.h,b.endpoint,e,c,b.Gb,b.kb||!1)})).then((function(g){return f=g,b.Xa?b.Xa(c,f):f})).then(b.F).then((function(){if(!b.Z)return f;if(!(b.Z in f))throw new t(\"internal-error\");return f[b.Z]}))}function sj(a){return Ti({error:{errors:[{message:a}],code:400,message:a}})}function Ti(a,b){var c=(a.error&&a.error.errors&&a.error.errors[0]||{}).reason||\"\",d={keyInvalid:\"invalid-api-key\",ipRefererBlocked:\"app-not-authorized\"};if(c=d[c]?new t(d[c]):null)return c;for(var e in c=a.error&&a.error.message||\"\",z(d={INVALID_CUSTOM_TOKEN:\"invalid-custom-token\",CREDENTIAL_MISMATCH:\"custom-token-mismatch\",MISSING_CUSTOM_TOKEN:\"internal-error\",INVALID_IDENTIFIER:\"invalid-email\",MISSING_CONTINUE_URI:\"internal-error\",INVALID_EMAIL:\"invalid-email\",INVALID_PASSWORD:\"wrong-password\",USER_DISABLED:\"user-disabled\",MISSING_PASSWORD:\"internal-error\",EMAIL_EXISTS:\"email-already-in-use\",PASSWORD_LOGIN_DISABLED:\"operation-not-allowed\",INVALID_IDP_RESPONSE:\"invalid-credential\",INVALID_PENDING_TOKEN:\"invalid-credential\",FEDERATED_USER_ID_ALREADY_LINKED:\"credential-already-in-use\",MISSING_OR_INVALID_NONCE:\"missing-or-invalid-nonce\",INVALID_MESSAGE_PAYLOAD:\"invalid-message-payload\",INVALID_RECIPIENT_EMAIL:\"invalid-recipient-email\",INVALID_SENDER:\"invalid-sender\",EMAIL_NOT_FOUND:\"user-not-found\",RESET_PASSWORD_EXCEED_LIMIT:\"too-many-requests\",EXPIRED_OOB_CODE:\"expired-action-code\",INVALID_OOB_CODE:\"invalid-action-code\",MISSING_OOB_CODE:\"internal-error\",INVALID_PROVIDER_ID:\"invalid-provider-id\",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:\"requires-recent-login\",INVALID_ID_TOKEN:\"invalid-user-token\",TOKEN_EXPIRED:\"user-token-expired\",USER_NOT_FOUND:\"user-token-expired\",CORS_UNSUPPORTED:\"cors-unsupported\",DYNAMIC_LINK_NOT_ACTIVATED:\"dynamic-link-not-activated\",INVALID_APP_ID:\"invalid-app-id\",TOO_MANY_ATTEMPTS_TRY_LATER:\"too-many-requests\",WEAK_PASSWORD:\"weak-password\",OPERATION_NOT_ALLOWED:\"operation-not-allowed\",USER_CANCELLED:\"user-cancelled\",CAPTCHA_CHECK_FAILED:\"captcha-check-failed\",INVALID_APP_CREDENTIAL:\"invalid-app-credential\",INVALID_CODE:\"invalid-verification-code\",INVALID_PHONE_NUMBER:\"invalid-phone-number\",INVALID_SESSION_INFO:\"invalid-verification-id\",INVALID_TEMPORARY_PROOF:\"invalid-credential\",MISSING_APP_CREDENTIAL:\"missing-app-credential\",MISSING_CODE:\"missing-verification-code\",MISSING_PHONE_NUMBER:\"missing-phone-number\",MISSING_SESSION_INFO:\"missing-verification-id\",QUOTA_EXCEEDED:\"quota-exceeded\",SESSION_EXPIRED:\"code-expired\",REJECTED_CREDENTIAL:\"rejected-credential\",INVALID_CONTINUE_URI:\"invalid-continue-uri\",MISSING_ANDROID_PACKAGE_NAME:\"missing-android-pkg-name\",MISSING_IOS_BUNDLE_ID:\"missing-ios-bundle-id\",UNAUTHORIZED_DOMAIN:\"unauthorized-continue-uri\",INVALID_DYNAMIC_LINK_DOMAIN:\"invalid-dynamic-link-domain\",INVALID_OAUTH_CLIENT_ID:\"invalid-oauth-client-id\",INVALID_CERT_HASH:\"invalid-cert-hash\",UNSUPPORTED_TENANT_OPERATION:\"unsupported-tenant-operation\",INVALID_TENANT_ID:\"invalid-tenant-id\",TENANT_ID_MISMATCH:\"tenant-id-mismatch\",ADMIN_ONLY_OPERATION:\"admin-restricted-operation\",INVALID_MFA_PENDING_CREDENTIAL:\"invalid-multi-factor-session\",MFA_ENROLLMENT_NOT_FOUND:\"multi-factor-info-not-found\",MISSING_MFA_PENDING_CREDENTIAL:\"missing-multi-factor-session\",MISSING_MFA_ENROLLMENT_ID:\"missing-multi-factor-info\",EMAIL_CHANGE_NEEDS_VERIFICATION:\"email-change-needs-verification\",SECOND_FACTOR_EXISTS:\"second-factor-already-in-use\",SECOND_FACTOR_LIMIT_EXCEEDED:\"maximum-second-factor-count-exceeded\",UNSUPPORTED_FIRST_FACTOR:\"unsupported-first-factor\",UNVERIFIED_EMAIL:\"unverified-email\"},b||{}),b=(b=c.match(/^[^\\s]+\\s*:\\s*([\\s\\S]*)$/))&&1<b.length?b[1]:void 0,d)if(0===c.indexOf(e))return new t(d[e],b);return!b&&a&&(b=Pe(a)),new t(\"internal-error\",b)}function Ij(a){this.b=a,this.a=null,this.qb=function(a){return(Qj||(Qj=new C((function(a,b){function c(){Te(),L(\"gapi.load\")(\"gapi.iframes\",{callback:a,ontimeout:function(){Te(),b(Error(\"Network Error\"))},timeout:Pj.get()})}if(L(\"gapi.iframes.Iframe\"))a();else if(L(\"gapi.load\"))c();else{var d=\"__iframefcb\"+Math.floor(1e6*Math.random()).toString();l[d]=function(){L(\"gapi.load\")?c():b(Error(\"Network Error\"))},D(xi(d=xb(Oj,{onload:d}))).s((function(){b(Error(\"Network Error\"))}))}})).s((function(a){throw Qj=null,a})))).then((function(){return new C((function(b,c){L(\"gapi.iframes.getContext\")().open({where:document.body,url:a.b,messageHandlersFilter:L(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"),attributes:{style:{position:\"absolute\",top:\"-100px\",width:\"1px\",height:\"1px\"}},dontclear:!0},(function(d){function e(){clearTimeout(f),b()}a.a=d,a.a.restyle({setHideOnLeave:!1});var f=setTimeout((function(){c(Error(\"Network Error\"))}),Lj.get());d.ping(e).then(e,(function(){c(Error(\"Network Error\"))}))}))}))}))}(this)}var Oj=new ob(pb,\"https://apis.google.com/js/api.js?onload=%{onload}\"),Pj=new Ue(3e4,6e4),Lj=new Ue(5e3,15e3),Qj=null;function Rj(a,b,c,d){this.l=a,this.h=b,this.i=c,this.g=d,this.f=null,a=this.g?Yd((a=J(this.g.url)).f,a.a,a.g,\"/emulator/auth/iframe\"):Yd(\"https\",this.l,null,\"/__/auth/iframe\"),this.a=a,I(this.a,\"apiKey\",this.h),I(this.a,\"appName\",this.i),this.b=null,this.c=[]}function Sj(a,b,c,d,e,f){this.u=a,this.o=b,this.c=c,this.v=d,this.m=f,this.i=this.g=this.l=null,this.a=e,this.h=this.f=null}function Tj(a){try{return firebase.app(a).auth().Ga()}catch(b){return[]}}function Uj(a,b,c,d,e,f){this.o=a,this.g=b,this.b=c,this.f=f,this.c=d||null,this.i=e||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function Vj(a){var b=me();return function(a){return O(a,$i,{}).then((function(b){return b.authorizedDomains||[]}))}(a).then((function(c){a:{var d=J(b),e=d.f;d=d.a;for(var f=0;f<c.length;f++){var g=c[f],h=d,m=e;if(0==g.indexOf(\"chrome-extension://\")?h=J(g).a==h&&\"chrome-extension\"==m:\"http\"!=m&&\"https\"!=m?h=!1:xe.test(g)?h=h==g:(g=g.split(\".\").join(\"\\\\.\"),h=new RegExp(\"^(.+\\\\.\"+g+\"|\"+g+\")$\",\"i\").test(h)),h){c=!0;break a}}c=!1}if(!c)throw new th(me())}))}function Wj(a){return a.v||(a.v=ze().then((function(){if(!a.u){var b=a.c,c=a.i,d=Tj(a.b),e=new Rj(a.o,a.g,a.b,a.f);e.f=b,e.b=c,e.c=Xa(d||[]),a.u=e.toString()}a.m=new Ij(a.u),function(a){if(!a.m)throw Error(\"IfcHandler must be initialized!\");!function(a,b){a.qb.then((function(){a.a.register(\"authEvent\",b,L(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))}))}(a.m,(function(b){var c={};if(b&&b.authEvent){var d=!1;for(b=ph(b.authEvent),c=0;c<a.h.length;c++)d=a.h[c](b)||d;return(c={}).status=d?\"ACK\":\"ERROR\",D(c)}return c.status=\"ERROR\",D(c)}))}(a)}))),a.v}function Zj(a){return a.l||(a.A=a.c?Je(a.c,Tj(a.b)):null,a.l=new Ei(a.g,Aa(a.i),a.A),a.f&&Li(a.l,a.f)),a.l}function ak(a,b,c,d,e,f,g,h,m,p,v,B){return(a=new Sj(a,b,c,d,e,B)).l=f,a.g=g,a.i=h,a.b=lb(m||null),a.f=p,a.xb(v).toString()}function bk(a){if(this.a=a||firebase.INTERNAL.reactNative&&firebase.INTERNAL.reactNative.AsyncStorage,!this.a)throw new t(\"internal-error\",\"The React Native compatibility library was not found.\");this.type=\"asyncStorage\"}function ck(a){this.b=a,this.a={},this.f=q(this.c,this)}Rj.prototype.toString=function(){return this.f?I(this.a,\"v\",this.f):de(this.a.b,\"v\"),this.b?I(this.a,\"eid\",this.b):de(this.a.b,\"eid\"),this.c.length?I(this.a,\"fw\",this.c.join(\",\")):de(this.a.b,\"fw\"),this.a.toString()},Sj.prototype.xb=function(a){return this.h=a,this},Sj.prototype.toString=function(){if(this.m){var a=J(this.m.url);a=Yd(a.f,a.a,a.g,\"/emulator/auth/handler\")}else a=Yd(\"https\",this.u,null,\"/__/auth/handler\");if(I(a,\"apiKey\",this.o),I(a,\"appName\",this.c),I(a,\"authType\",this.v),this.a.isOAuthProvider){var b=this.a;try{var c=firebase.app(this.c).auth().ka()}catch(h){c=null}for(var d in b.nb=c,I(a,\"providerId\",this.a.providerId),b=Qe((c=this.a).Hb))b[d]=b[d].toString();d=c.Pc,b=lb(b);for(var e=0;e<d.length;e++){var f=d[e];f in b&&delete b[f]}c.ob&&c.nb&&!b[c.ob]&&(b[c.ob]=c.nb),kb(b)||I(a,\"customParameters\",Pe(b))}if(\"function\"==typeof this.a.Pb&&(c=this.a.Pb()).length&&I(a,\"scopes\",c.join(\",\")),this.l?I(a,\"redirectUrl\",this.l):de(a.b,\"redirectUrl\"),this.g?I(a,\"eventId\",this.g):de(a.b,\"eventId\"),this.i?I(a,\"v\",this.i):de(a.b,\"v\"),this.b)for(var g in this.b)this.b.hasOwnProperty(g)&&!Xd(a,g)&&I(a,g,this.b[g]);return this.h?I(a,\"tid\",this.h):de(a.b,\"tid\"),this.f?I(a,\"eid\",this.f):de(a.b,\"eid\"),(g=Tj(this.c)).length&&I(a,\"fw\",g.join(\",\")),a.toString()},(k=Uj.prototype).Nb=function(a,b,c){var d=new t(\"popup-closed-by-user\"),e=new t(\"web-storage-unsupported\"),f=this,g=!1;return this.la().then((function(){(function(a){var b={type:\"webStorageSupport\"};return Wj(a).then((function(){return function(a,b){return a.qb.then((function(){return new C((function(c){a.a.send(b.type,b,c,L(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))}))}))}(a.m,b)})).then((function(c){if(c&&c.length&&void 0!==c[0].webStorageSupport)return c[0].webStorageSupport;throw Error()}))})(f).then((function(h){h||(a&&te(a),b(e),g=!0)}))})).s((function(){})).then((function(){if(!g)return function(a){return new C((function(b){return function c(){Ad(2e3).then((function(){if(a&&!a.closed)return c();b()}))}()}))}(a)})).then((function(){if(!g)return Ad(c).then((function(){b(d)}))}))},k.Wb=function(){var a=K();return!Oe(a)&&!Se(a)},k.Sb=function(){return!1},k.Lb=function(a,b,c,d,e,f,g,h){if(!a)return E(new t(\"popup-blocked\"));if(g&&!Oe())return this.la().s((function(p){te(a),e(p)})),d(),D();this.a||(this.a=Vj(Zj(this)));var m=this;return this.a.then((function(){var p=m.la().s((function(v){throw te(a),e(v),v}));return d(),p})).then((function(){nh(c),g||ne(ak(m.o,m.g,m.b,b,c,null,f,m.c,void 0,m.i,h,m.f),a)})).s((function(p){throw\"auth/network-request-failed\"==p.code&&(m.a=null),p}))},k.Mb=function(a,b,c,d){this.a||(this.a=Vj(Zj(this)));var e=this;return this.a.then((function(){nh(b),ne(ak(e.o,e.g,e.b,a,b,me(),c,e.c,void 0,e.i,d,e.f))})).s((function(f){throw\"auth/network-request-failed\"==f.code&&(e.a=null),f}))},k.la=function(){var a=this;return Wj(this).then((function(){return a.m.qb})).s((function(){throw a.a=null,new t(\"network-request-failed\")}))},k.Zb=function(){return!0},k.Ea=function(a){this.h.push(a)},k.Ra=function(a){Va(this.h,(function(b){return b==a}))},(k=bk.prototype).get=function(a){return D(this.a.getItem(a)).then((function(b){return b&&Re(b)}))},k.set=function(a,b){return D(this.a.setItem(a,Pe(b)))},k.T=function(a){return D(this.a.removeItem(a))},k.ca=function(){},k.ia=function(){};var nk,dk=[];function fk(a,b,c){kb(a.a)&&a.b.addEventListener(\"message\",a.f),void 0===a.a[b]&&(a.a[b]=[]),a.a[b].push(c)}function gk(a){this.a=a}function hk(a){this.c=a,this.b=!1,this.a=[]}function ik(a,b,c,d){var e,g,h,m,f=c||{},p=null;if(a.b)return E(Error(\"connection_unavailable\"));var v=d?800:50,B=\"undefined\"!=typeof MessageChannel?new MessageChannel:null;return new C((function(A,Q){B?(e=Math.floor(Math.random()*Math.pow(10,20)).toString(),B.port1.start(),h=setTimeout((function(){Q(Error(\"unsupported_event\"))}),v),a.a.push(p={messageChannel:B,onMessage:g=function(xa){xa.data.eventId===e&&(\"ack\"===xa.data.status?(clearTimeout(h),m=setTimeout((function(){Q(Error(\"timeout\"))}),3e3)):\"done\"===xa.data.status?(clearTimeout(m),void 0!==xa.data.response?A(xa.data.response):Q(Error(\"unknown_error\"))):(clearTimeout(h),clearTimeout(m),Q(Error(\"invalid_response\"))))}}),B.port1.addEventListener(\"message\",g),a.c.postMessage({eventType:b,eventId:e,data:f},[B.port2])):Q(Error(\"connection_unavailable\"))})).then((function(A){return jk(a,p),A})).s((function(A){throw jk(a,p),A}))}function jk(a,b){if(b){var c=b.messageChannel;c&&(c.port1.removeEventListener(\"message\",b.onMessage),c.port1.close()),Va(a.a,(function(e){return e==b}))}}function kk(){if(!lk())throw new t(\"web-storage-unsupported\");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type=\"indexedDB\",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var a=this;Ee()&&self?(this.l=function(){var a=Ee()?self:null;if(w(dk,(function(c){c.b==a&&(b=c)})),!b){var b=new ck(a);dk.push(b)}return b}(),fk(this.l,\"keyChanged\",(function(b,c){return mk(a).then((function(d){return 0<d.length&&w(a.a,(function(e){e(d)})),{keyProcessed:Ta(d,c.key)}}))})),fk(this.l,\"ping\",(function(){return D([\"keyChanged\"])}))):function(){var a=l.navigator;return a&&a.serviceWorker?D().then((function(){return a.serviceWorker.ready})).then((function(b){return b.active||null})).s((function(){return null})):D(null)}().then((function(b){(a.h=b)&&(a.g=new hk(new gk(b)),ik(a.g,\"ping\",null,!0).then((function(c){c[0].fulfilled&&Ta(c[0].value,\"keyChanged\")&&(a.o=!0)})).s((function(){})))}))}function qk(a){return a.v||(a.v=function pk(a){return new C((function(b,c){var d=a.m.open(\"firebaseLocalStorageDb\",1);d.onerror=function(e){try{e.preventDefault()}catch(f){}c(Error(e.target.error))},d.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore(\"firebaseLocalStorage\",{keyPath:\"fbase_key\"})}catch(f){c(f)}},d.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains(\"firebaseLocalStorage\")?b(e):function(a){return new C((function(b,c){var d=a.m.deleteDatabase(\"firebaseLocalStorageDb\");d.onsuccess=function(){b()},d.onerror=function(e){c(Error(e.target.error))}}))}(a).then((function(){return pk(a)})).then((function(f){b(f)})).s((function(f){c(f)}))}}))}(a)),a.v}function lk(){try{return!!l.indexedDB}catch(a){return!1}}function rk(a){return a.objectStore(\"firebaseLocalStorage\")}function sk(a,b){return a.transaction([\"firebaseLocalStorage\"],b?\"readwrite\":\"readonly\")}function tk(a){return new C((function(b,c){a.onsuccess=function(d){d&&d.target?b(d.target.result):b()},a.onerror=function(d){c(d.target.error)}}))}function uk(a,b){return a.g&&a.h&&function(){var a=l.navigator;return a&&a.serviceWorker&&a.serviceWorker.controller||null}()===a.h?ik(a.g,\"keyChanged\",{key:b},a.o).then((function(){})).s((function(){})):D()}function mk(a){return qk(a).then((function(b){var c=rk(sk(b,!1));return c.getAll?tk(c.getAll()):new C((function(d,e){var f=[],g=c.openCursor();g.onsuccess=function(h){(h=h.target.result)?(f.push(h.value),h.continue()):d(f)},g.onerror=function(h){e(h.target.error)}}))})).then((function(b){var c={},d=[];if(0==a.b){for(d=0;d<b.length;d++)c[b[d].fbase_key]=b[d].value;d=function oe(a,b){var d,c=[];for(d in a)d in b?typeof a[d]!=typeof b[d]?c.push(d):\"object\"==typeof a[d]&&null!=a[d]&&null!=b[d]?0<oe(a[d],b[d]).length&&c.push(d):a[d]!==b[d]&&c.push(d):c.push(d);for(d in b)d in a||c.push(d);return c}(a.c,c),a.c=c}return d}))}function wk(a){a.i&&a.i.cancel(\"STOP_EVENT\"),a.f&&(clearTimeout(a.f),a.f=null)}function xk(a){var b=this,c=null;this.a=[],this.type=\"indexedDB\",this.c=a,this.b=D().then((function(){if(lk()){var d=Le(),e=\"__sak\"+d;return nk||(nk=new kk),(c=nk).set(e,d).then((function(){return c.get(e)})).then((function(f){if(f!==d)throw Error(\"indexedDB not supported!\");return c.T(e)})).then((function(){return c})).s((function(){return b.c}))}return b.c})).then((function(d){return b.type=d.type,d.ca((function(e){w(b.a,(function(f){f(e)}))})),d}))}function yk(){this.a={},this.type=\"inMemory\"}function zk(){if(!function(){var a=\"Node\"==Fe();if(!(a=Bk()||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.localStorage))return!1;try{return a.setItem(\"__sak\",\"1\"),a.removeItem(\"__sak\"),!0}catch(b){return!1}}()){if(\"Node\"==Fe())throw new t(\"internal-error\",\"The LocalStorage compatibility library was not found.\");throw new t(\"web-storage-unsupported\")}this.a=Bk()||firebase.INTERNAL.node.localStorage,this.type=\"localStorage\"}function Bk(){try{var a=l.localStorage,b=Le();return a&&(a.setItem(b,\"1\"),a.removeItem(b)),a}catch(c){return null}}function Ck(){this.type=\"nullStorage\"}function Dk(){if(!function(){var a=\"Node\"==Fe();if(!(a=Fk()||a&&firebase.INTERNAL.node&&firebase.INTERNAL.node.sessionStorage))return!1;try{return a.setItem(\"__sak\",\"1\"),a.removeItem(\"__sak\"),!0}catch(b){return!1}}()){if(\"Node\"==Fe())throw new t(\"internal-error\",\"The SessionStorage compatibility library was not found.\");throw new t(\"web-storage-unsupported\")}this.a=Fk()||firebase.INTERNAL.node.sessionStorage,this.type=\"sessionStorage\"}function Fk(){try{var a=l.sessionStorage,b=Le();return a&&(a.setItem(b,\"1\"),a.removeItem(b)),a}catch(c){return null}}function Gk(){var a={};a.Browser=Hk,a.Node=Ik,a.ReactNative=Jk,a.Worker=Kk,this.a=a[Fe()]}ck.prototype.c=function(a){var b=a.data.eventType,c=a.data.eventId,d=this.a[b];if(d&&0<d.length){a.ports[0].postMessage({status:\"ack\",eventId:c,eventType:b,response:null});var e=[];w(d,(function(f){e.push(D().then((function(){return f(a.origin,a.data.data)})))})),Fc(e).then((function(f){var g=[];w(f,(function(h){g.push({fulfilled:h.Ob,value:h.value,reason:h.reason?h.reason.message:void 0})})),w(g,(function(h){for(var m in h)void 0===h[m]&&delete h[m]})),a.ports[0].postMessage({status:\"done\",eventId:c,eventType:b,response:g})}))}},gk.prototype.postMessage=function(a,b){this.a.postMessage(a,b)},hk.prototype.close=function(){for(;0<this.a.length;)jk(this,this.a[0]);this.b=!0},(k=kk.prototype).set=function(a,b){var d,c=!1,e=this;return qk(this).then((function(f){return tk((f=rk(sk(d=f,!0))).get(a))})).then((function(f){var g=rk(sk(d,!0));return f?(f.value=b,tk(g.put(f))):(e.b++,c=!0,(f={}).fbase_key=a,f.value=b,tk(g.add(f)))})).then((function(){return e.c[a]=b,uk(e,a)})).na((function(){c&&e.b--}))},k.get=function(a){return qk(this).then((function(b){return tk(rk(sk(b,!1)).get(a))})).then((function(b){return b&&b.value}))},k.T=function(a){var b=!1,c=this;return qk(this).then((function(d){return b=!0,c.b++,tk(rk(sk(d,!0)).delete(a))})).then((function(){return delete c.c[a],uk(c,a)})).na((function(){b&&c.b--}))},k.ca=function(a){0==this.a.length&&function(a){wk(a),function b(){a.f=setTimeout((function(){a.i=mk(a).then((function(c){0<c.length&&w(a.a,(function(d){d(c)}))})).then((function(){b()})).s((function(c){\"STOP_EVENT\"!=c.message&&b()}))}),800)}()}(this),this.a.push(a)},k.ia=function(a){Va(this.a,(function(b){return b==a})),0==this.a.length&&wk(this)},(k=xk.prototype).get=function(a){return this.b.then((function(b){return b.get(a)}))},k.set=function(a,b){return this.b.then((function(c){return c.set(a,b)}))},k.T=function(a){return this.b.then((function(b){return b.T(a)}))},k.ca=function(a){this.a.push(a)},k.ia=function(a){Va(this.a,(function(b){return b==a}))},(k=yk.prototype).get=function(a){return D(this.a[a])},k.set=function(a,b){return this.a[a]=b,D()},k.T=function(a){return delete this.a[a],D()},k.ca=function(){},k.ia=function(){},(k=zk.prototype).get=function(a){var b=this;return D().then((function(){return Re(b.a.getItem(a))}))},k.set=function(a,b){var c=this;return D().then((function(){var d=Pe(b);null===d?c.T(a):c.a.setItem(a,d)}))},k.T=function(a){var b=this;return D().then((function(){b.a.removeItem(a)}))},k.ca=function(a){l.window&&jd(l.window,\"storage\",a)},k.ia=function(a){l.window&&G(l.window,\"storage\",a)},(k=Ck.prototype).get=function(){return D(null)},k.set=function(){return D()},k.T=function(){return D()},k.ca=function(){},k.ia=function(){},(k=Dk.prototype).get=function(a){var b=this;return D().then((function(){return Re(b.a.getItem(a))}))},k.set=function(a,b){var c=this;return D().then((function(){var d=Pe(b);null===d?c.T(a):c.a.setItem(a,d)}))},k.T=function(a){var b=this;return D().then((function(){b.a.removeItem(a)}))},k.ca=function(){},k.ia=function(){};var Lk,Pk,Hk={D:zk,ab:Dk},Ik={D:zk,ab:Dk},Jk={D:bk,ab:Ck},Kk={D:zk,ab:Ck},Mk={qd:\"local\",NONE:\"none\",sd:\"session\"};function Ok(){var a=!(Se(K())||!De()),b=Oe(),c=Ke();this.v=a,this.h=b,this.l=c,this.a={},Lk||(Lk=new Gk),a=Lk;try{this.g=!le()&&Ze()||!l.indexedDB?new a.a.D:new xk(Ee()?new yk:new a.a.D)}catch(d){this.g=new yk,this.h=!0}try{this.i=new a.a.ab}catch(d){this.i=new yk}this.m=new yk,this.f=q(this.Xb,this),this.b={}}function Qk(){return Pk||(Pk=new Ok),Pk}function Rk(a,b){switch(b){case\"session\":return a.i;case\"none\":return a.m;default:return a.g}}function Sk(a,b){return\"firebase:\"+a.name+(b?\":\"+b:\"\")}function Uk(a,b,c){return c=Sk(b,c),\"local\"==b.D&&(a.b[c]=null),Rk(a,b.D).T(c)}function Wk(a){a.c&&(clearInterval(a.c),a.c=null)}function Xk(a){this.a=a,this.b=Qk()}(k=Ok.prototype).get=function(a,b){return Rk(this,a.D).get(Sk(a,b))},k.set=function(a,b,c){var d=Sk(a,c),e=this,f=Rk(this,a.D);return f.set(d,b).then((function(){return f.get(d)})).then((function(g){\"local\"==a.D&&(e.b[d]=g)}))},k.addListener=function(a,b,c){a=Sk(a,b),this.l&&(this.b[a]=l.localStorage.getItem(a)),kb(this.a)&&(Rk(this,\"local\").ca(this.f),this.h||(le()||!Ze())&&l.indexedDB||!this.l||function(a){Wk(a),a.c=setInterval((function(){for(var b in a.a){var c=l.localStorage.getItem(b),d=a.b[b];c!=d&&(a.b[b]=c,c=new Yc({type:\"storage\",key:b,target:window,oldValue:d,newValue:c,a:!0}),a.Xb(c))}}),1e3)}(this)),this.a[a]||(this.a[a]=[]),this.a[a].push(c)},k.removeListener=function(a,b,c){a=Sk(a,b),this.a[a]&&(Va(this.a[a],(function(d){return d==c})),0==this.a[a].length&&delete this.a[a]),kb(this.a)&&(Rk(this,\"local\").ia(this.f),Wk(this))},k.Xb=function(a){if(a&&a.g){var b=a.a.key;if(null==b)for(var c in this.a){var d=this.b[c];void 0===d&&(d=null);var e=l.localStorage.getItem(c);e!==d&&(this.b[c]=e,this.lb(c))}else if(0==b.indexOf(\"firebase:\")&&this.a[b]){if(void 0!==a.a.a?Rk(this,\"local\").ia(this.f):Wk(this),this.v)if(c=l.localStorage.getItem(b),(d=a.a.newValue)!==c)null!==d?l.localStorage.setItem(b,d):l.localStorage.removeItem(b);else if(this.b[b]===d&&void 0===a.a.a)return;var f=this;c=function(){void 0===a.a.a&&f.b[b]===l.localStorage.getItem(b)||(f.b[b]=l.localStorage.getItem(b),f.lb(b))},Tb&&dc&&10==dc&&l.localStorage.getItem(b)!==a.a.newValue&&a.a.newValue!==a.a.oldValue?setTimeout(c,10):c()}}else w(a,q(this.lb,this))},k.lb=function(a){this.a[a]&&w(this.a[a],(function(b){b()}))};var dl,Yk={name:\"authEvent\",D:\"local\"};function $k(){this.a=Qk()}function bl(a,b){this.b=cl,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=a,this.h=b,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===dl&&(dl=l.Int32Array?new Int32Array(el):el),this.reset()}r(bl,(function(){this.b=-1}));for(var cl=64,fl=cl-1,gl=[],hl=0;hl<fl;hl++)gl[hl]=0;var il=Wa(128,gl);function jl(a){for(var b=a.f,c=a.l,d=0,e=0;e<b.length;)c[d++]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3],e=4*d;for(b=16;64>b;b++){var f=(0|c[b-16])+(((e=0|c[b-15])>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)|0,g=(0|c[b-7])+(((d=0|c[b-2])>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;c[b]=f+g|0}d=0|a.a[0],e=0|a.a[1];var h=0|a.a[2],m=0|a.a[3],p=0|a.a[4],v=0|a.a[5],B=0|a.a[6];for(f=0|a.a[7],b=0;64>b;b++){var A=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&e^d&h^e&h)|0;g=(f=f+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))|0)+((g=(g=p&v^~p&B)+(0|dl[b])|0)+(0|c[b])|0)|0,f=B,B=v,v=p,p=m+g|0,m=h,h=e,e=d,d=g+A|0}a.a[0]=a.a[0]+d|0,a.a[1]=a.a[1]+e|0,a.a[2]=a.a[2]+h|0,a.a[3]=a.a[3]+m|0,a.a[4]=a.a[4]+p|0,a.a[5]=a.a[5]+v|0,a.a[6]=a.a[6]+B|0,a.a[7]=a.a[7]+f|0}function kl(a,b,c){void 0===c&&(c=b.length);var d=0,e=a.c;if(\"string\"==typeof b)for(;d<c;)a.f[e++]=b.charCodeAt(d++),e==a.b&&(jl(a),e=0);else{if(!ma(b))throw Error(\"message must be string or array\");for(;d<c;){var f=b[d++];if(!(\"number\"==typeof f&&0<=f&&255>=f&&f==(0|f)))throw Error(\"message must be a byte array\");a.f[e++]=f,e==a.b&&(jl(a),e=0)}}a.c=e,a.g+=c}bl.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Xa(this.h)};var el=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ll(){bl.call(this,8,ml)}r(ll,bl);var ml=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function nl(a,b,c,d,e,f){this.m=a,this.i=b,this.l=c,this.v=d||null,this.u=e||null,this.o=f,this.h=b+\":\"+c,this.A=new $k,this.g=new Xk(this.h),this.f=null,this.b=[],this.a=this.c=null}function ol(a){return new t(\"invalid-cordova-configuration\",a)}function ul(a,b){for(var c=0;c<a.b.length;c++)try{a.b[c](b)}catch(d){}}function rl(a){return a.f||(a.f=a.la().then((function(){return new C((function(b){a.Ea((function c(d){return b(d),a.Ra(c),!1})),function(a){function b(g){d=!0,e&&e.cancel(),tl(a).then((function(h){var m=c;if(h&&g&&g.url){var p=null;-1!=(m=tg(g.url)).indexOf(\"/__/auth/callback\")&&(p=(p=\"object\"==typeof(p=Re(Xd(p=J(m),\"firebaseError\")||null))?ya(p):null)?new oh(h.c,h.b,null,null,p,null,h.S()):new oh(h.c,h.b,m,h.f,null,null,h.S())),m=p||c}ul(a,m)}))}var c=new oh(\"unknown\",null,null,null,new t(\"no-auth-event\")),d=!1,e=Ad(500).then((function(){return tl(a).then((function(){d||ul(a,c)}))})),f=l.handleOpenURL;l.handleOpenURL=function(g){if(0==g.toLowerCase().indexOf(L(\"BuildInfo.packageName\",l).toLowerCase()+\"://\")&&b({url:g}),\"function\"==typeof f)try{f(g)}catch(h){console.error(h)}},rh||(rh=new qh),function(a){var b=rh;b.a.push(a),b.b||(b.b=function(c){for(var d=0;d<b.a.length;d++)b.a[d](c)},\"function\"==typeof(a=L(\"universalLinks.subscribe\",l))&&a(null,b.b))}(b)}(a)}))}))),a.f}function tl(a){var b=null;return function(a){return a.b.get(Yk,a.a).then((function(b){return ph(b)}))}(a.g).then((function(c){return b=c,Uk((c=a.g).b,Yk,c.a)})).then((function(){return b}))}function wl(a){this.a=a,this.b=Qk()}(k=nl.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(Be(void 0)?ze().then((function(){return new C((function(a,b){var c=l.document,d=setTimeout((function(){b(Error(\"Cordova framework is not ready.\"))}),1e3);c.addEventListener(\"deviceready\",(function(){clearTimeout(d),a()}),!1)}))})):E(Error(\"Cordova must run in an Android or iOS file scheme.\"))).then((function(){if(\"function\"!=typeof L(\"universalLinks.subscribe\",l))throw ol(\"cordova-universal-links-plugin-fix is not installed\");if(void 0===L(\"BuildInfo.packageName\",l))throw ol(\"cordova-plugin-buildinfo is not installed\");if(\"function\"!=typeof L(\"cordova.plugins.browsertab.openUrl\",l))throw ol(\"cordova-plugin-browsertab is not installed\");if(\"function\"!=typeof L(\"cordova.InAppBrowser.open\",l))throw ol(\"cordova-plugin-inappbrowser is not installed\")}),(function(){throw new t(\"cordova-not-ready\")}))},k.Nb=function(a,b){return b(new t(\"operation-not-supported-in-this-environment\")),D()},k.Lb=function(){return E(new t(\"operation-not-supported-in-this-environment\"))},k.Zb=function(){return!1},k.Wb=function(){return!0},k.Sb=function(){return!0},k.Mb=function(a,b,c,d){if(this.c)return E(new t(\"redirect-operation-pending\"));var e=this,f=l.document,g=null,h=null,m=null,p=null;return this.c=D().then((function(){return nh(b),rl(e)})).then((function(){return function(a,b,c,d,e){var f=function(){for(var a=20,b=[];0<a;)b.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),a--;return b.join(\"\")}(),g=new oh(b,d,null,f,new t(\"no-auth-event\"),null,e),h=L(\"BuildInfo.packageName\",l);if(\"string\"!=typeof h)throw new t(\"invalid-cordova-configuration\");var m=L(\"BuildInfo.displayName\",l),p={};if(K().toLowerCase().match(/iphone|ipad|ipod/))p.ibi=h;else{if(!K().toLowerCase().match(/android/))return E(new t(\"operation-not-supported-in-this-environment\"));p.apn=h}m&&(p.appDisplayName=m),f=function(a){var b=new ll;kl(b,a),a=[];var c=8*b.g;kl(b,il,56>b.c?56-b.c:b.b-(b.c-56));for(var d=63;56<=d;d--)b.f[d]=255&c,c/=256;for(jl(b),d=c=0;d<b.i;d++)for(var e=24;0<=e;e-=8)a[c++]=b.a[d]>>e&255;return function(a){return Pa(a,(function(b){return 1<(b=b.toString(16)).length?b:\"0\"+b})).join(\"\")}(a)}(f),p.sessionId=f;var v=ak(a.m,a.i,a.l,b,c,null,d,a.v,p,a.u,e,a.o);return a.la().then((function(){var B=a.h;return a.A.a.set(Yk,g.w(),B)})).then((function(){var B=L(\"cordova.plugins.browsertab.isAvailable\",l);if(\"function\"!=typeof B)throw new t(\"invalid-cordova-configuration\");var A=null;B((function(Q){if(Q){if(\"function\"!=typeof(A=L(\"cordova.plugins.browsertab.openUrl\",l)))throw new t(\"invalid-cordova-configuration\");A(v)}else{if(\"function\"!=typeof(A=L(\"cordova.InAppBrowser.open\",l)))throw new t(\"invalid-cordova-configuration\");Q=K(),a.a=A(v,Q.match(/(iPad|iPhone|iPod).*OS 7_\\d/i)||Q.match(/(iPad|iPhone|iPod).*OS 8_\\d/i)?\"_blank\":\"_system\",\"location=yes\")}}))}))}(e,a,b,c,d)})).then((function(){return new C((function(v,B){h=function(){var A=L(\"cordova.plugins.browsertab.close\",l);return v(),\"function\"==typeof A&&A(),e.a&&\"function\"==typeof e.a.close&&(e.a.close(),e.a=null),!1},e.Ea(h),p=function(){Ve()&&m()},f.addEventListener(\"resume\",m=function(){g||(g=Ad(2e3).then((function(){B(new t(\"redirect-cancelled-by-user\"))})))},!1),K().toLowerCase().match(/android/)||f.addEventListener(\"visibilitychange\",p,!1)})).s((function(v){return tl(e).then((function(){throw v}))}))})).na((function(){m&&f.removeEventListener(\"resume\",m,!1),p&&f.removeEventListener(\"visibilitychange\",p,!1),g&&g.cancel(),h&&e.Ra(h),e.c=null}))},k.Ea=function(a){this.b.push(a),rl(this).s((function(b){\"auth/invalid-cordova-configuration\"===b.code&&(b=new oh(\"unknown\",null,null,null,new t(\"no-auth-event\")),a(b))}))},k.Ra=function(a){Va(this.b,(function(b){return b==a}))};var xl={name:\"pendingRedirect\",D:\"session\"};function zl(a){return Uk(a.b,xl,a.a)}function Bl(a,b,c,d){this.i={},this.u=0,this.O=a,this.m=b,this.v=c,this.G=d,this.h=[],this.f=!1,this.l=q(this.o,this),this.b=new Cl,this.A=new Dl,this.g=new wl(El(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Fl(this.O,this.m,this.v,Ba,this.G)}function Fl(a,b,c,d,e){var f=firebase.SDK_VERSION||null;return Be()?new nl(a,b,c,f,d,e):new Uj(a,b,c,f,d,e)}function Gl(a){a.f||(a.f=!0,a.a.Ea(a.l));var b=a.a;return a.a.la().s((function(c){throw a.a==b&&a.reset(),c}))}function Hl(a){a.a.Wb()&&Gl(a).s((function(b){var c=new oh(\"unknown\",null,null,null,new t(\"operation-not-supported-in-this-environment\"));Il(b)&&a.o(c)})),a.a.Sb()||Jl(a.b)}function Kl(a,b){Ta(a.h,b)||a.h.push(b),a.f||function(a){return a.b.get(xl,a.a).then((function(b){return\"pending\"==b}))}(a.g).then((function(c){c?zl(a.g).then((function(){Gl(a).s((function(d){var e=new oh(\"unknown\",null,null,null,new t(\"operation-not-supported-in-this-environment\"));Il(d)&&a.o(e)}))})):Hl(a)})).s((function(){Hl(a)}))}function Ll(a,b){Va(a.h,(function(c){return c==b}))}Bl.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Fl(this.O,this.m,this.v,null,this.G),this.i={}},Bl.prototype.o=function(a){if(!a)throw new t(\"invalid-auth-event\");if(6e5<=ua()-this.u&&(this.i={},this.u=0),a&&a.getUid()&&this.i.hasOwnProperty(a.getUid()))return!1;for(var b=!1,c=0;c<this.h.length;c++){var d=this.h[c];if(d.Eb(a.c,a.b)){(b=this.c[a.c])&&(b.h(a,d),a&&(a.f||a.b)&&(this.i[a.getUid()]=!0,this.u=ua())),b=!0;break}}return Jl(this.b),b};var Ml=new Ue(2e3,1e4),Nl=new Ue(3e4,6e4);function Ol(a,b,c,d,e,f,g){return a.a.Lb(b,c,d,(function(){a.f||(a.f=!0,a.a.Ea(a.l))}),(function(){a.reset()}),e,f,g)}function Il(a){return!(!a||\"auth/cordova-not-ready\"!=a.code)}function Pl(a,b,c,d,e){var f;return function(a){return a.b.set(xl,\"pending\",a.a)}(a.g).then((function(){return a.a.Mb(b,c,d,e).s((function(g){if(Il(g))throw new t(\"operation-not-supported-in-this-environment\");return f=g,zl(a.g).then((function(){throw f}))})).then((function(){return a.a.Zb()?new C((function(){})):zl(a.g).then((function(){return a.qa()})).then((function(){})).s((function(){}))}))}))}function Ql(a,b,c,d,e){return a.a.Nb(d,(function(f){b.ma(c,null,f,e)}),Ml.get())}Bl.prototype.qa=function(){return this.b.qa()};var Rl={};function El(a,b,c){return a=a+\":\"+b,c&&(a=a+\":\"+c.url),a}function Sl(a,b,c,d){var e=El(b,c,d);return Rl[e]||(Rl[e]=new Bl(a,b,c,d)),Rl[e]}function Cl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Jl(a){a.g||(a.g=!0,Tl(a,!1,null,null))}function Vl(a){a.g&&!a.i&&Tl(a,!1,null,null)}function Xl(a,b){if(a.b=function(){return D(b)},a.f.length)for(var c=0;c<a.f.length;c++)a.f[c](b)}function Tl(a,b,c,d){b?d?function(a,b){if(a.b=function(){return E(b)},a.c.length)for(var c=0;c<a.c.length;c++)a.c[c](b)}(a,d):Xl(a,c):Xl(a,{user:null}),a.f=[],a.c=[]}function Dl(){}function $l(){this.hb=!1,Object.defineProperty(this,\"appVerificationDisabled\",{get:function(){return this.hb},set:function(a){this.hb=a},enumerable:!1})}function am(a,b){this.a=b,M(this,\"verificationId\",a)}function bm(a,b,c,d){return new hh(a).eb(b,c).then((function(e){return new am(e,d)}))}function cm(a){var b=eg(a);if(!(b&&b.exp&&b.auth_time&&b.iat))throw new t(\"internal-error\",\"An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.\");N(this,{token:a,expirationTime:Ye(1e3*b.exp),authTime:Ye(1e3*b.auth_time),issuedAtTime:Ye(1e3*b.iat),signInProvider:b.firebase&&b.firebase.sign_in_provider?b.firebase.sign_in_provider:null,signInSecondFactor:b.firebase&&b.firebase.sign_in_second_factor?b.firebase.sign_in_second_factor:null,claims:b})}function dm(a,b,c){var d=b&&b[em];if(!d)throw new t(\"argument-error\",\"Internal assert: Invalid MultiFactorResolver\");this.a=a,this.f=lb(b),this.g=c,this.c=new ug(null,d),this.b=[];var e=this;w(b[fm]||[],(function(f){(f=pf(f))&&e.b.push(f)})),M(this,\"auth\",this.a),M(this,\"session\",this.c),M(this,\"hints\",this.b)}Cl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Cl.prototype.h=function(a,b){if(a){this.reset(),this.g=!0;var c=a.c,d=a.b,e=a.a&&\"auth/web-storage-unsupported\"==a.a.code,f=a.a&&\"auth/operation-not-supported-in-this-environment\"==a.a.code;this.i=!(!e&&!f),\"unknown\"!=c||e||f?a.a?(Tl(this,!0,null,a.a),D()):b.Fa(c,d)?function(a,b,c){c=c.Fa(b.c,b.b);var d=b.g,e=b.f,f=b.i,g=b.S(),h=!!b.c.match(/Redirect$/);c(d,e,g,f).then((function(m){Tl(a,h,m,null)})).s((function(m){Tl(a,h,null,m)}))}(this,a,b):E(new t(\"invalid-auth-event\")):(Tl(this,!1,null,null),D())}else E(new t(\"invalid-auth-event\"))},Cl.prototype.qa=function(){var a=this;return new C((function(b,c){a.b?a.b().then(b,c):(a.f.push(b),a.c.push(c),function(a){var b=new t(\"timeout\");a.a&&a.a.cancel(),a.a=Ad(Nl.get()).then((function(){a.b||(a.g=!0,Tl(a,!0,null,b))}))}(a))}))},Dl.prototype.h=function(a,b){if(a){var c=a.c,d=a.b;a.a?(b.ma(a.c,null,a.a,a.b),D()):b.Fa(c,d)?function(a,b){var c=a.b,d=a.c;b.Fa(d,c)(a.g,a.f,a.S(),a.i).then((function(e){b.ma(d,e,null,c)})).s((function(e){b.ma(d,null,e,c)}))}(a,b):E(new t(\"invalid-auth-event\"))}else E(new t(\"invalid-auth-event\"))},am.prototype.confirm=function(a){return a=lh(this.verificationId,a),this.a(a)};var fm=\"mfaInfo\",em=\"mfaPendingCredential\";function gm(a,b,c,d){t.call(this,\"multi-factor-auth-required\",d,b),this.b=new dm(a,b,c),M(this,\"resolver\",this.b)}function hm(a,b,c){if(a&&n(a.serverResponse)&&\"auth/multi-factor-auth-required\"===a.code)try{return new gm(b,a.serverResponse,c,a.message)}catch(d){}return null}function im(){}function lm(a){M(this,\"factorId\",a.fa),this.a=a}function mm(a){if(lm.call(this,a),this.a.fa!=hh.PROVIDER_ID)throw new t(\"argument-error\",\"firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential\")}function nm(a,b){for(var c in F.call(this,a),b)this[c]=b[c]}function om(a,b){this.a=a,this.b=[],this.c=q(this.xc,this),jd(this.a,\"userReloaded\",this.c);var c=[];b&&b.multiFactor&&b.multiFactor.enrolledFactors&&w(b.multiFactor.enrolledFactors,(function(d){var e=null,f={};if(d){d.uid&&(f[mf]=d.uid),d.displayName&&(f[nf]=d.displayName),d.enrollmentTime&&(f[of]=new Date(d.enrollmentTime).toISOString()),d.phoneNumber&&(f[lf]=d.phoneNumber);try{e=new qf(f)}catch(g){}d=e}else d=null;d&&c.push(d)})),pm(this,c)}function pm(a,b){a.b=b,M(a,\"enrolledFactors\",b)}function sm(a,b,c){if(this.h=a,this.i=b,this.g=c,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error(\"Proactive refresh lower bound greater than upper bound!\")}function vm(a){this.c=a,this.b=this.a=null}function wm(a){return a.b&&1e3*a.b.c||0}function xm(a,b){var c=b.refreshToken;a.b=fg(b[zg]||\"\"),a.a=c}function Am(a,b){this.a=a||null,this.b=b||null,N(this,{lastSignInTime:Ye(b||null),creationTime:Ye(a||null)})}function Cm(a,b,c,d,e,f){N(this,{uid:a,displayName:d||null,photoURL:e||null,email:c||null,phoneNumber:f||null,providerId:b})}function Dm(a,b,c){this.G=[],this.l=a.apiKey,this.m=a.appName,this.o=a.authDomain||null;var d=firebase.SDK_VERSION?Je(firebase.SDK_VERSION):null;this.a=new Ei(this.l,Aa(Ba),d),a.emulatorConfig&&Li(this.a,a.emulatorConfig),this.b=new vm(this.a),Em(this,b[zg]),xm(this.b,b),M(this,\"refreshToken\",this.b.a),Fm(this,c||{}),H.call(this),this.P=!1,this.o&&Me()&&(this.i=Sl(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(a){return new sm((function(){return a.I(!0)}),(function(b){return!(!b||\"auth/network-request-failed\"!=b.code)}),(function(){var b=wm(a.b)-ua()-3e5;return 0<b?b:0}))}(this),this.$=q(this.gb,this);var e=this;this.pa=null,this.Ba=function(f){e.wa(f.h)},this.ba=null,this.za=function(f){Li(e.a,f.c)},this.W=null,this.X=[],this.Aa=function(f){Hm(e,f.f)},this.aa=null,this.N=new om(this,c),M(this,\"multiFactor\",this.N)}function Im(a,b){a.ba&&G(a.ba,\"languageCodeChanged\",a.Ba),(a.ba=b)&&jd(b,\"languageCodeChanged\",a.Ba)}function Jm(a,b){a.W&&G(a.W,\"emulatorConfigChanged\",a.za),(a.W=b)&&jd(b,\"emulatorConfigChanged\",a.za)}function Hm(a,b){a.X=b,Ni(a.a,firebase.SDK_VERSION?Je(firebase.SDK_VERSION,a.X):null)}function Km(a,b){a.aa&&G(a.aa,\"frameworkChanged\",a.Aa),(a.aa=b)&&jd(b,\"frameworkChanged\",a.Aa)}function Lm(a){try{return firebase.app(a.m).auth()}catch(b){throw new t(\"internal-error\",\"No firebase.auth.Auth instance is available for the Firebase App '\"+a.m+\"'!\")}}function Mm(a){a.A||a.u.b||(a.u.start(),G(a,\"tokenChanged\",a.$),jd(a,\"tokenChanged\",a.$))}function Nm(a){G(a,\"tokenChanged\",a.$),a.u.stop()}function Em(a,b){a.ya=b,M(a,\"_lat\",b)}function Pm(a){for(var b=[],c=0;c<a.R.length;c++)b.push(a.R[c](a));return Fc(b).then((function(){return a}))}function Qm(a){a.i&&!a.P&&(a.P=!0,Kl(a.i,a))}function Fm(a,b){N(a,{uid:b.uid,displayName:b.displayName||null,photoURL:b.photoURL||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,isAnonymous:b.isAnonymous||!1,tenantId:b.tenantId||null,metadata:new Am(b.createdAt,b.lastLoginAt),providerData:[]}),a.a.b=a.tenantId}function Rm(){}function Sm(a){return D().then((function(){if(a.A)throw new t(\"app-deleted\")}))}function Tm(a){return Pa(a.providerData,(function(b){return b.providerId}))}function Um(a,b){b&&(Vm(a,b.providerId),a.providerData.push(b))}function Vm(a,b){Va(a.providerData,(function(c){return c.providerId==b}))}function Wm(a,b,c){(\"uid\"!=b||c)&&a.hasOwnProperty(b)&&M(a,b,c)}function Xm(a,b){a!=b&&(N(a,{uid:b.uid,displayName:b.displayName,photoURL:b.photoURL,email:b.email,emailVerified:b.emailVerified,phoneNumber:b.phoneNumber,isAnonymous:b.isAnonymous,tenantId:b.tenantId,providerData:[]}),M(a,\"metadata\",b.metadata?function(a){return new Am(a.a,a.b)}(b.metadata):new Am),w(b.providerData,(function(c){Um(a,c)})),function(a,b){a.b=b.b,a.a=b.a}(a.b,b.b),M(a,\"refreshToken\",a.b.a),pm(a.N,b.N.b))}function Ym(a){return a.I().then((function(b){var c=a.isAnonymous;return function(a,b){return O(a.a,Ej,{idToken:b}).then(q(a.Jc,a))}(a,b).then((function(){return c||Wm(a,\"isAnonymous\",!1),b}))}))}function rm(a,b){b[zg]&&a.ya!=b[zg]&&(xm(a.b,b),a.dispatchEvent(new nm(\"tokenChanged\")),Em(a,b[zg]),Wm(a,\"refreshToken\",a.b.a))}function bn(a,b){return Ym(a).then((function(){if(Ta(Tm(a),b))return Pm(a).then((function(){throw new t(\"provider-already-linked\")}))}))}function an(a,b,c){return ff({user:a,credential:mh(b),additionalUserInfo:b=kg(b),operationType:c})}function cn(a,b){return rm(a,b),a.reload().then((function(){return a}))}function dn(a,b,c,d,e){if(!Me())return E(new t(\"operation-not-supported-in-this-environment\"));if(a.f&&!e)return E(a.f);var f=jg(c.providerId),g=Le(a.uid+\":::\"),h=null;(!Oe()||De())&&a.o&&c.isOAuthProvider&&(h=ak(a.o,a.l,a.m,b,c,null,g,firebase.SDK_VERSION||null,null,null,a.tenantId));var m=ue(h,f&&f.ua,f&&f.ta);return d=d().then((function(){if(en(a),!e)return a.I().then((function(){}))})).then((function(){return Ol(a.i,m,b,c,g,!!h,a.tenantId)})).then((function(){return new C((function(p,v){a.ma(b,null,new t(\"cancelled-popup-request\"),a.h||null),a.g=p,a.O=v,a.h=g,a.c=Ql(a.i,a,b,m,g)}))})).then((function(p){return m&&te(m),p?ff(p):null})).s((function(p){throw m&&te(m),p})),R(a,d,e)}function fn(a,b,c,d,e){if(!Me())return E(new t(\"operation-not-supported-in-this-environment\"));if(a.f&&!e)return E(a.f);var f=null,g=Le(a.uid+\":::\");return d=d().then((function(){if(en(a),!e)return a.I().then((function(){}))})).then((function(){return a.ga=g,Pm(a)})).then((function(h){return a.ha&&(h=(h=a.ha).b.set(gn,a.w(),h.a)),h})).then((function(){return Pl(a.i,b,c,g,a.tenantId)})).s((function(h){if(f=h,a.ha)return hn(a.ha);throw f})).then((function(){if(f)throw f})),R(a,d,e)}function en(a){if(!a.i||!a.P){if(a.i&&!a.P)throw new t(\"internal-error\");throw new t(\"auth-domain-config-required\")}}function R(a,b,c){var d=function(a,b,c){return a.f&&!c?(b.cancel(),E(a.f)):b.s((function(d){throw!d||\"auth/user-disabled\"!=d.code&&\"auth/user-token-expired\"!=d.code||(a.f||a.dispatchEvent(new nm(\"userInvalidated\")),a.f=d),d}))}(a,b,c);return a.G.push(d),d.na((function(){Ua(a.G,d)})),d.s((function(e){var f=null;throw e&&\"auth/multi-factor-auth-required\"===e.code&&(f=hm(e.w(),Lm(a),q(a.ic,a))),f||e}))}function kn(a){if(!a.apiKey)return null;var b={apiKey:a.apiKey,authDomain:a.authDomain,appName:a.appName,emulatorConfig:a.emulatorConfig},c={};if(!a.stsTokenManager||!a.stsTokenManager.accessToken)return null;c[zg]=a.stsTokenManager.accessToken,c.refreshToken=a.stsTokenManager.refreshToken||null;var d=new Dm(b,c,a);return a.providerData&&w(a.providerData,(function(e){e&&Um(d,ff(e))})),a.redirectEventId&&(d.ga=a.redirectEventId),d}function nn(a){this.a=a,this.b=Qk()}dm.prototype.Qc=function(a){var b=this;return a.rb(this.a.a,this.c).then((function(c){var d=lb(b.f);return delete d[fm],delete d[em],z(d,c),b.g(d)}))},r(gm,t),im.prototype.rb=function(a,b,c){return b.type==vg?function(a,b,c,d){return c.Ha().then((function(e){return e={idToken:e},void 0!==d&&(e.displayName=d),z(e,{phoneVerificationInfo:dh(a.a)}),O(b,Cj,e)}))}(this,a,b,c):function(a,b,c){return c.Ha().then((function(d){return z(d={mfaPendingCredential:d},{phoneVerificationInfo:dh(a.a)}),O(b,Dj,d)}))}(this,a,b)},r(lm,im),r(mm,lm),r(nm,F),(k=om.prototype).xc=function(a){pm(this,function(a){var b=[];return w(a.mfaInfo||[],(function(c){(c=pf(c))&&b.push(c)})),b}(a.gd))},k.Qb=function(){return this.a.I().then((function(a){return new ug(a,null)}))},k.ec=function(a,b){var c=this,d=this.a.a;return this.Qb().then((function(e){return a.rb(d,e,b)})).then((function(e){return rm(c.a,e),c.a.reload()}))},k.ad=function(a){var b=this,c=\"string\"==typeof a?a:a.uid,d=this.a.a;return this.a.I().then((function(e){return O(d,Hj,{idToken:e,mfaEnrollmentId:c})})).then((function(e){var f=Oa(b.b,(function(g){return g.uid!=c}));return pm(b,f),rm(b.a,e),b.a.reload().s((function(g){if(\"auth/user-token-expired\"!=g.code)throw g}))}))},k.w=function(){return{multiFactor:{enrolledFactors:Pa(this.b,(function(a){return a.w()}))}}},sm.prototype.start=function(){this.a=this.c,function tm(a,b){a.stop(),a.b=Ad(function(a,b){return b?(a.a=a.c,a.g()):(b=a.a,a.a*=2,a.a>a.f&&(a.a=a.f),b)}(a,b)).then((function(){return function(){var a=l.document,b=null;return Ve()||!a?D():new C((function(c){b=function(){Ve()&&(a.removeEventListener(\"visibilitychange\",b,!1),c())},a.addEventListener(\"visibilitychange\",b,!1)})).s((function(c){throw a.removeEventListener(\"visibilitychange\",b,!1),c}))}()})).then((function(){return a.h()})).then((function(){tm(a,!0)})).s((function(c){a.i(c)&&tm(a,!1)}))}(this,!0)},sm.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},vm.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:wm(this)}},vm.prototype.getToken=function(a){return a=!!a,this.b&&!this.a?E(new t(\"user-token-expired\")):a||!this.b||ua()>wm(this)-3e4?this.a?function(a,b){return function(a,b){return new C((function(c,d){\"refresh_token\"==b.grant_type&&b.refresh_token||\"authorization_code\"==b.grant_type&&b.code?Oi(a,a.l+\"?key=\"+encodeURIComponent(a.c),(function(e){e?e.error?d(Ti(e)):e.access_token&&e.refresh_token?c(e):d(new t(\"internal-error\")):d(new t(\"network-request-failed\"))}),\"POST\",ae(b).toString(),a.g,a.v.get()):d(new t(\"internal-error\"))}))}(a.c,b).then((function(c){return a.b=fg(c.access_token),a.a=c.refresh_token,{accessToken:a.b.toString(),refreshToken:a.a}})).s((function(c){throw\"auth/user-token-expired\"==c.code&&(a.a=null),c}))}(this,{grant_type:\"refresh_token\",refresh_token:this.a}):D(null):D({accessToken:this.b.toString(),refreshToken:this.a})},Am.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},r(Dm,H),Dm.prototype.wa=function(a){this.pa=a,Ki(this.a,a)},Dm.prototype.ka=function(){return this.pa},Dm.prototype.Ga=function(){return Xa(this.X)},Dm.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},M(Dm.prototype,\"providerId\",\"firebase\"),(k=Dm.prototype).reload=function(){var a=this;return R(this,Sm(this).then((function(){return Ym(a).then((function(){return Pm(a)})).then(Rm)})))},k.nc=function(a){return this.I(a).then((function(b){return new cm(b)}))},k.I=function(a){var b=this;return R(this,Sm(this).then((function(){return b.b.getToken(a)})).then((function(c){if(!c)throw new t(\"internal-error\");return c.accessToken!=b.ya&&(Em(b,c.accessToken),b.dispatchEvent(new nm(\"tokenChanged\"))),Wm(b,\"refreshToken\",c.refreshToken),c.accessToken})))},k.Jc=function(a){if(!(a=a.users)||!a.length)throw new t(\"internal-error\");Fm(this,{uid:(a=a[0]).localId,displayName:a.displayName,photoURL:a.photoUrl,email:a.email,emailVerified:!!a.emailVerified,phoneNumber:a.phoneNumber,lastLoginAt:a.lastLoginAt,createdAt:a.createdAt,tenantId:a.tenantId});for(var b=function(a){return(a=a.providerUserInfo)&&a.length?Pa(a,(function(b){return new Cm(b.rawId,b.providerId,b.email,b.displayName,b.photoUrl,b.phoneNumber)})):[]}(a),c=0;c<b.length;c++)Um(this,b[c]);Wm(this,\"isAnonymous\",!(this.email&&a.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new nm(\"userReloaded\",{gd:a}))},k.Kc=function(a){return cf(\"firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.\"),this.sb(a)},k.sb=function(a){var b=this,c=null;return R(this,a.c(this.a,this.uid).then((function(d){return rm(b,d),c=an(b,d,\"reauthenticate\"),b.f=null,b.reload()})).then((function(){return c})),!0)},k.Bc=function(a){return cf(\"firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead.\"),this.pb(a)},k.pb=function(a){var b=this,c=null;return R(this,bn(this,a.providerId).then((function(){return b.I()})).then((function(d){return a.b(b.a,d)})).then((function(d){return c=an(b,d,\"link\"),cn(b,d)})).then((function(){return c})))},k.Cc=function(a,b){var c=this;return R(this,bn(this,\"phone\").then((function(){return bm(Lm(c),a,b,q(c.pb,c))})))},k.Lc=function(a,b){var c=this;return R(this,D().then((function(){return bm(Lm(c),a,b,q(c.sb,c))})),!0)},k.Ab=function(a){var b=this;return R(this,this.I().then((function(c){return b.a.Ab(c,a)})).then((function(c){return rm(b,c),b.reload()})))},k.dd=function(a){var b=this;return R(this,this.I().then((function(c){return a.b(b.a,c)})).then((function(c){return rm(b,c),b.reload()})))},k.Bb=function(a){var b=this;return R(this,this.I().then((function(c){return b.a.Bb(c,a)})).then((function(c){return rm(b,c),b.reload()})))},k.Cb=function(a){if(void 0===a.displayName&&void 0===a.photoURL)return Sm(this);var b=this;return R(this,this.I().then((function(c){return b.a.Cb(c,{displayName:a.displayName,photoUrl:a.photoURL})})).then((function(c){return rm(b,c),Wm(b,\"displayName\",c.displayName||null),Wm(b,\"photoURL\",c.photoUrl||null),w(b.providerData,(function(d){\"password\"===d.providerId&&(M(d,\"displayName\",b.displayName),M(d,\"photoURL\",b.photoURL))})),Pm(b)})).then(Rm))},k.bd=function(a){var b=this;return R(this,Ym(this).then((function(c){return Ta(Tm(b),a)?function(a,b,c){return O(a,oj,{idToken:b,deleteProvider:c})}(b.a,c,[a]).then((function(d){var e={};return w(d.providerUserInfo||[],(function(f){e[f.providerId]=!0})),w(Tm(b),(function(f){e[f]||Vm(b,f)})),e[hh.PROVIDER_ID]||M(b,\"phoneNumber\",null),Pm(b)})):Pm(b).then((function(){throw new t(\"no-such-provider\")}))})))},k.delete=function(){var a=this;return R(this,this.I().then((function(b){return O(a.a,Bj,{idToken:b})})).then((function(){a.dispatchEvent(new nm(\"userDeleted\"))}))).then((function(){for(var b=0;b<a.G.length;b++)a.G[b].cancel(\"app-deleted\");Im(a,null),Jm(a,null),Km(a,null),a.G=[],a.A=!0,Nm(a),M(a,\"refreshToken\",null),a.i&&Ll(a.i,a)}))},k.Eb=function(a,b){return!!(\"linkViaPopup\"==a&&(this.h||null)==b&&this.g||\"reauthViaPopup\"==a&&(this.h||null)==b&&this.g||\"linkViaRedirect\"==a&&(this.ga||null)==b||\"reauthViaRedirect\"==a&&(this.ga||null)==b)},k.ma=function(a,b,c,d){\"linkViaPopup\"!=a&&\"reauthViaPopup\"!=a||d!=(this.h||null)||(c&&this.O?this.O(c):b&&!c&&this.g&&this.g(b),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},k.Fa=function(a,b){return\"linkViaPopup\"==a&&b==(this.h||null)?q(this.Jb,this):\"reauthViaPopup\"==a&&b==(this.h||null)?q(this.Kb,this):\"linkViaRedirect\"==a&&(this.ga||null)==b?q(this.Jb,this):\"reauthViaRedirect\"==a&&(this.ga||null)==b?q(this.Kb,this):null},k.Dc=function(a){var b=this;return dn(this,\"linkViaPopup\",a,(function(){return bn(b,a.providerId).then((function(){return Pm(b)}))}),!1)},k.Mc=function(a){return dn(this,\"reauthViaPopup\",a,(function(){return D()}),!0)},k.Ec=function(a){var b=this;return fn(this,\"linkViaRedirect\",a,(function(){return bn(b,a.providerId)}),!1)},k.Nc=function(a){return fn(this,\"reauthViaRedirect\",a,(function(){return D()}),!0)},k.Jb=function(a,b,c,d){var e=this;this.c&&(this.c.cancel(),this.c=null);var f=null;return R(this,this.I().then((function(g){return Dg(e.a,{requestUri:a,postBody:d,sessionId:b,idToken:g})})).then((function(g){return f=an(e,g,\"link\"),cn(e,g)})).then((function(){return f})))},k.Kb=function(a,b,c,d){var e=this;this.c&&(this.c.cancel(),this.c=null);var f=null;return R(this,D().then((function(){return yg(Eg(e.a,{requestUri:a,sessionId:b,postBody:d,tenantId:c}),e.uid)})).then((function(h){return f=an(e,h,\"reauthenticate\"),rm(e,h),e.f=null,e.reload()})).then((function(){return f})),!0)},k.tb=function(a){var b=this,c=null;return R(this,this.I().then((function(d){return c=d,void 0===a||kb(a)?{}:Yf(new Of(a))})).then((function(d){return b.a.tb(c,d)})).then((function(d){if(b.email!=d)return b.reload()})).then((function(){})))},k.Db=function(a,b){var c=this,d=null;return R(this,this.I().then((function(e){return d=e,void 0===b||kb(b)?{}:Yf(new Of(b))})).then((function(e){return c.a.Db(d,a,e)})).then((function(e){if(c.email!=e)return c.reload()})).then((function(){})))},k.ic=function(a){var b=null,c=this;return R(this,a=yg(D(a),c.uid).then((function(d){return b=an(c,d,\"reauthenticate\"),rm(c,d),c.f=null,c.reload()})).then((function(){return b})),!0)},k.toJSON=function(){return this.w()},k.w=function(){var a={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&z(a,this.metadata.w()),w(this.providerData,(function(b){a.providerData.push(function(a){var c,b={};for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}(b))})),z(a,this.N.w()),a};var gn={name:\"redirectUser\",D:\"session\"};function hn(a){return Uk(a.b,gn,a.a)}function pn(a){this.a=a,this.b=Qk(),this.c=null,this.f=function(a){var b=rn(\"local\"),c=rn(\"session\"),d=rn(\"none\");return function(a,b,c){var d=Sk(b,c),e=Rk(a,b.D);return a.get(b,c).then((function(f){var g=null;try{g=Re(l.localStorage.getItem(d))}catch(h){}if(g&&!f)return l.localStorage.removeItem(d),a.set(b,g,c);g&&f&&\"localStorage\"!=e.type&&l.localStorage.removeItem(d)}))}(a.b,b,a.a).then((function(){return a.b.get(c,a.a)})).then((function(e){return e?c:a.b.get(d,a.a).then((function(f){return f?d:a.b.get(b,a.a).then((function(g){return g?b:a.b.get(un,a.a).then((function(h){return h?rn(h):b}))}))}))})).then((function(e){return a.c=e,tn(a,e.D)})).s((function(){a.c||(a.c=b)}))}(this),this.b.addListener(rn(\"local\"),this.a,q(this.g,this))}function tn(a,b){var d,c=[];for(d in Mk)Mk[d]!==b&&c.push(Uk(a.b,rn(Mk[d]),a.a));return c.push(Uk(a.b,un,a.a)),function(a){return new C((function(b,c){var d=a.length,e=[];if(d)for(var f=function(p,v){d--,e[p]=v,0==d&&b(e)},g=function(p){c(p)},h=0;h<a.length;h++)Cc(a[h],ta(f,h),g);else b(e)}))}(c)}pn.prototype.g=function(){var a=this,b=rn(\"local\");sn(this,(function(){return D().then((function(){return a.c&&\"local\"!=a.c.D?a.b.get(b,a.a):null})).then((function(c){if(c)return tn(a,\"local\").then((function(){a.c=b}))}))}))};var un={name:\"persistence\",D:\"session\"};function rn(a){return{name:\"authUser\",D:a}}function wn(a,b){return sn(a,(function(){return a.b.set(a.c,b.w(),a.a)}))}function xn(a){return sn(a,(function(){return Uk(a.b,a.c,a.a)}))}function yn(a,b,c){return sn(a,(function(){return a.b.get(a.c,a.a).then((function(d){return d&&b&&(d.authDomain=b),d&&c&&(d.emulatorConfig=c),kn(d||{})}))}))}function sn(a,b){return a.f=a.f.then(b,b),a.f}function zn(a){if(this.m=!1,M(this,\"settings\",new $l),M(this,\"app\",a),!S(this).options||!S(this).options.apiKey)throw new t(\"invalid-api-key\");a=firebase.SDK_VERSION?Je(firebase.SDK_VERSION):null,this.a=new Ei(S(this).options&&S(this).options.apiKey,Aa(Ba),a),this.R=[],this.u=[],this.P=[],this.ac=firebase.INTERNAL.createSubscribe(q(this.yc,this)),this.X=void 0,this.bc=firebase.INTERNAL.createSubscribe(q(this.zc,this)),An(this,null),this.l=new pn(S(this).options.apiKey+\":\"+S(this).name),this.G=new nn(S(this).options.apiKey+\":\"+S(this).name),this.$=T(this,function(a){var b=S(a).options.authDomain,c=function(a){var b=function(a,b){return a.b.get(gn,a.a).then((function(c){return c&&b&&(c.authDomain=b),kn(c||{})}))}(a.G,S(a).options.authDomain).then((function(c){return(a.o=c)&&(c.ha=a.G),hn(a.G)}));return T(a,b)}(a).then((function(){return yn(a.l,b,a.f)})).then((function(d){return d?(d.ha=a.G,a.o&&(a.o.ga||null)==(d.ga||null)?d:d.reload().then((function(){return wn(a.l,d).then((function(){return d}))})).s((function(e){return\"auth/network-request-failed\"==e.code?d:xn(a.l)}))):null})).then((function(d){An(a,d||null)}));return T(a,c)}(this)),this.i=T(this,function(a){return a.$.then((function(){return Ln(a)})).s((function(){})).then((function(){if(!a.m)return a.pa()})).s((function(){})).then((function(){if(!a.m){a.ba=!0;var b=a.l;b.b.addListener(rn(\"local\"),b.a,a.pa)}}))}(this)),this.ba=!1,this.pa=q(this.Yc,this),this.Ba=q(this.da,this),this.ya=q(this.kc,this),this.za=q(this.vc,this),this.Aa=q(this.wc,this),this.b=null,function(a){var b=S(a).options.authDomain,c=S(a).options.apiKey;b&&Me()&&(a.gb=a.$.then((function(){if(!a.m){if(a.b=Sl(b,c,S(a).name,a.f),Kl(a.b,a),U(a)&&Qm(U(a)),a.o){Qm(a.o);var d=a.o;d.wa(a.ka()),Im(d,a),Hm(d=a.o,a.N),Km(d,a),Li((d=a.o).a,a.f),Jm(d,a),a.o=null}return a.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=q(this.delete,this),this.INTERNAL.logFramework=q(this.Fc,this),this.A=0,H.call(this),function(a){Object.defineProperty(a,\"lc\",{get:function(){return this.ka()},set:function(b){this.wa(b)},enumerable:!1}),a.aa=null,Object.defineProperty(a,\"ti\",{get:function(){return this.S()},set:function(b){this.xb(b)},enumerable:!1}),a.W=null}(this),this.N=[],this.f=null}function Fn(a){F.call(this,\"languageCodeChanged\"),this.h=a}function Gn(a){F.call(this,\"emulatorConfigChanged\"),this.c=a}function Hn(a){F.call(this,\"frameworkChanged\"),this.f=a}function Jn(a){return a.gb||E(new t(\"auth-domain-config-required\"))}function Ln(a){if(!Me())return E(new t(\"operation-not-supported-in-this-environment\"));var b=Jn(a).then((function(){return a.b.qa()})).then((function(c){return c?ff(c):null}));return T(a,b)}function An(a,b){U(a)&&(function(a,b){Va(a.R,(function(c){return c==b}))}(U(a),a.Ba),G(U(a),\"tokenChanged\",a.ya),G(U(a),\"userDeleted\",a.za),G(U(a),\"userInvalidated\",a.Aa),Nm(U(a))),b&&(b.R.push(a.Ba),jd(b,\"tokenChanged\",a.ya),jd(b,\"userDeleted\",a.za),jd(b,\"userInvalidated\",a.Aa),0<a.A&&Mm(b)),M(a,\"currentUser\",b),b&&(b.wa(a.ka()),Im(b,a),Hm(b,a.N),Km(b,a),Li(b.a,a.f),Jm(b,a))}function Kn(a,b){var c=null,d=null;return T(a,b.then((function(e){return c=mh(e),d=kg(e),function(a,b){var c={};return c.apiKey=S(a).options.apiKey,c.authDomain=S(a).options.authDomain,c.appName=S(a).name,a.f&&(c.emulatorConfig=a.f),a.$.then((function(){return function(a,b,c,d){var e=new Dm(a,b);return c&&(e.ha=c),d&&Hm(e,d),e.reload().then((function(){return e}))}(c,b,a.G,a.Ga())})).then((function(d){return U(a)&&d.uid==U(a).uid?(Xm(U(a),d),a.da(d)):(An(a,d),Qm(d),a.da(d))})).then((function(){Mn(a)}))}(a,e)}),(function(e){var f=null;throw e&&\"auth/multi-factor-auth-required\"===e.code&&(f=hm(e.w(),a,q(a.jc,a))),f||e})).then((function(){return ff({user:U(a),credential:c,additionalUserInfo:d,operationType:\"signIn\"})})))}function S(a){return a.app}function U(a){return a.currentUser}function Qn(a){return U(a)&&U(a)._lat||null}function Mn(a){if(a.ba){for(var b=0;b<a.u.length;b++)a.u[b]&&a.u[b](Qn(a));if(a.X!==a.getUid()&&a.P.length)for(a.X=a.getUid(),b=0;b<a.P.length;b++)a.P[b]&&a.P[b](Qn(a))}}function T(a,b){return a.R.push(b),b.na((function(){Ua(a.R,b)})),b}function Rn(){}function Sn(){this.a={},this.b=1e12}pn.prototype.wb=function(a){var b=null,c=this;return function(a){var b=new t(\"invalid-persistence-type\"),c=new t(\"unsupported-persistence-type\");a:{for(d in Mk)if(Mk[d]==a){var d=!0;break a}d=!1}if(!d||\"string\"!=typeof a)throw b;switch(Fe()){case\"ReactNative\":if(\"session\"===a)throw c;break;case\"Node\":if(\"none\"!==a)throw c;break;case\"Worker\":if(\"session\"===a||!lk()&&\"none\"!==a)throw c;break;default:if(!Ke()&&\"none\"!==a)throw c}}(a),sn(this,(function(){return a!=c.c.D?c.b.get(c.c,c.a).then((function(d){return b=d,tn(c,a)})).then((function(){if(c.c=rn(a),b)return c.b.set(c.c,b,c.a)})):D()}))},r(zn,H),r(Fn,F),r(Gn,F),r(Hn,F),(k=zn.prototype).wb=function(a){return T(this,a=this.l.wb(a))},k.wa=function(a){this.aa===a||this.m||(this.aa=a,Ki(this.a,this.aa),this.dispatchEvent(new Fn(this.ka())))},k.ka=function(){return this.aa},k.ed=function(){var a=l.navigator;this.wa(a&&(a.languages&&a.languages[0]||a.language||a.userLanguage)||null)},k.fd=function(a){if(!this.f){if(!/^https?:\\/\\//.test(a))throw new t(\"argument-error\",\"Emulator URL must start with a valid scheme (http:// or https://).\");Xe(\"WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.\"),l.document&&ze().then((function(){var a=l.document.createElement(\"div\");a.innerText=\"Running in emulator mode. Do not use with production credentials.\",a.style.position=\"fixed\",a.style.width=\"100%\",a.style.backgroundColor=\"#ffffff\",a.style.border=\".1em solid #000000\",a.style.color=\"#ff0000\",a.style.bottom=\"0px\",a.style.left=\"0px\",a.style.margin=\"0px\",a.style.zIndex=1e4,a.style.textAlign=\"center\",a.classList.add(\"firebase-emulator-warning\"),l.document.body.appendChild(a)})),this.f={url:a},this.settings.hb=!0,Li(this.a,this.f),this.dispatchEvent(new Gn(this.f))}},k.Fc=function(a){this.N.push(a),Ni(this.a,firebase.SDK_VERSION?Je(firebase.SDK_VERSION,this.N):null),this.dispatchEvent(new Hn(this.N))},k.Ga=function(){return Xa(this.N)},k.xb=function(a){this.W===a||this.m||(this.W=a,this.a.b=this.W)},k.S=function(){return this.W},k.toJSON=function(){return{apiKey:S(this).options.apiKey,authDomain:S(this).options.authDomain,appName:S(this).name,currentUser:U(this)&&U(this).w()}},k.Eb=function(a,b){switch(a){case\"unknown\":case\"signInViaRedirect\":return!0;case\"signInViaPopup\":return this.h==b&&!!this.g;default:return!1}},k.ma=function(a,b,c,d){\"signInViaPopup\"==a&&this.h==d&&(c&&this.O?this.O(c):b&&!c&&this.g&&this.g(b),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},k.Fa=function(a,b){return\"signInViaRedirect\"==a||\"signInViaPopup\"==a&&this.h==b&&this.g?q(this.hc,this):null},k.hc=function(a,b,c,d){var e=this,f={requestUri:a,postBody:d,sessionId:b,tenantId:c};return this.c&&(this.c.cancel(),this.c=null),e.$.then((function(){return Kn(e,Bg(e.a,f))}))},k.Wc=function(a){if(!Me())return E(new t(\"operation-not-supported-in-this-environment\"));var b=this,c=jg(a.providerId),d=Le(),e=null;(!Oe()||De())&&S(this).options.authDomain&&a.isOAuthProvider&&(e=ak(S(this).options.authDomain,S(this).options.apiKey,S(this).name,\"signInViaPopup\",a,null,d,firebase.SDK_VERSION||null,null,null,this.S(),this.f));var f=ue(e,c&&c.ua,c&&c.ta);return T(this,c=Jn(this).then((function(g){return Ol(g,f,\"signInViaPopup\",a,d,!!e,b.S())})).then((function(){return new C((function(g,h){b.ma(\"signInViaPopup\",null,new t(\"cancelled-popup-request\"),b.h),b.g=g,b.O=h,b.h=d,b.c=Ql(b.b,b,\"signInViaPopup\",f,d)}))})).then((function(g){return f&&te(f),g?ff(g):null})).s((function(g){throw f&&te(f),g})))},k.Xc=function(a){if(!Me())return E(new t(\"operation-not-supported-in-this-environment\"));var b=this;return T(this,Jn(this).then((function(){return function(a){return sn(a,(function(){return a.b.set(un,a.c.D,a.a)}))}(b.l)})).then((function(){return Pl(b.b,\"signInViaRedirect\",a,void 0,b.S())})))},k.qa=function(){var a=this;return Ln(this).then((function(b){return a.b&&Vl(a.b.b),b})).s((function(b){throw a.b&&Vl(a.b.b),b}))},k.cd=function(a){if(!a)return E(new t(\"null-user\"));if(this.W!=a.tenantId)return E(new t(\"tenant-id-mismatch\"));var b=this,c={};c.apiKey=S(this).options.apiKey,c.authDomain=S(this).options.authDomain,c.appName=S(this).name;var d=function(a,b,c,d){var e=a.b,f={};return f[zg]=e.b&&e.b.toString(),f.refreshToken=e.a,b=new Dm(b||{apiKey:a.l,authDomain:a.o,appName:a.m},f),c&&(b.ha=c),d&&Hm(b,d),Xm(b,a),b}(a,c,b.G,b.Ga());return T(this,this.i.then((function(){if(S(b).options.apiKey!=a.l)return d.reload()})).then((function(){return U(b)&&a.uid==U(b).uid?(Xm(U(b),a),b.da(a)):(An(b,d),Qm(d),b.da(d))})).then((function(){Mn(b)})))},k.zb=function(){var a=this;return T(this,this.i.then((function(){return a.b&&Vl(a.b.b),U(a)?(An(a,null),xn(a.l).then((function(){Mn(a)}))):D()})))},k.Yc=function(){var a=this;return yn(this.l,S(this).options.authDomain).then((function(b){if(!a.m){var c;if(c=U(a)&&b){c=U(a).uid;var d=b.uid;c=null!=c&&\"\"!==c&&null!=d&&\"\"!==d&&c==d}if(c)return Xm(U(a),b),U(a).I();(U(a)||b)&&(An(a,b),b&&(Qm(b),b.ha=a.G),a.b&&Kl(a.b,a),Mn(a))}}))},k.da=function(a){return wn(this.l,a)},k.kc=function(){Mn(this),this.da(U(this))},k.vc=function(){this.zb()},k.wc=function(){this.zb()},k.jc=function(a){var b=this;return this.i.then((function(){return Kn(b,D(a))}))},k.yc=function(a){var b=this;this.addAuthTokenListener((function(){a.next(U(b))}))},k.zc=function(a){var b=this;!function(a,b){a.P.push(b),T(a,a.i.then((function(){!a.m&&Ta(a.P,b)&&a.X!==a.getUid()&&(a.X=a.getUid(),b(Qn(a)))})))}(this,(function(){a.next(U(b))}))},k.Hc=function(a,b,c){var d=this;return this.ba&&Promise.resolve().then((function(){\"function\"==typeof a?a(U(d)):\"function\"==typeof a.next&&a.next(U(d))})),this.ac(a,b,c)},k.Gc=function(a,b,c){var d=this;return this.ba&&Promise.resolve().then((function(){d.X=d.getUid(),\"function\"==typeof a?a(U(d)):\"function\"==typeof a.next&&a.next(U(d))})),this.bc(a,b,c)},k.mc=function(a){var b=this;return T(this,this.i.then((function(){return U(b)?U(b).I(a).then((function(d){return{accessToken:d}})):null})))},k.Sc=function(a){var b=this;return this.i.then((function(){return Kn(b,O(b.a,Gj,{token:a}))})).then((function(c){var d=c.user;return Wm(d,\"isAnonymous\",!1),b.da(d),c}))},k.Tc=function(a,b){var c=this;return this.i.then((function(){return Kn(c,O(c.a,Xg,{email:a,password:b}))}))},k.dc=function(a,b){var c=this;return this.i.then((function(){return Kn(c,O(c.a,Aj,{email:a,password:b}))}))},k.Za=function(a){var b=this;return this.i.then((function(){return Kn(b,a.ja(b.a))}))},k.Rc=function(a){return cf(\"firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead.\"),this.Za(a)},k.yb=function(){var a=this;return this.i.then((function(){var b=U(a);if(b&&b.isAnonymous){var c=ff({providerId:null,isNewUser:!1});return ff({user:b,credential:null,additionalUserInfo:c,operationType:\"signIn\"})}return Kn(a,a.a.yb()).then((function(d){var e=d.user;return Wm(e,\"isAnonymous\",!0),a.da(e),d}))}))},k.getUid=function(){return U(this)&&U(this).uid||null},k.cc=function(a){this.addAuthTokenListener(a),this.A++,0<this.A&&U(this)&&Mm(U(this))},k.Oc=function(a){var b=this;w(this.u,(function(c){c==a&&b.A--})),0>this.A&&(this.A=0),0==this.A&&U(this)&&Nm(U(this)),this.removeAuthTokenListener(a)},k.addAuthTokenListener=function(a){var b=this;this.u.push(a),T(this,this.i.then((function(){b.m||Ta(b.u,a)&&a(Qn(b))})))},k.removeAuthTokenListener=function(a){Va(this.u,(function(b){return b==a}))},k.delete=function(){this.m=!0;for(var a=0;a<this.R.length;a++)this.R[a].cancel(\"app-deleted\");return this.R=[],this.l&&(a=this.l).b.removeListener(rn(\"local\"),a.a,this.pa),this.b&&(Ll(this.b,this),Vl(this.b.b)),Promise.resolve()},k.gc=function(a){return T(this,function(a,b){return O(a,Yi,{identifier:b,continueUri:Ne()?me():\"http://localhost\"}).then((function(c){return c.signinMethods||[]}))}(this.a,a))},k.Ac=function(a){return!!bh(a)},k.vb=function(a,b){var c=this;return T(this,D().then((function(){var d=new Of(b);if(!d.c)throw new t(\"argument-error\",Wf+\" must be true when sending sign in link to email\");return Yf(d)})).then((function(d){return c.a.vb(a,d)})).then((function(){})))},k.hd=function(a){return this.Qa(a).then((function(b){return b.data.email}))},k.mb=function(a,b){return T(this,this.a.mb(a,b).then((function(){})))},k.Qa=function(a){return T(this,this.a.Qa(a).then((function(b){return new rf(b)})))},k.ib=function(a){return T(this,this.a.ib(a).then((function(){})))},k.ub=function(a,b){var c=this;return T(this,D().then((function(){return void 0===b||kb(b)?{}:Yf(new Of(b))})).then((function(d){return c.a.ub(a,d)})).then((function(){})))},k.Vc=function(a,b){return T(this,bm(this,a,b,q(this.Za,this)))},k.Uc=function(a,b){var c=this;return T(this,D().then((function(){var d=b||me(),e=ah(a,d);if(!(d=bh(d)))throw new t(\"argument-error\",\"Invalid email link!\");if(d.tenantId!==c.S())throw new t(\"tenant-id-mismatch\");return c.Za(e)})))},Rn.prototype.render=function(){},Rn.prototype.reset=function(){},Rn.prototype.getResponse=function(){},Rn.prototype.execute=function(){};var Tn=null;function Vn(a,b){return(b=Wn(b))&&a.a[b]||null}function Wn(a){return(a=void 0===a?1e12:a)?a.toString():null}function Un(a,b){this.g=!1,this.c=b,this.a=this.b=null,this.h=\"invisible\"!==this.c.size,this.f=fc(a);var c=this;this.i=function(){c.execute()},this.h?this.execute():jd(this.f,\"click\",this.i)}function Xn(a){if(a.g)throw Error(\"reCAPTCHA mock was already deleted!\")}function Yn(){}function Zn(){}Sn.prototype.render=function(a,b){return this.a[this.b.toString()]=new Un(a,b),this.b++},Sn.prototype.reset=function(a){var b=Vn(this,a);a=Wn(a),b&&a&&(b.delete(),delete this.a[a])},Sn.prototype.getResponse=function(a){return(a=Vn(this,a))?a.getResponse():null},Sn.prototype.execute=function(a){(a=Vn(this,a))&&a.execute()},Un.prototype.getResponse=function(){return Xn(this),this.b},Un.prototype.execute=function(){Xn(this);var a=this;this.a||(this.a=setTimeout((function(){a.b=function(){for(var a=50,b=[];0<a;)b.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),a--;return b.join(\"\")}();var b=a.c.callback,c=a.c[\"expired-callback\"];if(b)try{b(a.b)}catch(d){}a.a=setTimeout((function(){if(a.a=null,a.b=null,c)try{c()}catch(d){}a.h&&a.execute()}),6e4)}),500))},Un.prototype.delete=function(){Xn(this),this.g=!0,clearTimeout(this.a),this.a=null,G(this.f,\"click\",this.i)},M(Yn,\"FACTOR_ID\",\"phone\"),Zn.prototype.g=function(){return Tn||(Tn=new Sn),D(Tn)},Zn.prototype.c=function(){};var $n=null;function ao(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a=\"__rcb\"+Math.floor(1e6*Math.random()).toString()}var bo=new ob(pb,\"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}\"),co=new Ue(3e4,6e4);ao.prototype.g=function(a){var b=this;return new C((function(c,d){var e=setTimeout((function(){d(new t(\"network-request-failed\"))}),co.get());!l.grecaptcha||a!==b.f&&!b.b?(l[b.a]=function(){if(l.grecaptcha){b.f=a;var g=l.grecaptcha.render;l.grecaptcha.render=function(h,m){return h=g(h,m),b.b++,h},clearTimeout(e),c(l.grecaptcha)}else clearTimeout(e),d(new t(\"internal-error\"));delete l[b.a]},D(xi(xb(bo,{onload:b.a,hl:a||\"\"}))).s((function(){clearTimeout(e),d(new t(\"internal-error\",\"Unable to load external reCAPTCHA dependencies!\"))}))):(clearTimeout(e),c(l.grecaptcha))}))},ao.prototype.c=function(){this.b--};var eo=null;function fo(a,b,c,d,e,f,g){if(M(this,\"type\",\"recaptcha\"),this.c=this.f=null,this.A=!1,this.m=b,this.g=null,g?($n||($n=new Zn),g=$n):(eo||(eo=new ao),g=eo),this.v=g,this.a=c||{theme:\"light\",type:\"image\"},this.h=[],this.a[go])throw new t(\"argument-error\",\"sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.\");if(this.i=\"invisible\"===this.a[ho],!l.document)throw new t(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.\");if(!fc(b)||!this.i&&fc(b).hasChildNodes())throw new t(\"argument-error\",\"reCAPTCHA container is either not found or already contains inner elements!\");this.o=new Ei(a,f||null,e||null),this.u=d||function(){return null};var h=this;this.l=[];var m=this.a[io];this.a[io]=function(v){if(jo(h,v),\"function\"==typeof m)m(v);else if(\"string\"==typeof m){var B=L(m,l);\"function\"==typeof B&&B(v)}};var p=this.a[ko];this.a[ko]=function(){if(jo(h,null),\"function\"==typeof p)p();else if(\"string\"==typeof p){var v=L(p,l);\"function\"==typeof v&&v()}}}var io=\"callback\",ko=\"expired-callback\",go=\"sitekey\",ho=\"size\";function jo(a,b){for(var c=0;c<a.l.length;c++)try{a.l[c](b)}catch(d){}}function mo(a,b){return a.h.push(b),b.na((function(){Ua(a.h,b)})),b}function no(a){if(a.A)throw new t(\"internal-error\",\"RecaptchaVerifier instance has been destroyed.\")}function oo(a,b,c){var d=!1;try{this.b=c||firebase.app()}catch(g){throw new t(\"argument-error\",\"No firebase.app.App instance is currently initialized.\")}if(!this.b.options||!this.b.options.apiKey)throw new t(\"invalid-api-key\");c=this.b.options.apiKey;var e=this,f=null;try{f=this.b.auth().Ga()}catch(g){}try{d=this.b.auth().settings.appVerificationDisabledForTesting}catch(g){}f=firebase.SDK_VERSION?Je(firebase.SDK_VERSION,f):null,fo.call(this,c,a,b,(function(){try{var g=e.b.auth().ka()}catch(h){g=null}return g}),f,Aa(Ba),d)}function po(a,b,c,d){a:{c=Array.prototype.slice.call(c);for(var e=0,f=!1,g=0;g<b.length;g++)if(b[g].optional)f=!0;else{if(f)throw new t(\"internal-error\",\"Argument validator encountered a required argument after an optional argument.\");e++}if(f=b.length,c.length<e||f<c.length)d=\"Expected \"+(e==f?1==e?\"1 argument\":e+\" arguments\":e+\"-\"+f+\" arguments\")+\" but got \"+c.length+\".\";else{for(e=0;e<c.length;e++)if(f=b[e].optional&&void 0===c[e],!b[e].K(c[e])&&!f){if(b=b[e],0>e||e>=qo.length)throw new t(\"internal-error\",\"Argument validator received an unsupported number of arguments.\");c=qo[e],d=(d?\"\":c+\" argument \")+(b.name?'\"'+b.name+'\" ':\"\")+\"must be \"+b.J+\".\";break a}d=null}}if(d)throw new t(\"argument-error\",a+\" failed: \"+d)}(k=fo.prototype).Ia=function(){var a=this;return this.f?this.f:this.f=mo(this,D().then((function(){if(Ne()&&!Ee())return ze();throw new t(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.\")})).then((function(){return a.v.g(a.u())})).then((function(b){return a.g=b,O(a.o,Fj,{})})).then((function(b){a.a[go]=b.recaptchaSiteKey})).s((function(b){throw a.f=null,b})))},k.render=function(){no(this);var a=this;return mo(this,this.Ia().then((function(){if(null===a.c){var b=a.m;if(!a.i){var c=fc(b);b=function(a,b,c){var d=arguments,e=document,f=String(d[0]),g=d[1];if(!ec&&g&&(g.name||g.type)){if(f=[\"<\",f],g.name&&f.push(' name=\"',Ob(g.name),'\"'),g.type){f.push(' type=\"',Ob(g.type),'\"');var h={};z(h,g),delete h.type,g=h}f.push(\">\"),f=f.join(\"\")}return f=jc(e,f),g&&(\"string\"==typeof g?f.className=g:Array.isArray(g)?f.className=g.join(\" \"):gc(f,g)),2<d.length&&kc(e,f,d),f}(\"DIV\"),c.appendChild(b)}a.c=a.g.render(b,a.a)}return a.c})))},k.verify=function(){no(this);var a=this;return mo(this,this.render().then((function(b){return new C((function(c){var d=a.g.getResponse(b);if(d)c(d);else{var e=function(f){f&&(function(a,b){Va(a.l,(function(c){return c==b}))}(a,e),c(f))};a.l.push(e),a.i&&a.g.execute(a.c)}}))})))},k.reset=function(){no(this),null!==this.c&&this.g.reset(this.c)},k.clear=function(){no(this),this.A=!0,this.v.c();for(var a=0;a<this.h.length;a++)this.h[a].cancel(\"RecaptchaVerifier instance has been destroyed.\");if(!this.i){a=fc(this.m);for(var b;b=a.firstChild;)a.removeChild(b)}},r(oo,fo);var qo=\"First Second Third Fourth Fifth Sixth Seventh Eighth Ninth\".split(\" \");function V(a,b){return{name:a||\"\",J:\"a valid string\",optional:!!b,K:function(c){return\"string\"==typeof c}}}function ro(a,b){return{name:a||\"\",J:\"a boolean\",optional:!!b,K:function(c){return\"boolean\"==typeof c}}}function W(a,b){return{name:a||\"\",J:\"a valid object\",optional:!!b,K:n}}function so(a,b){return{name:a||\"\",J:\"a function\",optional:!!b,K:function(c){return\"function\"==typeof c}}}function to(a,b){return{name:a||\"\",J:\"null\",optional:!!b,K:function(c){return null===c}}}function xo(a){return{name:a?a+\"Credential\":\"credential\",J:a?\"a valid \"+a+\" credential\":\"a valid credential\",optional:!1,K:function(b){return!!b&&!(!b.ja||a&&b.providerId!==a)}}}function Ao(a,b){return n(a)&&\"string\"==typeof a.type&&a.type===b&&\"function\"==typeof a.Ha}function Bo(a){return n(a)&&\"string\"==typeof a.uid}function X(a,b,c,d){return{name:c||\"\",J:a.J+\" or \"+b.J,optional:!!d,K:function(e){return a.K(e)||b.K(e)}}}function Y(a,b){for(var c in b){var d=b[c].name;a[d]=Do(d,a[c],b[c].j)}}function Eo(a,b){for(var c in b){var d=b[c].name;d!==c&&Object.defineProperty(a,d,{get:ta((function(e){return this[e]}),c),set:ta((function(e,f,g,h){po(e,[g],[h],!0),this[f]=h}),d,c,b[c].jb),enumerable:!0})}}function Z(a,b,c,d){a[b]=Do(b,c,d)}function Do(a,b,c){function d(){var g=Array.prototype.slice.call(arguments);return po(e,c,g),b.apply(this,g)}if(!c)return b;var f,e=function(a){return(a=a.split(\".\"))[a.length-1]}(a);for(f in b)d[f]=b[f];for(f in b.prototype)d.prototype[f]=b.prototype[f];return d}Y(zn.prototype,{ib:{name:\"applyActionCode\",j:[V(\"code\")]},Qa:{name:\"checkActionCode\",j:[V(\"code\")]},mb:{name:\"confirmPasswordReset\",j:[V(\"code\"),V(\"newPassword\")]},dc:{name:\"createUserWithEmailAndPassword\",j:[V(\"email\"),V(\"password\")]},gc:{name:\"fetchSignInMethodsForEmail\",j:[V(\"email\")]},qa:{name:\"getRedirectResult\",j:[]},Ac:{name:\"isSignInWithEmailLink\",j:[V(\"emailLink\")]},Gc:{name:\"onAuthStateChanged\",j:[X(W(),so(),\"nextOrObserver\"),so(\"opt_error\",!0),so(\"opt_completed\",!0)]},Hc:{name:\"onIdTokenChanged\",j:[X(W(),so(),\"nextOrObserver\"),so(\"opt_error\",!0),so(\"opt_completed\",!0)]},ub:{name:\"sendPasswordResetEmail\",j:[V(\"email\"),X(W(\"opt_actionCodeSettings\",!0),to(null,!0),\"opt_actionCodeSettings\",!0)]},vb:{name:\"sendSignInLinkToEmail\",j:[V(\"email\"),W(\"actionCodeSettings\")]},wb:{name:\"setPersistence\",j:[V(\"persistence\")]},Rc:{name:\"signInAndRetrieveDataWithCredential\",j:[xo()]},yb:{name:\"signInAnonymously\",j:[]},Za:{name:\"signInWithCredential\",j:[xo()]},Sc:{name:\"signInWithCustomToken\",j:[V(\"token\")]},Tc:{name:\"signInWithEmailAndPassword\",j:[V(\"email\"),V(\"password\")]},Uc:{name:\"signInWithEmailLink\",j:[V(\"email\"),V(\"emailLink\",!0)]},Vc:{name:\"signInWithPhoneNumber\",j:[V(\"phoneNumber\"),{name:\"applicationVerifier\",J:\"an implementation of firebase.auth.ApplicationVerifier\",optional:!1,K:function(a){return!(!a||\"string\"!=typeof a.type||\"function\"!=typeof a.verify)}}]},Wc:{name:\"signInWithPopup\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty(\"isOAuthProvider\"))}}]},Xc:{name:\"signInWithRedirect\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty(\"isOAuthProvider\"))}}]},cd:{name:\"updateCurrentUser\",j:[X({name:\"user\",J:\"an instance of Firebase User\",optional:!1,K:function(b){return!!(b&&b instanceof Dm)}},to(),\"user\")]},zb:{name:\"signOut\",j:[]},toJSON:{name:\"toJSON\",j:[V(null,!0)]},ed:{name:\"useDeviceLanguage\",j:[]},fd:{name:\"useEmulator\",j:[V(\"url\")]},hd:{name:\"verifyPasswordResetCode\",j:[V(\"code\")]}}),Eo(zn.prototype,{lc:{name:\"languageCode\",jb:X(V(),to(),\"languageCode\")},ti:{name:\"tenantId\",jb:X(V(),to(),\"tenantId\")}}),(zn.Persistence=Mk).LOCAL=\"local\",zn.Persistence.SESSION=\"session\",zn.Persistence.NONE=\"none\",Y(Dm.prototype,{delete:{name:\"delete\",j:[]},nc:{name:\"getIdTokenResult\",j:[ro(\"opt_forceRefresh\",!0)]},I:{name:\"getIdToken\",j:[ro(\"opt_forceRefresh\",!0)]},Bc:{name:\"linkAndRetrieveDataWithCredential\",j:[xo()]},pb:{name:\"linkWithCredential\",j:[xo()]},Cc:{name:\"linkWithPhoneNumber\",j:[V(\"phoneNumber\"),{name:\"applicationVerifier\",J:\"an implementation of firebase.auth.ApplicationVerifier\",optional:!1,K:function(a){return!(!a||\"string\"!=typeof a.type||\"function\"!=typeof a.verify)}}]},Dc:{name:\"linkWithPopup\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty(\"isOAuthProvider\"))}}]},Ec:{name:\"linkWithRedirect\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty(\"isOAuthProvider\"))}}]},Kc:{name:\"reauthenticateAndRetrieveDataWithCredential\",j:[xo()]},sb:{name:\"reauthenticateWithCredential\",j:[xo()]},Lc:{name:\"reauthenticateWithPhoneNumber\",j:[V(\"phoneNumber\"),{name:\"applicationVerifier\",J:\"an implementation of firebase.auth.ApplicationVerifier\",optional:!1,K:function(a){return!(!a||\"string\"!=typeof a.type||\"function\"!=typeof a.verify)}}]},Mc:{name:\"reauthenticateWithPopup\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty(\"isOAuthProvider\"))}}]},Nc:{name:\"reauthenticateWithRedirect\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(a){return!!(a&&a.providerId&&a.hasOwnProperty&&a.hasOwnProperty(\"isOAuthProvider\"))}}]},reload:{name:\"reload\",j:[]},tb:{name:\"sendEmailVerification\",j:[X(W(\"opt_actionCodeSettings\",!0),to(null,!0),\"opt_actionCodeSettings\",!0)]},toJSON:{name:\"toJSON\",j:[V(null,!0)]},bd:{name:\"unlink\",j:[V(\"provider\")]},Ab:{name:\"updateEmail\",j:[V(\"email\")]},Bb:{name:\"updatePassword\",j:[V(\"password\")]},dd:{name:\"updatePhoneNumber\",j:[xo(\"phone\")]},Cb:{name:\"updateProfile\",j:[W(\"profile\")]},Db:{name:\"verifyBeforeUpdateEmail\",j:[V(\"email\"),X(W(\"opt_actionCodeSettings\",!0),to(null,!0),\"opt_actionCodeSettings\",!0)]}}),Y(Sn.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}}),Y(Rn.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}}),Y(C.prototype,{na:{name:\"finally\"},s:{name:\"catch\"},then:{name:\"then\"}}),Eo($l.prototype,{appVerificationDisabled:{name:\"appVerificationDisabledForTesting\",jb:ro(\"appVerificationDisabledForTesting\")}}),Y(am.prototype,{confirm:{name:\"confirm\",j:[V(\"verificationCode\")]}}),Z(xg,\"fromJSON\",(function(a){a=\"string\"==typeof a?JSON.parse(a):a;for(var b,c=[Ig,$g,gh,Fg],d=0;d<c.length;d++)if(b=c[d](a))return b;return null}),[X(V(),W(),\"json\")]),Z(Vg,\"credential\",(function(a,b){return new Ug(a,b)}),[V(\"email\"),V(\"password\")]),Y(Ug.prototype,{w:{name:\"toJSON\",j:[V(null,!0)]}}),Y(Mg.prototype,{Ca:{name:\"addScope\",j:[V(\"scope\")]},Ka:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}}),Z(Mg,\"credential\",Ng,[X(V(),W(),\"token\")]),Z(Vg,\"credentialWithLink\",ah,[V(\"email\"),V(\"emailLink\")]),Y(Og.prototype,{Ca:{name:\"addScope\",j:[V(\"scope\")]},Ka:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}}),Z(Og,\"credential\",Pg,[X(V(),W(),\"token\")]),Y(Qg.prototype,{Ca:{name:\"addScope\",j:[V(\"scope\")]},Ka:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}}),Z(Qg,\"credential\",Rg,[X(V(),X(W(),to()),\"idToken\"),X(V(),to(),\"accessToken\",!0)]),Y(Sg.prototype,{Ka:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}}),Z(Sg,\"credential\",Tg,[X(V(),W(),\"token\"),V(\"secret\",!0)]),Y(Lg.prototype,{Ca:{name:\"addScope\",j:[V(\"scope\")]},credential:{name:\"credential\",j:[X(V(),X(W(),to()),\"optionsOrIdToken\"),X(V(),to(),\"accessToken\",!0)]},Ka:{name:\"setCustomParameters\",j:[W(\"customOAuthParameters\")]}}),Y(Gg.prototype,{w:{name:\"toJSON\",j:[V(null,!0)]}}),Y(Ag.prototype,{w:{name:\"toJSON\",j:[V(null,!0)]}}),Z(hh,\"credential\",lh,[V(\"verificationId\"),V(\"verificationCode\")]),Y(hh.prototype,{eb:{name:\"verifyPhoneNumber\",j:[X(V(),{name:\"phoneInfoOptions\",J:\"valid phone info options\",optional:!1,K:function(c){return!!c&&(c.session&&c.phoneNumber?Ao(c.session,vg)&&\"string\"==typeof c.phoneNumber:c.session&&c.multiFactorHint?Ao(c.session,wg)&&Bo(c.multiFactorHint):c.session&&c.multiFactorUid?Ao(c.session,wg)&&\"string\"==typeof c.multiFactorUid:!!c.phoneNumber&&\"string\"==typeof c.phoneNumber)}},\"phoneInfoOptions\"),{name:\"applicationVerifier\",J:\"an implementation of firebase.auth.ApplicationVerifier\",optional:!1,K:function(a){return!(!a||\"string\"!=typeof a.type||\"function\"!=typeof a.verify)}}]}}),Y(ch.prototype,{w:{name:\"toJSON\",j:[V(null,!0)]}}),Y(t.prototype,{toJSON:{name:\"toJSON\",j:[V(null,!0)]}}),Y(uh.prototype,{toJSON:{name:\"toJSON\",j:[V(null,!0)]}}),Y(th.prototype,{toJSON:{name:\"toJSON\",j:[V(null,!0)]}}),Y(gm.prototype,{toJSON:{name:\"toJSON\",j:[V(null,!0)]}}),Y(dm.prototype,{Qc:{name:\"resolveSignIn\",j:[{name:\"multiFactorAssertion\",J:\"a valid multiFactorAssertion\",optional:!1,K:function(a){return!!a&&!!a.rb}}]}}),Y(om.prototype,{Qb:{name:\"getSession\",j:[]},ec:{name:\"enroll\",j:[{name:\"multiFactorAssertion\",J:\"a valid multiFactorAssertion\",optional:!1,K:function(a){return!!a&&!!a.rb}},V(\"displayName\",!0)]},ad:{name:\"unenroll\",j:[X({name:\"multiFactorInfo\",J:\"a valid multiFactorInfo\",optional:!1,K:Bo},V(),\"multiFactorInfoIdentifier\")]}}),Y(oo.prototype,{clear:{name:\"clear\",j:[]},render:{name:\"render\",j:[]},verify:{name:\"verify\",j:[]}}),Z(Ff,\"parseLink\",Nf,[V(\"link\")]),Z(Yn,\"assertion\",(function(a){return new mm(a)}),[xo(\"phone\")]),function(){if(void 0===firebase||!firebase.INTERNAL||!firebase.INTERNAL.registerComponent)throw Error(\"Cannot find the firebase namespace; be sure to include firebase-app.js before this library.\");var a={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:wf,PASSWORD_RESET:\"PASSWORD_RESET\",RECOVER_EMAIL:\"RECOVER_EMAIL\",REVERT_SECOND_FACTOR_ADDITION:yf,VERIFY_AND_CHANGE_EMAIL:xf,VERIFY_EMAIL:\"VERIFY_EMAIL\"}},Auth:zn,AuthCredential:xg,Error:t};Z(a,\"EmailAuthProvider\",Vg,[]),Z(a,\"FacebookAuthProvider\",Mg,[]),Z(a,\"GithubAuthProvider\",Og,[]),Z(a,\"GoogleAuthProvider\",Qg,[]),Z(a,\"TwitterAuthProvider\",Sg,[]),Z(a,\"OAuthProvider\",Lg,[V(\"providerId\")]),Z(a,\"SAMLAuthProvider\",Kg,[V(\"providerId\")]),Z(a,\"PhoneAuthProvider\",hh,[{name:\"auth\",J:\"an instance of Firebase Auth\",optional:!0,K:function(a){return!!(a&&a instanceof zn)}}]),Z(a,\"RecaptchaVerifier\",oo,[X(V(),{name:\"\",J:\"an HTML element\",optional:!1,K:function(a){return!!(a&&a instanceof Element)}},\"recaptchaContainer\"),W(\"recaptchaParameters\",!0),{name:\"app\",J:\"an instance of Firebase App\",optional:!0,K:function(a){return!!(a&&a instanceof firebase.app.App)}}]),Z(a,\"ActionCodeURL\",Ff,[]),Z(a,\"PhoneMultiFactorGenerator\",Yn,[]),firebase.INTERNAL.registerComponent({name:\"auth\",instanceFactory:function(b){return new zn(b=b.getProvider(\"app\").getImmediate())},multipleInstances:!1,serviceProps:a,instantiationMode:\"LAZY\",type:\"PUBLIC\"}),firebase.INTERNAL.registerComponent({name:\"auth-internal\",instanceFactory:function(b){return{getUid:q((b=b.getProvider(\"auth\").getImmediate()).getUid,b),getToken:q(b.mc,b),addAuthTokenListener:q(b.cc,b),removeAuthTokenListener:q(b.Oc,b)}},multipleInstances:!1,instantiationMode:\"LAZY\",type:\"PRIVATE\"}),firebase.registerVersion(\"@firebase/auth\",\"0.15.0\"),firebase.INTERNAL.extendNamespace({User:Dm})}()}).apply(\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},LmZi:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"registerStorage\",(function(){return registerStorage}));var _firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"wj3C\"),_firebase_app__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_firebase_app__WEBPACK_IMPORTED_MODULE_0__),tslib__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"mrSG\"),_firebase_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"S+S0\"),FirebaseStorageError=function(){function FirebaseStorageError(code,message){this.code_=prependCode(code),this.message_=\"Firebase Storage: \"+message,this.serverResponse_=null,this.name_=\"FirebaseError\"}return FirebaseStorageError.prototype.codeProp=function(){return this.code},FirebaseStorageError.prototype.codeEquals=function(code){return prependCode(code)===this.codeProp()},FirebaseStorageError.prototype.serverResponseProp=function(){return this.serverResponse_},FirebaseStorageError.prototype.setServerResponseProp=function(serverResponse){this.serverResponse_=serverResponse},Object.defineProperty(FirebaseStorageError.prototype,\"name\",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(FirebaseStorageError.prototype,\"code\",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(FirebaseStorageError.prototype,\"message\",{get:function(){return this.serverResponse_?this.message_+\"\\n\"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(FirebaseStorageError.prototype,\"serverResponse\",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),FirebaseStorageError}();function prependCode(code){return\"storage/\"+code}function unknown(){return new FirebaseStorageError(\"unknown\",\"An unknown error occurred, please check the error payload for server response.\")}function canceled(){return new FirebaseStorageError(\"canceled\",\"User canceled the upload/download.\")}function cannotSliceBlob(){return new FirebaseStorageError(\"cannot-slice-blob\",\"Cannot slice blob for upload. Please retry the upload.\")}function noDownloadURL(){return new FirebaseStorageError(\"no-download-url\",\"The given file does not have any download URLs.\")}function invalidArgument(index,fnName,message){return new FirebaseStorageError(\"invalid-argument\",\"Invalid argument in `\"+fnName+\"` at index \"+index+\": \"+message)}function appDeleted(){return new FirebaseStorageError(\"app-deleted\",\"The Firebase app was deleted.\")}function invalidFormat(format,message){return new FirebaseStorageError(\"invalid-format\",\"String does not match format '\"+format+\"': \"+message)}function internalError(message){throw new FirebaseStorageError(\"internal-error\",\"Internal error: \"+message)}var StringFormat={RAW:\"raw\",BASE64:\"base64\",BASE64URL:\"base64url\",DATA_URL:\"data_url\"};function formatValidator(stringFormat){switch(stringFormat){case StringFormat.RAW:case StringFormat.BASE64:case StringFormat.BASE64URL:case StringFormat.DATA_URL:return;default:throw\"Expected one of the event types: [\"+StringFormat.RAW+\", \"+StringFormat.BASE64+\", \"+StringFormat.BASE64URL+\", \"+StringFormat.DATA_URL+\"].\"}}var StringData=function(){return function(data,contentType){this.data=data,this.contentType=contentType||null}}();function dataFromString(format,stringData){switch(format){case StringFormat.RAW:return new StringData(utf8Bytes_(stringData));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(format,stringData));case StringFormat.DATA_URL:return new StringData((parts=new DataURLParts(stringData)).base64?base64Bytes_(StringFormat.BASE64,parts.rest):function(value){var decoded;try{decoded=decodeURIComponent(value)}catch(e){throw invalidFormat(StringFormat.DATA_URL,\"Malformed data URL.\")}return utf8Bytes_(decoded)}(parts.rest),function(dataUrl){return new DataURLParts(dataUrl).contentType}(stringData))}var parts;throw unknown()}function utf8Bytes_(value){for(var b=[],i=0;i<value.length;i++){var c=value.charCodeAt(i);if(c<=127)b.push(c);else if(c<=2047)b.push(192|c>>6,128|63&c);else if(55296==(64512&c))if(i<value.length-1&&56320==(64512&value.charCodeAt(i+1))){var hi=c,lo=value.charCodeAt(++i);b.push(240|(c=65536|(1023&hi)<<10|1023&lo)>>18,128|c>>12&63,128|c>>6&63,128|63&c)}else b.push(239,191,189);else 56320==(64512&c)?b.push(239,191,189):b.push(224|c>>12,128|c>>6&63,128|63&c)}return new Uint8Array(b)}function base64Bytes_(format,value){switch(format){case StringFormat.BASE64:var hasMinus=-1!==value.indexOf(\"-\"),hasUnder=-1!==value.indexOf(\"_\");if(hasMinus||hasUnder)throw invalidFormat(format,\"Invalid character '\"+(hasMinus?\"-\":\"_\")+\"' found: is it base64url encoded?\");break;case StringFormat.BASE64URL:var hasPlus=-1!==value.indexOf(\"+\"),hasSlash=-1!==value.indexOf(\"/\");if(hasPlus||hasSlash)throw invalidFormat(format,\"Invalid character '\"+(hasPlus?\"+\":\"/\")+\"' found: is it base64 encoded?\");value=value.replace(/-/g,\"+\").replace(/_/g,\"/\")}var bytes;try{bytes=atob(value)}catch(e){throw invalidFormat(format,\"Invalid character found\")}for(var array=new Uint8Array(bytes.length),i=0;i<bytes.length;i++)array[i]=bytes.charCodeAt(i);return array}var DataURLParts=function(){return function(dataURL){this.base64=!1,this.contentType=null;var matches=dataURL.match(/^data:([^,]+)?,/);if(null===matches)throw invalidFormat(StringFormat.DATA_URL,\"Must be formatted 'data:[<mediatype>][;base64],<data>\");var s,middle=matches[1]||null;null!=middle&&(this.base64=(s=middle).length>=\";base64\".length&&\";base64\"===s.substring(s.length-\";base64\".length),this.contentType=this.base64?middle.substring(0,middle.length-\";base64\".length):middle),this.rest=dataURL.substring(dataURL.indexOf(\",\")+1)}}(),TaskEvent={STATE_CHANGED:\"state_changed\"},TaskState={RUNNING:\"running\",PAUSED:\"paused\",SUCCESS:\"success\",CANCELED:\"canceled\",ERROR:\"error\"};function taskStateFromInternalTaskState(state){switch(state){case\"running\":case\"pausing\":case\"canceling\":return TaskState.RUNNING;case\"paused\":return TaskState.PAUSED;case\"success\":return TaskState.SUCCESS;case\"canceled\":return TaskState.CANCELED;case\"error\":default:return TaskState.ERROR}}function isDef(p){return null!=p}function isJustDef(p){return void 0!==p}function isFunction(p){return\"function\"==typeof p}function isObject(p){return\"object\"==typeof p}function isNonNullObject(p){return isObject(p)&&null!==p}function isString(p){return\"string\"==typeof p||p instanceof String}function isInteger(p){return isNumber(p)&&Number.isInteger(p)}function isNumber(p){return\"number\"==typeof p||p instanceof Number}function isNativeBlob(p){return isNativeBlobDefined()&&p instanceof Blob}function isNativeBlobDefined(){return\"undefined\"!=typeof Blob}var ErrorCode=function(ErrorCode){return ErrorCode[ErrorCode.NO_ERROR=0]=\"NO_ERROR\",ErrorCode[ErrorCode.NETWORK_ERROR=1]=\"NETWORK_ERROR\",ErrorCode[ErrorCode.ABORT=2]=\"ABORT\",ErrorCode}({}),NetworkXhrIo=function(){function NetworkXhrIo(){var _this=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise((function(resolve){_this.xhr_.addEventListener(\"abort\",(function(){_this.errorCode_=ErrorCode.ABORT,resolve(_this)})),_this.xhr_.addEventListener(\"error\",(function(){_this.errorCode_=ErrorCode.NETWORK_ERROR,resolve(_this)})),_this.xhr_.addEventListener(\"load\",(function(){resolve(_this)}))}))}return NetworkXhrIo.prototype.send=function(url,method,body,headers){if(this.sent_)throw internalError(\"cannot .send() more than once\");if(this.sent_=!0,this.xhr_.open(method,url,!0),isDef(headers))for(var key in headers)headers.hasOwnProperty(key)&&this.xhr_.setRequestHeader(key,headers[key].toString());return isDef(body)?this.xhr_.send(body):this.xhr_.send(),this.sendPromise_},NetworkXhrIo.prototype.getErrorCode=function(){if(!this.sent_)throw internalError(\"cannot .getErrorCode() before sending\");return this.errorCode_},NetworkXhrIo.prototype.getStatus=function(){if(!this.sent_)throw internalError(\"cannot .getStatus() before sending\");try{return this.xhr_.status}catch(e){return-1}},NetworkXhrIo.prototype.getResponseText=function(){if(!this.sent_)throw internalError(\"cannot .getResponseText() before sending\");return this.xhr_.responseText},NetworkXhrIo.prototype.abort=function(){this.xhr_.abort()},NetworkXhrIo.prototype.getResponseHeader=function(header){return this.xhr_.getResponseHeader(header)},NetworkXhrIo.prototype.addUploadProgressListener=function(listener){isDef(this.xhr_.upload)&&this.xhr_.upload.addEventListener(\"progress\",listener)},NetworkXhrIo.prototype.removeUploadProgressListener=function(listener){isDef(this.xhr_.upload)&&this.xhr_.upload.removeEventListener(\"progress\",listener)},NetworkXhrIo}(),XhrIoPool=function(){function XhrIoPool(){}return XhrIoPool.prototype.createXhrIo=function(){return new NetworkXhrIo},XhrIoPool}();function getBlobBuilder(){return\"undefined\"!=typeof BlobBuilder?BlobBuilder:\"undefined\"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function getBlob(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var BlobBuilder=getBlobBuilder();if(void 0!==BlobBuilder){for(var bb=new BlobBuilder,i=0;i<args.length;i++)bb.append(args[i]);return bb.getBlob()}if(isNativeBlobDefined())return new Blob(args);throw Error(\"This browser doesn't seem to support creating Blobs\")}var FbsBlob=function(){function FbsBlob(data,elideCopy){var size=0,blobType=\"\";isNativeBlob(data)?(this.data_=data,size=data.size,blobType=data.type):data instanceof ArrayBuffer?(elideCopy?this.data_=new Uint8Array(data):(this.data_=new Uint8Array(data.byteLength),this.data_.set(new Uint8Array(data))),size=this.data_.length):data instanceof Uint8Array&&(elideCopy?this.data_=data:(this.data_=new Uint8Array(data.length),this.data_.set(data)),size=data.length),this.size_=size,this.type_=blobType}return FbsBlob.prototype.size=function(){return this.size_},FbsBlob.prototype.type=function(){return this.type_},FbsBlob.prototype.slice=function(startByte,endByte){if(isNativeBlob(this.data_)){var sliced=(start=startByte,end=endByte,(blob=this.data_).webkitSlice?blob.webkitSlice(start,end):blob.mozSlice?blob.mozSlice(start,end):blob.slice?blob.slice(start,end):null);return null===sliced?null:new FbsBlob(sliced)}var blob,start,end;return new FbsBlob(new Uint8Array(this.data_.buffer,startByte,endByte-startByte),!0)},FbsBlob.getBlob=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(isNativeBlobDefined()){var blobby=args.map((function(val){return val instanceof FbsBlob?val.data_:val}));return new FbsBlob(getBlob.apply(null,blobby))}var uint8Arrays=args.map((function(val){return isString(val)?dataFromString(StringFormat.RAW,val).data:val.data_})),finalLength_1=0;uint8Arrays.forEach((function(array){finalLength_1+=array.byteLength}));var merged_1=new Uint8Array(finalLength_1),index_1=0;return uint8Arrays.forEach((function(array){for(var i=0;i<array.length;i++)merged_1[index_1++]=array[i]})),new FbsBlob(merged_1,!0)},FbsBlob.prototype.uploadData=function(){return this.data_},FbsBlob}(),Location=function(){function Location(bucket,path){this.bucket=bucket,this.path_=path}return Object.defineProperty(Location.prototype,\"path\",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(Location.prototype,\"isRoot\",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),Location.prototype.fullServerUrl=function(){var encode=encodeURIComponent;return\"/b/\"+encode(this.bucket)+\"/o/\"+encode(this.path)},Location.prototype.bucketOnlyServerUrl=function(){return\"/b/\"+encodeURIComponent(this.bucket)+\"/o\"},Location.makeFromBucketSpec=function(bucketString){var bucketLocation;try{bucketLocation=Location.makeFromUrl(bucketString)}catch(e){return new Location(bucketString,\"\")}if(\"\"===bucketLocation.path)return bucketLocation;throw new FirebaseStorageError(\"invalid-default-bucket\",\"Invalid default bucket '\"+bucketString+\"'.\")},Location.makeFromUrl=function(url){var location=null,gsRegex=new RegExp(\"^gs://([A-Za-z0-9.\\\\-_]+)(/(.*))?$\",\"i\");function httpModify(loc){loc.path_=decodeURIComponent(loc.path)}for(var firebaseStorageHost=\"firebasestorage.googleapis.com\".replace(/[.]/g,\"\\\\.\"),groups=[{regex:gsRegex,indices:{bucket:1,path:3},postModify:function(loc){\"/\"===loc.path.charAt(loc.path.length-1)&&(loc.path_=loc.path_.slice(0,-1))}},{regex:new RegExp(\"^https?://\"+firebaseStorageHost+\"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\\\-_]+)/o(/([^?#]*).*)?$\",\"i\"),indices:{bucket:1,path:3},postModify:httpModify},{regex:new RegExp(\"^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\\\-_]+)/([^?#]*)\",\"i\"),indices:{bucket:1,path:2},postModify:httpModify}],i=0;i<groups.length;i++){var group=groups[i],captures=group.regex.exec(url);if(captures){var pathValue=captures[group.indices.path];pathValue||(pathValue=\"\"),location=new Location(captures[group.indices.bucket],pathValue),group.postModify(location);break}}if(null==location)throw function(url){return new FirebaseStorageError(\"invalid-url\",\"Invalid URL '\"+url+\"'.\")}(url);return location},Location}();function jsonObjectOrNull(s){var obj,p;try{obj=JSON.parse(s)}catch(e){return null}return isObject(p=obj)&&!Array.isArray(p)?obj:null}function child(path,childPath){var canonicalChildPath=childPath.split(\"/\").filter((function(component){return component.length>0})).join(\"/\");return 0===path.length?canonicalChildPath:path+\"/\"+canonicalChildPath}function lastComponent(path){var index=path.lastIndexOf(\"/\",path.length-2);return-1===index?path:path.slice(index+1)}function makeUrl(urlPart){return\"https://firebasestorage.googleapis.com/v0\"+urlPart}function makeQueryString(params){var encode=encodeURIComponent,queryPart=\"?\";for(var key in params)params.hasOwnProperty(key)&&(queryPart=queryPart+(encode(key)+\"=\")+encode(params[key])+\"&\");return queryPart.slice(0,-1)}function noXform_(metadata,value){return value}var Mapping=function(){return function(server,local,writable,xform){this.server=server,this.local=local||server,this.writable=!!writable,this.xform=xform||noXform_}}(),mappings_=null;function fromResourceString(service,resourceString,mappings){var obj=jsonObjectOrNull(resourceString);return null===obj?null:function(service,resource,mappings){for(var metadata={type:\"file\"},len=mappings.length,i=0;i<len;i++){var mapping=mappings[i];metadata[mapping.local]=mapping.xform(metadata,resource[mapping.server])}return function(metadata,service){Object.defineProperty(metadata,\"ref\",{get:function(){var loc=new Location(metadata.bucket,metadata.fullPath);return service.makeStorageReference(loc)}})}(metadata,service),metadata}(service,obj,mappings)}function toResourceString(metadata,mappings){for(var resource={},len=mappings.length,i=0;i<len;i++){var mapping=mappings[i];mapping.writable&&(resource[mapping.server]=metadata[mapping.local])}return JSON.stringify(resource)}function metadataValidator(p){if(!isObject(p)||!p)throw\"Expected Metadata object.\";for(var key in p)if(p.hasOwnProperty(key)){var val=p[key];if(\"customMetadata\"===key){if(!isObject(val))throw\"Expected object for 'customMetadata' mapping.\"}else if(isNonNullObject(val))throw\"Mapping for '\"+key+\"' cannot be an object.\"}}function listOptionsValidator(p){if(!isObject(p)||!p)throw\"Expected ListOptions object.\";for(var key in p)if(\"maxResults\"===key){if(!isInteger(p.maxResults)||p.maxResults<=0)throw\"Expected maxResults to be a positive number.\";if(p.maxResults>1e3)throw\"Expected maxResults to be less than or equal to 1000.\"}else{if(\"pageToken\"!==key)throw\"Unknown option: \"+key;if(p.pageToken&&!isString(p.pageToken))throw\"Expected pageToken to be string.\"}}var RequestInfo=function(){return function(url,method,handler,timeout){this.url=url,this.method=method,this.handler=handler,this.timeout=timeout,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function handlerCheck(cndn){if(!cndn)throw unknown()}function metadataHandler(service,mappings){return function(xhr,text){var metadata=fromResourceString(service,text,mappings);return handlerCheck(null!==metadata),metadata}}function sharedErrorHandler(location){return function(xhr,err){var newErr;return(newErr=401===xhr.getStatus()?new FirebaseStorageError(\"unauthenticated\",\"User is not authenticated, please authenticate using Firebase Authentication and try again.\"):402===xhr.getStatus()?new FirebaseStorageError(\"quota-exceeded\",\"Quota for bucket '\"+location.bucket+\"' exceeded, please view quota on https://firebase.google.com/pricing/.\"):403===xhr.getStatus()?new FirebaseStorageError(\"unauthorized\",\"User does not have permission to access '\"+location.path+\"'.\"):err).setServerResponseProp(err.serverResponseProp()),newErr}}function objectErrorHandler(location){var shared=sharedErrorHandler(location);return function(xhr,err){var newErr=shared(xhr,err);return 404===xhr.getStatus()&&(newErr=new FirebaseStorageError(\"object-not-found\",\"Object '\"+location.path+\"' does not exist.\")),newErr.setServerResponseProp(err.serverResponseProp()),newErr}}function getMetadata(service,location,mappings){var url=makeUrl(location.fullServerUrl()),timeout=service.maxOperationRetryTime,requestInfo=new RequestInfo(url,\"GET\",metadataHandler(service,mappings),timeout);return requestInfo.errorHandler=objectErrorHandler(location),requestInfo}function list(service,location,delimiter,pageToken,maxResults){var urlParams={};urlParams.prefix=location.isRoot?\"\":location.path+\"/\",delimiter&&delimiter.length>0&&(urlParams.delimiter=delimiter),pageToken&&(urlParams.pageToken=pageToken),maxResults&&(urlParams.maxResults=maxResults);var url=makeUrl(location.bucketOnlyServerUrl()),timeout=service.maxOperationRetryTime,requestInfo=new RequestInfo(url,\"GET\",function(service,bucket){return function(xhr,text){var listResult=function(service,bucket,resourceString){var obj=jsonObjectOrNull(resourceString);return null===obj?null:function(service,bucket,resource){var listResult={prefixes:[],items:[],nextPageToken:resource.nextPageToken};if(resource.prefixes)for(var _i=0,_a=resource.prefixes;_i<_a.length;_i++){var pathWithoutTrailingSlash=_a[_i].replace(/\\/$/,\"\"),reference=service.makeStorageReference(new Location(bucket,pathWithoutTrailingSlash));listResult.prefixes.push(reference)}if(resource.items)for(var _b=0,_c=resource.items;_b<_c.length;_b++)reference=service.makeStorageReference(new Location(bucket,_c[_b].name)),listResult.items.push(reference);return listResult}(service,bucket,obj)}(service,bucket,text);return handlerCheck(null!==listResult),listResult}}(service,location.bucket),timeout);return requestInfo.urlParams=urlParams,requestInfo.errorHandler=sharedErrorHandler(location),requestInfo}function getDownloadUrl(service,location,mappings){var url=makeUrl(location.fullServerUrl()),timeout=service.maxOperationRetryTime,requestInfo=new RequestInfo(url,\"GET\",function(service,mappings){return function(xhr,text){var metadata=fromResourceString(service,text,mappings);return handlerCheck(null!==metadata),function(metadata,resourceString){var obj=jsonObjectOrNull(resourceString);if(null===obj)return null;if(!isString(obj.downloadTokens))return null;var tokens=obj.downloadTokens;if(0===tokens.length)return null;var encode=encodeURIComponent;return tokens.split(\",\").map((function(token){var path=metadata.fullPath;return makeUrl(\"/b/\"+encode(metadata.bucket)+\"/o/\"+encode(path))+makeQueryString({alt:\"media\",token:token})}))[0]}(metadata,text)}}(service,mappings),timeout);return requestInfo.errorHandler=objectErrorHandler(location),requestInfo}function updateMetadata(service,location,metadata,mappings){var url=makeUrl(location.fullServerUrl()),body=toResourceString(metadata,mappings),timeout=service.maxOperationRetryTime,requestInfo=new RequestInfo(url,\"PATCH\",metadataHandler(service,mappings),timeout);return requestInfo.headers={\"Content-Type\":\"application/json; charset=utf-8\"},requestInfo.body=body,requestInfo.errorHandler=objectErrorHandler(location),requestInfo}function deleteObject(service,location){var url=makeUrl(location.fullServerUrl()),requestInfo=new RequestInfo(url,\"DELETE\",(function(_xhr,_text){}),service.maxOperationRetryTime);return requestInfo.successCodes=[200,204],requestInfo.errorHandler=objectErrorHandler(location),requestInfo}function metadataForUpload_(location,blob,metadata){var metadataClone=Object.assign({},metadata);return metadataClone.fullPath=location.path,metadataClone.size=blob.size(),metadataClone.contentType||(metadataClone.contentType=function(metadata,blob){return blob&&blob.type()||\"application/octet-stream\"}(0,blob)),metadataClone}var ResumableUploadStatus=function(){return function(current,total,finalized,metadata){this.current=current,this.total=total,this.finalized=!!finalized,this.metadata=metadata||null}}();function checkResumeHeader_(xhr,allowed){var status=null;try{status=xhr.getResponseHeader(\"X-Goog-Upload-Status\")}catch(e){handlerCheck(!1)}return handlerCheck(!!status&&-1!==(allowed||[\"active\"]).indexOf(status)),status}var Observer=function(){return function(nextOrObserver,error,complete){if(isFunction(nextOrObserver)||isDef(error)||isDef(complete))this.next=nextOrObserver,this.error=error||null,this.complete=complete||null;else{var observer=nextOrObserver;this.next=observer.next||null,this.error=observer.error||null,this.complete=observer.complete||null}}}(),UploadTaskSnapshot=function(){return function(bytesTransferred,totalBytes,state,metadata,task,ref){this.bytesTransferred=bytesTransferred,this.totalBytes=totalBytes,this.state=state,this.metadata=metadata,this.task=task,this.ref=ref}}();function validate(name,specs,passed){for(var minArgs=specs.length,maxArgs=specs.length,i=0;i<specs.length;i++)if(specs[i].optional){minArgs=i;break}var argMin,argMax,countPart,plural;if(!(minArgs<=passed.length&&passed.length<=maxArgs))throw(argMin=minArgs)===(argMax=maxArgs)?(countPart=argMin,plural=1===argMin?\"argument\":\"arguments\"):(countPart=\"between \"+argMin+\" and \"+argMax,plural=\"arguments\"),new FirebaseStorageError(\"invalid-argument-count\",\"Invalid argument count in `\"+name+\"`: Expected \"+countPart+\" \"+plural+\", received \"+passed.length+\".\");for(i=0;i<passed.length;i++)try{specs[i].validator(passed[i])}catch(e){throw e instanceof Error?invalidArgument(i,name,e.message):invalidArgument(i,name,e)}}var ArgSpec=function(){return function(validator,optional){var self=this;this.validator=function(p){self.optional&&!isJustDef(p)||validator(p)},this.optional=!!optional}}();function stringSpec(validator,optional){function stringValidator(p){if(!isString(p))throw\"Expected string.\"}var chainedValidator,v1,v2;return validator?(v1=stringValidator,v2=validator,chainedValidator=function(p){v1(p),v2(p)}):chainedValidator=stringValidator,new ArgSpec(chainedValidator,optional)}function uploadDataSpec(){return new ArgSpec((function(p){if(!(p instanceof Uint8Array||p instanceof ArrayBuffer||isNativeBlobDefined()&&p instanceof Blob))throw\"Expected Blob or File.\"}))}function metadataSpec(optional){return new ArgSpec(metadataValidator,optional)}function listOptionSpec(optional){return new ArgSpec(listOptionsValidator,optional)}function nonNegativeNumberSpec(){return new ArgSpec((function(p){if(!(isNumber(p)&&p>=0))throw\"Expected a number 0 or greater.\"}))}function looseObjectSpec(validator,optional){return new ArgSpec((function(p){if(!(null===p||isDef(p)&&p instanceof Object))throw\"Expected an Object.\";null!=validator&&validator(p)}),optional)}function nullFunctionSpec(optional){return new ArgSpec((function(p){if(null!==p&&!isFunction(p))throw\"Expected a Function.\"}),optional)}function async(f){return function(){for(var argsToForward=[],_i=0;_i<arguments.length;_i++)argsToForward[_i]=arguments[_i];Promise.resolve().then((function(){return f.apply(void 0,argsToForward)}))}}var UploadTask=function(){function UploadTask(ref,service,location,mappings,blob,metadata){var _this=this;void 0===metadata&&(metadata=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=ref,this.service_=service,this.location_=location,this.blob_=blob,this.metadata_=metadata,this.mappings_=mappings,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=\"running\",this.errorHandler_=function(error){_this.request_=null,_this.chunkMultiplier_=1,error.codeEquals(\"canceled\")?(_this.needToFetchStatus_=!0,_this.completeTransitions_()):(_this.error_=error,_this.transition_(\"error\"))},this.metadataErrorHandler_=function(error){_this.request_=null,error.codeEquals(\"canceled\")?_this.completeTransitions_():(_this.error_=error,_this.transition_(\"error\"))},this.promise_=new Promise((function(resolve,reject){_this.resolve_=resolve,_this.reject_=reject,_this.start_()})),this.promise_.then(null,(function(){}))}return UploadTask.prototype.makeProgressCallback_=function(){var _this=this,sizeBefore=this.transferred_;return function(loaded){return _this.updateProgress_(sizeBefore+loaded)}},UploadTask.prototype.shouldDoResumable_=function(blob){return blob.size()>262144},UploadTask.prototype.start_=function(){\"running\"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},UploadTask.prototype.resolveToken_=function(callback){var _this=this;this.service_.getAuthToken().then((function(authToken){switch(_this.state_){case\"running\":callback(authToken);break;case\"canceling\":_this.transition_(\"canceled\");break;case\"pausing\":_this.transition_(\"paused\")}}))},UploadTask.prototype.createResumable_=function(){var _this=this;this.resolveToken_((function(authToken){var requestInfo=function(service,location,mappings,blob,metadata){var urlPart=location.bucketOnlyServerUrl(),metadataForUpload=metadataForUpload_(location,blob,metadata),urlParams={name:metadataForUpload.fullPath},url=makeUrl(urlPart),headers={\"X-Goog-Upload-Protocol\":\"resumable\",\"X-Goog-Upload-Command\":\"start\",\"X-Goog-Upload-Header-Content-Length\":blob.size(),\"X-Goog-Upload-Header-Content-Type\":metadataForUpload.contentType,\"Content-Type\":\"application/json; charset=utf-8\"},body=toResourceString(metadataForUpload,mappings),requestInfo=new RequestInfo(url,\"POST\",(function(xhr){var url;checkResumeHeader_(xhr);try{url=xhr.getResponseHeader(\"X-Goog-Upload-URL\")}catch(e){handlerCheck(!1)}return handlerCheck(isString(url)),url}),service.maxUploadRetryTime);return requestInfo.urlParams=urlParams,requestInfo.headers=headers,requestInfo.body=body,requestInfo.errorHandler=sharedErrorHandler(location),requestInfo}(_this.service_,_this.location_,_this.mappings_,_this.blob_,_this.metadata_),createRequest=_this.service_.makeRequest(requestInfo,authToken);_this.request_=createRequest,createRequest.getPromise().then((function(url){_this.request_=null,_this.uploadUrl_=url,_this.needToFetchStatus_=!1,_this.completeTransitions_()}),_this.errorHandler_)}))},UploadTask.prototype.fetchStatus_=function(){var _this=this,url=this.uploadUrl_;this.resolveToken_((function(authToken){var requestInfo=function(service,location,url,blob){var requestInfo=new RequestInfo(url,\"POST\",(function(xhr){var status=checkResumeHeader_(xhr,[\"active\",\"final\"]),sizeString=null;try{sizeString=xhr.getResponseHeader(\"X-Goog-Upload-Size-Received\")}catch(e){handlerCheck(!1)}sizeString||handlerCheck(!1);var size=Number(sizeString);return handlerCheck(!isNaN(size)),new ResumableUploadStatus(size,blob.size(),\"final\"===status)}),service.maxUploadRetryTime);return requestInfo.headers={\"X-Goog-Upload-Command\":\"query\"},requestInfo.errorHandler=sharedErrorHandler(location),requestInfo}(_this.service_,_this.location_,url,_this.blob_),statusRequest=_this.service_.makeRequest(requestInfo,authToken);_this.request_=statusRequest,statusRequest.getPromise().then((function(status){status=status,_this.request_=null,_this.updateProgress_(status.current),_this.needToFetchStatus_=!1,status.finalized&&(_this.needToFetchMetadata_=!0),_this.completeTransitions_()}),_this.errorHandler_)}))},UploadTask.prototype.continueUpload_=function(){var _this=this,chunkSize=262144*this.chunkMultiplier_,status=new ResumableUploadStatus(this.transferred_,this.blob_.size()),url=this.uploadUrl_;this.resolveToken_((function(authToken){var requestInfo;try{requestInfo=function(location,service,url,blob,chunkSize,mappings,status,progressCallback){var status_=new ResumableUploadStatus(0,0);if(status?(status_.current=status.current,status_.total=status.total):(status_.current=0,status_.total=blob.size()),blob.size()!==status_.total)throw new FirebaseStorageError(\"server-file-wrong-size\",\"Server recorded incorrect upload file size, please retry the upload.\");var bytesLeft=status_.total-status_.current,bytesToUpload=bytesLeft;chunkSize>0&&(bytesToUpload=Math.min(bytesToUpload,chunkSize));var startByte=status_.current,headers={\"X-Goog-Upload-Command\":bytesToUpload===bytesLeft?\"upload, finalize\":\"upload\",\"X-Goog-Upload-Offset\":status_.current},body=blob.slice(startByte,startByte+bytesToUpload);if(null===body)throw cannotSliceBlob();var requestInfo=new RequestInfo(url,\"POST\",(function(xhr,text){var metadata,uploadStatus=checkResumeHeader_(xhr,[\"active\",\"final\"]),newCurrent=status_.current+bytesToUpload,size=blob.size();return metadata=\"final\"===uploadStatus?metadataHandler(service,mappings)(xhr,text):null,new ResumableUploadStatus(newCurrent,size,\"final\"===uploadStatus,metadata)}),service.maxUploadRetryTime);return requestInfo.headers=headers,requestInfo.body=body.uploadData(),requestInfo.progressCallback=progressCallback||null,requestInfo.errorHandler=sharedErrorHandler(location),requestInfo}(_this.location_,_this.service_,url,_this.blob_,chunkSize,_this.mappings_,status,_this.makeProgressCallback_())}catch(e){return _this.error_=e,void _this.transition_(\"error\")}var uploadRequest=_this.service_.makeRequest(requestInfo,authToken);_this.request_=uploadRequest,uploadRequest.getPromise().then((function(newStatus){_this.increaseMultiplier_(),_this.request_=null,_this.updateProgress_(newStatus.current),newStatus.finalized?(_this.metadata_=newStatus.metadata,_this.transition_(\"success\")):_this.completeTransitions_()}),_this.errorHandler_)}))},UploadTask.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},UploadTask.prototype.fetchMetadata_=function(){var _this=this;this.resolveToken_((function(authToken){var requestInfo=getMetadata(_this.service_,_this.location_,_this.mappings_),metadataRequest=_this.service_.makeRequest(requestInfo,authToken);_this.request_=metadataRequest,metadataRequest.getPromise().then((function(metadata){_this.request_=null,_this.metadata_=metadata,_this.transition_(\"success\")}),_this.metadataErrorHandler_)}))},UploadTask.prototype.oneShotUpload_=function(){var _this=this;this.resolveToken_((function(authToken){var requestInfo=function(service,location,mappings,blob,metadata){var urlPart=location.bucketOnlyServerUrl(),headers={\"X-Goog-Upload-Protocol\":\"multipart\"},boundary=function(){for(var str=\"\",i=0;i<2;i++)str+=Math.random().toString().slice(2);return str}();headers[\"Content-Type\"]=\"multipart/related; boundary=\"+boundary;var metadata_=metadataForUpload_(location,blob,metadata),metadataString=toResourceString(metadata_,mappings),body=FbsBlob.getBlob(\"--\"+boundary+\"\\r\\nContent-Type: application/json; charset=utf-8\\r\\n\\r\\n\"+metadataString+\"\\r\\n--\"+boundary+\"\\r\\nContent-Type: \"+metadata_.contentType+\"\\r\\n\\r\\n\",blob,\"\\r\\n--\"+boundary+\"--\");if(null===body)throw cannotSliceBlob();var urlParams={name:metadata_.fullPath},url=makeUrl(urlPart),timeout=service.maxUploadRetryTime,requestInfo=new RequestInfo(url,\"POST\",metadataHandler(service,mappings),timeout);return requestInfo.urlParams=urlParams,requestInfo.headers=headers,requestInfo.body=body.uploadData(),requestInfo.errorHandler=sharedErrorHandler(location),requestInfo}(_this.service_,_this.location_,_this.mappings_,_this.blob_,_this.metadata_),multipartRequest=_this.service_.makeRequest(requestInfo,authToken);_this.request_=multipartRequest,multipartRequest.getPromise().then((function(metadata){_this.request_=null,_this.metadata_=metadata,_this.updateProgress_(_this.blob_.size()),_this.transition_(\"success\")}),_this.errorHandler_)}))},UploadTask.prototype.updateProgress_=function(transferred){var old=this.transferred_;this.transferred_=transferred,this.transferred_!==old&&this.notifyObservers_()},UploadTask.prototype.transition_=function(state){if(this.state_!==state)switch(state){case\"canceling\":case\"pausing\":this.state_=state,null!==this.request_&&this.request_.cancel();break;case\"running\":var wasPaused=\"paused\"===this.state_;this.state_=state,wasPaused&&(this.notifyObservers_(),this.start_());break;case\"paused\":this.state_=state,this.notifyObservers_();break;case\"canceled\":this.error_=canceled(),this.state_=state,this.notifyObservers_();break;case\"error\":case\"success\":this.state_=state,this.notifyObservers_()}},UploadTask.prototype.completeTransitions_=function(){switch(this.state_){case\"pausing\":this.transition_(\"paused\");break;case\"canceling\":this.transition_(\"canceled\");break;case\"running\":this.start_()}},Object.defineProperty(UploadTask.prototype,\"snapshot\",{get:function(){var externalState=taskStateFromInternalTaskState(this.state_);return new UploadTaskSnapshot(this.transferred_,this.blob_.size(),externalState,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),UploadTask.prototype.on=function(type,nextOrObserver,error,completed){function typeValidator(){if(type!==TaskEvent.STATE_CHANGED)throw\"Expected one of the event types: [\"+TaskEvent.STATE_CHANGED+\"].\"}var nextOrObserverMessage=\"Expected a function or an Object with one of `next`, `error`, `complete` properties.\",nextValidator=nullFunctionSpec(!0).validator,observerValidator=looseObjectSpec(null,!0).validator;function nextOrObserverValidator(p){try{return void nextValidator(p)}catch(e){}try{if(observerValidator(p),!(isJustDef(p.next)||isJustDef(p.error)||isJustDef(p.complete)))throw\"\";return}catch(e){throw nextOrObserverMessage}}var specs=[stringSpec(typeValidator),looseObjectSpec(nextOrObserverValidator,!0),nullFunctionSpec(!0),nullFunctionSpec(!0)];validate(\"on\",specs,arguments);var self=this;function makeBinder(specs){return function(nextOrObserver,error,complete){null!==specs&&validate(\"on\",specs,arguments);var observer=new Observer(nextOrObserver,error,completed);return self.addObserver_(observer),function(){self.removeObserver_(observer)}}}function binderNextOrObserverValidator(p){if(null===p)throw nextOrObserverMessage;nextOrObserverValidator(p)}var binderSpecs=[looseObjectSpec(binderNextOrObserverValidator),nullFunctionSpec(!0),nullFunctionSpec(!0)],typeOnly=!(isJustDef(nextOrObserver)||isJustDef(error)||isJustDef(completed));return typeOnly?makeBinder(binderSpecs):makeBinder(null)(nextOrObserver,error,completed)},UploadTask.prototype.then=function(onFulfilled,onRejected){return this.promise_.then(onFulfilled,onRejected)},UploadTask.prototype.catch=function(onRejected){return this.then(null,onRejected)},UploadTask.prototype.addObserver_=function(observer){this.observers_.push(observer),this.notifyObserver_(observer)},UploadTask.prototype.removeObserver_=function(observer){var i=this.observers_.indexOf(observer);-1!==i&&this.observers_.splice(i,1)},UploadTask.prototype.notifyObservers_=function(){var _this=this;this.finishPromise_(),this.observers_.slice().forEach((function(observer){_this.notifyObserver_(observer)}))},UploadTask.prototype.finishPromise_=function(){if(null!==this.resolve_){var triggered=!0;switch(taskStateFromInternalTaskState(this.state_)){case TaskState.SUCCESS:async(this.resolve_.bind(null,this.snapshot))();break;case TaskState.CANCELED:case TaskState.ERROR:async(this.reject_.bind(null,this.error_))();break;default:triggered=!1}triggered&&(this.resolve_=null,this.reject_=null)}},UploadTask.prototype.notifyObserver_=function(observer){switch(taskStateFromInternalTaskState(this.state_)){case TaskState.RUNNING:case TaskState.PAUSED:observer.next&&async(observer.next.bind(observer,this.snapshot))();break;case TaskState.SUCCESS:observer.complete&&async(observer.complete.bind(observer))();break;case TaskState.CANCELED:case TaskState.ERROR:observer.error&&async(observer.error.bind(observer,this.error_))();break;default:observer.error&&async(observer.error.bind(observer,this.error_))()}},UploadTask.prototype.resume=function(){validate(\"resume\",[],arguments);var valid=\"paused\"===this.state_||\"pausing\"===this.state_;return valid&&this.transition_(\"running\"),valid},UploadTask.prototype.pause=function(){validate(\"pause\",[],arguments);var valid=\"running\"===this.state_;return valid&&this.transition_(\"pausing\"),valid},UploadTask.prototype.cancel=function(){validate(\"cancel\",[],arguments);var valid=\"running\"===this.state_||\"pausing\"===this.state_;return valid&&this.transition_(\"canceling\"),valid},UploadTask}(),Reference=function(){function Reference(service,location){this.service=service,this.location=location instanceof Location?location:Location.makeFromUrl(location)}return Reference.prototype.toString=function(){return validate(\"toString\",[],arguments),\"gs://\"+this.location.bucket+\"/\"+this.location.path},Reference.prototype.newRef=function(service,location){return new Reference(service,location)},Reference.prototype.mappings=function(){return function(){if(mappings_)return mappings_;var mappings=[];mappings.push(new Mapping(\"bucket\")),mappings.push(new Mapping(\"generation\")),mappings.push(new Mapping(\"metageneration\")),mappings.push(new Mapping(\"name\",\"fullPath\",!0));var nameMapping=new Mapping(\"name\");nameMapping.xform=function(_metadata,fullPath){return function(fullPath){return!isString(fullPath)||fullPath.length<2?fullPath:lastComponent(fullPath)}(fullPath)},mappings.push(nameMapping);var sizeMapping=new Mapping(\"size\");return sizeMapping.xform=function(_metadata,size){return isDef(size)?Number(size):size},mappings.push(sizeMapping),mappings.push(new Mapping(\"timeCreated\")),mappings.push(new Mapping(\"updated\")),mappings.push(new Mapping(\"md5Hash\",null,!0)),mappings.push(new Mapping(\"cacheControl\",null,!0)),mappings.push(new Mapping(\"contentDisposition\",null,!0)),mappings.push(new Mapping(\"contentEncoding\",null,!0)),mappings.push(new Mapping(\"contentLanguage\",null,!0)),mappings.push(new Mapping(\"contentType\",null,!0)),mappings.push(new Mapping(\"metadata\",\"customMetadata\",!0)),mappings_=mappings}()},Reference.prototype.child=function(childPath){validate(\"child\",[stringSpec()],arguments);var newPath=child(this.location.path,childPath),location=new Location(this.location.bucket,newPath);return this.newRef(this.service,location)},Object.defineProperty(Reference.prototype,\"parent\",{get:function(){var newPath=function(path){if(0===path.length)return null;var index=path.lastIndexOf(\"/\");return-1===index?\"\":path.slice(0,index)}(this.location.path);if(null===newPath)return null;var location=new Location(this.location.bucket,newPath);return this.newRef(this.service,location)},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"root\",{get:function(){var location=new Location(this.location.bucket,\"\");return this.newRef(this.service,location)},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"bucket\",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"fullPath\",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"name\",{get:function(){return lastComponent(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"storage\",{get:function(){return this.service},enumerable:!1,configurable:!0}),Reference.prototype.put=function(data,metadata){return void 0===metadata&&(metadata=null),validate(\"put\",[uploadDataSpec(),metadataSpec(!0)],arguments),this.throwIfRoot_(\"put\"),new UploadTask(this,this.service,this.location,this.mappings(),new FbsBlob(data),metadata)},Reference.prototype.putString=function(value,format,metadata){void 0===format&&(format=StringFormat.RAW),validate(\"putString\",[stringSpec(),stringSpec(formatValidator,!0),metadataSpec(!0)],arguments),this.throwIfRoot_(\"putString\");var data=dataFromString(format,value),metadataClone=Object.assign({},metadata);return!isDef(metadataClone.contentType)&&isDef(data.contentType)&&(metadataClone.contentType=data.contentType),new UploadTask(this,this.service,this.location,this.mappings(),new FbsBlob(data.data,!0),metadataClone)},Reference.prototype.delete=function(){var _this=this;return validate(\"delete\",[],arguments),this.throwIfRoot_(\"delete\"),this.service.getAuthToken().then((function(authToken){var requestInfo=deleteObject(_this.service,_this.location);return _this.service.makeRequest(requestInfo,authToken).getPromise()}))},Reference.prototype.listAll=function(){validate(\"listAll\",[],arguments);var accumulator={prefixes:[],items:[]};return this.listAllHelper(accumulator).then((function(){return accumulator}))},Reference.prototype.listAllHelper=function(accumulator,pageToken){return Object(tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this,void 0,void 0,(function(){var nextPage,_a,_b;return Object(tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this,(function(_c){switch(_c.label){case 0:return[4,this.list({pageToken:pageToken})];case 1:return nextPage=_c.sent(),(_a=accumulator.prefixes).push.apply(_a,nextPage.prefixes),(_b=accumulator.items).push.apply(_b,nextPage.items),null==nextPage.nextPageToken?[3,3]:[4,this.listAllHelper(accumulator,nextPage.nextPageToken)];case 2:_c.sent(),_c.label=3;case 3:return[2]}}))}))},Reference.prototype.list=function(options){validate(\"list\",[listOptionSpec(!0)],arguments);var self=this;return this.service.getAuthToken().then((function(authToken){var op=options||{},requestInfo=list(self.service,self.location,\"/\",op.pageToken,op.maxResults);return self.service.makeRequest(requestInfo,authToken).getPromise()}))},Reference.prototype.getMetadata=function(){var _this=this;return validate(\"getMetadata\",[],arguments),this.throwIfRoot_(\"getMetadata\"),this.service.getAuthToken().then((function(authToken){var requestInfo=getMetadata(_this.service,_this.location,_this.mappings());return _this.service.makeRequest(requestInfo,authToken).getPromise()}))},Reference.prototype.updateMetadata=function(metadata){var _this=this;return validate(\"updateMetadata\",[metadataSpec()],arguments),this.throwIfRoot_(\"updateMetadata\"),this.service.getAuthToken().then((function(authToken){var requestInfo=updateMetadata(_this.service,_this.location,metadata,_this.mappings());return _this.service.makeRequest(requestInfo,authToken).getPromise()}))},Reference.prototype.getDownloadURL=function(){var _this=this;return validate(\"getDownloadURL\",[],arguments),this.throwIfRoot_(\"getDownloadURL\"),this.service.getAuthToken().then((function(authToken){var requestInfo=getDownloadUrl(_this.service,_this.location,_this.mappings());return _this.service.makeRequest(requestInfo,authToken).getPromise().then((function(url){if(null===url)throw noDownloadURL();return url}))}))},Reference.prototype.throwIfRoot_=function(name){if(\"\"===this.location.path)throw function(name){return new FirebaseStorageError(\"invalid-root-operation\",\"The operation '\"+name+\"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').\")}(name)},Reference}(),FailRequest=function(){function FailRequest(error){this.promise_=Promise.reject(error)}return FailRequest.prototype.getPromise=function(){return this.promise_},FailRequest.prototype.cancel=function(_appDelete){},FailRequest}(),NetworkRequest=function(){function NetworkRequest(url,method,headers,body,successCodes,additionalRetryCodes,callback,errorCallback,timeout,progressCallback,pool){var _this=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=url,this.method_=method,this.headers_=headers,this.body_=body,this.successCodes_=successCodes.slice(),this.additionalRetryCodes_=additionalRetryCodes.slice(),this.callback_=callback,this.errorCallback_=errorCallback,this.progressCallback_=progressCallback,this.timeout_=timeout,this.pool_=pool,this.promise_=new Promise((function(resolve,reject){_this.resolve_=resolve,_this.reject_=reject,_this.start_()}))}return NetworkRequest.prototype.start_=function(){var self=this;function backoffDone(requestWentThrough,status){var err,resolve=self.resolve_,reject=self.reject_,xhr=status.xhr;if(status.wasSuccessCode)try{var result=self.callback_(xhr,xhr.getResponseText());isJustDef(result)?resolve(result):resolve()}catch(e){reject(e)}else null!==xhr?((err=unknown()).setServerResponseProp(xhr.getResponseText()),reject(self.errorCallback_?self.errorCallback_(xhr,err):err)):reject(err=status.canceled?self.appDelete_?appDeleted():canceled():new FirebaseStorageError(\"retry-limit-exceeded\",\"Max retry time for operation exceeded, please try again.\"))}this.canceled_?backoffDone(0,new RequestEndStatus(!1,null,!0)):this.backoffId_=function(f,callback,timeout){var waitSeconds=1,timeoutId=null,hitTimeout=!1,cancelState=0;function canceled(){return 2===cancelState}var triggeredCallback=!1;function triggerCallback(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];triggeredCallback||(triggeredCallback=!0,callback.apply(null,args))}function callWithDelay(millis){timeoutId=setTimeout((function(){timeoutId=null,function(backoffCallback,canceled){if(canceled)backoffCallback(!1,new RequestEndStatus(!1,null,!0));else{var xhr=self.pool_.createXhrIo();self.pendingXhr_=xhr,null!==self.progressCallback_&&xhr.addUploadProgressListener(progressListener),xhr.send(self.url_,self.method_,self.body_,self.headers_).then((function(xhr){null!==self.progressCallback_&&xhr.removeUploadProgressListener(progressListener),self.pendingXhr_=null;var hitServer=(xhr=xhr).getErrorCode()===ErrorCode.NO_ERROR,status=xhr.getStatus();if(hitServer&&!self.isRetryStatusCode_(status)){var successCode=-1!==self.successCodes_.indexOf(status);backoffCallback(!0,new RequestEndStatus(successCode,xhr))}else{var wasCanceled=xhr.getErrorCode()===ErrorCode.ABORT;backoffCallback(!1,new RequestEndStatus(!1,null,wasCanceled))}}))}function progressListener(progressEvent){null!==self.progressCallback_&&self.progressCallback_(progressEvent.loaded,progressEvent.lengthComputable?progressEvent.total:-1)}}(handler,canceled())}),millis)}function handler(success){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];if(!triggeredCallback)if(success)triggerCallback.call.apply(triggerCallback,Object(tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArrays)([null,success],args));else{var waitMillis,mustStop=canceled()||hitTimeout;mustStop?triggerCallback.call.apply(triggerCallback,Object(tslib__WEBPACK_IMPORTED_MODULE_1__.__spreadArrays)([null,success],args)):(waitSeconds<64&&(waitSeconds*=2),1===cancelState?(cancelState=2,waitMillis=0):waitMillis=1e3*(waitSeconds+Math.random()),callWithDelay(waitMillis))}}var stopped=!1;function stop(wasTimeout){stopped||(stopped=!0,triggeredCallback||(null!==timeoutId?(wasTimeout||(cancelState=2),clearTimeout(timeoutId),callWithDelay(0)):wasTimeout||(cancelState=1)))}return callWithDelay(0),setTimeout((function(){hitTimeout=!0,stop(!0)}),timeout),stop}(0,backoffDone,this.timeout_)},NetworkRequest.prototype.getPromise=function(){return this.promise_},NetworkRequest.prototype.cancel=function(appDelete){this.canceled_=!0,this.appDelete_=appDelete||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},NetworkRequest.prototype.isRetryStatusCode_=function(status){var isFiveHundredCode=status>=500&&status<600,isExtraRetryCode=-1!==[408,429].indexOf(status),isRequestSpecificRetryCode=-1!==this.additionalRetryCodes_.indexOf(status);return isFiveHundredCode||isExtraRetryCode||isRequestSpecificRetryCode},NetworkRequest}(),RequestEndStatus=function(){return function(wasSuccessCode,xhr,canceled){this.wasSuccessCode=wasSuccessCode,this.xhr=xhr,this.canceled=!!canceled}}(),StorageService=function(){function StorageService(app,authProvider,pool,url){var _a;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=app,this.authProvider_=authProvider,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=pool,this.bucket_=null!=url?Location.makeFromBucketSpec(url):StorageService.extractBucket_(null===(_a=this.app_)||void 0===_a?void 0:_a.options),this.internals_=new ServiceInternals(this)}return StorageService.extractBucket_=function(config){var bucketString=null==config?void 0:config.storageBucket;return null==bucketString?null:Location.makeFromBucketSpec(bucketString)},StorageService.prototype.getAuthToken=function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_1__.__awaiter)(this,void 0,void 0,(function(){var auth,tokenData;return Object(tslib__WEBPACK_IMPORTED_MODULE_1__.__generator)(this,(function(_a){switch(_a.label){case 0:return(auth=this.authProvider_.getImmediate({optional:!0}))?[4,auth.getToken()]:[3,2];case 1:if(null!==(tokenData=_a.sent()))return[2,tokenData.accessToken];_a.label=2;case 2:return[2,null]}}))}))},StorageService.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach((function(request){return request.cancel()})),this.requests_.clear()},StorageService.prototype.makeStorageReference=function(loc){return new Reference(this,loc)},StorageService.prototype.makeRequest=function(requestInfo,authToken){var _this=this;if(this.deleted_)return new FailRequest(appDeleted());var request_1=function(requestInfo,appId,authToken,pool){var queryPart=makeQueryString(requestInfo.urlParams),url=requestInfo.url+queryPart,headers=Object.assign({},requestInfo.headers);return function(headers,appId){appId&&(headers[\"X-Firebase-GMPID\"]=appId)}(headers,appId),function(headers,authToken){null!==authToken&&authToken.length>0&&(headers.Authorization=\"Firebase \"+authToken)}(headers,authToken),function(headers){headers[\"X-Firebase-Storage-Version\"]=\"webjs/\"+(void 0!==_firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a?_firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a.SDK_VERSION:\"AppManager\")}(headers),new NetworkRequest(url,requestInfo.method,headers,requestInfo.body,requestInfo.successCodes,requestInfo.additionalRetryCodes,requestInfo.handler,requestInfo.errorHandler,requestInfo.timeout,requestInfo.progressCallback,pool)}(requestInfo,this.appId_,authToken,this.pool_);return this.requests_.add(request_1),request_1.getPromise().then((function(){return _this.requests_.delete(request_1)}),(function(){return _this.requests_.delete(request_1)})),request_1},StorageService.prototype.ref=function(path){function validator(path){if(\"string\"!=typeof path)throw\"Path is not a string.\";if(/^[A-Za-z]+:\\/\\//.test(path))throw\"Expected child path but got a URL, use refFromURL instead.\"}if(validate(\"ref\",[stringSpec(validator,!0)],arguments),null==this.bucket_)throw new Error(\"No Storage Bucket defined in Firebase Options.\");var ref=new Reference(this,this.bucket_);return null!=path?ref.child(path):ref},StorageService.prototype.refFromURL=function(url){function validator(p){if(\"string\"!=typeof p)throw\"Path is not a string.\";if(!/^[A-Za-z]+:\\/\\//.test(p))throw\"Expected full URL but got a child path, use ref instead.\";try{Location.makeFromUrl(p)}catch(e){throw\"Expected valid full URL but got an invalid one.\"}}return validate(\"refFromURL\",[stringSpec(validator,!1)],arguments),new Reference(this,url)},Object.defineProperty(StorageService.prototype,\"maxUploadRetryTime\",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),StorageService.prototype.setMaxUploadRetryTime=function(time){validate(\"setMaxUploadRetryTime\",[nonNegativeNumberSpec()],arguments),this.maxUploadRetryTime_=time},Object.defineProperty(StorageService.prototype,\"maxOperationRetryTime\",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),StorageService.prototype.setMaxOperationRetryTime=function(time){validate(\"setMaxOperationRetryTime\",[nonNegativeNumberSpec()],arguments),this.maxOperationRetryTime_=time},Object.defineProperty(StorageService.prototype,\"app\",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(StorageService.prototype,\"INTERNAL\",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),StorageService}(),ServiceInternals=function(){function ServiceInternals(service){this.service_=service}return ServiceInternals.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},ServiceInternals}();function factory(container,url){var app=container.getProvider(\"app\").getImmediate(),authProvider=container.getProvider(\"auth-internal\");return new StorageService(app,authProvider,new XhrIoPool,url)}function registerStorage(instance){var namespaceExports={TaskState:TaskState,TaskEvent:TaskEvent,StringFormat:StringFormat,Storage:StorageService,Reference:Reference};instance.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_2__.Component(\"storage\",factory,\"PUBLIC\").setServiceProps(namespaceExports).setMultipleInstances(!0)),instance.registerVersion(\"@firebase/storage\",\"0.3.43\")}registerStorage(_firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a)},NSPt:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var firebase=__webpack_require__(\"wj3C\"),tslib=__webpack_require__(\"mrSG\"),util=__webpack_require__(\"zVF4\"),logger$1=__webpack_require__(\"q/0M\"),component=__webpack_require__(\"S+S0\");function _interopDefaultLegacy(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var id,firebase__default=_interopDefaultLegacy(firebase),DOMStorageWrapper=function(){function DOMStorageWrapper(domStorage_){this.domStorage_=domStorage_,this.prefix_=\"firebase:\"}return DOMStorageWrapper.prototype.set=function(key,value){null==value?this.domStorage_.removeItem(this.prefixedName_(key)):this.domStorage_.setItem(this.prefixedName_(key),util.stringify(value))},DOMStorageWrapper.prototype.get=function(key){var storedVal=this.domStorage_.getItem(this.prefixedName_(key));return null==storedVal?null:util.jsonEval(storedVal)},DOMStorageWrapper.prototype.remove=function(key){this.domStorage_.removeItem(this.prefixedName_(key))},DOMStorageWrapper.prototype.prefixedName_=function(name){return this.prefix_+name},DOMStorageWrapper.prototype.toString=function(){return this.domStorage_.toString()},DOMStorageWrapper}(),MemoryStorage=function(){function MemoryStorage(){this.cache_={},this.isInMemoryStorage=!0}return MemoryStorage.prototype.set=function(key,value){null==value?delete this.cache_[key]:this.cache_[key]=value},MemoryStorage.prototype.get=function(key){return util.contains(this.cache_,key)?this.cache_[key]:null},MemoryStorage.prototype.remove=function(key){delete this.cache_[key]},MemoryStorage}(),createStoragefor=function(domStorageName){try{if(\"undefined\"!=typeof window&&void 0!==window[domStorageName]){var domStorage=window[domStorageName];return domStorage.setItem(\"firebase:sentinel\",\"cache\"),domStorage.removeItem(\"firebase:sentinel\"),new DOMStorageWrapper(domStorage)}}catch(e){}return new MemoryStorage},PersistentStorage=createStoragefor(\"localStorage\"),SessionStorage=createStoragefor(\"sessionStorage\"),logClient=new logger$1.Logger(\"@firebase/database\"),LUIDGenerator=(id=1,function(){return id++}),sha1=function(str){var utf8Bytes=util.stringToByteArray(str),sha1=new util.Sha1;sha1.update(utf8Bytes);var sha1Bytes=sha1.digest();return util.base64.encodeByteArray(sha1Bytes)},buildLogMessage_=function(){for(var varArgs=[],_i=0;_i<arguments.length;_i++)varArgs[_i]=arguments[_i];for(var message=\"\",i=0;i<varArgs.length;i++){var arg=varArgs[i];Array.isArray(arg)||arg&&\"object\"==typeof arg&&\"number\"==typeof arg.length?message+=buildLogMessage_.apply(null,arg):message+=\"object\"==typeof arg?util.stringify(arg):arg,message+=\" \"}return message},logger=null,firstLog_=!0,enableLogging=function(logger_,persistent){util.assert(!persistent||!0===logger_||!1===logger_,\"Can't turn on custom loggers persistently.\"),!0===logger_?(logClient.logLevel=logger$1.LogLevel.VERBOSE,logger=logClient.log.bind(logClient),persistent&&SessionStorage.set(\"logging_enabled\",!0)):\"function\"==typeof logger_?logger=logger_:(logger=null,SessionStorage.remove(\"logging_enabled\"))},log=function(){for(var varArgs=[],_i=0;_i<arguments.length;_i++)varArgs[_i]=arguments[_i];if(!0===firstLog_&&(firstLog_=!1,null===logger&&!0===SessionStorage.get(\"logging_enabled\")&&enableLogging(!0)),logger){var message=buildLogMessage_.apply(null,varArgs);logger(message)}},logWrapper=function(prefix){return function(){for(var varArgs=[],_i=0;_i<arguments.length;_i++)varArgs[_i]=arguments[_i];log.apply(void 0,tslib.__spread([prefix],varArgs))}},error=function(){for(var varArgs=[],_i=0;_i<arguments.length;_i++)varArgs[_i]=arguments[_i];var message=\"FIREBASE INTERNAL ERROR: \"+buildLogMessage_.apply(void 0,tslib.__spread(varArgs));logClient.error(message)},fatal=function(){for(var varArgs=[],_i=0;_i<arguments.length;_i++)varArgs[_i]=arguments[_i];var message=\"FIREBASE FATAL ERROR: \"+buildLogMessage_.apply(void 0,tslib.__spread(varArgs));throw logClient.error(message),new Error(message)},warn=function(){for(var varArgs=[],_i=0;_i<arguments.length;_i++)varArgs[_i]=arguments[_i];var message=\"FIREBASE WARNING: \"+buildLogMessage_.apply(void 0,tslib.__spread(varArgs));logClient.warn(message)},isInvalidJSONNumber=function(data){return\"number\"==typeof data&&(data!=data||data===Number.POSITIVE_INFINITY||data===Number.NEGATIVE_INFINITY)},MIN_NAME=\"[MIN_NAME]\",MAX_NAME=\"[MAX_NAME]\",nameCompare=function(a,b){if(a===b)return 0;if(a===MIN_NAME||b===MAX_NAME)return-1;if(b===MIN_NAME||a===MAX_NAME)return 1;var aAsInt=tryParseInt(a),bAsInt=tryParseInt(b);return null!==aAsInt?null!==bAsInt?aAsInt-bAsInt==0?a.length-b.length:aAsInt-bAsInt:-1:null!==bAsInt?1:a<b?-1:1},stringCompare=function(a,b){return a===b?0:a<b?-1:1},requireKey=function(key,obj){if(obj&&key in obj)return obj[key];throw new Error(\"Missing required key (\"+key+\") in object: \"+util.stringify(obj))},ObjectToUniqueKey=function(obj){if(\"object\"!=typeof obj||null===obj)return util.stringify(obj);var keys=[];for(var k in obj)keys.push(k);keys.sort();for(var key=\"{\",i=0;i<keys.length;i++)0!==i&&(key+=\",\"),key+=util.stringify(keys[i]),key+=\":\",key+=ObjectToUniqueKey(obj[keys[i]]);return key+\"}\"},splitStringBySize=function(str,segsize){var len=str.length;if(len<=segsize)return[str];for(var dataSegs=[],c=0;c<len;c+=segsize)dataSegs.push(str.substring(c,c+segsize>len?len:c+segsize));return dataSegs};function each(obj,fn){for(var key in obj)obj.hasOwnProperty(key)&&fn(key,obj[key])}var PUSH_CHARS,lastPushTime,lastRandChars,__EMPTY_NODE,MAX_NODE,__childrenNodeConstructor,nodeFromJSON,MAX_NODE$1,_defaultIndexMap,EMPTY_NODE,doubleToIEEE754String=function(v){var s,e,f,ln,i;util.assert(!isInvalidJSONNumber(v),\"Invalid JSON number\"),0===v?(e=0,f=0,s=1/v==-1/0?1:0):(s=v<0,(v=Math.abs(v))>=Math.pow(2,-1022)?(e=(ln=Math.min(Math.floor(Math.log(v)/Math.LN2),1023))+1023,f=Math.round(v*Math.pow(2,52-ln)-Math.pow(2,52))):(e=0,f=Math.round(v/Math.pow(2,-1074))));var bits=[];for(i=52;i;i-=1)bits.push(f%2?1:0),f=Math.floor(f/2);for(i=11;i;i-=1)bits.push(e%2?1:0),e=Math.floor(e/2);bits.push(s?1:0),bits.reverse();var str=bits.join(\"\"),hexByteString=\"\";for(i=0;i<64;i+=8){var hexByte=parseInt(str.substr(i,8),2).toString(16);1===hexByte.length&&(hexByte=\"0\"+hexByte),hexByteString+=hexByte}return hexByteString.toLowerCase()},INTEGER_REGEXP_=new RegExp(\"^-?(0*)\\\\d{1,10}$\"),tryParseInt=function(str){if(INTEGER_REGEXP_.test(str)){var intVal=Number(str);if(intVal>=-2147483648&&intVal<=2147483647)return intVal}return null},exceptionGuard=function(fn){try{fn()}catch(e){setTimeout((function(){throw warn(\"Exception was thrown by user callback.\",e.stack||\"\"),e}),Math.floor(0))}},setTimeoutNonBlocking=function(fn,time){var timeout=setTimeout(fn,time);return\"object\"==typeof timeout&&timeout.unref&&timeout.unref(),timeout},Path=function(){function Path(pathOrString,pieceNum){if(void 0===pieceNum){this.pieces_=pathOrString.split(\"/\");for(var copyTo=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[copyTo]=this.pieces_[i],copyTo++);this.pieces_.length=copyTo,this.pieceNum_=0}else this.pieces_=pathOrString,this.pieceNum_=pieceNum}return Object.defineProperty(Path,\"Empty\",{get:function(){return new Path(\"\")},enumerable:!1,configurable:!0}),Path.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Path.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Path.prototype.popFront=function(){var pieceNum=this.pieceNum_;return pieceNum<this.pieces_.length&&pieceNum++,new Path(this.pieces_,pieceNum)},Path.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Path.prototype.toString=function(){for(var pathString=\"\",i=this.pieceNum_;i<this.pieces_.length;i++)\"\"!==this.pieces_[i]&&(pathString+=\"/\"+this.pieces_[i]);return pathString||\"/\"},Path.prototype.toUrlEncodedString=function(){for(var pathString=\"\",i=this.pieceNum_;i<this.pieces_.length;i++)\"\"!==this.pieces_[i]&&(pathString+=\"/\"+encodeURIComponent(String(this.pieces_[i])));return pathString||\"/\"},Path.prototype.slice=function(begin){return void 0===begin&&(begin=0),this.pieces_.slice(this.pieceNum_+begin)},Path.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var pieces=[],i=this.pieceNum_;i<this.pieces_.length-1;i++)pieces.push(this.pieces_[i]);return new Path(pieces,0)},Path.prototype.child=function(childPathObj){for(var pieces=[],i=this.pieceNum_;i<this.pieces_.length;i++)pieces.push(this.pieces_[i]);if(childPathObj instanceof Path)for(i=childPathObj.pieceNum_;i<childPathObj.pieces_.length;i++)pieces.push(childPathObj.pieces_[i]);else{var childPieces=childPathObj.split(\"/\");for(i=0;i<childPieces.length;i++)childPieces[i].length>0&&pieces.push(childPieces[i])}return new Path(pieces,0)},Path.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Path.relativePath=function(outerPath,innerPath){var outer=outerPath.getFront(),inner=innerPath.getFront();if(null===outer)return innerPath;if(outer===inner)return Path.relativePath(outerPath.popFront(),innerPath.popFront());throw new Error(\"INTERNAL ERROR: innerPath (\"+innerPath+\") is not within outerPath (\"+outerPath+\")\")},Path.comparePaths=function(left,right){for(var leftKeys=left.slice(),rightKeys=right.slice(),i=0;i<leftKeys.length&&i<rightKeys.length;i++){var cmp=nameCompare(leftKeys[i],rightKeys[i]);if(0!==cmp)return cmp}return leftKeys.length===rightKeys.length?0:leftKeys.length<rightKeys.length?-1:1},Path.prototype.equals=function(other){if(this.getLength()!==other.getLength())return!1;for(var i=this.pieceNum_,j=other.pieceNum_;i<=this.pieces_.length;i++,j++)if(this.pieces_[i]!==other.pieces_[j])return!1;return!0},Path.prototype.contains=function(other){var i=this.pieceNum_,j=other.pieceNum_;if(this.getLength()>other.getLength())return!1;for(;i<this.pieces_.length;){if(this.pieces_[i]!==other.pieces_[j])return!1;++i,++j}return!0},Path}(),ValidationPath=function(){function ValidationPath(path,errorPrefix_){this.errorPrefix_=errorPrefix_,this.parts_=path.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var i=0;i<this.parts_.length;i++)this.byteLength_+=util.stringLength(this.parts_[i]);this.checkValid_()}return Object.defineProperty(ValidationPath,\"MAX_PATH_DEPTH\",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(ValidationPath,\"MAX_PATH_LENGTH_BYTES\",{get:function(){return 768},enumerable:!1,configurable:!0}),ValidationPath.prototype.push=function(child){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(child),this.byteLength_+=util.stringLength(child),this.checkValid_()},ValidationPath.prototype.pop=function(){var last=this.parts_.pop();this.byteLength_-=util.stringLength(last),this.parts_.length>0&&(this.byteLength_-=1)},ValidationPath.prototype.checkValid_=function(){if(this.byteLength_>ValidationPath.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+\"has a key path longer than \"+ValidationPath.MAX_PATH_LENGTH_BYTES+\" bytes (\"+this.byteLength_+\").\");if(this.parts_.length>ValidationPath.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+\"path specified exceeds the maximum depth that can be written (\"+ValidationPath.MAX_PATH_DEPTH+\") or object contains a cycle \"+this.toErrorString())},ValidationPath.prototype.toErrorString=function(){return 0===this.parts_.length?\"\":\"in property '\"+this.parts_.join(\".\")+\"'\"},ValidationPath}(),RepoInfo=function(){function RepoInfo(host,secure,namespace,webSocketOnly,nodeAdmin,persistenceKey,includeNamespaceInQueryParams){void 0===nodeAdmin&&(nodeAdmin=!1),void 0===persistenceKey&&(persistenceKey=\"\"),void 0===includeNamespaceInQueryParams&&(includeNamespaceInQueryParams=!1),this.secure=secure,this.namespace=namespace,this.webSocketOnly=webSocketOnly,this.nodeAdmin=nodeAdmin,this.persistenceKey=persistenceKey,this.includeNamespaceInQueryParams=includeNamespaceInQueryParams,this.host=host.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(\".\")+1),this.internalHost=PersistentStorage.get(\"host:\"+host)||this.host}return RepoInfo.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},RepoInfo.prototype.isCacheableHost=function(){return\"s-\"===this.internalHost.substr(0,2)},RepoInfo.prototype.isDemoHost=function(){return\"firebaseio-demo.com\"===this.domain},RepoInfo.prototype.isCustomHost=function(){return\"firebaseio.com\"!==this.domain&&\"firebaseio-demo.com\"!==this.domain},RepoInfo.prototype.updateHost=function(newHost){newHost!==this.internalHost&&(this.internalHost=newHost,this.isCacheableHost()&&PersistentStorage.set(\"host:\"+this.host,this.internalHost))},RepoInfo.prototype.connectionURL=function(type,params){var connURL;if(util.assert(\"string\"==typeof type,\"typeof type must == string\"),util.assert(\"object\"==typeof params,\"typeof params must == object\"),\"websocket\"===type)connURL=(this.secure?\"wss://\":\"ws://\")+this.internalHost+\"/.ws?\";else{if(\"long_polling\"!==type)throw new Error(\"Unknown connection type: \"+type);connURL=(this.secure?\"https://\":\"http://\")+this.internalHost+\"/.lp?\"}this.needsQueryParam()&&(params.ns=this.namespace);var pairs=[];return each(params,(function(key,value){pairs.push(key+\"=\"+value)})),connURL+pairs.join(\"&\")},RepoInfo.prototype.toString=function(){var str=this.toURLString();return this.persistenceKey&&(str+=\"<\"+this.persistenceKey+\">\"),str},RepoInfo.prototype.toURLString=function(){return(this.secure?\"https://\":\"http://\")+this.host},RepoInfo}(),parseRepoInfo=function(dataURL,nodeAdmin){var parsedUrl=parseDatabaseURL(dataURL),namespace=parsedUrl.namespace;return\"firebase.com\"===parsedUrl.domain&&fatal(parsedUrl.host+\" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead\"),namespace&&\"undefined\"!==namespace||\"localhost\"===parsedUrl.domain||fatal(\"Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com\"),parsedUrl.secure||\"undefined\"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf(\"https:\")&&warn(\"Insecure Firebase access from a secure page. Please use https in calls to new Firebase().\"),{repoInfo:new RepoInfo(parsedUrl.host,parsedUrl.secure,namespace,nodeAdmin,\"ws\"===parsedUrl.scheme||\"wss\"===parsedUrl.scheme,\"\",namespace!==parsedUrl.subdomain),path:new Path(parsedUrl.pathString)}},parseDatabaseURL=function(dataURL){var host=\"\",domain=\"\",subdomain=\"\",pathString=\"\",namespace=\"\",secure=!0,scheme=\"https\",port=443;if(\"string\"==typeof dataURL){var colonInd=dataURL.indexOf(\"//\");colonInd>=0&&(scheme=dataURL.substring(0,colonInd-1),dataURL=dataURL.substring(colonInd+2));var slashInd=dataURL.indexOf(\"/\");-1===slashInd&&(slashInd=dataURL.length);var questionMarkInd=dataURL.indexOf(\"?\");-1===questionMarkInd&&(questionMarkInd=dataURL.length),host=dataURL.substring(0,Math.min(slashInd,questionMarkInd)),slashInd<questionMarkInd&&(pathString=function(pathString){for(var pathStringDecoded=\"\",pieces=pathString.split(\"/\"),i=0;i<pieces.length;i++)if(pieces[i].length>0){var piece=pieces[i];try{piece=decodeURIComponent(piece.replace(/\\+/g,\" \"))}catch(e){}pathStringDecoded+=\"/\"+piece}return pathStringDecoded}(dataURL.substring(slashInd,questionMarkInd)));var queryParams=function(queryString){var e_1,_a,results={};\"?\"===queryString.charAt(0)&&(queryString=queryString.substring(1));try{for(var _b=tslib.__values(queryString.split(\"&\")),_c=_b.next();!_c.done;_c=_b.next()){var segment=_c.value;if(0!==segment.length){var kv=segment.split(\"=\");2===kv.length?results[decodeURIComponent(kv[0])]=decodeURIComponent(kv[1]):warn(\"Invalid query segment '\"+segment+\"' in query '\"+queryString+\"'\")}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return results}(dataURL.substring(Math.min(dataURL.length,questionMarkInd)));(colonInd=host.indexOf(\":\"))>=0?(secure=\"https\"===scheme||\"wss\"===scheme,port=parseInt(host.substring(colonInd+1),10)):colonInd=host.length;var hostWithoutPort=host.slice(0,colonInd);if(\"localhost\"===hostWithoutPort.toLowerCase())domain=\"localhost\";else if(hostWithoutPort.split(\".\").length<=2)domain=hostWithoutPort;else{var dotInd=host.indexOf(\".\");subdomain=host.substring(0,dotInd).toLowerCase(),domain=host.substring(dotInd+1),namespace=subdomain}\"ns\"in queryParams&&(namespace=queryParams.ns)}return{host:host,port:port,domain:domain,subdomain:subdomain,secure:secure,scheme:scheme,pathString:pathString,namespace:namespace}},INVALID_KEY_REGEX_=/[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/,INVALID_PATH_REGEX_=/[\\[\\].#$\\u0000-\\u001F\\u007F]/,isValidKey=function(key){return\"string\"==typeof key&&0!==key.length&&!INVALID_KEY_REGEX_.test(key)},isValidPathString=function(pathString){return\"string\"==typeof pathString&&0!==pathString.length&&!INVALID_PATH_REGEX_.test(pathString)},isValidPriority=function(priority){return null===priority||\"string\"==typeof priority||\"number\"==typeof priority&&!isInvalidJSONNumber(priority)||priority&&\"object\"==typeof priority&&util.contains(priority,\".sv\")},validateFirebaseDataArg=function(fnName,argumentNumber,data,path,optional){optional&&void 0===data||validateFirebaseData(util.errorPrefix(fnName,argumentNumber,optional),data,path)},validateFirebaseData=function(errorPrefix,data,path_){var path=path_ instanceof Path?new ValidationPath(path_,errorPrefix):path_;if(void 0===data)throw new Error(errorPrefix+\"contains undefined \"+path.toErrorString());if(\"function\"==typeof data)throw new Error(errorPrefix+\"contains a function \"+path.toErrorString()+\" with contents = \"+data.toString());if(isInvalidJSONNumber(data))throw new Error(errorPrefix+\"contains \"+data.toString()+\" \"+path.toErrorString());if(\"string\"==typeof data&&data.length>10485760/3&&util.stringLength(data)>10485760)throw new Error(errorPrefix+\"contains a string greater than 10485760 utf8 bytes \"+path.toErrorString()+\" ('\"+data.substring(0,50)+\"...')\");if(data&&\"object\"==typeof data){var hasDotValue_1=!1,hasActualChild_1=!1;if(each(data,(function(key,value){if(\".value\"===key)hasDotValue_1=!0;else if(\".priority\"!==key&&\".sv\"!==key&&(hasActualChild_1=!0,!isValidKey(key)))throw new Error(errorPrefix+\" contains an invalid key (\"+key+\") \"+path.toErrorString()+'.  Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');path.push(key),validateFirebaseData(errorPrefix,value,path),path.pop()})),hasDotValue_1&&hasActualChild_1)throw new Error(errorPrefix+' contains \".value\" child '+path.toErrorString()+\" in addition to actual children.\")}},validateFirebaseMergeDataArg=function(fnName,argumentNumber,data,path,optional){if(!optional||void 0!==data){var errorPrefix=util.errorPrefix(fnName,argumentNumber,optional);if(!data||\"object\"!=typeof data||Array.isArray(data))throw new Error(errorPrefix+\" must be an object containing the children to replace.\");var mergePaths=[];each(data,(function(key,value){var curPath=new Path(key);if(validateFirebaseData(errorPrefix,value,path.child(curPath)),\".priority\"===curPath.getBack()&&!isValidPriority(value))throw new Error(errorPrefix+\"contains an invalid value for '\"+curPath.toString()+\"', which must be a valid Firebase priority (a string, finite number, server value, or null).\");mergePaths.push(curPath)})),function(errorPrefix,mergePaths){var i,curPath;for(i=0;i<mergePaths.length;i++)for(var keys=(curPath=mergePaths[i]).slice(),j=0;j<keys.length;j++)if(\".priority\"===keys[j]&&j===keys.length-1);else if(!isValidKey(keys[j]))throw new Error(errorPrefix+\"contains an invalid key (\"+keys[j]+\") in path \"+curPath.toString()+'. Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');mergePaths.sort(Path.comparePaths);var prevPath=null;for(i=0;i<mergePaths.length;i++){if(curPath=mergePaths[i],null!==prevPath&&prevPath.contains(curPath))throw new Error(errorPrefix+\"contains a path \"+prevPath.toString()+\" that is ancestor of another path \"+curPath.toString());prevPath=curPath}}(errorPrefix,mergePaths)}},validatePriority=function(fnName,argumentNumber,priority,optional){if(!optional||void 0!==priority){if(isInvalidJSONNumber(priority))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+\"is \"+priority.toString()+\", but must be a valid Firebase priority (a string, finite number, server value, or null).\");if(!isValidPriority(priority))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+\"must be a valid Firebase priority (a string, finite number, server value, or null).\")}},validateEventType=function(fnName,argumentNumber,eventType,optional){if(!optional||void 0!==eventType)switch(eventType){case\"value\":case\"child_added\":case\"child_removed\":case\"child_changed\":case\"child_moved\":break;default:throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+'must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".')}},validateKey=function(fnName,argumentNumber,key,optional){if(!(optional&&void 0===key||isValidKey(key)))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+'was an invalid key = \"'+key+'\".  Firebase keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").')},validatePathString=function(fnName,argumentNumber,pathString,optional){if(!(optional&&void 0===pathString||isValidPathString(pathString)))throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+'was an invalid path = \"'+pathString+'\". Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"')},validateRootPathString=function(fnName,argumentNumber,pathString,optional){pathString&&(pathString=pathString.replace(/^\\/*\\.info(\\/|$)/,\"/\")),validatePathString(fnName,argumentNumber,pathString,optional)},validateWritablePath=function(fnName,path){if(\".info\"===path.getFront())throw new Error(fnName+\" failed = Can't modify data under /.info/\")},validateUrl=function(fnName,argumentNumber,parsedUrl){var pathString=parsedUrl.path.toString();if(\"string\"!=typeof parsedUrl.repoInfo.host||0===parsedUrl.repoInfo.host.length||!isValidKey(parsedUrl.repoInfo.namespace)&&\"localhost\"!==parsedUrl.repoInfo.host.split(\":\")[0]||0!==pathString.length&&!function(pathString){return pathString&&(pathString=pathString.replace(/^\\/*\\.info(\\/|$)/,\"/\")),isValidPathString(pathString)}(pathString))throw new Error(util.errorPrefix(fnName,argumentNumber,!1)+'must be a valid firebase URL and the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".')},validateBoolean=function(fnName,argumentNumber,bool,optional){if((!optional||void 0!==bool)&&\"boolean\"!=typeof bool)throw new Error(util.errorPrefix(fnName,argumentNumber,optional)+\"must be a boolean.\")},OnDisconnect=function(){function OnDisconnect(repo_,path_){this.repo_=repo_,this.path_=path_}return OnDisconnect.prototype.cancel=function(onComplete){util.validateArgCount(\"OnDisconnect.cancel\",0,1,arguments.length),util.validateCallback(\"OnDisconnect.cancel\",1,onComplete,!0);var deferred=new util.Deferred;return this.repo_.onDisconnectCancel(this.path_,deferred.wrapCallback(onComplete)),deferred.promise},OnDisconnect.prototype.remove=function(onComplete){util.validateArgCount(\"OnDisconnect.remove\",0,1,arguments.length),validateWritablePath(\"OnDisconnect.remove\",this.path_),util.validateCallback(\"OnDisconnect.remove\",1,onComplete,!0);var deferred=new util.Deferred;return this.repo_.onDisconnectSet(this.path_,null,deferred.wrapCallback(onComplete)),deferred.promise},OnDisconnect.prototype.set=function(value,onComplete){util.validateArgCount(\"OnDisconnect.set\",1,2,arguments.length),validateWritablePath(\"OnDisconnect.set\",this.path_),validateFirebaseDataArg(\"OnDisconnect.set\",1,value,this.path_,!1),util.validateCallback(\"OnDisconnect.set\",2,onComplete,!0);var deferred=new util.Deferred;return this.repo_.onDisconnectSet(this.path_,value,deferred.wrapCallback(onComplete)),deferred.promise},OnDisconnect.prototype.setWithPriority=function(value,priority,onComplete){util.validateArgCount(\"OnDisconnect.setWithPriority\",2,3,arguments.length),validateWritablePath(\"OnDisconnect.setWithPriority\",this.path_),validateFirebaseDataArg(\"OnDisconnect.setWithPriority\",1,value,this.path_,!1),validatePriority(\"OnDisconnect.setWithPriority\",2,priority,!1),util.validateCallback(\"OnDisconnect.setWithPriority\",3,onComplete,!0);var deferred=new util.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,value,priority,deferred.wrapCallback(onComplete)),deferred.promise},OnDisconnect.prototype.update=function(objectToMerge,onComplete){if(util.validateArgCount(\"OnDisconnect.update\",1,2,arguments.length),validateWritablePath(\"OnDisconnect.update\",this.path_),Array.isArray(objectToMerge)){for(var newObjectToMerge={},i=0;i<objectToMerge.length;++i)newObjectToMerge[\"\"+i]=objectToMerge[i];objectToMerge=newObjectToMerge,warn(\"Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}validateFirebaseMergeDataArg(\"OnDisconnect.update\",1,objectToMerge,this.path_,!1),util.validateCallback(\"OnDisconnect.update\",2,onComplete,!0);var deferred=new util.Deferred;return this.repo_.onDisconnectUpdate(this.path_,objectToMerge,deferred.wrapCallback(onComplete)),deferred.promise},OnDisconnect}(),TransactionResult=function(){function TransactionResult(committed,snapshot){this.committed=committed,this.snapshot=snapshot}return TransactionResult.prototype.toJSON=function(){return util.validateArgCount(\"TransactionResult.toJSON\",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},TransactionResult}(),nextPushId=(PUSH_CHARS=\"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\",lastPushTime=0,lastRandChars=[],function(now){var i,duplicateTime=now===lastPushTime;lastPushTime=now;var timeStampChars=new Array(8);for(i=7;i>=0;i--)timeStampChars[i]=PUSH_CHARS.charAt(now%64),now=Math.floor(now/64);util.assert(0===now,\"Cannot push at time == 0\");var id=timeStampChars.join(\"\");if(duplicateTime){for(i=11;i>=0&&63===lastRandChars[i];i--)lastRandChars[i]=0;lastRandChars[i]++}else for(i=0;i<12;i++)lastRandChars[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)id+=PUSH_CHARS.charAt(lastRandChars[i]);return util.assert(20===id.length,\"nextPushId: Length should be 20.\"),id}),NamedNode=function(){function NamedNode(name,node){this.name=name,this.node=node}return NamedNode.Wrap=function(name,node){return new NamedNode(name,node)},NamedNode}(),Index=function(){function Index(){}return Index.prototype.getCompare=function(){return this.compare.bind(this)},Index.prototype.indexedValueChanged=function(oldNode,newNode){var oldWrapped=new NamedNode(MIN_NAME,oldNode),newWrapped=new NamedNode(MIN_NAME,newNode);return 0!==this.compare(oldWrapped,newWrapped)},Index.prototype.minPost=function(){return NamedNode.MIN},Index}(),KeyIndex=function(_super){function KeyIndex(){return null!==_super&&_super.apply(this,arguments)||this}return tslib.__extends(KeyIndex,_super),Object.defineProperty(KeyIndex,\"__EMPTY_NODE\",{get:function(){return __EMPTY_NODE},set:function(val){__EMPTY_NODE=val},enumerable:!1,configurable:!0}),KeyIndex.prototype.compare=function(a,b){return nameCompare(a.name,b.name)},KeyIndex.prototype.isDefinedOn=function(node){throw util.assertionError(\"KeyIndex.isDefinedOn not expected to be called.\")},KeyIndex.prototype.indexedValueChanged=function(oldNode,newNode){return!1},KeyIndex.prototype.minPost=function(){return NamedNode.MIN},KeyIndex.prototype.maxPost=function(){return new NamedNode(MAX_NAME,__EMPTY_NODE)},KeyIndex.prototype.makePost=function(indexValue,name){return util.assert(\"string\"==typeof indexValue,\"KeyIndex indexValue must always be a string.\"),new NamedNode(indexValue,__EMPTY_NODE)},KeyIndex.prototype.toString=function(){return\".key\"},KeyIndex}(Index),KEY_INDEX=new KeyIndex,priorityHashText=function(priority){return\"number\"==typeof priority?\"number:\"+doubleToIEEE754String(priority):\"string:\"+priority},validatePriorityNode=function(priorityNode){if(priorityNode.isLeafNode()){var val=priorityNode.val();util.assert(\"string\"==typeof val||\"number\"==typeof val||\"object\"==typeof val&&util.contains(val,\".sv\"),\"Priority must be a string or number.\")}else util.assert(priorityNode===MAX_NODE||priorityNode.isEmpty(),\"priority of unexpected type.\");util.assert(priorityNode===MAX_NODE||priorityNode.getPriority().isEmpty(),\"Priority nodes can't have a priority of their own.\")},LeafNode=function(){function LeafNode(value_,priorityNode_){void 0===priorityNode_&&(priorityNode_=LeafNode.__childrenNodeConstructor.EMPTY_NODE),this.value_=value_,this.priorityNode_=priorityNode_,this.lazyHash_=null,util.assert(null!=this.value_,\"LeafNode shouldn't be created with null/undefined value.\"),validatePriorityNode(this.priorityNode_)}return Object.defineProperty(LeafNode,\"__childrenNodeConstructor\",{get:function(){return __childrenNodeConstructor},set:function(val){__childrenNodeConstructor=val},enumerable:!1,configurable:!0}),LeafNode.prototype.isLeafNode=function(){return!0},LeafNode.prototype.getPriority=function(){return this.priorityNode_},LeafNode.prototype.updatePriority=function(newPriorityNode){return new LeafNode(this.value_,newPriorityNode)},LeafNode.prototype.getImmediateChild=function(childName){return\".priority\"===childName?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE},LeafNode.prototype.getChild=function(path){return path.isEmpty()?this:\".priority\"===path.getFront()?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE},LeafNode.prototype.hasChild=function(){return!1},LeafNode.prototype.getPredecessorChildName=function(childName,childNode){return null},LeafNode.prototype.updateImmediateChild=function(childName,newChildNode){return\".priority\"===childName?this.updatePriority(newChildNode):newChildNode.isEmpty()&&\".priority\"!==childName?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(childName,newChildNode).updatePriority(this.priorityNode_)},LeafNode.prototype.updateChild=function(path,newChildNode){var front=path.getFront();return null===front?newChildNode:newChildNode.isEmpty()&&\".priority\"!==front?this:(util.assert(\".priority\"!==front||1===path.getLength(),\".priority must be the last token in a path\"),this.updateImmediateChild(front,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(path.popFront(),newChildNode)))},LeafNode.prototype.isEmpty=function(){return!1},LeafNode.prototype.numChildren=function(){return 0},LeafNode.prototype.forEachChild=function(index,action){return!1},LeafNode.prototype.val=function(exportFormat){return exportFormat&&!this.getPriority().isEmpty()?{\".value\":this.getValue(),\".priority\":this.getPriority().val()}:this.getValue()},LeafNode.prototype.hash=function(){if(null===this.lazyHash_){var toHash=\"\";this.priorityNode_.isEmpty()||(toHash+=\"priority:\"+priorityHashText(this.priorityNode_.val())+\":\");var type=typeof this.value_;toHash+=type+\":\",toHash+=\"number\"===type?doubleToIEEE754String(this.value_):this.value_,this.lazyHash_=sha1(toHash)}return this.lazyHash_},LeafNode.prototype.getValue=function(){return this.value_},LeafNode.prototype.compareTo=function(other){return other===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:other instanceof LeafNode.__childrenNodeConstructor?-1:(util.assert(other.isLeafNode(),\"Unknown node type\"),this.compareToLeafNode_(other))},LeafNode.prototype.compareToLeafNode_=function(otherLeaf){var otherLeafType=typeof otherLeaf.value_,thisLeafType=typeof this.value_,otherIndex=LeafNode.VALUE_TYPE_ORDER.indexOf(otherLeafType),thisIndex=LeafNode.VALUE_TYPE_ORDER.indexOf(thisLeafType);return util.assert(otherIndex>=0,\"Unknown leaf type: \"+otherLeafType),util.assert(thisIndex>=0,\"Unknown leaf type: \"+thisLeafType),otherIndex===thisIndex?\"object\"===thisLeafType?0:this.value_<otherLeaf.value_?-1:this.value_===otherLeaf.value_?0:1:thisIndex-otherIndex},LeafNode.prototype.withIndex=function(){return this},LeafNode.prototype.isIndexed=function(){return!0},LeafNode.prototype.equals=function(other){return other===this||!!other.isLeafNode()&&this.value_===other.value_&&this.priorityNode_.equals(other.priorityNode_)},LeafNode.VALUE_TYPE_ORDER=[\"object\",\"boolean\",\"number\",\"string\"],LeafNode}(),PRIORITY_INDEX=new(function(_super){function PriorityIndex(){return null!==_super&&_super.apply(this,arguments)||this}return tslib.__extends(PriorityIndex,_super),PriorityIndex.prototype.compare=function(a,b){var aPriority=a.node.getPriority(),bPriority=b.node.getPriority(),indexCmp=aPriority.compareTo(bPriority);return 0===indexCmp?nameCompare(a.name,b.name):indexCmp},PriorityIndex.prototype.isDefinedOn=function(node){return!node.getPriority().isEmpty()},PriorityIndex.prototype.indexedValueChanged=function(oldNode,newNode){return!oldNode.getPriority().equals(newNode.getPriority())},PriorityIndex.prototype.minPost=function(){return NamedNode.MIN},PriorityIndex.prototype.maxPost=function(){return new NamedNode(MAX_NAME,new LeafNode(\"[PRIORITY-POST]\",MAX_NODE$1))},PriorityIndex.prototype.makePost=function(indexValue,name){var priorityNode=nodeFromJSON(indexValue);return new NamedNode(name,new LeafNode(\"[PRIORITY-POST]\",priorityNode))},PriorityIndex.prototype.toString=function(){return\".priority\"},PriorityIndex}(Index)),SortedMapIterator=function(){function SortedMapIterator(node,startKey,comparator,isReverse_,resultGenerator_){void 0===resultGenerator_&&(resultGenerator_=null),this.isReverse_=isReverse_,this.resultGenerator_=resultGenerator_,this.nodeStack_=[];for(var cmp=1;!node.isEmpty();)if(node=node,cmp=startKey?comparator(node.key,startKey):1,isReverse_&&(cmp*=-1),cmp<0)node=this.isReverse_?node.left:node.right;else{if(0===cmp){this.nodeStack_.push(node);break}this.nodeStack_.push(node),node=this.isReverse_?node.right:node.left}}return SortedMapIterator.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var result,node=this.nodeStack_.pop();if(result=this.resultGenerator_?this.resultGenerator_(node.key,node.value):{key:node.key,value:node.value},this.isReverse_)for(node=node.left;!node.isEmpty();)this.nodeStack_.push(node),node=node.right;else for(node=node.right;!node.isEmpty();)this.nodeStack_.push(node),node=node.left;return result},SortedMapIterator.prototype.hasNext=function(){return this.nodeStack_.length>0},SortedMapIterator.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var node=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(node.key,node.value):{key:node.key,value:node.value}},SortedMapIterator}(),LLRBNode=function(){function LLRBNode(key,value,color,left,right){this.key=key,this.value=value,this.color=null!=color?color:LLRBNode.RED,this.left=null!=left?left:SortedMap.EMPTY_NODE,this.right=null!=right?right:SortedMap.EMPTY_NODE}return LLRBNode.prototype.copy=function(key,value,color,left,right){return new LLRBNode(null!=key?key:this.key,null!=value?value:this.value,null!=color?color:this.color,null!=left?left:this.left,null!=right?right:this.right)},LLRBNode.prototype.count=function(){return this.left.count()+1+this.right.count()},LLRBNode.prototype.isEmpty=function(){return!1},LLRBNode.prototype.inorderTraversal=function(action){return this.left.inorderTraversal(action)||!!action(this.key,this.value)||this.right.inorderTraversal(action)},LLRBNode.prototype.reverseTraversal=function(action){return this.right.reverseTraversal(action)||action(this.key,this.value)||this.left.reverseTraversal(action)},LLRBNode.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},LLRBNode.prototype.minKey=function(){return this.min_().key},LLRBNode.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},LLRBNode.prototype.insert=function(key,value,comparator){var n=this,cmp=comparator(key,n.key);return(n=cmp<0?n.copy(null,null,null,n.left.insert(key,value,comparator),null):0===cmp?n.copy(null,value,null,null,null):n.copy(null,null,null,null,n.right.insert(key,value,comparator))).fixUp_()},LLRBNode.prototype.removeMin_=function(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;var n=this;return n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),(n=n.copy(null,null,null,n.left.removeMin_(),null)).fixUp_()},LLRBNode.prototype.remove=function(key,comparator){var n,smallest;if(comparator(key,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(key,comparator),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===comparator(key,n.key)){if(n.right.isEmpty())return SortedMap.EMPTY_NODE;smallest=n.right.min_(),n=n.copy(smallest.key,smallest.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(key,comparator))}return n.fixUp_()},LLRBNode.prototype.isRed_=function(){return this.color},LLRBNode.prototype.fixUp_=function(){var n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n},LLRBNode.prototype.moveRedLeft_=function(){var n=this.colorFlip_();return n.right.left.isRed_()&&(n=(n=(n=n.copy(null,null,null,null,n.right.rotateRight_())).rotateLeft_()).colorFlip_()),n},LLRBNode.prototype.moveRedRight_=function(){var n=this.colorFlip_();return n.left.left.isRed_()&&(n=(n=n.rotateRight_()).colorFlip_()),n},LLRBNode.prototype.rotateLeft_=function(){var nl=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,nl,null)},LLRBNode.prototype.rotateRight_=function(){var nr=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,nr)},LLRBNode.prototype.colorFlip_=function(){var left=this.left.copy(null,null,!this.left.color,null,null),right=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,left,right)},LLRBNode.prototype.checkMaxDepth_=function(){var blackDepth=this.check_();return Math.pow(2,blackDepth)<=this.count()+1},LLRBNode.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error(\"Red node has red child(\"+this.key+\",\"+this.value+\")\");if(this.right.isRed_())throw new Error(\"Right child of (\"+this.key+\",\"+this.value+\") is red\");var blackDepth=this.left.check_();if(blackDepth!==this.right.check_())throw new Error(\"Black depths differ\");return blackDepth+(this.isRed_()?0:1)},LLRBNode.RED=!0,LLRBNode.BLACK=!1,LLRBNode}(),LLRBEmptyNode=function(){function LLRBEmptyNode(){}return LLRBEmptyNode.prototype.copy=function(key,value,color,left,right){return this},LLRBEmptyNode.prototype.insert=function(key,value,comparator){return new LLRBNode(key,value,null)},LLRBEmptyNode.prototype.remove=function(key,comparator){return this},LLRBEmptyNode.prototype.count=function(){return 0},LLRBEmptyNode.prototype.isEmpty=function(){return!0},LLRBEmptyNode.prototype.inorderTraversal=function(action){return!1},LLRBEmptyNode.prototype.reverseTraversal=function(action){return!1},LLRBEmptyNode.prototype.minKey=function(){return null},LLRBEmptyNode.prototype.maxKey=function(){return null},LLRBEmptyNode.prototype.check_=function(){return 0},LLRBEmptyNode.prototype.isRed_=function(){return!1},LLRBEmptyNode}(),SortedMap=function(){function SortedMap(comparator_,root_){void 0===root_&&(root_=SortedMap.EMPTY_NODE),this.comparator_=comparator_,this.root_=root_}return SortedMap.prototype.insert=function(key,value){return new SortedMap(this.comparator_,this.root_.insert(key,value,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))},SortedMap.prototype.remove=function(key){return new SortedMap(this.comparator_,this.root_.remove(key,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))},SortedMap.prototype.get=function(key){for(var cmp,node=this.root_;!node.isEmpty();){if(0===(cmp=this.comparator_(key,node.key)))return node.value;cmp<0?node=node.left:cmp>0&&(node=node.right)}return null},SortedMap.prototype.getPredecessorKey=function(key){for(var cmp,node=this.root_,rightParent=null;!node.isEmpty();){if(0===(cmp=this.comparator_(key,node.key))){if(node.left.isEmpty())return rightParent?rightParent.key:null;for(node=node.left;!node.right.isEmpty();)node=node.right;return node.key}cmp<0?node=node.left:cmp>0&&(rightParent=node,node=node.right)}throw new Error(\"Attempted to find predecessor key for a nonexistent key.  What gives?\")},SortedMap.prototype.isEmpty=function(){return this.root_.isEmpty()},SortedMap.prototype.count=function(){return this.root_.count()},SortedMap.prototype.minKey=function(){return this.root_.minKey()},SortedMap.prototype.maxKey=function(){return this.root_.maxKey()},SortedMap.prototype.inorderTraversal=function(action){return this.root_.inorderTraversal(action)},SortedMap.prototype.reverseTraversal=function(action){return this.root_.reverseTraversal(action)},SortedMap.prototype.getIterator=function(resultGenerator){return new SortedMapIterator(this.root_,null,this.comparator_,!1,resultGenerator)},SortedMap.prototype.getIteratorFrom=function(key,resultGenerator){return new SortedMapIterator(this.root_,key,this.comparator_,!1,resultGenerator)},SortedMap.prototype.getReverseIteratorFrom=function(key,resultGenerator){return new SortedMapIterator(this.root_,key,this.comparator_,!0,resultGenerator)},SortedMap.prototype.getReverseIterator=function(resultGenerator){return new SortedMapIterator(this.root_,null,this.comparator_,!0,resultGenerator)},SortedMap.EMPTY_NODE=new LLRBEmptyNode,SortedMap}(),LOG_2=Math.log(2),Base12Num=function(){function Base12Num(length){this.count=parseInt(Math.log(length+1)/LOG_2,10),this.current_=this.count-1;var mask=parseInt(Array(this.count+1).join(\"1\"),2);this.bits_=length+1&mask}return Base12Num.prototype.nextBitIsOne=function(){var result=!(this.bits_&1<<this.current_);return this.current_--,result},Base12Num}(),buildChildSet=function(childList,cmp,keyFn,mapSortFn){childList.sort(cmp);var buildBalancedTree=function(low,high){var namedNode,key,length=high-low;if(0===length)return null;if(1===length)return namedNode=childList[low],key=keyFn?keyFn(namedNode):namedNode,new LLRBNode(key,namedNode.node,LLRBNode.BLACK,null,null);var middle=parseInt(length/2,10)+low,left=buildBalancedTree(low,middle),right=buildBalancedTree(middle+1,high);return namedNode=childList[middle],key=keyFn?keyFn(namedNode):namedNode,new LLRBNode(key,namedNode.node,LLRBNode.BLACK,left,right)},root=function(base12){for(var node=null,root=null,index=childList.length,buildPennant=function(chunkSize,color){var low=index-chunkSize,high=index;index-=chunkSize;var childTree=buildBalancedTree(low+1,high),namedNode=childList[low],key=keyFn?keyFn(namedNode):namedNode;attachPennant(new LLRBNode(key,namedNode.node,color,null,childTree))},attachPennant=function(pennant){node?(node.left=pennant,node=pennant):(root=pennant,node=pennant)},i=0;i<base12.count;++i){var isOne=base12.nextBitIsOne(),chunkSize=Math.pow(2,base12.count-(i+1));isOne?buildPennant(chunkSize,LLRBNode.BLACK):(buildPennant(chunkSize,LLRBNode.BLACK),buildPennant(chunkSize,LLRBNode.RED))}return root}(new Base12Num(childList.length));return new SortedMap(mapSortFn||cmp,root)},fallbackObject={},IndexMap=function(){function IndexMap(indexes_,indexSet_){this.indexes_=indexes_,this.indexSet_=indexSet_}return Object.defineProperty(IndexMap,\"Default\",{get:function(){return util.assert(fallbackObject&&PRIORITY_INDEX,\"ChildrenNode.ts has not been loaded\"),_defaultIndexMap=_defaultIndexMap||new IndexMap({\".priority\":fallbackObject},{\".priority\":PRIORITY_INDEX})},enumerable:!1,configurable:!0}),IndexMap.prototype.get=function(indexKey){var sortedMap=util.safeGet(this.indexes_,indexKey);if(!sortedMap)throw new Error(\"No index defined for \"+indexKey);return sortedMap instanceof SortedMap?sortedMap:null},IndexMap.prototype.hasIndex=function(indexDefinition){return util.contains(this.indexSet_,indexDefinition.toString())},IndexMap.prototype.addIndex=function(indexDefinition,existingChildren){util.assert(indexDefinition!==KEY_INDEX,\"KeyIndex always exists and isn't meant to be added to the IndexMap.\");for(var newIndex,childList=[],sawIndexedValue=!1,iter=existingChildren.getIterator(NamedNode.Wrap),next=iter.getNext();next;)sawIndexedValue=sawIndexedValue||indexDefinition.isDefinedOn(next.node),childList.push(next),next=iter.getNext();newIndex=sawIndexedValue?buildChildSet(childList,indexDefinition.getCompare()):fallbackObject;var indexName=indexDefinition.toString(),newIndexSet=tslib.__assign({},this.indexSet_);newIndexSet[indexName]=indexDefinition;var newIndexes=tslib.__assign({},this.indexes_);return newIndexes[indexName]=newIndex,new IndexMap(newIndexes,newIndexSet)},IndexMap.prototype.addToIndexes=function(namedNode,existingChildren){var _this=this;return new IndexMap(util.map(this.indexes_,(function(indexedChildren,indexName){var index=util.safeGet(_this.indexSet_,indexName);if(util.assert(index,\"Missing index implementation for \"+indexName),indexedChildren===fallbackObject){if(index.isDefinedOn(namedNode.node)){for(var childList=[],iter=existingChildren.getIterator(NamedNode.Wrap),next=iter.getNext();next;)next.name!==namedNode.name&&childList.push(next),next=iter.getNext();return childList.push(namedNode),buildChildSet(childList,index.getCompare())}return fallbackObject}var existingSnap=existingChildren.get(namedNode.name),newChildren=indexedChildren;return existingSnap&&(newChildren=newChildren.remove(new NamedNode(namedNode.name,existingSnap))),newChildren.insert(namedNode,namedNode.node)})),this.indexSet_)},IndexMap.prototype.removeFromIndexes=function(namedNode,existingChildren){return new IndexMap(util.map(this.indexes_,(function(indexedChildren){if(indexedChildren===fallbackObject)return indexedChildren;var existingSnap=existingChildren.get(namedNode.name);return existingSnap?indexedChildren.remove(new NamedNode(namedNode.name,existingSnap)):indexedChildren})),this.indexSet_)},IndexMap}();function NAME_ONLY_COMPARATOR(left,right){return nameCompare(left.name,right.name)}function NAME_COMPARATOR(left,right){return nameCompare(left,right)}var ChildrenNode=function(){function ChildrenNode(children_,priorityNode_,indexMap_){this.children_=children_,this.priorityNode_=priorityNode_,this.indexMap_=indexMap_,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&util.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),\"An empty node cannot have a priority\")}return Object.defineProperty(ChildrenNode,\"EMPTY_NODE\",{get:function(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))},enumerable:!1,configurable:!0}),ChildrenNode.prototype.isLeafNode=function(){return!1},ChildrenNode.prototype.getPriority=function(){return this.priorityNode_||EMPTY_NODE},ChildrenNode.prototype.updatePriority=function(newPriorityNode){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,newPriorityNode,this.indexMap_)},ChildrenNode.prototype.getImmediateChild=function(childName){if(\".priority\"===childName)return this.getPriority();var child=this.children_.get(childName);return null===child?EMPTY_NODE:child},ChildrenNode.prototype.getChild=function(path){var front=path.getFront();return null===front?this:this.getImmediateChild(front).getChild(path.popFront())},ChildrenNode.prototype.hasChild=function(childName){return null!==this.children_.get(childName)},ChildrenNode.prototype.updateImmediateChild=function(childName,newChildNode){if(util.assert(newChildNode,\"We should always be passing snapshot nodes\"),\".priority\"===childName)return this.updatePriority(newChildNode);var namedNode=new NamedNode(childName,newChildNode),newChildren=void 0,newIndexMap=void 0;newChildNode.isEmpty()?(newChildren=this.children_.remove(childName),newIndexMap=this.indexMap_.removeFromIndexes(namedNode,this.children_)):(newChildren=this.children_.insert(childName,newChildNode),newIndexMap=this.indexMap_.addToIndexes(namedNode,this.children_));var newPriority=newChildren.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(newChildren,newPriority,newIndexMap)},ChildrenNode.prototype.updateChild=function(path,newChildNode){var front=path.getFront();if(null===front)return newChildNode;util.assert(\".priority\"!==path.getFront()||1===path.getLength(),\".priority must be the last token in a path\");var newImmediateChild=this.getImmediateChild(front).updateChild(path.popFront(),newChildNode);return this.updateImmediateChild(front,newImmediateChild)},ChildrenNode.prototype.isEmpty=function(){return this.children_.isEmpty()},ChildrenNode.prototype.numChildren=function(){return this.children_.count()},ChildrenNode.prototype.val=function(exportFormat){if(this.isEmpty())return null;var obj={},numKeys=0,maxKey=0,allIntegerKeys=!0;if(this.forEachChild(PRIORITY_INDEX,(function(key,childNode){obj[key]=childNode.val(exportFormat),numKeys++,allIntegerKeys&&ChildrenNode.INTEGER_REGEXP_.test(key)?maxKey=Math.max(maxKey,Number(key)):allIntegerKeys=!1})),!exportFormat&&allIntegerKeys&&maxKey<2*numKeys){var array=[];for(var key in obj)array[key]=obj[key];return array}return exportFormat&&!this.getPriority().isEmpty()&&(obj[\".priority\"]=this.getPriority().val()),obj},ChildrenNode.prototype.hash=function(){if(null===this.lazyHash_){var toHash_1=\"\";this.getPriority().isEmpty()||(toHash_1+=\"priority:\"+priorityHashText(this.getPriority().val())+\":\"),this.forEachChild(PRIORITY_INDEX,(function(key,childNode){var childHash=childNode.hash();\"\"!==childHash&&(toHash_1+=\":\"+key+\":\"+childHash)})),this.lazyHash_=\"\"===toHash_1?\"\":sha1(toHash_1)}return this.lazyHash_},ChildrenNode.prototype.getPredecessorChildName=function(childName,childNode,index){var idx=this.resolveIndex_(index);if(idx){var predecessor=idx.getPredecessorKey(new NamedNode(childName,childNode));return predecessor?predecessor.name:null}return this.children_.getPredecessorKey(childName)},ChildrenNode.prototype.getFirstChildName=function(indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx){var minKey=idx.minKey();return minKey&&minKey.name}return this.children_.minKey()},ChildrenNode.prototype.getFirstChild=function(indexDefinition){var minKey=this.getFirstChildName(indexDefinition);return minKey?new NamedNode(minKey,this.children_.get(minKey)):null},ChildrenNode.prototype.getLastChildName=function(indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx){var maxKey=idx.maxKey();return maxKey&&maxKey.name}return this.children_.maxKey()},ChildrenNode.prototype.getLastChild=function(indexDefinition){var maxKey=this.getLastChildName(indexDefinition);return maxKey?new NamedNode(maxKey,this.children_.get(maxKey)):null},ChildrenNode.prototype.forEachChild=function(index,action){var idx=this.resolveIndex_(index);return idx?idx.inorderTraversal((function(wrappedNode){return action(wrappedNode.name,wrappedNode.node)})):this.children_.inorderTraversal(action)},ChildrenNode.prototype.getIterator=function(indexDefinition){return this.getIteratorFrom(indexDefinition.minPost(),indexDefinition)},ChildrenNode.prototype.getIteratorFrom=function(startPost,indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx)return idx.getIteratorFrom(startPost,(function(key){return key}));for(var iterator=this.children_.getIteratorFrom(startPost.name,NamedNode.Wrap),next=iterator.peek();null!=next&&indexDefinition.compare(next,startPost)<0;)iterator.getNext(),next=iterator.peek();return iterator},ChildrenNode.prototype.getReverseIterator=function(indexDefinition){return this.getReverseIteratorFrom(indexDefinition.maxPost(),indexDefinition)},ChildrenNode.prototype.getReverseIteratorFrom=function(endPost,indexDefinition){var idx=this.resolveIndex_(indexDefinition);if(idx)return idx.getReverseIteratorFrom(endPost,(function(key){return key}));for(var iterator=this.children_.getReverseIteratorFrom(endPost.name,NamedNode.Wrap),next=iterator.peek();null!=next&&indexDefinition.compare(next,endPost)>0;)iterator.getNext(),next=iterator.peek();return iterator},ChildrenNode.prototype.compareTo=function(other){return this.isEmpty()?other.isEmpty()?0:-1:other.isLeafNode()||other.isEmpty()?1:other===MAX_NODE$2?-1:0},ChildrenNode.prototype.withIndex=function(indexDefinition){if(indexDefinition===KEY_INDEX||this.indexMap_.hasIndex(indexDefinition))return this;var newIndexMap=this.indexMap_.addIndex(indexDefinition,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,newIndexMap)},ChildrenNode.prototype.isIndexed=function(index){return index===KEY_INDEX||this.indexMap_.hasIndex(index)},ChildrenNode.prototype.equals=function(other){if(other===this)return!0;if(other.isLeafNode())return!1;var otherChildrenNode=other;if(this.getPriority().equals(otherChildrenNode.getPriority())){if(this.children_.count()===otherChildrenNode.children_.count()){for(var thisIter=this.getIterator(PRIORITY_INDEX),otherIter=otherChildrenNode.getIterator(PRIORITY_INDEX),thisCurrent=thisIter.getNext(),otherCurrent=otherIter.getNext();thisCurrent&&otherCurrent;){if(thisCurrent.name!==otherCurrent.name||!thisCurrent.node.equals(otherCurrent.node))return!1;thisCurrent=thisIter.getNext(),otherCurrent=otherIter.getNext()}return null===thisCurrent&&null===otherCurrent}return!1}return!1},ChildrenNode.prototype.resolveIndex_=function(indexDefinition){return indexDefinition===KEY_INDEX?null:this.indexMap_.get(indexDefinition.toString())},ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\\d*)$/,ChildrenNode}(),MAX_NODE$2=new(function(_super){function MaxNode(){return _super.call(this,new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)||this}return tslib.__extends(MaxNode,_super),MaxNode.prototype.compareTo=function(other){return other===this?0:1},MaxNode.prototype.equals=function(other){return other===this},MaxNode.prototype.getPriority=function(){return this},MaxNode.prototype.getImmediateChild=function(childName){return ChildrenNode.EMPTY_NODE},MaxNode.prototype.isEmpty=function(){return!1},MaxNode}(ChildrenNode));function nodeFromJSON$1(json,priority){if(void 0===priority&&(priority=null),null===json)return ChildrenNode.EMPTY_NODE;if(\"object\"==typeof json&&\".priority\"in json&&(priority=json[\".priority\"]),util.assert(null===priority||\"string\"==typeof priority||\"number\"==typeof priority||\"object\"==typeof priority&&\".sv\"in priority,\"Invalid priority type found: \"+typeof priority),\"object\"==typeof json&&\".value\"in json&&null!==json[\".value\"]&&(json=json[\".value\"]),\"object\"!=typeof json||\".sv\"in json)return new LeafNode(json,nodeFromJSON$1(priority));if(json instanceof Array){var node_1=ChildrenNode.EMPTY_NODE;return each(json,(function(key,childData){if(util.contains(json,key)&&\".\"!==key.substring(0,1)){var childNode=nodeFromJSON$1(childData);!childNode.isLeafNode()&&childNode.isEmpty()||(node_1=node_1.updateImmediateChild(key,childNode))}})),node_1.updatePriority(nodeFromJSON$1(priority))}var children_1=[],childrenHavePriority_1=!1;if(each(json,(function(key,child){if(\".\"!==key.substring(0,1)){var childNode=nodeFromJSON$1(child);childNode.isEmpty()||(childrenHavePriority_1=childrenHavePriority_1||!childNode.getPriority().isEmpty(),children_1.push(new NamedNode(key,childNode)))}})),0===children_1.length)return ChildrenNode.EMPTY_NODE;var childSet=buildChildSet(children_1,NAME_ONLY_COMPARATOR,(function(namedNode){return namedNode.name}),NAME_COMPARATOR);if(childrenHavePriority_1){var sortedChildSet=buildChildSet(children_1,PRIORITY_INDEX.getCompare());return new ChildrenNode(childSet,nodeFromJSON$1(priority),new IndexMap({\".priority\":sortedChildSet},{\".priority\":PRIORITY_INDEX}))}return new ChildrenNode(childSet,nodeFromJSON$1(priority),IndexMap.Default)}Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE$2)}}),KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE,LeafNode.__childrenNodeConstructor=ChildrenNode,MAX_NODE=MAX_NODE$2,function(val){MAX_NODE$1=val}(MAX_NODE$2),function(val){nodeFromJSON=val}(nodeFromJSON$1);var __referenceConstructor,VALUE_INDEX=new(function(_super){function ValueIndex(){return null!==_super&&_super.apply(this,arguments)||this}return tslib.__extends(ValueIndex,_super),ValueIndex.prototype.compare=function(a,b){var indexCmp=a.node.compareTo(b.node);return 0===indexCmp?nameCompare(a.name,b.name):indexCmp},ValueIndex.prototype.isDefinedOn=function(node){return!0},ValueIndex.prototype.indexedValueChanged=function(oldNode,newNode){return!oldNode.equals(newNode)},ValueIndex.prototype.minPost=function(){return NamedNode.MIN},ValueIndex.prototype.maxPost=function(){return NamedNode.MAX},ValueIndex.prototype.makePost=function(indexValue,name){var valueNode=nodeFromJSON$1(indexValue);return new NamedNode(name,valueNode)},ValueIndex.prototype.toString=function(){return\".value\"},ValueIndex}(Index)),PathIndex=function(_super){function PathIndex(indexPath_){var _this=_super.call(this)||this;return _this.indexPath_=indexPath_,util.assert(!indexPath_.isEmpty()&&\".priority\"!==indexPath_.getFront(),\"Can't create PathIndex with empty path or .priority key\"),_this}return tslib.__extends(PathIndex,_super),PathIndex.prototype.extractChild=function(snap){return snap.getChild(this.indexPath_)},PathIndex.prototype.isDefinedOn=function(node){return!node.getChild(this.indexPath_).isEmpty()},PathIndex.prototype.compare=function(a,b){var aChild=this.extractChild(a.node),bChild=this.extractChild(b.node),indexCmp=aChild.compareTo(bChild);return 0===indexCmp?nameCompare(a.name,b.name):indexCmp},PathIndex.prototype.makePost=function(indexValue,name){var valueNode=nodeFromJSON$1(indexValue),node=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,valueNode);return new NamedNode(name,node)},PathIndex.prototype.maxPost=function(){var node=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE$2);return new NamedNode(MAX_NAME,node)},PathIndex.prototype.toString=function(){return this.indexPath_.slice().join(\"/\")},PathIndex}(Index),DataSnapshot=function(){function DataSnapshot(node_,ref_,index_){this.node_=node_,this.ref_=ref_,this.index_=index_}return DataSnapshot.prototype.val=function(){return util.validateArgCount(\"DataSnapshot.val\",0,0,arguments.length),this.node_.val()},DataSnapshot.prototype.exportVal=function(){return util.validateArgCount(\"DataSnapshot.exportVal\",0,0,arguments.length),this.node_.val(!0)},DataSnapshot.prototype.toJSON=function(){return util.validateArgCount(\"DataSnapshot.toJSON\",0,1,arguments.length),this.exportVal()},DataSnapshot.prototype.exists=function(){return util.validateArgCount(\"DataSnapshot.exists\",0,0,arguments.length),!this.node_.isEmpty()},DataSnapshot.prototype.child=function(childPathString){util.validateArgCount(\"DataSnapshot.child\",0,1,arguments.length),childPathString=String(childPathString),validatePathString(\"DataSnapshot.child\",1,childPathString,!1);var childPath=new Path(childPathString),childRef=this.ref_.child(childPath);return new DataSnapshot(this.node_.getChild(childPath),childRef,PRIORITY_INDEX)},DataSnapshot.prototype.hasChild=function(childPathString){util.validateArgCount(\"DataSnapshot.hasChild\",1,1,arguments.length),validatePathString(\"DataSnapshot.hasChild\",1,childPathString,!1);var childPath=new Path(childPathString);return!this.node_.getChild(childPath).isEmpty()},DataSnapshot.prototype.getPriority=function(){return util.validateArgCount(\"DataSnapshot.getPriority\",0,0,arguments.length),this.node_.getPriority().val()},DataSnapshot.prototype.forEach=function(action){var _this=this;if(util.validateArgCount(\"DataSnapshot.forEach\",1,1,arguments.length),util.validateCallback(\"DataSnapshot.forEach\",1,action,!1),this.node_.isLeafNode())return!1;var childrenNode=this.node_;return!!childrenNode.forEachChild(this.index_,(function(key,node){return action(new DataSnapshot(node,_this.ref_.child(key),PRIORITY_INDEX))}))},DataSnapshot.prototype.hasChildren=function(){return util.validateArgCount(\"DataSnapshot.hasChildren\",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(DataSnapshot.prototype,\"key\",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),DataSnapshot.prototype.numChildren=function(){return util.validateArgCount(\"DataSnapshot.numChildren\",0,0,arguments.length),this.node_.numChildren()},DataSnapshot.prototype.getRef=function(){return util.validateArgCount(\"DataSnapshot.ref\",0,0,arguments.length),this.ref_},Object.defineProperty(DataSnapshot.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),DataSnapshot}(),DataEvent=function(){function DataEvent(eventType,eventRegistration,snapshot,prevName){this.eventType=eventType,this.eventRegistration=eventRegistration,this.snapshot=snapshot,this.prevName=prevName}return DataEvent.prototype.getPath=function(){var ref=this.snapshot.getRef();return\"value\"===this.eventType?ref.path:ref.getParent().path},DataEvent.prototype.getEventType=function(){return this.eventType},DataEvent.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},DataEvent.prototype.toString=function(){return this.getPath().toString()+\":\"+this.eventType+\":\"+util.stringify(this.snapshot.exportVal())},DataEvent}(),CancelEvent=function(){function CancelEvent(eventRegistration,error,path){this.eventRegistration=eventRegistration,this.error=error,this.path=path}return CancelEvent.prototype.getPath=function(){return this.path},CancelEvent.prototype.getEventType=function(){return\"cancel\"},CancelEvent.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},CancelEvent.prototype.toString=function(){return this.path.toString()+\":cancel\"},CancelEvent}(),ValueEventRegistration=function(){function ValueEventRegistration(callback_,cancelCallback_,context_){this.callback_=callback_,this.cancelCallback_=cancelCallback_,this.context_=context_}return ValueEventRegistration.prototype.respondsTo=function(eventType){return\"value\"===eventType},ValueEventRegistration.prototype.createEvent=function(change,query){var index=query.getQueryParams().getIndex();return new DataEvent(\"value\",this,new DataSnapshot(change.snapshotNode,query.getRef(),index))},ValueEventRegistration.prototype.getEventRunner=function(eventData){var ctx=this.context_;if(\"cancel\"===eventData.getEventType()){util.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var cancelCB_1=this.cancelCallback_;return function(){cancelCB_1.call(ctx,eventData.error)}}var cb_1=this.callback_;return function(){cb_1.call(ctx,eventData.snapshot)}},ValueEventRegistration.prototype.createCancelEvent=function(error,path){return this.cancelCallback_?new CancelEvent(this,error,path):null},ValueEventRegistration.prototype.matches=function(other){return other instanceof ValueEventRegistration&&(!other.callback_||!this.callback_||other.callback_===this.callback_&&other.context_===this.context_)},ValueEventRegistration.prototype.hasAnyCallback=function(){return null!==this.callback_},ValueEventRegistration}(),ChildEventRegistration=function(){function ChildEventRegistration(callbacks_,cancelCallback_,context_){this.callbacks_=callbacks_,this.cancelCallback_=cancelCallback_,this.context_=context_}return ChildEventRegistration.prototype.respondsTo=function(eventType){var eventToCheck=\"children_added\"===eventType?\"child_added\":eventType;return util.contains(this.callbacks_,eventToCheck=\"children_removed\"===eventToCheck?\"child_removed\":eventToCheck)},ChildEventRegistration.prototype.createCancelEvent=function(error,path){return this.cancelCallback_?new CancelEvent(this,error,path):null},ChildEventRegistration.prototype.createEvent=function(change,query){util.assert(null!=change.childName,\"Child events should have a childName.\");var ref=query.getRef().child(change.childName),index=query.getQueryParams().getIndex();return new DataEvent(change.type,this,new DataSnapshot(change.snapshotNode,ref,index),change.prevName)},ChildEventRegistration.prototype.getEventRunner=function(eventData){var ctx=this.context_;if(\"cancel\"===eventData.getEventType()){util.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var cancelCB_2=this.cancelCallback_;return function(){cancelCB_2.call(ctx,eventData.error)}}var cb_2=this.callbacks_[eventData.eventType];return function(){cb_2.call(ctx,eventData.snapshot,eventData.prevName)}},ChildEventRegistration.prototype.matches=function(other){var _this=this;if(other instanceof ChildEventRegistration){if(!this.callbacks_||!other.callbacks_)return!0;if(this.context_===other.context_){var otherKeys=Object.keys(other.callbacks_),thisKeys=Object.keys(this.callbacks_),otherCount=otherKeys.length;if(otherCount===thisKeys.length){if(1===otherCount){var otherKey=otherKeys[0],thisKey=thisKeys[0];return!(thisKey!==otherKey||other.callbacks_[otherKey]&&this.callbacks_[thisKey]&&other.callbacks_[otherKey]!==this.callbacks_[thisKey])}return thisKeys.every((function(eventType){return other.callbacks_[eventType]===_this.callbacks_[eventType]}))}}}return!1},ChildEventRegistration.prototype.hasAnyCallback=function(){return null!==this.callbacks_},ChildEventRegistration}(),Query=function(){function Query(repo,path,queryParams_,orderByCalled_){this.repo=repo,this.path=path,this.queryParams_=queryParams_,this.orderByCalled_=orderByCalled_}return Object.defineProperty(Query,\"__referenceConstructor\",{get:function(){return util.assert(__referenceConstructor,\"Reference.ts has not been loaded\"),__referenceConstructor},set:function(val){__referenceConstructor=val},enumerable:!1,configurable:!0}),Query.validateQueryEndpoints_=function(params){var startNode=null,endNode=null;if(params.hasStart()&&(startNode=params.getIndexStartValue()),params.hasEnd()&&(endNode=params.getIndexEndValue()),params.getIndex()===KEY_INDEX){var tooManyArgsError=\"Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().\",wrongArgTypeError=\"Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.\";if(params.hasStart()){if(params.getIndexStartName()!==MIN_NAME)throw new Error(tooManyArgsError);if(\"string\"!=typeof startNode)throw new Error(wrongArgTypeError)}if(params.hasEnd()){if(params.getIndexEndName()!==MAX_NAME)throw new Error(tooManyArgsError);if(\"string\"!=typeof endNode)throw new Error(wrongArgTypeError)}}else if(params.getIndex()===PRIORITY_INDEX){if(null!=startNode&&!isValidPriority(startNode)||null!=endNode&&!isValidPriority(endNode))throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\")}else if(util.assert(params.getIndex()instanceof PathIndex||params.getIndex()===VALUE_INDEX,\"unknown index type.\"),null!=startNode&&\"object\"==typeof startNode||null!=endNode&&\"object\"==typeof endNode)throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.\")},Query.validateLimit_=function(params){if(params.hasStart()&&params.hasEnd()&&params.hasLimit()&&!params.hasAnchoredLimit())throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\")},Query.prototype.validateNoPreviousOrderByCall_=function(fnName){if(!0===this.orderByCalled_)throw new Error(fnName+\": You can't combine multiple orderBy calls.\")},Query.prototype.getQueryParams=function(){return this.queryParams_},Query.prototype.getRef=function(){return util.validateArgCount(\"Query.ref\",0,0,arguments.length),new Query.__referenceConstructor(this.repo,this.path)},Query.prototype.on=function(eventType,callback,cancelCallbackOrContext,context){util.validateArgCount(\"Query.on\",2,4,arguments.length),validateEventType(\"Query.on\",1,eventType,!1),util.validateCallback(\"Query.on\",2,callback,!1);var ret=Query.getCancelAndContextArgs_(\"Query.on\",cancelCallbackOrContext,context);if(\"value\"===eventType)this.onValueEvent(callback,ret.cancel,ret.context);else{var callbacks={};callbacks[eventType]=callback,this.onChildEvent(callbacks,ret.cancel,ret.context)}return callback},Query.prototype.onValueEvent=function(callback,cancelCallback,context){var container=new ValueEventRegistration(callback,cancelCallback||null,context||null);this.repo.addEventCallbackForQuery(this,container)},Query.prototype.onChildEvent=function(callbacks,cancelCallback,context){var container=new ChildEventRegistration(callbacks,cancelCallback,context);this.repo.addEventCallbackForQuery(this,container)},Query.prototype.off=function(eventType,callback,context){util.validateArgCount(\"Query.off\",0,3,arguments.length),validateEventType(\"Query.off\",1,eventType,!0),util.validateCallback(\"Query.off\",2,callback,!0),util.validateContextObject(\"Query.off\",3,context,!0);var container=null,callbacks=null;if(\"value\"===eventType){var valueCallback=callback||null;container=new ValueEventRegistration(valueCallback,null,context||null)}else eventType&&(callback&&((callbacks={})[eventType]=callback),container=new ChildEventRegistration(callbacks,null,context||null));this.repo.removeEventCallbackForQuery(this,container)},Query.prototype.once=function(eventType,userCallback,failureCallbackOrContext,context){var _this=this;util.validateArgCount(\"Query.once\",1,4,arguments.length),validateEventType(\"Query.once\",1,eventType,!1),util.validateCallback(\"Query.once\",2,userCallback,!0);var ret=Query.getCancelAndContextArgs_(\"Query.once\",failureCallbackOrContext,context),firstCall=!0,deferred=new util.Deferred;deferred.promise.catch((function(){}));var onceCallback=function(snapshot){firstCall&&(firstCall=!1,_this.off(eventType,onceCallback),userCallback&&userCallback.bind(ret.context)(snapshot),deferred.resolve(snapshot))};return this.on(eventType,onceCallback,(function(err){_this.off(eventType,onceCallback),ret.cancel&&ret.cancel.bind(ret.context)(err),deferred.reject(err)})),deferred.promise},Query.prototype.limitToFirst=function(limit){if(util.validateArgCount(\"Query.limitToFirst\",1,1,arguments.length),\"number\"!=typeof limit||Math.floor(limit)!==limit||limit<=0)throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new Query(this.repo,this.path,this.queryParams_.limitToFirst(limit),this.orderByCalled_)},Query.prototype.limitToLast=function(limit){if(util.validateArgCount(\"Query.limitToLast\",1,1,arguments.length),\"number\"!=typeof limit||Math.floor(limit)!==limit||limit<=0)throw new Error(\"Query.limitToLast: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new Query(this.repo,this.path,this.queryParams_.limitToLast(limit),this.orderByCalled_)},Query.prototype.orderByChild=function(path){if(util.validateArgCount(\"Query.orderByChild\",1,1,arguments.length),\"$key\"===path)throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');if(\"$priority\"===path)throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');if(\"$value\"===path)throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');validatePathString(\"Query.orderByChild\",1,path,!1),this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");var parsedPath=new Path(path);if(parsedPath.isEmpty())throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\");var index=new PathIndex(parsedPath),newParams=this.queryParams_.orderBy(index);return Query.validateQueryEndpoints_(newParams),new Query(this.repo,this.path,newParams,!0)},Query.prototype.orderByKey=function(){util.validateArgCount(\"Query.orderByKey\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");var newParams=this.queryParams_.orderBy(KEY_INDEX);return Query.validateQueryEndpoints_(newParams),new Query(this.repo,this.path,newParams,!0)},Query.prototype.orderByPriority=function(){util.validateArgCount(\"Query.orderByPriority\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");var newParams=this.queryParams_.orderBy(PRIORITY_INDEX);return Query.validateQueryEndpoints_(newParams),new Query(this.repo,this.path,newParams,!0)},Query.prototype.orderByValue=function(){util.validateArgCount(\"Query.orderByValue\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");var newParams=this.queryParams_.orderBy(VALUE_INDEX);return Query.validateQueryEndpoints_(newParams),new Query(this.repo,this.path,newParams,!0)},Query.prototype.startAt=function(value,name){void 0===value&&(value=null),util.validateArgCount(\"Query.startAt\",0,2,arguments.length),validateFirebaseDataArg(\"Query.startAt\",1,value,this.path,!0),validateKey(\"Query.startAt\",2,name,!0);var newParams=this.queryParams_.startAt(value,name);if(Query.validateLimit_(newParams),Query.validateQueryEndpoints_(newParams),this.queryParams_.hasStart())throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt or equalTo).\");return void 0===value&&(value=null,name=null),new Query(this.repo,this.path,newParams,this.orderByCalled_)},Query.prototype.endAt=function(value,name){void 0===value&&(value=null),util.validateArgCount(\"Query.endAt\",0,2,arguments.length),validateFirebaseDataArg(\"Query.endAt\",1,value,this.path,!0),validateKey(\"Query.endAt\",2,name,!0);var newParams=this.queryParams_.endAt(value,name);if(Query.validateLimit_(newParams),Query.validateQueryEndpoints_(newParams),this.queryParams_.hasEnd())throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or equalTo).\");return new Query(this.repo,this.path,newParams,this.orderByCalled_)},Query.prototype.equalTo=function(value,name){if(util.validateArgCount(\"Query.equalTo\",1,2,arguments.length),validateFirebaseDataArg(\"Query.equalTo\",1,value,this.path,!1),validateKey(\"Query.equalTo\",2,name,!0),this.queryParams_.hasStart())throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or equalTo).\");if(this.queryParams_.hasEnd())throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or equalTo).\");return this.startAt(value,name).endAt(value,name)},Query.prototype.toString=function(){return util.validateArgCount(\"Query.toString\",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Query.prototype.toJSON=function(){return util.validateArgCount(\"Query.toJSON\",0,1,arguments.length),this.toString()},Query.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Query.prototype.queryIdentifier=function(){var obj=this.queryObject(),id=ObjectToUniqueKey(obj);return\"{}\"===id?\"default\":id},Query.prototype.isEqual=function(other){if(util.validateArgCount(\"Query.isEqual\",1,1,arguments.length),!(other instanceof Query)){var error=\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\";throw new Error(error)}var sameRepo=this.repo===other.repo,samePath=this.path.equals(other.path),sameQueryIdentifier=this.queryIdentifier()===other.queryIdentifier();return sameRepo&&samePath&&sameQueryIdentifier},Query.getCancelAndContextArgs_=function(fnName,cancelOrContext,context){var ret={cancel:null,context:null};if(cancelOrContext&&context)ret.cancel=cancelOrContext,util.validateCallback(fnName,3,ret.cancel,!0),ret.context=context,util.validateContextObject(fnName,4,ret.context,!0);else if(cancelOrContext)if(\"object\"==typeof cancelOrContext&&null!==cancelOrContext)ret.context=cancelOrContext;else{if(\"function\"!=typeof cancelOrContext)throw new Error(util.errorPrefix(fnName,3,!0)+\" must either be a cancel callback or a context object.\");ret.cancel=cancelOrContext}return ret},Object.defineProperty(Query.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Query}(),ExistingValueProvider=function(){function ExistingValueProvider(node_){this.node_=node_}return ExistingValueProvider.prototype.getImmediateChild=function(childName){return new ExistingValueProvider(this.node_.getImmediateChild(childName))},ExistingValueProvider.prototype.node=function(){return this.node_},ExistingValueProvider}(),DeferredValueProvider=function(){function DeferredValueProvider(syncTree,path){this.syncTree_=syncTree,this.path_=path}return DeferredValueProvider.prototype.getImmediateChild=function(childName){var childPath=this.path_.child(childName);return new DeferredValueProvider(this.syncTree_,childPath)},DeferredValueProvider.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},DeferredValueProvider}(),resolveDeferredLeafValue=function(value,existingVal,serverValues){return value&&\"object\"==typeof value?(util.assert(\".sv\"in value,\"Unexpected leaf node or priority contents\"),\"string\"==typeof value[\".sv\"]?resolveScalarDeferredValue(value[\".sv\"],existingVal,serverValues):\"object\"==typeof value[\".sv\"]?resolveComplexDeferredValue(value[\".sv\"],existingVal):void util.assert(!1,\"Unexpected server value: \"+JSON.stringify(value,null,2))):value},resolveScalarDeferredValue=function(op,existing,serverValues){switch(op){case\"timestamp\":return serverValues.timestamp;default:util.assert(!1,\"Unexpected server value: \"+op)}},resolveComplexDeferredValue=function(op,existing,unused){op.hasOwnProperty(\"increment\")||util.assert(!1,\"Unexpected server value: \"+JSON.stringify(op,null,2));var delta=op.increment;\"number\"!=typeof delta&&util.assert(!1,\"Unexpected increment value: \"+delta);var existingNode=existing.node();if(util.assert(null!=existingNode,\"Expected ChildrenNode.EMPTY_NODE for nulls\"),!existingNode.isLeafNode())return delta;var existingVal=existingNode.getValue();return\"number\"!=typeof existingVal?delta:existingVal+delta},resolveDeferredValueTree=function(path,node,syncTree,serverValues){return resolveDeferredValue(node,new DeferredValueProvider(syncTree,path),serverValues)},resolveDeferredValueSnapshot=function(node,existing,serverValues){return resolveDeferredValue(node,new ExistingValueProvider(existing),serverValues)};function resolveDeferredValue(node,existingVal,serverValues){var newNode,rawPri=node.getPriority().val(),priority=resolveDeferredLeafValue(rawPri,existingVal.getImmediateChild(\".priority\"),serverValues);if(node.isLeafNode()){var leafNode=node,value=resolveDeferredLeafValue(leafNode.getValue(),existingVal,serverValues);return value!==leafNode.getValue()||priority!==leafNode.getPriority().val()?new LeafNode(value,nodeFromJSON$1(priority)):node}var childrenNode=node;return newNode=childrenNode,priority!==childrenNode.getPriority().val()&&(newNode=newNode.updatePriority(new LeafNode(priority))),childrenNode.forEachChild(PRIORITY_INDEX,(function(childName,childNode){var newChildNode=resolveDeferredValue(childNode,existingVal.getImmediateChild(childName),serverValues);newChildNode!==childNode&&(newNode=newNode.updateImmediateChild(childName,newChildNode))})),newNode}var emptyChildrenSingleton,__referenceConstructor$1,SparseSnapshotTree=function(){function SparseSnapshotTree(){this.value=null,this.children=new Map}return SparseSnapshotTree.prototype.find=function(path){if(null!=this.value)return this.value.getChild(path);if(!path.isEmpty()&&this.children.size>0){var childKey=path.getFront();return path=path.popFront(),this.children.has(childKey)?this.children.get(childKey).find(path):null}return null},SparseSnapshotTree.prototype.remember=function(path,data){if(path.isEmpty())this.value=data,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(path,data);else{var childKey=path.getFront();this.children.has(childKey)||this.children.set(childKey,new SparseSnapshotTree);var child=this.children.get(childKey);path=path.popFront(),child.remember(path,data)}},SparseSnapshotTree.prototype.forget=function(path){if(path.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var value=this.value;this.value=null;var self_1=this;return value.forEachChild(PRIORITY_INDEX,(function(key,tree){self_1.remember(new Path(key),tree)})),this.forget(path)}if(this.children.size>0){var childKey=path.getFront();return path=path.popFront(),this.children.has(childKey)&&this.children.get(childKey).forget(path)&&this.children.delete(childKey),0===this.children.size}return!0},SparseSnapshotTree.prototype.forEachTree=function(prefixPath,func){null!==this.value?func(prefixPath,this.value):this.forEachChild((function(key,tree){var path=new Path(prefixPath.toString()+\"/\"+key);tree.forEachTree(path,func)}))},SparseSnapshotTree.prototype.forEachChild=function(func){this.children.forEach((function(tree,key){func(key,tree)}))},SparseSnapshotTree}(),OperationType=function(OperationType){return OperationType[OperationType.OVERWRITE=0]=\"OVERWRITE\",OperationType[OperationType.MERGE=1]=\"MERGE\",OperationType[OperationType.ACK_USER_WRITE=2]=\"ACK_USER_WRITE\",OperationType[OperationType.LISTEN_COMPLETE=3]=\"LISTEN_COMPLETE\",OperationType}({}),OperationSource=function(){function OperationSource(fromUser,fromServer,queryId,tagged){this.fromUser=fromUser,this.fromServer=fromServer,this.queryId=queryId,this.tagged=tagged,util.assert(!tagged||fromServer,\"Tagged queries must be from server.\")}return OperationSource.User=new OperationSource(!0,!1,null,!1),OperationSource.Server=new OperationSource(!1,!0,null,!1),OperationSource.forServerTaggedQuery=function(queryId){return new OperationSource(!1,!0,queryId,!0)},OperationSource}(),AckUserWrite=function(){function AckUserWrite(path,affectedTree,revert){this.path=path,this.affectedTree=affectedTree,this.revert=revert,this.type=OperationType.ACK_USER_WRITE,this.source=OperationSource.User}return AckUserWrite.prototype.operationForChild=function(childName){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return util.assert(this.affectedTree.children.isEmpty(),\"affectedTree should not have overlapping affected paths.\"),this;var childTree=this.affectedTree.subtree(new Path(childName));return new AckUserWrite(Path.Empty,childTree,this.revert)}return util.assert(this.path.getFront()===childName,\"operationForChild called for unrelated child.\"),new AckUserWrite(this.path.popFront(),this.affectedTree,this.revert)},AckUserWrite}(),ImmutableTree=function(){function ImmutableTree(value,children){void 0===children&&(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),children=emptyChildrenSingleton),this.value=value,this.children=children}return ImmutableTree.fromObject=function(obj){var tree=ImmutableTree.Empty;return each(obj,(function(childPath,childSnap){tree=tree.set(new Path(childPath),childSnap)})),tree},ImmutableTree.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},ImmutableTree.prototype.findRootMostMatchingPathAndValue=function(relativePath,predicate){if(null!=this.value&&predicate(this.value))return{path:Path.Empty,value:this.value};if(relativePath.isEmpty())return null;var front=relativePath.getFront(),child=this.children.get(front);if(null!==child){var childExistingPathAndValue=child.findRootMostMatchingPathAndValue(relativePath.popFront(),predicate);return null!=childExistingPathAndValue?{path:new Path(front).child(childExistingPathAndValue.path),value:childExistingPathAndValue.value}:null}return null},ImmutableTree.prototype.findRootMostValueAndPath=function(relativePath){return this.findRootMostMatchingPathAndValue(relativePath,(function(){return!0}))},ImmutableTree.prototype.subtree=function(relativePath){if(relativePath.isEmpty())return this;var front=relativePath.getFront(),childTree=this.children.get(front);return null!==childTree?childTree.subtree(relativePath.popFront()):ImmutableTree.Empty},ImmutableTree.prototype.set=function(relativePath,toSet){if(relativePath.isEmpty())return new ImmutableTree(toSet,this.children);var front=relativePath.getFront(),newChild=(this.children.get(front)||ImmutableTree.Empty).set(relativePath.popFront(),toSet),newChildren=this.children.insert(front,newChild);return new ImmutableTree(this.value,newChildren)},ImmutableTree.prototype.remove=function(relativePath){if(relativePath.isEmpty())return this.children.isEmpty()?ImmutableTree.Empty:new ImmutableTree(null,this.children);var front=relativePath.getFront(),child=this.children.get(front);if(child){var newChild=child.remove(relativePath.popFront()),newChildren=void 0;return newChildren=newChild.isEmpty()?this.children.remove(front):this.children.insert(front,newChild),null===this.value&&newChildren.isEmpty()?ImmutableTree.Empty:new ImmutableTree(this.value,newChildren)}return this},ImmutableTree.prototype.get=function(relativePath){if(relativePath.isEmpty())return this.value;var front=relativePath.getFront(),child=this.children.get(front);return child?child.get(relativePath.popFront()):null},ImmutableTree.prototype.setTree=function(relativePath,newTree){if(relativePath.isEmpty())return newTree;var newChildren,front=relativePath.getFront(),newChild=(this.children.get(front)||ImmutableTree.Empty).setTree(relativePath.popFront(),newTree);return newChildren=newChild.isEmpty()?this.children.remove(front):this.children.insert(front,newChild),new ImmutableTree(this.value,newChildren)},ImmutableTree.prototype.fold=function(fn){return this.fold_(Path.Empty,fn)},ImmutableTree.prototype.fold_=function(pathSoFar,fn){var accum={};return this.children.inorderTraversal((function(childKey,childTree){accum[childKey]=childTree.fold_(pathSoFar.child(childKey),fn)})),fn(pathSoFar,this.value,accum)},ImmutableTree.prototype.findOnPath=function(path,f){return this.findOnPath_(path,Path.Empty,f)},ImmutableTree.prototype.findOnPath_=function(pathToFollow,pathSoFar,f){var result=!!this.value&&f(pathSoFar,this.value);if(result)return result;if(pathToFollow.isEmpty())return null;var front=pathToFollow.getFront(),nextChild=this.children.get(front);return nextChild?nextChild.findOnPath_(pathToFollow.popFront(),pathSoFar.child(front),f):null},ImmutableTree.prototype.foreachOnPath=function(path,f){return this.foreachOnPath_(path,Path.Empty,f)},ImmutableTree.prototype.foreachOnPath_=function(pathToFollow,currentRelativePath,f){if(pathToFollow.isEmpty())return this;this.value&&f(currentRelativePath,this.value);var front=pathToFollow.getFront(),nextChild=this.children.get(front);return nextChild?nextChild.foreachOnPath_(pathToFollow.popFront(),currentRelativePath.child(front),f):ImmutableTree.Empty},ImmutableTree.prototype.foreach=function(f){this.foreach_(Path.Empty,f)},ImmutableTree.prototype.foreach_=function(currentRelativePath,f){this.children.inorderTraversal((function(childName,childTree){childTree.foreach_(currentRelativePath.child(childName),f)})),this.value&&f(currentRelativePath,this.value)},ImmutableTree.prototype.foreachChild=function(f){this.children.inorderTraversal((function(childName,childTree){childTree.value&&f(childName,childTree.value)}))},ImmutableTree.Empty=new ImmutableTree(null),ImmutableTree}(),ListenComplete=function(){function ListenComplete(source,path){this.source=source,this.path=path,this.type=OperationType.LISTEN_COMPLETE}return ListenComplete.prototype.operationForChild=function(childName){return this.path.isEmpty()?new ListenComplete(this.source,Path.Empty):new ListenComplete(this.source,this.path.popFront())},ListenComplete}(),Overwrite=function(){function Overwrite(source,path,snap){this.source=source,this.path=path,this.snap=snap,this.type=OperationType.OVERWRITE}return Overwrite.prototype.operationForChild=function(childName){return this.path.isEmpty()?new Overwrite(this.source,Path.Empty,this.snap.getImmediateChild(childName)):new Overwrite(this.source,this.path.popFront(),this.snap)},Overwrite}(),Merge=function(){function Merge(source,path,children){this.source=source,this.path=path,this.children=children,this.type=OperationType.MERGE}return Merge.prototype.operationForChild=function(childName){if(this.path.isEmpty()){var childTree=this.children.subtree(new Path(childName));return childTree.isEmpty()?null:childTree.value?new Overwrite(this.source,Path.Empty,childTree.value):new Merge(this.source,Path.Empty,childTree)}return util.assert(this.path.getFront()===childName,\"Can't get a merge for a child not on the path of the operation\"),new Merge(this.source,this.path.popFront(),this.children)},Merge.prototype.toString=function(){return\"Operation(\"+this.path+\": \"+this.source.toString()+\" merge: \"+this.children.toString()+\")\"},Merge}(),CacheNode=function(){function CacheNode(node_,fullyInitialized_,filtered_){this.node_=node_,this.fullyInitialized_=fullyInitialized_,this.filtered_=filtered_}return CacheNode.prototype.isFullyInitialized=function(){return this.fullyInitialized_},CacheNode.prototype.isFiltered=function(){return this.filtered_},CacheNode.prototype.isCompleteForPath=function(path){if(path.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var childKey=path.getFront();return this.isCompleteForChild(childKey)},CacheNode.prototype.isCompleteForChild=function(key){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(key)},CacheNode.prototype.getNode=function(){return this.node_},CacheNode}(),ViewCache=function(){function ViewCache(eventCache_,serverCache_){this.eventCache_=eventCache_,this.serverCache_=serverCache_}return ViewCache.prototype.updateEventSnap=function(eventSnap,complete,filtered){return new ViewCache(new CacheNode(eventSnap,complete,filtered),this.serverCache_)},ViewCache.prototype.updateServerSnap=function(serverSnap,complete,filtered){return new ViewCache(this.eventCache_,new CacheNode(serverSnap,complete,filtered))},ViewCache.prototype.getEventCache=function(){return this.eventCache_},ViewCache.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},ViewCache.prototype.getServerCache=function(){return this.serverCache_},ViewCache.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},ViewCache.Empty=new ViewCache(new CacheNode(ChildrenNode.EMPTY_NODE,!1,!1),new CacheNode(ChildrenNode.EMPTY_NODE,!1,!1)),ViewCache}(),Change=function(){function Change(type,snapshotNode,childName,oldSnap,prevName){this.type=type,this.snapshotNode=snapshotNode,this.childName=childName,this.oldSnap=oldSnap,this.prevName=prevName}return Change.valueChange=function(snapshot){return new Change(Change.VALUE,snapshot)},Change.childAddedChange=function(childKey,snapshot){return new Change(Change.CHILD_ADDED,snapshot,childKey)},Change.childRemovedChange=function(childKey,snapshot){return new Change(Change.CHILD_REMOVED,snapshot,childKey)},Change.childChangedChange=function(childKey,newSnapshot,oldSnapshot){return new Change(Change.CHILD_CHANGED,newSnapshot,childKey,oldSnapshot)},Change.childMovedChange=function(childKey,snapshot){return new Change(Change.CHILD_MOVED,snapshot,childKey)},Change.CHILD_ADDED=\"child_added\",Change.CHILD_REMOVED=\"child_removed\",Change.CHILD_CHANGED=\"child_changed\",Change.CHILD_MOVED=\"child_moved\",Change.VALUE=\"value\",Change}(),IndexedFilter=function(){function IndexedFilter(index_){this.index_=index_}return IndexedFilter.prototype.updateChild=function(snap,key,newChild,affectedPath,source,optChangeAccumulator){util.assert(snap.isIndexed(this.index_),\"A node must be indexed if only a child is updated\");var oldChild=snap.getImmediateChild(key);return oldChild.getChild(affectedPath).equals(newChild.getChild(affectedPath))&&oldChild.isEmpty()===newChild.isEmpty()?snap:(null!=optChangeAccumulator&&(newChild.isEmpty()?snap.hasChild(key)?optChangeAccumulator.trackChildChange(Change.childRemovedChange(key,oldChild)):util.assert(snap.isLeafNode(),\"A child remove without an old child only makes sense on a leaf node\"):oldChild.isEmpty()?optChangeAccumulator.trackChildChange(Change.childAddedChange(key,newChild)):optChangeAccumulator.trackChildChange(Change.childChangedChange(key,newChild,oldChild))),snap.isLeafNode()&&newChild.isEmpty()?snap:snap.updateImmediateChild(key,newChild).withIndex(this.index_))},IndexedFilter.prototype.updateFullNode=function(oldSnap,newSnap,optChangeAccumulator){return null!=optChangeAccumulator&&(oldSnap.isLeafNode()||oldSnap.forEachChild(PRIORITY_INDEX,(function(key,childNode){newSnap.hasChild(key)||optChangeAccumulator.trackChildChange(Change.childRemovedChange(key,childNode))})),newSnap.isLeafNode()||newSnap.forEachChild(PRIORITY_INDEX,(function(key,childNode){if(oldSnap.hasChild(key)){var oldChild=oldSnap.getImmediateChild(key);oldChild.equals(childNode)||optChangeAccumulator.trackChildChange(Change.childChangedChange(key,childNode,oldChild))}else optChangeAccumulator.trackChildChange(Change.childAddedChange(key,childNode))}))),newSnap.withIndex(this.index_)},IndexedFilter.prototype.updatePriority=function(oldSnap,newPriority){return oldSnap.isEmpty()?ChildrenNode.EMPTY_NODE:oldSnap.updatePriority(newPriority)},IndexedFilter.prototype.filtersNodes=function(){return!1},IndexedFilter.prototype.getIndexedFilter=function(){return this},IndexedFilter.prototype.getIndex=function(){return this.index_},IndexedFilter}(),ChildChangeAccumulator=function(){function ChildChangeAccumulator(){this.changeMap=new Map}return ChildChangeAccumulator.prototype.trackChildChange=function(change){var type=change.type,childKey=change.childName;util.assert(type===Change.CHILD_ADDED||type===Change.CHILD_CHANGED||type===Change.CHILD_REMOVED,\"Only child changes supported for tracking\"),util.assert(\".priority\"!==childKey,\"Only non-priority child changes can be tracked.\");var oldChange=this.changeMap.get(childKey);if(oldChange){var oldType=oldChange.type;if(type===Change.CHILD_ADDED&&oldType===Change.CHILD_REMOVED)this.changeMap.set(childKey,Change.childChangedChange(childKey,change.snapshotNode,oldChange.snapshotNode));else if(type===Change.CHILD_REMOVED&&oldType===Change.CHILD_ADDED)this.changeMap.delete(childKey);else if(type===Change.CHILD_REMOVED&&oldType===Change.CHILD_CHANGED)this.changeMap.set(childKey,Change.childRemovedChange(childKey,oldChange.oldSnap));else if(type===Change.CHILD_CHANGED&&oldType===Change.CHILD_ADDED)this.changeMap.set(childKey,Change.childAddedChange(childKey,change.snapshotNode));else{if(type!==Change.CHILD_CHANGED||oldType!==Change.CHILD_CHANGED)throw util.assertionError(\"Illegal combination of changes: \"+change+\" occurred after \"+oldChange);this.changeMap.set(childKey,Change.childChangedChange(childKey,change.snapshotNode,oldChange.oldSnap))}}else this.changeMap.set(childKey,change)},ChildChangeAccumulator.prototype.getChanges=function(){return Array.from(this.changeMap.values())},ChildChangeAccumulator}(),NO_COMPLETE_CHILD_SOURCE=new(function(){function NoCompleteChildSource_(){}return NoCompleteChildSource_.prototype.getCompleteChild=function(childKey){return null},NoCompleteChildSource_.prototype.getChildAfterChild=function(index,child,reverse){return null},NoCompleteChildSource_}()),WriteTreeCompleteChildSource=function(){function WriteTreeCompleteChildSource(writes_,viewCache_,optCompleteServerCache_){void 0===optCompleteServerCache_&&(optCompleteServerCache_=null),this.writes_=writes_,this.viewCache_=viewCache_,this.optCompleteServerCache_=optCompleteServerCache_}return WriteTreeCompleteChildSource.prototype.getCompleteChild=function(childKey){var node=this.viewCache_.getEventCache();if(node.isCompleteForChild(childKey))return node.getNode().getImmediateChild(childKey);var serverNode=null!=this.optCompleteServerCache_?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(childKey,serverNode)},WriteTreeCompleteChildSource.prototype.getChildAfterChild=function(index,child,reverse){var completeServerData=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),nodes=this.writes_.calcIndexedSlice(completeServerData,child,1,reverse,index);return 0===nodes.length?null:nodes[0]},WriteTreeCompleteChildSource}(),ProcessorResult=function(){return function(viewCache,changes){this.viewCache=viewCache,this.changes=changes}}(),ViewProcessor=function(){function ViewProcessor(filter_){this.filter_=filter_}return ViewProcessor.prototype.assertIndexed=function(viewCache){util.assert(viewCache.getEventCache().getNode().isIndexed(this.filter_.getIndex()),\"Event snap not indexed\"),util.assert(viewCache.getServerCache().getNode().isIndexed(this.filter_.getIndex()),\"Server snap not indexed\")},ViewProcessor.prototype.applyOperation=function(oldViewCache,operation,writesCache,completeCache){var newViewCache,filterServerNode,accumulator=new ChildChangeAccumulator;if(operation.type===OperationType.OVERWRITE){var overwrite=operation;overwrite.source.fromUser?newViewCache=this.applyUserOverwrite_(oldViewCache,overwrite.path,overwrite.snap,writesCache,completeCache,accumulator):(util.assert(overwrite.source.fromServer,\"Unknown source.\"),filterServerNode=overwrite.source.tagged||oldViewCache.getServerCache().isFiltered()&&!overwrite.path.isEmpty(),newViewCache=this.applyServerOverwrite_(oldViewCache,overwrite.path,overwrite.snap,writesCache,completeCache,filterServerNode,accumulator))}else if(operation.type===OperationType.MERGE){var merge=operation;merge.source.fromUser?newViewCache=this.applyUserMerge_(oldViewCache,merge.path,merge.children,writesCache,completeCache,accumulator):(util.assert(merge.source.fromServer,\"Unknown source.\"),filterServerNode=merge.source.tagged||oldViewCache.getServerCache().isFiltered(),newViewCache=this.applyServerMerge_(oldViewCache,merge.path,merge.children,writesCache,completeCache,filterServerNode,accumulator))}else if(operation.type===OperationType.ACK_USER_WRITE){var ackUserWrite=operation;newViewCache=ackUserWrite.revert?this.revertUserWrite_(oldViewCache,ackUserWrite.path,writesCache,completeCache,accumulator):this.ackUserWrite_(oldViewCache,ackUserWrite.path,ackUserWrite.affectedTree,writesCache,completeCache,accumulator)}else{if(operation.type!==OperationType.LISTEN_COMPLETE)throw util.assertionError(\"Unknown operation type: \"+operation.type);newViewCache=this.listenComplete_(oldViewCache,operation.path,writesCache,accumulator)}var changes=accumulator.getChanges();return ViewProcessor.maybeAddValueEvent_(oldViewCache,newViewCache,changes),new ProcessorResult(newViewCache,changes)},ViewProcessor.maybeAddValueEvent_=function(oldViewCache,newViewCache,accumulator){var eventSnap=newViewCache.getEventCache();if(eventSnap.isFullyInitialized()){var isLeafOrEmpty=eventSnap.getNode().isLeafNode()||eventSnap.getNode().isEmpty(),oldCompleteSnap=oldViewCache.getCompleteEventSnap();(accumulator.length>0||!oldViewCache.getEventCache().isFullyInitialized()||isLeafOrEmpty&&!eventSnap.getNode().equals(oldCompleteSnap)||!eventSnap.getNode().getPriority().equals(oldCompleteSnap.getPriority()))&&accumulator.push(Change.valueChange(newViewCache.getCompleteEventSnap()))}},ViewProcessor.prototype.generateEventCacheAfterServerEvent_=function(viewCache,changePath,writesCache,source,accumulator){var oldEventSnap=viewCache.getEventCache();if(null!=writesCache.shadowingWrite(changePath))return viewCache;var newEventCache=void 0,serverNode=void 0;if(changePath.isEmpty())if(util.assert(viewCache.getServerCache().isFullyInitialized(),\"If change path is empty, we must have complete server data\"),viewCache.getServerCache().isFiltered()){var serverCache=viewCache.getCompleteServerSnap(),completeEventChildren=writesCache.calcCompleteEventChildren(serverCache instanceof ChildrenNode?serverCache:ChildrenNode.EMPTY_NODE);newEventCache=this.filter_.updateFullNode(viewCache.getEventCache().getNode(),completeEventChildren,accumulator)}else{var completeNode=writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());newEventCache=this.filter_.updateFullNode(viewCache.getEventCache().getNode(),completeNode,accumulator)}else{var childKey=changePath.getFront();if(\".priority\"===childKey){util.assert(1===changePath.getLength(),\"Can't have a priority with additional path components\");var oldEventNode=oldEventSnap.getNode();serverNode=viewCache.getServerCache().getNode();var updatedPriority=writesCache.calcEventCacheAfterServerOverwrite(changePath,oldEventNode,serverNode);newEventCache=null!=updatedPriority?this.filter_.updatePriority(oldEventNode,updatedPriority):oldEventSnap.getNode()}else{var childChangePath=changePath.popFront(),newEventChild=void 0;if(oldEventSnap.isCompleteForChild(childKey)){serverNode=viewCache.getServerCache().getNode();var eventChildUpdate=writesCache.calcEventCacheAfterServerOverwrite(changePath,oldEventSnap.getNode(),serverNode);newEventChild=null!=eventChildUpdate?oldEventSnap.getNode().getImmediateChild(childKey).updateChild(childChangePath,eventChildUpdate):oldEventSnap.getNode().getImmediateChild(childKey)}else newEventChild=writesCache.calcCompleteChild(childKey,viewCache.getServerCache());newEventCache=null!=newEventChild?this.filter_.updateChild(oldEventSnap.getNode(),childKey,newEventChild,childChangePath,source,accumulator):oldEventSnap.getNode()}}return viewCache.updateEventSnap(newEventCache,oldEventSnap.isFullyInitialized()||changePath.isEmpty(),this.filter_.filtersNodes())},ViewProcessor.prototype.applyServerOverwrite_=function(oldViewCache,changePath,changedSnap,writesCache,completeCache,filterServerNode,accumulator){var newServerCache,oldServerSnap=oldViewCache.getServerCache(),serverFilter=filterServerNode?this.filter_:this.filter_.getIndexedFilter();if(changePath.isEmpty())newServerCache=serverFilter.updateFullNode(oldServerSnap.getNode(),changedSnap,null);else if(serverFilter.filtersNodes()&&!oldServerSnap.isFiltered()){var newServerNode=oldServerSnap.getNode().updateChild(changePath,changedSnap);newServerCache=serverFilter.updateFullNode(oldServerSnap.getNode(),newServerNode,null)}else{var childKey=changePath.getFront();if(!oldServerSnap.isCompleteForPath(changePath)&&changePath.getLength()>1)return oldViewCache;var childChangePath=changePath.popFront(),newChildNode=oldServerSnap.getNode().getImmediateChild(childKey).updateChild(childChangePath,changedSnap);newServerCache=\".priority\"===childKey?serverFilter.updatePriority(oldServerSnap.getNode(),newChildNode):serverFilter.updateChild(oldServerSnap.getNode(),childKey,newChildNode,childChangePath,NO_COMPLETE_CHILD_SOURCE,null)}var newViewCache=oldViewCache.updateServerSnap(newServerCache,oldServerSnap.isFullyInitialized()||changePath.isEmpty(),serverFilter.filtersNodes()),source=new WriteTreeCompleteChildSource(writesCache,newViewCache,completeCache);return this.generateEventCacheAfterServerEvent_(newViewCache,changePath,writesCache,source,accumulator)},ViewProcessor.prototype.applyUserOverwrite_=function(oldViewCache,changePath,changedSnap,writesCache,completeCache,accumulator){var newViewCache,newEventCache,oldEventSnap=oldViewCache.getEventCache(),source=new WriteTreeCompleteChildSource(writesCache,oldViewCache,completeCache);if(changePath.isEmpty())newEventCache=this.filter_.updateFullNode(oldViewCache.getEventCache().getNode(),changedSnap,accumulator),newViewCache=oldViewCache.updateEventSnap(newEventCache,!0,this.filter_.filtersNodes());else{var childKey=changePath.getFront();if(\".priority\"===childKey)newEventCache=this.filter_.updatePriority(oldViewCache.getEventCache().getNode(),changedSnap),newViewCache=oldViewCache.updateEventSnap(newEventCache,oldEventSnap.isFullyInitialized(),oldEventSnap.isFiltered());else{var childChangePath=changePath.popFront(),oldChild=oldEventSnap.getNode().getImmediateChild(childKey),newChild=void 0;if(childChangePath.isEmpty())newChild=changedSnap;else{var childNode=source.getCompleteChild(childKey);newChild=null!=childNode?\".priority\"===childChangePath.getBack()&&childNode.getChild(childChangePath.parent()).isEmpty()?childNode:childNode.updateChild(childChangePath,changedSnap):ChildrenNode.EMPTY_NODE}if(oldChild.equals(newChild))newViewCache=oldViewCache;else{var newEventSnap=this.filter_.updateChild(oldEventSnap.getNode(),childKey,newChild,childChangePath,source,accumulator);newViewCache=oldViewCache.updateEventSnap(newEventSnap,oldEventSnap.isFullyInitialized(),this.filter_.filtersNodes())}}}return newViewCache},ViewProcessor.cacheHasChild_=function(viewCache,childKey){return viewCache.getEventCache().isCompleteForChild(childKey)},ViewProcessor.prototype.applyUserMerge_=function(viewCache,path,changedChildren,writesCache,serverCache,accumulator){var _this=this,curViewCache=viewCache;return changedChildren.foreach((function(relativePath,childNode){var writePath=path.child(relativePath);ViewProcessor.cacheHasChild_(viewCache,writePath.getFront())&&(curViewCache=_this.applyUserOverwrite_(curViewCache,writePath,childNode,writesCache,serverCache,accumulator))})),changedChildren.foreach((function(relativePath,childNode){var writePath=path.child(relativePath);ViewProcessor.cacheHasChild_(viewCache,writePath.getFront())||(curViewCache=_this.applyUserOverwrite_(curViewCache,writePath,childNode,writesCache,serverCache,accumulator))})),curViewCache},ViewProcessor.prototype.applyMerge_=function(node,merge){return merge.foreach((function(relativePath,childNode){node=node.updateChild(relativePath,childNode)})),node},ViewProcessor.prototype.applyServerMerge_=function(viewCache,path,changedChildren,writesCache,serverCache,filterServerNode,accumulator){var _this=this;if(viewCache.getServerCache().getNode().isEmpty()&&!viewCache.getServerCache().isFullyInitialized())return viewCache;var viewMergeTree,curViewCache=viewCache;viewMergeTree=path.isEmpty()?changedChildren:ImmutableTree.Empty.setTree(path,changedChildren);var serverNode=viewCache.getServerCache().getNode();return viewMergeTree.children.inorderTraversal((function(childKey,childTree){if(serverNode.hasChild(childKey)){var serverChild=viewCache.getServerCache().getNode().getImmediateChild(childKey),newChild=_this.applyMerge_(serverChild,childTree);curViewCache=_this.applyServerOverwrite_(curViewCache,new Path(childKey),newChild,writesCache,serverCache,filterServerNode,accumulator)}})),viewMergeTree.children.inorderTraversal((function(childKey,childMergeTree){var isUnknownDeepMerge=!viewCache.getServerCache().isCompleteForChild(childKey)&&null==childMergeTree.value;if(!serverNode.hasChild(childKey)&&!isUnknownDeepMerge){var serverChild=viewCache.getServerCache().getNode().getImmediateChild(childKey),newChild=_this.applyMerge_(serverChild,childMergeTree);curViewCache=_this.applyServerOverwrite_(curViewCache,new Path(childKey),newChild,writesCache,serverCache,filterServerNode,accumulator)}})),curViewCache},ViewProcessor.prototype.ackUserWrite_=function(viewCache,ackPath,affectedTree,writesCache,completeCache,accumulator){if(null!=writesCache.shadowingWrite(ackPath))return viewCache;var filterServerNode=viewCache.getServerCache().isFiltered(),serverCache=viewCache.getServerCache();if(null!=affectedTree.value){if(ackPath.isEmpty()&&serverCache.isFullyInitialized()||serverCache.isCompleteForPath(ackPath))return this.applyServerOverwrite_(viewCache,ackPath,serverCache.getNode().getChild(ackPath),writesCache,completeCache,filterServerNode,accumulator);if(ackPath.isEmpty()){var changedChildren_1=ImmutableTree.Empty;return serverCache.getNode().forEachChild(KEY_INDEX,(function(name,node){changedChildren_1=changedChildren_1.set(new Path(name),node)})),this.applyServerMerge_(viewCache,ackPath,changedChildren_1,writesCache,completeCache,filterServerNode,accumulator)}return viewCache}var changedChildren_2=ImmutableTree.Empty;return affectedTree.foreach((function(mergePath,value){var serverCachePath=ackPath.child(mergePath);serverCache.isCompleteForPath(serverCachePath)&&(changedChildren_2=changedChildren_2.set(mergePath,serverCache.getNode().getChild(serverCachePath)))})),this.applyServerMerge_(viewCache,ackPath,changedChildren_2,writesCache,completeCache,filterServerNode,accumulator)},ViewProcessor.prototype.listenComplete_=function(viewCache,path,writesCache,accumulator){var oldServerNode=viewCache.getServerCache(),newViewCache=viewCache.updateServerSnap(oldServerNode.getNode(),oldServerNode.isFullyInitialized()||path.isEmpty(),oldServerNode.isFiltered());return this.generateEventCacheAfterServerEvent_(newViewCache,path,writesCache,NO_COMPLETE_CHILD_SOURCE,accumulator)},ViewProcessor.prototype.revertUserWrite_=function(viewCache,path,writesCache,completeServerCache,accumulator){var complete;if(null!=writesCache.shadowingWrite(path))return viewCache;var source=new WriteTreeCompleteChildSource(writesCache,viewCache,completeServerCache),oldEventCache=viewCache.getEventCache().getNode(),newEventCache=void 0;if(path.isEmpty()||\".priority\"===path.getFront()){var newNode=void 0;if(viewCache.getServerCache().isFullyInitialized())newNode=writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap());else{var serverChildren=viewCache.getServerCache().getNode();util.assert(serverChildren instanceof ChildrenNode,\"serverChildren would be complete if leaf node\"),newNode=writesCache.calcCompleteEventChildren(serverChildren)}newEventCache=this.filter_.updateFullNode(oldEventCache,newNode=newNode,accumulator)}else{var childKey=path.getFront(),newChild=writesCache.calcCompleteChild(childKey,viewCache.getServerCache());null==newChild&&viewCache.getServerCache().isCompleteForChild(childKey)&&(newChild=oldEventCache.getImmediateChild(childKey)),(newEventCache=null!=newChild?this.filter_.updateChild(oldEventCache,childKey,newChild,path.popFront(),source,accumulator):viewCache.getEventCache().getNode().hasChild(childKey)?this.filter_.updateChild(oldEventCache,childKey,ChildrenNode.EMPTY_NODE,path.popFront(),source,accumulator):oldEventCache).isEmpty()&&viewCache.getServerCache().isFullyInitialized()&&(complete=writesCache.calcCompleteEventCache(viewCache.getCompleteServerSnap())).isLeafNode()&&(newEventCache=this.filter_.updateFullNode(newEventCache,complete,accumulator))}return complete=viewCache.getServerCache().isFullyInitialized()||null!=writesCache.shadowingWrite(Path.Empty),viewCache.updateEventSnap(newEventCache,complete,this.filter_.filtersNodes())},ViewProcessor}(),EventGenerator=function(){function EventGenerator(query_){this.query_=query_,this.index_=this.query_.getQueryParams().getIndex()}return EventGenerator.prototype.generateEventsForChanges=function(changes,eventCache,eventRegistrations){var _this=this,events=[],moves=[];return changes.forEach((function(change){change.type===Change.CHILD_CHANGED&&_this.index_.indexedValueChanged(change.oldSnap,change.snapshotNode)&&moves.push(Change.childMovedChange(change.childName,change.snapshotNode))})),this.generateEventsForType_(events,Change.CHILD_REMOVED,changes,eventRegistrations,eventCache),this.generateEventsForType_(events,Change.CHILD_ADDED,changes,eventRegistrations,eventCache),this.generateEventsForType_(events,Change.CHILD_MOVED,moves,eventRegistrations,eventCache),this.generateEventsForType_(events,Change.CHILD_CHANGED,changes,eventRegistrations,eventCache),this.generateEventsForType_(events,Change.VALUE,changes,eventRegistrations,eventCache),events},EventGenerator.prototype.generateEventsForType_=function(events,eventType,changes,registrations,eventCache){var _this=this,filteredChanges=changes.filter((function(change){return change.type===eventType}));filteredChanges.sort(this.compareChanges_.bind(this)),filteredChanges.forEach((function(change){var materializedChange=_this.materializeSingleChange_(change,eventCache);registrations.forEach((function(registration){registration.respondsTo(change.type)&&events.push(registration.createEvent(materializedChange,_this.query_))}))}))},EventGenerator.prototype.materializeSingleChange_=function(change,eventCache){return\"value\"===change.type||\"child_removed\"===change.type||(change.prevName=eventCache.getPredecessorChildName(change.childName,change.snapshotNode,this.index_)),change},EventGenerator.prototype.compareChanges_=function(a,b){if(null==a.childName||null==b.childName)throw util.assertionError(\"Should only compare child_ events.\");var aWrapped=new NamedNode(a.childName,a.snapshotNode),bWrapped=new NamedNode(b.childName,b.snapshotNode);return this.index_.compare(aWrapped,bWrapped)},EventGenerator}(),View=function(){function View(query_,initialViewCache){this.query_=query_,this.eventRegistrations_=[];var params=this.query_.getQueryParams(),indexFilter=new IndexedFilter(params.getIndex()),filter=params.getNodeFilter();this.processor_=new ViewProcessor(filter);var initialServerCache=initialViewCache.getServerCache(),initialEventCache=initialViewCache.getEventCache(),serverSnap=indexFilter.updateFullNode(ChildrenNode.EMPTY_NODE,initialServerCache.getNode(),null),eventSnap=filter.updateFullNode(ChildrenNode.EMPTY_NODE,initialEventCache.getNode(),null),newServerCache=new CacheNode(serverSnap,initialServerCache.isFullyInitialized(),indexFilter.filtersNodes()),newEventCache=new CacheNode(eventSnap,initialEventCache.isFullyInitialized(),filter.filtersNodes());this.viewCache_=new ViewCache(newEventCache,newServerCache),this.eventGenerator_=new EventGenerator(this.query_)}return View.prototype.getQuery=function(){return this.query_},View.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},View.prototype.getCompleteServerCache=function(path){var cache=this.viewCache_.getCompleteServerSnap();return cache&&(this.query_.getQueryParams().loadsAllData()||!path.isEmpty()&&!cache.getImmediateChild(path.getFront()).isEmpty())?cache.getChild(path):null},View.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},View.prototype.addEventRegistration=function(eventRegistration){this.eventRegistrations_.push(eventRegistration)},View.prototype.removeEventRegistration=function(eventRegistration,cancelError){var cancelEvents=[];if(cancelError){util.assert(null==eventRegistration,\"A cancel should cancel all event registrations.\");var path_1=this.query_.path;this.eventRegistrations_.forEach((function(registration){var maybeEvent=registration.createCancelEvent(cancelError=cancelError,path_1);maybeEvent&&cancelEvents.push(maybeEvent)}))}if(eventRegistration){for(var remaining=[],i=0;i<this.eventRegistrations_.length;++i){var existing=this.eventRegistrations_[i];if(existing.matches(eventRegistration)){if(eventRegistration.hasAnyCallback()){remaining=remaining.concat(this.eventRegistrations_.slice(i+1));break}}else remaining.push(existing)}this.eventRegistrations_=remaining}else this.eventRegistrations_=[];return cancelEvents},View.prototype.applyOperation=function(operation,writesCache,completeServerCache){operation.type===OperationType.MERGE&&null!==operation.source.queryId&&(util.assert(this.viewCache_.getCompleteServerSnap(),\"We should always have a full cache before handling merges\"),util.assert(this.viewCache_.getCompleteEventSnap(),\"Missing event cache, even though we have a server cache\"));var oldViewCache=this.viewCache_,result=this.processor_.applyOperation(oldViewCache,operation,writesCache,completeServerCache);return this.processor_.assertIndexed(result.viewCache),util.assert(result.viewCache.getServerCache().isFullyInitialized()||!oldViewCache.getServerCache().isFullyInitialized(),\"Once a server snap is complete, it should never go back\"),this.viewCache_=result.viewCache,this.generateEventsForChanges_(result.changes,result.viewCache.getEventCache().getNode(),null)},View.prototype.getInitialEvents=function(registration){var eventSnap=this.viewCache_.getEventCache(),initialChanges=[];return eventSnap.getNode().isLeafNode()||eventSnap.getNode().forEachChild(PRIORITY_INDEX,(function(key,childNode){initialChanges.push(Change.childAddedChange(key,childNode))})),eventSnap.isFullyInitialized()&&initialChanges.push(Change.valueChange(eventSnap.getNode())),this.generateEventsForChanges_(initialChanges,eventSnap.getNode(),registration)},View.prototype.generateEventsForChanges_=function(changes,eventCache,eventRegistration){return this.eventGenerator_.generateEventsForChanges(changes,eventCache,eventRegistration?[eventRegistration]:this.eventRegistrations_)},View}(),SyncPoint=function(){function SyncPoint(){this.views=new Map}return Object.defineProperty(SyncPoint,\"__referenceConstructor\",{get:function(){return util.assert(__referenceConstructor$1,\"Reference.ts has not been loaded\"),__referenceConstructor$1},set:function(val){util.assert(!__referenceConstructor$1,\"__referenceConstructor has already been defined\"),__referenceConstructor$1=val},enumerable:!1,configurable:!0}),SyncPoint.prototype.isEmpty=function(){return 0===this.views.size},SyncPoint.prototype.applyOperation=function(operation,writesCache,optCompleteServerCache){var e_1,_a,queryId=operation.source.queryId;if(null!==queryId){var view=this.views.get(queryId);return util.assert(null!=view,\"SyncTree gave us an op for an invalid query.\"),view.applyOperation(operation,writesCache,optCompleteServerCache)}var events=[];try{for(var _b=tslib.__values(this.views.values()),_c=_b.next();!_c.done;_c=_b.next())events=events.concat((view=_c.value).applyOperation(operation,writesCache,optCompleteServerCache))}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return events},SyncPoint.prototype.addEventRegistration=function(query,eventRegistration,writesCache,serverCache,serverCacheComplete){var queryId=query.queryIdentifier(),view=this.views.get(queryId);if(!view){var eventCache=writesCache.calcCompleteEventCache(serverCacheComplete?serverCache:null),eventCacheComplete=!1;eventCache?eventCacheComplete=!0:serverCache instanceof ChildrenNode?(eventCache=writesCache.calcCompleteEventChildren(serverCache),eventCacheComplete=!1):(eventCache=ChildrenNode.EMPTY_NODE,eventCacheComplete=!1);var viewCache=new ViewCache(new CacheNode(eventCache,eventCacheComplete,!1),new CacheNode(serverCache,serverCacheComplete,!1));view=new View(query,viewCache),this.views.set(queryId,view)}return view.addEventRegistration(eventRegistration),view.getInitialEvents(eventRegistration)},SyncPoint.prototype.removeEventRegistration=function(query,eventRegistration,cancelError){var e_2,_a,queryId=query.queryIdentifier(),removed=[],cancelEvents=[],hadCompleteView=this.hasCompleteView();if(\"default\"===queryId)try{for(var _b=tslib.__values(this.views.entries()),_c=_b.next();!_c.done;_c=_b.next()){var view,_d=tslib.__read(_c.value,2),viewQueryId=_d[0];cancelEvents=cancelEvents.concat((view=_d[1]).removeEventRegistration(eventRegistration,cancelError)),view.isEmpty()&&(this.views.delete(viewQueryId),view.getQuery().getQueryParams().loadsAllData()||removed.push(view.getQuery()))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}else(view=this.views.get(queryId))&&(cancelEvents=cancelEvents.concat(view.removeEventRegistration(eventRegistration,cancelError)),view.isEmpty()&&(this.views.delete(queryId),view.getQuery().getQueryParams().loadsAllData()||removed.push(view.getQuery())));return hadCompleteView&&!this.hasCompleteView()&&removed.push(new SyncPoint.__referenceConstructor(query.repo,query.path)),{removed:removed,events:cancelEvents}},SyncPoint.prototype.getQueryViews=function(){var e_3,_a,result=[];try{for(var _b=tslib.__values(this.views.values()),_c=_b.next();!_c.done;_c=_b.next()){var view=_c.value;view.getQuery().getQueryParams().loadsAllData()||result.push(view)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_3)throw e_3.error}}return result},SyncPoint.prototype.getCompleteServerCache=function(path){var e_4,_a,serverCache=null;try{for(var _b=tslib.__values(this.views.values()),_c=_b.next();!_c.done;_c=_b.next())serverCache=serverCache||_c.value.getCompleteServerCache(path)}catch(e_4_1){e_4={error:e_4_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_4)throw e_4.error}}return serverCache},SyncPoint.prototype.viewForQuery=function(query){if(query.getQueryParams().loadsAllData())return this.getCompleteView();var queryId=query.queryIdentifier();return this.views.get(queryId)},SyncPoint.prototype.viewExistsForQuery=function(query){return null!=this.viewForQuery(query)},SyncPoint.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},SyncPoint.prototype.getCompleteView=function(){var e_5,_a;try{for(var _b=tslib.__values(this.views.values()),_c=_b.next();!_c.done;_c=_b.next()){var view=_c.value;if(view.getQuery().getQueryParams().loadsAllData())return view}}catch(e_5_1){e_5={error:e_5_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_5)throw e_5.error}}return null},SyncPoint}(),CompoundWrite=function(){function CompoundWrite(writeTree_){this.writeTree_=writeTree_}return CompoundWrite.prototype.addWrite=function(path,node){if(path.isEmpty())return new CompoundWrite(new ImmutableTree(node));var rootmost=this.writeTree_.findRootMostValueAndPath(path);if(null!=rootmost){var rootMostPath=rootmost.path,value=rootmost.value,relativePath=Path.relativePath(rootMostPath,path);return value=value.updateChild(relativePath,node),new CompoundWrite(this.writeTree_.set(rootMostPath,value))}var subtree=new ImmutableTree(node);return new CompoundWrite(this.writeTree_.setTree(path,subtree))},CompoundWrite.prototype.addWrites=function(path,updates){var newWrite=this;return each(updates,(function(childKey,node){newWrite=newWrite.addWrite(path.child(childKey),node)})),newWrite},CompoundWrite.prototype.removeWrite=function(path){return path.isEmpty()?CompoundWrite.Empty:new CompoundWrite(this.writeTree_.setTree(path,ImmutableTree.Empty))},CompoundWrite.prototype.hasCompleteWrite=function(path){return null!=this.getCompleteNode(path)},CompoundWrite.prototype.getCompleteNode=function(path){var rootmost=this.writeTree_.findRootMostValueAndPath(path);return null!=rootmost?this.writeTree_.get(rootmost.path).getChild(Path.relativePath(rootmost.path,path)):null},CompoundWrite.prototype.getCompleteChildren=function(){var children=[],node=this.writeTree_.value;return null!=node?node.isLeafNode()||node.forEachChild(PRIORITY_INDEX,(function(childName,childNode){children.push(new NamedNode(childName,childNode))})):this.writeTree_.children.inorderTraversal((function(childName,childTree){null!=childTree.value&&children.push(new NamedNode(childName,childTree.value))})),children},CompoundWrite.prototype.childCompoundWrite=function(path){if(path.isEmpty())return this;var shadowingNode=this.getCompleteNode(path);return new CompoundWrite(null!=shadowingNode?new ImmutableTree(shadowingNode):this.writeTree_.subtree(path))},CompoundWrite.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},CompoundWrite.prototype.apply=function(node){return function applySubtreeWrite(relativePath,writeTree,node){if(null!=writeTree.value)return node.updateChild(relativePath,writeTree.value);var priorityWrite_1=null;return writeTree.children.inorderTraversal((function(childKey,childTree){\".priority\"===childKey?(util.assert(null!==childTree.value,\"Priority writes must always be leaf nodes\"),priorityWrite_1=childTree.value):node=applySubtreeWrite(relativePath.child(childKey),childTree,node)})),node.getChild(relativePath).isEmpty()||null===priorityWrite_1||(node=node.updateChild(relativePath.child(\".priority\"),priorityWrite_1)),node}(Path.Empty,this.writeTree_,node)},CompoundWrite.Empty=new CompoundWrite(new ImmutableTree(null)),CompoundWrite}(),WriteTree=function(){function WriteTree(){this.visibleWrites_=CompoundWrite.Empty,this.allWrites_=[],this.lastWriteId_=-1}return WriteTree.prototype.childWrites=function(path){return new WriteTreeRef(path,this)},WriteTree.prototype.addOverwrite=function(path,snap,writeId,visible){util.assert(writeId>this.lastWriteId_,\"Stacking an older write on top of newer ones\"),void 0===visible&&(visible=!0),this.allWrites_.push({path:path,snap:snap,writeId:writeId,visible:visible}),visible&&(this.visibleWrites_=this.visibleWrites_.addWrite(path,snap)),this.lastWriteId_=writeId},WriteTree.prototype.addMerge=function(path,changedChildren,writeId){util.assert(writeId>this.lastWriteId_,\"Stacking an older merge on top of newer ones\"),this.allWrites_.push({path:path,children:changedChildren,writeId:writeId,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(path,changedChildren),this.lastWriteId_=writeId},WriteTree.prototype.getWrite=function(writeId){for(var i=0;i<this.allWrites_.length;i++){var record=this.allWrites_[i];if(record.writeId===writeId)return record}return null},WriteTree.prototype.removeWrite=function(writeId){var _this=this,idx=this.allWrites_.findIndex((function(s){return s.writeId===writeId}));util.assert(idx>=0,\"removeWrite called with nonexistent writeId.\");var writeToRemove=this.allWrites_[idx];this.allWrites_.splice(idx,1);for(var removedWriteWasVisible=writeToRemove.visible,removedWriteOverlapsWithOtherWrites=!1,i=this.allWrites_.length-1;removedWriteWasVisible&&i>=0;){var currentWrite=this.allWrites_[i];currentWrite.visible&&(i>=idx&&this.recordContainsPath_(currentWrite,writeToRemove.path)?removedWriteWasVisible=!1:writeToRemove.path.contains(currentWrite.path)&&(removedWriteOverlapsWithOtherWrites=!0)),i--}return!!removedWriteWasVisible&&(removedWriteOverlapsWithOtherWrites?(this.resetTree_(),!0):(writeToRemove.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(writeToRemove.path):each(writeToRemove.children,(function(childName){_this.visibleWrites_=_this.visibleWrites_.removeWrite(writeToRemove.path.child(childName))})),!0))},WriteTree.prototype.getCompleteWriteData=function(path){return this.visibleWrites_.getCompleteNode(path)},WriteTree.prototype.calcCompleteEventCache=function(treePath,completeServerCache,writeIdsToExclude,includeHiddenWrites){if(writeIdsToExclude||includeHiddenWrites){var merge=this.visibleWrites_.childCompoundWrite(treePath);return!includeHiddenWrites&&merge.isEmpty()?completeServerCache:includeHiddenWrites||null!=completeServerCache||merge.hasCompleteWrite(Path.Empty)?WriteTree.layerTree_(this.allWrites_,(function(write){return(write.visible||includeHiddenWrites)&&(!writeIdsToExclude||!~writeIdsToExclude.indexOf(write.writeId))&&(write.path.contains(treePath)||treePath.contains(write.path))}),treePath).apply(completeServerCache||ChildrenNode.EMPTY_NODE):null}var shadowingNode=this.visibleWrites_.getCompleteNode(treePath);if(null!=shadowingNode)return shadowingNode;var subMerge=this.visibleWrites_.childCompoundWrite(treePath);return subMerge.isEmpty()?completeServerCache:null!=completeServerCache||subMerge.hasCompleteWrite(Path.Empty)?subMerge.apply(completeServerCache||ChildrenNode.EMPTY_NODE):null},WriteTree.prototype.calcCompleteEventChildren=function(treePath,completeServerChildren){var completeChildren=ChildrenNode.EMPTY_NODE,topLevelSet=this.visibleWrites_.getCompleteNode(treePath);if(topLevelSet)return topLevelSet.isLeafNode()||topLevelSet.forEachChild(PRIORITY_INDEX,(function(childName,childSnap){completeChildren=completeChildren.updateImmediateChild(childName,childSnap)})),completeChildren;if(completeServerChildren){var merge_1=this.visibleWrites_.childCompoundWrite(treePath);return completeServerChildren.forEachChild(PRIORITY_INDEX,(function(childName,childNode){var node=merge_1.childCompoundWrite(new Path(childName)).apply(childNode);completeChildren=completeChildren.updateImmediateChild(childName,node)})),merge_1.getCompleteChildren().forEach((function(namedNode){completeChildren=completeChildren.updateImmediateChild(namedNode.name,namedNode.node)})),completeChildren}return this.visibleWrites_.childCompoundWrite(treePath).getCompleteChildren().forEach((function(namedNode){completeChildren=completeChildren.updateImmediateChild(namedNode.name,namedNode.node)})),completeChildren},WriteTree.prototype.calcEventCacheAfterServerOverwrite=function(treePath,childPath,existingEventSnap,existingServerSnap){util.assert(existingEventSnap||existingServerSnap,\"Either existingEventSnap or existingServerSnap must exist\");var path=treePath.child(childPath);if(this.visibleWrites_.hasCompleteWrite(path))return null;var childMerge=this.visibleWrites_.childCompoundWrite(path);return childMerge.isEmpty()?existingServerSnap.getChild(childPath):childMerge.apply(existingServerSnap.getChild(childPath))},WriteTree.prototype.calcCompleteChild=function(treePath,childKey,existingServerSnap){var path=treePath.child(childKey),shadowingNode=this.visibleWrites_.getCompleteNode(path);return null!=shadowingNode?shadowingNode:existingServerSnap.isCompleteForChild(childKey)?this.visibleWrites_.childCompoundWrite(path).apply(existingServerSnap.getNode().getImmediateChild(childKey)):null},WriteTree.prototype.shadowingWrite=function(path){return this.visibleWrites_.getCompleteNode(path)},WriteTree.prototype.calcIndexedSlice=function(treePath,completeServerData,startPost,count,reverse,index){var toIterate,merge=this.visibleWrites_.childCompoundWrite(treePath),shadowingNode=merge.getCompleteNode(Path.Empty);if(null!=shadowingNode)toIterate=shadowingNode;else{if(null==completeServerData)return[];toIterate=merge.apply(completeServerData)}if((toIterate=toIterate.withIndex(index)).isEmpty()||toIterate.isLeafNode())return[];for(var nodes=[],cmp=index.getCompare(),iter=reverse?toIterate.getReverseIteratorFrom(startPost,index):toIterate.getIteratorFrom(startPost,index),next=iter.getNext();next&&nodes.length<count;)0!==cmp(next,startPost)&&nodes.push(next),next=iter.getNext();return nodes},WriteTree.prototype.recordContainsPath_=function(writeRecord,path){if(writeRecord.snap)return writeRecord.path.contains(path);for(var childName in writeRecord.children)if(writeRecord.children.hasOwnProperty(childName)&&writeRecord.path.child(childName).contains(path))return!0;return!1},WriteTree.prototype.resetTree_=function(){this.visibleWrites_=WriteTree.layerTree_(this.allWrites_,WriteTree.DefaultFilter_,Path.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},WriteTree.DefaultFilter_=function(write){return write.visible},WriteTree.layerTree_=function(writes,filter,treeRoot){for(var compoundWrite=CompoundWrite.Empty,i=0;i<writes.length;++i){var write=writes[i];if(filter(write)){var writePath=write.path,relativePath=void 0;if(write.snap)treeRoot.contains(writePath)?(relativePath=Path.relativePath(treeRoot,writePath),compoundWrite=compoundWrite.addWrite(relativePath,write.snap)):writePath.contains(treeRoot)&&(relativePath=Path.relativePath(writePath,treeRoot),compoundWrite=compoundWrite.addWrite(Path.Empty,write.snap.getChild(relativePath)));else{if(!write.children)throw util.assertionError(\"WriteRecord should have .snap or .children\");if(treeRoot.contains(writePath))relativePath=Path.relativePath(treeRoot,writePath),compoundWrite=compoundWrite.addWrites(relativePath,write.children);else if(writePath.contains(treeRoot))if((relativePath=Path.relativePath(writePath,treeRoot)).isEmpty())compoundWrite=compoundWrite.addWrites(Path.Empty,write.children);else{var child=util.safeGet(write.children,relativePath.getFront());if(child){var deepNode=child.getChild(relativePath.popFront());compoundWrite=compoundWrite.addWrite(Path.Empty,deepNode)}}}}}return compoundWrite},WriteTree}(),WriteTreeRef=function(){function WriteTreeRef(path,writeTree){this.treePath_=path,this.writeTree_=writeTree}return WriteTreeRef.prototype.calcCompleteEventCache=function(completeServerCache,writeIdsToExclude,includeHiddenWrites){return this.writeTree_.calcCompleteEventCache(this.treePath_,completeServerCache,writeIdsToExclude,includeHiddenWrites)},WriteTreeRef.prototype.calcCompleteEventChildren=function(completeServerChildren){return this.writeTree_.calcCompleteEventChildren(this.treePath_,completeServerChildren)},WriteTreeRef.prototype.calcEventCacheAfterServerOverwrite=function(path,existingEventSnap,existingServerSnap){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,path,existingEventSnap,existingServerSnap)},WriteTreeRef.prototype.shadowingWrite=function(path){return this.writeTree_.shadowingWrite(this.treePath_.child(path))},WriteTreeRef.prototype.calcIndexedSlice=function(completeServerData,startPost,count,reverse,index){return this.writeTree_.calcIndexedSlice(this.treePath_,completeServerData,startPost,count,reverse,index)},WriteTreeRef.prototype.calcCompleteChild=function(childKey,existingServerCache){return this.writeTree_.calcCompleteChild(this.treePath_,childKey,existingServerCache)},WriteTreeRef.prototype.child=function(childName){return new WriteTreeRef(this.treePath_.child(childName),this.writeTree_)},WriteTreeRef}(),SyncTree=function(){function SyncTree(listenProvider_){this.listenProvider_=listenProvider_,this.syncPointTree_=ImmutableTree.Empty,this.pendingWriteTree_=new WriteTree,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return SyncTree.prototype.applyUserOverwrite=function(path,newData,writeId,visible){return this.pendingWriteTree_.addOverwrite(path,newData,writeId,visible),visible?this.applyOperationToSyncPoints_(new Overwrite(OperationSource.User,path,newData)):[]},SyncTree.prototype.applyUserMerge=function(path,changedChildren,writeId){this.pendingWriteTree_.addMerge(path,changedChildren,writeId);var changeTree=ImmutableTree.fromObject(changedChildren);return this.applyOperationToSyncPoints_(new Merge(OperationSource.User,path,changeTree))},SyncTree.prototype.ackUserWrite=function(writeId,revert){void 0===revert&&(revert=!1);var write=this.pendingWriteTree_.getWrite(writeId);if(this.pendingWriteTree_.removeWrite(writeId)){var affectedTree_1=ImmutableTree.Empty;return null!=write.snap?affectedTree_1=affectedTree_1.set(Path.Empty,!0):each(write.children,(function(pathString,node){affectedTree_1=affectedTree_1.set(new Path(pathString),node)})),this.applyOperationToSyncPoints_(new AckUserWrite(write.path,affectedTree_1,revert))}return[]},SyncTree.prototype.applyServerOverwrite=function(path,newData){return this.applyOperationToSyncPoints_(new Overwrite(OperationSource.Server,path,newData))},SyncTree.prototype.applyServerMerge=function(path,changedChildren){var changeTree=ImmutableTree.fromObject(changedChildren);return this.applyOperationToSyncPoints_(new Merge(OperationSource.Server,path,changeTree))},SyncTree.prototype.applyListenComplete=function(path){return this.applyOperationToSyncPoints_(new ListenComplete(OperationSource.Server,path))},SyncTree.prototype.applyTaggedQueryOverwrite=function(path,snap,tag){var queryKey=this.queryKeyForTag_(tag);if(null!=queryKey){var r=SyncTree.parseQueryKey_(queryKey),queryPath=r.path,queryId=r.queryId,relativePath=Path.relativePath(queryPath,path),op=new Overwrite(OperationSource.forServerTaggedQuery(queryId),relativePath,snap);return this.applyTaggedOperation_(queryPath,op)}return[]},SyncTree.prototype.applyTaggedQueryMerge=function(path,changedChildren,tag){var queryKey=this.queryKeyForTag_(tag);if(queryKey){var r=SyncTree.parseQueryKey_(queryKey),queryPath=r.path,queryId=r.queryId,relativePath=Path.relativePath(queryPath,path),changeTree=ImmutableTree.fromObject(changedChildren),op=new Merge(OperationSource.forServerTaggedQuery(queryId),relativePath,changeTree);return this.applyTaggedOperation_(queryPath,op)}return[]},SyncTree.prototype.applyTaggedListenComplete=function(path,tag){var queryKey=this.queryKeyForTag_(tag);if(queryKey){var r=SyncTree.parseQueryKey_(queryKey),queryPath=r.path,queryId=r.queryId,relativePath=Path.relativePath(queryPath,path),op=new ListenComplete(OperationSource.forServerTaggedQuery(queryId),relativePath);return this.applyTaggedOperation_(queryPath,op)}return[]},SyncTree.prototype.addEventRegistration=function(query,eventRegistration){var path=query.path,serverCache=null,foundAncestorDefaultView=!1;this.syncPointTree_.foreachOnPath(path,(function(pathToSyncPoint,sp){var relativePath=Path.relativePath(pathToSyncPoint,path);serverCache=serverCache||sp.getCompleteServerCache(relativePath),foundAncestorDefaultView=foundAncestorDefaultView||sp.hasCompleteView()}));var serverCacheComplete,syncPoint=this.syncPointTree_.get(path);syncPoint?(foundAncestorDefaultView=foundAncestorDefaultView||syncPoint.hasCompleteView(),serverCache=serverCache||syncPoint.getCompleteServerCache(Path.Empty)):(syncPoint=new SyncPoint,this.syncPointTree_=this.syncPointTree_.set(path,syncPoint)),null!=serverCache?serverCacheComplete=!0:(serverCacheComplete=!1,serverCache=ChildrenNode.EMPTY_NODE,this.syncPointTree_.subtree(path).foreachChild((function(childName,childSyncPoint){var completeCache=childSyncPoint.getCompleteServerCache(Path.Empty);completeCache&&(serverCache=serverCache.updateImmediateChild(childName,completeCache))})));var viewAlreadyExists=syncPoint.viewExistsForQuery(query);if(!viewAlreadyExists&&!query.getQueryParams().loadsAllData()){var queryKey=SyncTree.makeQueryKey_(query);util.assert(!this.queryToTagMap.has(queryKey),\"View does not exist, but we have a tag\");var tag=SyncTree.getNextQueryTag_();this.queryToTagMap.set(queryKey,tag),this.tagToQueryMap.set(tag,queryKey)}var writesCache=this.pendingWriteTree_.childWrites(path),events=syncPoint.addEventRegistration(query,eventRegistration,writesCache,serverCache,serverCacheComplete);if(!viewAlreadyExists&&!foundAncestorDefaultView){var view=syncPoint.viewForQuery(query);events=events.concat(this.setupListener_(query,view))}return events},SyncTree.prototype.removeEventRegistration=function(query,eventRegistration,cancelError){var _this=this,path=query.path,maybeSyncPoint=this.syncPointTree_.get(path),cancelEvents=[];if(maybeSyncPoint&&(\"default\"===query.queryIdentifier()||maybeSyncPoint.viewExistsForQuery(query))){var removedAndEvents=maybeSyncPoint.removeEventRegistration(query,eventRegistration,cancelError);maybeSyncPoint.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(path));var removed=removedAndEvents.removed;cancelEvents=removedAndEvents.events;var removingDefault=-1!==removed.findIndex((function(query){return query.getQueryParams().loadsAllData()})),covered=this.syncPointTree_.findOnPath(path,(function(relativePath,parentSyncPoint){return parentSyncPoint.hasCompleteView()}));if(removingDefault&&!covered){var subtree=this.syncPointTree_.subtree(path);if(!subtree.isEmpty())for(var newViews=this.collectDistinctViewsForSubTree_(subtree),i=0;i<newViews.length;++i){var view=newViews[i],newQuery=view.getQuery(),listener=this.createListenerForView_(view);this.listenProvider_.startListening(SyncTree.queryForListening_(newQuery),this.tagForQuery_(newQuery),listener.hashFn,listener.onComplete)}}!covered&&removed.length>0&&!cancelError&&(removingDefault?this.listenProvider_.stopListening(SyncTree.queryForListening_(query),null):removed.forEach((function(queryToRemove){var tagToRemove=_this.queryToTagMap.get(SyncTree.makeQueryKey_(queryToRemove));_this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToRemove),tagToRemove)}))),this.removeTags_(removed)}return cancelEvents},SyncTree.prototype.calcCompleteEventCache=function(path,writeIdsToExclude){var writeTree=this.pendingWriteTree_,serverCache=this.syncPointTree_.findOnPath(path,(function(pathSoFar,syncPoint){var relativePath=Path.relativePath(pathSoFar,path),serverCache=syncPoint.getCompleteServerCache(relativePath);if(serverCache)return serverCache}));return writeTree.calcCompleteEventCache(path,serverCache,writeIdsToExclude,!0)},SyncTree.prototype.collectDistinctViewsForSubTree_=function(subtree){return subtree.fold((function(relativePath,maybeChildSyncPoint,childMap){if(maybeChildSyncPoint&&maybeChildSyncPoint.hasCompleteView())return[maybeChildSyncPoint.getCompleteView()];var views_1=[];return maybeChildSyncPoint&&(views_1=maybeChildSyncPoint.getQueryViews()),each(childMap,(function(_key,childViews){views_1=views_1.concat(childViews)})),views_1}))},SyncTree.prototype.removeTags_=function(queries){for(var j=0;j<queries.length;++j){var removedQuery=queries[j];if(!removedQuery.getQueryParams().loadsAllData()){var removedQueryKey=SyncTree.makeQueryKey_(removedQuery),removedQueryTag=this.queryToTagMap.get(removedQueryKey);this.queryToTagMap.delete(removedQueryKey),this.tagToQueryMap.delete(removedQueryTag)}}},SyncTree.queryForListening_=function(query){return query.getQueryParams().loadsAllData()&&!query.getQueryParams().isDefault()?query.getRef():query},SyncTree.prototype.setupListener_=function(query,view){var path=query.path,tag=this.tagForQuery_(query),listener=this.createListenerForView_(view),events=this.listenProvider_.startListening(SyncTree.queryForListening_(query),tag,listener.hashFn,listener.onComplete),subtree=this.syncPointTree_.subtree(path);if(tag)util.assert(!subtree.value.hasCompleteView(),\"If we're adding a query, it shouldn't be shadowed\");else for(var queriesToStop=subtree.fold((function(relativePath,maybeChildSyncPoint,childMap){if(!relativePath.isEmpty()&&maybeChildSyncPoint&&maybeChildSyncPoint.hasCompleteView())return[maybeChildSyncPoint.getCompleteView().getQuery()];var queries_1=[];return maybeChildSyncPoint&&(queries_1=queries_1.concat(maybeChildSyncPoint.getQueryViews().map((function(view){return view.getQuery()})))),each(childMap,(function(_key,childQueries){queries_1=queries_1.concat(childQueries)})),queries_1})),i=0;i<queriesToStop.length;++i){var queryToStop=queriesToStop[i];this.listenProvider_.stopListening(SyncTree.queryForListening_(queryToStop),this.tagForQuery_(queryToStop))}return events},SyncTree.prototype.createListenerForView_=function(view){var _this=this,query=view.getQuery(),tag=this.tagForQuery_(query);return{hashFn:function(){return(view.getServerCache()||ChildrenNode.EMPTY_NODE).hash()},onComplete:function(status){if(\"ok\"===status)return tag?_this.applyTaggedListenComplete(query.path,tag):_this.applyListenComplete(query.path);var error=function(code,query){var reason=\"Unknown Error\";\"too_big\"===code?reason=\"The data requested exceeds the maximum size that can be accessed with a single request.\":\"permission_denied\"===code?reason=\"Client doesn't have permission to access the desired data.\":\"unavailable\"===code&&(reason=\"The service is unavailable\");var error=new Error(code+\" at \"+query.path.toString()+\": \"+reason);return error.code=code.toUpperCase(),error}(status,query);return _this.removeEventRegistration(query,null,error)}}},SyncTree.makeQueryKey_=function(query){return query.path.toString()+\"$\"+query.queryIdentifier()},SyncTree.parseQueryKey_=function(queryKey){var splitIndex=queryKey.indexOf(\"$\");return util.assert(-1!==splitIndex&&splitIndex<queryKey.length-1,\"Bad queryKey.\"),{queryId:queryKey.substr(splitIndex+1),path:new Path(queryKey.substr(0,splitIndex))}},SyncTree.prototype.queryKeyForTag_=function(tag){return this.tagToQueryMap.get(tag)},SyncTree.prototype.tagForQuery_=function(query){var queryKey=SyncTree.makeQueryKey_(query);return this.queryToTagMap.get(queryKey)},SyncTree.getNextQueryTag_=function(){return SyncTree.nextQueryTag_++},SyncTree.prototype.applyTaggedOperation_=function(queryPath,operation){var syncPoint=this.syncPointTree_.get(queryPath);util.assert(syncPoint,\"Missing sync point for query tag that we're tracking\");var writesCache=this.pendingWriteTree_.childWrites(queryPath);return syncPoint.applyOperation(operation,writesCache,null)},SyncTree.prototype.applyOperationToSyncPoints_=function(operation){return this.applyOperationHelper_(operation,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Path.Empty))},SyncTree.prototype.applyOperationHelper_=function(operation,syncPointTree,serverCache,writesCache){if(operation.path.isEmpty())return this.applyOperationDescendantsHelper_(operation,syncPointTree,serverCache,writesCache);var syncPoint=syncPointTree.get(Path.Empty);null==serverCache&&null!=syncPoint&&(serverCache=syncPoint.getCompleteServerCache(Path.Empty));var events=[],childName=operation.path.getFront(),childOperation=operation.operationForChild(childName),childTree=syncPointTree.children.get(childName);if(childTree&&childOperation){var childServerCache=serverCache?serverCache.getImmediateChild(childName):null,childWritesCache=writesCache.child(childName);events=events.concat(this.applyOperationHelper_(childOperation,childTree,childServerCache,childWritesCache))}return syncPoint&&(events=events.concat(syncPoint.applyOperation(operation,writesCache,serverCache))),events},SyncTree.prototype.applyOperationDescendantsHelper_=function(operation,syncPointTree,serverCache,writesCache){var _this=this,syncPoint=syncPointTree.get(Path.Empty);null==serverCache&&null!=syncPoint&&(serverCache=syncPoint.getCompleteServerCache(Path.Empty));var events=[];return syncPointTree.children.inorderTraversal((function(childName,childTree){var childServerCache=serverCache?serverCache.getImmediateChild(childName):null,childWritesCache=writesCache.child(childName),childOperation=operation.operationForChild(childName);childOperation&&(events=events.concat(_this.applyOperationDescendantsHelper_(childOperation,childTree,childServerCache,childWritesCache)))})),syncPoint&&(events=events.concat(syncPoint.applyOperation(operation,writesCache,serverCache))),events},SyncTree.nextQueryTag_=1,SyncTree}(),SnapshotHolder=function(){function SnapshotHolder(){this.rootNode_=ChildrenNode.EMPTY_NODE}return SnapshotHolder.prototype.getNode=function(path){return this.rootNode_.getChild(path)},SnapshotHolder.prototype.updateSnapshot=function(path,newSnapshotNode){this.rootNode_=this.rootNode_.updateChild(path,newSnapshotNode)},SnapshotHolder}(),StatsCollection=function(){function StatsCollection(){this.counters_={}}return StatsCollection.prototype.incrementCounter=function(name,amount){void 0===amount&&(amount=1),util.contains(this.counters_,name)||(this.counters_[name]=0),this.counters_[name]+=amount},StatsCollection.prototype.get=function(){return util.deepCopy(this.counters_)},StatsCollection}(),StatsManager=function(){function StatsManager(){}return StatsManager.getCollection=function(repoInfo){var hashString=repoInfo.toString();return this.collections_[hashString]||(this.collections_[hashString]=new StatsCollection),this.collections_[hashString]},StatsManager.getOrCreateReporter=function(repoInfo,creatorFunction){var hashString=repoInfo.toString();return this.reporters_[hashString]||(this.reporters_[hashString]=creatorFunction()),this.reporters_[hashString]},StatsManager.collections_={},StatsManager.reporters_={},StatsManager}(),StatsListener=function(){function StatsListener(collection_){this.collection_=collection_,this.last_=null}return StatsListener.prototype.get=function(){var newStats=this.collection_.get(),delta=tslib.__assign({},newStats);return this.last_&&each(this.last_,(function(stat,value){delta[stat]=delta[stat]-value})),this.last_=newStats,delta},StatsListener}(),StatsReporter=function(){function StatsReporter(collection,server_){this.server_=server_,this.statsToReport_={},this.statsListener_=new StatsListener(collection);var timeout=1e4+2e4*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(timeout))}return StatsReporter.prototype.includeStat=function(stat){this.statsToReport_[stat]=!0},StatsReporter.prototype.reportStats_=function(){var _this=this,stats=this.statsListener_.get(),reportedStats={},haveStatsToReport=!1;each(stats,(function(stat,value){value>0&&util.contains(_this.statsToReport_,stat)&&(reportedStats[stat]=value,haveStatsToReport=!0)})),haveStatsToReport&&this.server_.reportStats(reportedStats),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},StatsReporter}(),EventQueue=function(){function EventQueue(){this.eventLists_=[],this.recursionDepth_=0}return EventQueue.prototype.queueEvents=function(eventDataList){for(var currList=null,i=0;i<eventDataList.length;i++){var eventData=eventDataList[i],eventPath=eventData.getPath();null===currList||eventPath.equals(currList.getPath())||(this.eventLists_.push(currList),currList=null),null===currList&&(currList=new EventList(eventPath)),currList.add(eventData)}currList&&this.eventLists_.push(currList)},EventQueue.prototype.raiseEventsAtPath=function(path,eventDataList){this.queueEvents(eventDataList),this.raiseQueuedEventsMatchingPredicate_((function(eventPath){return eventPath.equals(path)}))},EventQueue.prototype.raiseEventsForChangedPath=function(changedPath,eventDataList){this.queueEvents(eventDataList),this.raiseQueuedEventsMatchingPredicate_((function(eventPath){return eventPath.contains(changedPath)||changedPath.contains(eventPath)}))},EventQueue.prototype.raiseQueuedEventsMatchingPredicate_=function(predicate){this.recursionDepth_++;for(var sentAll=!0,i=0;i<this.eventLists_.length;i++){var eventList=this.eventLists_[i];eventList&&(predicate(eventList.getPath())?(this.eventLists_[i].raise(),this.eventLists_[i]=null):sentAll=!1)}sentAll&&(this.eventLists_=[]),this.recursionDepth_--},EventQueue}(),EventList=function(){function EventList(path_){this.path_=path_,this.events_=[]}return EventList.prototype.add=function(eventData){this.events_.push(eventData)},EventList.prototype.raise=function(){for(var i=0;i<this.events_.length;i++){var eventData=this.events_[i];if(null!==eventData){this.events_[i]=null;var eventFn=eventData.getEventRunner();logger&&log(\"event: \"+eventData.toString()),exceptionGuard(eventFn)}}},EventList.prototype.getPath=function(){return this.path_},EventList}(),EventEmitter=function(){function EventEmitter(allowedEvents_){this.allowedEvents_=allowedEvents_,this.listeners_={},util.assert(Array.isArray(allowedEvents_)&&allowedEvents_.length>0,\"Requires a non-empty array\")}return EventEmitter.prototype.trigger=function(eventType){for(var varArgs=[],_i=1;_i<arguments.length;_i++)varArgs[_i-1]=arguments[_i];if(Array.isArray(this.listeners_[eventType]))for(var listeners=tslib.__spread(this.listeners_[eventType]),i=0;i<listeners.length;i++)listeners[i].callback.apply(listeners[i].context,varArgs)},EventEmitter.prototype.on=function(eventType,callback,context){this.validateEventType_(eventType),this.listeners_[eventType]=this.listeners_[eventType]||[],this.listeners_[eventType].push({callback:callback,context:context});var eventData=this.getInitialEvent(eventType);eventData&&callback.apply(context,eventData)},EventEmitter.prototype.off=function(eventType,callback,context){this.validateEventType_(eventType);for(var listeners=this.listeners_[eventType]||[],i=0;i<listeners.length;i++)if(listeners[i].callback===callback&&(!context||context===listeners[i].context))return void listeners.splice(i,1)},EventEmitter.prototype.validateEventType_=function(eventType){util.assert(this.allowedEvents_.find((function(et){return et===eventType})),\"Unknown event: \"+eventType)},EventEmitter}(),VisibilityMonitor=function(_super){function VisibilityMonitor(){var hidden,visibilityChange,_this=_super.call(this,[\"visible\"])||this;return\"undefined\"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(visibilityChange=\"visibilitychange\",hidden=\"hidden\"):void 0!==document.mozHidden?(visibilityChange=\"mozvisibilitychange\",hidden=\"mozHidden\"):void 0!==document.msHidden?(visibilityChange=\"msvisibilitychange\",hidden=\"msHidden\"):void 0!==document.webkitHidden&&(visibilityChange=\"webkitvisibilitychange\",hidden=\"webkitHidden\")),_this.visible_=!0,visibilityChange&&document.addEventListener(visibilityChange,(function(){var visible=!document[hidden];visible!==_this.visible_&&(_this.visible_=visible,_this.trigger(\"visible\",visible))}),!1),_this}return tslib.__extends(VisibilityMonitor,_super),VisibilityMonitor.getInstance=function(){return new VisibilityMonitor},VisibilityMonitor.prototype.getInitialEvent=function(eventType){return util.assert(\"visible\"===eventType,\"Unknown event type: \"+eventType),[this.visible_]},VisibilityMonitor}(EventEmitter),OnlineMonitor=function(_super){function OnlineMonitor(){var _this=_super.call(this,[\"online\"])||this;return _this.online_=!0,\"undefined\"==typeof window||void 0===window.addEventListener||util.isMobileCordova()||(window.addEventListener(\"online\",(function(){_this.online_||(_this.online_=!0,_this.trigger(\"online\",!0))}),!1),window.addEventListener(\"offline\",(function(){_this.online_&&(_this.online_=!1,_this.trigger(\"online\",!1))}),!1)),_this}return tslib.__extends(OnlineMonitor,_super),OnlineMonitor.getInstance=function(){return new OnlineMonitor},OnlineMonitor.prototype.getInitialEvent=function(eventType){return util.assert(\"online\"===eventType,\"Unknown event type: \"+eventType),[this.online_]},OnlineMonitor.prototype.currentlyOnline=function(){return this.online_},OnlineMonitor}(EventEmitter),PacketReceiver=function(){function PacketReceiver(onMessage_){this.onMessage_=onMessage_,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return PacketReceiver.prototype.closeAfter=function(responseNum,callback){this.closeAfterResponse=responseNum,this.onClose=callback,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},PacketReceiver.prototype.handleResponse=function(requestNum,data){var _this=this;this.pendingResponses[requestNum]=data;for(var _loop_1=function(){var toProcess=this_1.pendingResponses[this_1.currentResponseNum];delete this_1.pendingResponses[this_1.currentResponseNum];for(var _loop_2=function(i){toProcess[i]&&exceptionGuard((function(){_this.onMessage_(toProcess[i])}))},i=0;i<toProcess.length;++i)_loop_2(i);if(this_1.currentResponseNum===this_1.closeAfterResponse)return this_1.onClose&&(this_1.onClose(),this_1.onClose=null),\"break\";this_1.currentResponseNum++},this_1=this;this.pendingResponses[this.currentResponseNum]&&\"break\"!==_loop_1(););},PacketReceiver}(),BrowserPollConnection=function(){function BrowserPollConnection(connId,repoInfo,applicationId,transportSessionId,lastSessionId){this.connId=connId,this.repoInfo=repoInfo,this.applicationId=applicationId,this.transportSessionId=transportSessionId,this.lastSessionId=lastSessionId,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(connId),this.stats_=StatsManager.getCollection(repoInfo),this.urlFn=function(params){return repoInfo.connectionURL(\"long_polling\",params)}}return BrowserPollConnection.prototype.open=function(onMessage,onDisconnect){var _this=this;this.curSegmentNum=0,this.onDisconnect_=onDisconnect,this.myPacketOrderer=new PacketReceiver(onMessage),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){_this.log_(\"Timed out trying to connect.\"),_this.onClosed_(),_this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(fn){if(util.isNodeSdk()||\"complete\"===document.readyState)fn();else{var called_1=!1,wrappedFn_1=function(){document.body?called_1||(called_1=!0,fn()):setTimeout(wrappedFn_1,Math.floor(10))};document.addEventListener?(document.addEventListener(\"DOMContentLoaded\",wrappedFn_1,!1),window.addEventListener(\"load\",wrappedFn_1,!1)):document.attachEvent&&(document.attachEvent(\"onreadystatechange\",(function(){\"complete\"===document.readyState&&wrappedFn_1()})),window.attachEvent(\"onload\",wrappedFn_1))}}((function(){if(!_this.isClosed_){_this.scriptTagHolder=new FirebaseIFrameScriptHolder((function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var _a=tslib.__read(args,5),command=_a[0],arg1=_a[1],arg2=_a[2];if(_this.incrementIncomingBytes_(args),_this.scriptTagHolder)if(_this.connectTimeoutTimer_&&(clearTimeout(_this.connectTimeoutTimer_),_this.connectTimeoutTimer_=null),_this.everConnected_=!0,\"start\"===command)_this.id=arg1,_this.password=arg2;else{if(\"close\"!==command)throw new Error(\"Unrecognized command received: \"+command);arg1?(_this.scriptTagHolder.sendNewPolls=!1,_this.myPacketOrderer.closeAfter(arg1,(function(){_this.onClosed_()}))):_this.onClosed_()}}),(function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var _a=tslib.__read(args,2),pN=_a[0],data=_a[1];_this.incrementIncomingBytes_(args),_this.myPacketOrderer.handleResponse(pN,data)}),(function(){_this.onClosed_()}),_this.urlFn);var urlParams={start:\"t\"};urlParams.ser=Math.floor(1e8*Math.random()),_this.scriptTagHolder.uniqueCallbackIdentifier&&(urlParams.cb=_this.scriptTagHolder.uniqueCallbackIdentifier),urlParams.v=\"5\",_this.transportSessionId&&(urlParams.s=_this.transportSessionId),_this.lastSessionId&&(urlParams.ls=_this.lastSessionId),_this.applicationId&&(urlParams.p=_this.applicationId),\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(urlParams.r=\"f\");var connectURL=_this.urlFn(urlParams);_this.log_(\"Connecting via long-poll to \"+connectURL),_this.scriptTagHolder.addTag(connectURL,(function(){}))}}))},BrowserPollConnection.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},BrowserPollConnection.forceAllow=function(){BrowserPollConnection.forceAllow_=!0},BrowserPollConnection.forceDisallow=function(){BrowserPollConnection.forceDisallow_=!0},BrowserPollConnection.isAvailable=function(){return!(util.isNodeSdk()||!BrowserPollConnection.forceAllow_&&(BrowserPollConnection.forceDisallow_||\"undefined\"==typeof document||null==document.createElement||\"object\"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||\"object\"==typeof Windows&&\"object\"==typeof Windows.UI))},BrowserPollConnection.prototype.markConnectionHealthy=function(){},BrowserPollConnection.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},BrowserPollConnection.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"Longpoll is closing itself\"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},BrowserPollConnection.prototype.close=function(){this.isClosed_||(this.log_(\"Longpoll is being closed.\"),this.shutdown_())},BrowserPollConnection.prototype.send=function(data){var dataStr=util.stringify(data);this.bytesSent+=dataStr.length,this.stats_.incrementCounter(\"bytes_sent\",dataStr.length);for(var base64data=util.base64Encode(dataStr),dataSegs=splitStringBySize(base64data,1840),i=0;i<dataSegs.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,dataSegs.length,dataSegs[i]),this.curSegmentNum++},BrowserPollConnection.prototype.addDisconnectPingFrame=function(id,pw){if(!util.isNodeSdk()){this.myDisconnFrame=document.createElement(\"iframe\");var urlParams={dframe:\"t\"};urlParams.id=id,urlParams.pw=pw,this.myDisconnFrame.src=this.urlFn(urlParams),this.myDisconnFrame.style.display=\"none\",document.body.appendChild(this.myDisconnFrame)}},BrowserPollConnection.prototype.incrementIncomingBytes_=function(args){var bytesReceived=util.stringify(args).length;this.bytesReceived+=bytesReceived,this.stats_.incrementCounter(\"bytes_received\",bytesReceived)},BrowserPollConnection}(),FirebaseIFrameScriptHolder=function(){function FirebaseIFrameScriptHolder(commandCB,onMessageCB,onDisconnect,urlFn){if(this.onDisconnect=onDisconnect,this.urlFn=urlFn,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,util.isNodeSdk())this.commandCB=commandCB,this.onMessageCB=onMessageCB;else{this.uniqueCallbackIdentifier=LUIDGenerator(),window[\"pLPCommand\"+this.uniqueCallbackIdentifier]=commandCB,window[\"pRTLPCB\"+this.uniqueCallbackIdentifier]=onMessageCB,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();var script=\"\";this.myIFrame.src&&\"javascript:\"===this.myIFrame.src.substr(0,\"javascript:\".length)&&(script='<script>document.domain=\"'+document.domain+'\";<\\/script>');var iframeContents=\"<html><body>\"+script+\"</body></html>\";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(iframeContents),this.myIFrame.doc.close()}catch(e){log(\"frame writing exception\"),e.stack&&log(e.stack),log(e)}}}return FirebaseIFrameScriptHolder.createIFrame_=function(){var iframe=document.createElement(\"iframe\");if(iframe.style.display=\"none\",!document.body)throw\"Document body has not initialized. Wait to initialize Firebase until after the document is ready.\";document.body.appendChild(iframe);try{iframe.contentWindow.document||log(\"No IE domain setting required\")}catch(e){var domain=document.domain;iframe.src=\"javascript:void((function(){document.open();document.domain='\"+domain+\"';document.close();})())\"}return iframe.contentDocument?iframe.doc=iframe.contentDocument:iframe.contentWindow?iframe.doc=iframe.contentWindow.document:iframe.document&&(iframe.doc=iframe.document),iframe},FirebaseIFrameScriptHolder.prototype.close=function(){var _this=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML=\"\",setTimeout((function(){null!==_this.myIFrame&&(document.body.removeChild(_this.myIFrame),_this.myIFrame=null)}),Math.floor(0)));var onDisconnect=this.onDisconnect;onDisconnect&&(this.onDisconnect=null,onDisconnect())},FirebaseIFrameScriptHolder.prototype.startLongPoll=function(id,pw){for(this.myID=id,this.myPW=pw,this.alive=!0;this.newRequest_(););},FirebaseIFrameScriptHolder.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var urlParams={};urlParams.id=this.myID,urlParams.pw=this.myPW,urlParams.ser=this.currentSerial;for(var theURL=this.urlFn(urlParams),curDataString=\"\",i=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+curDataString.length<=1870;){var theSeg=this.pendingSegs.shift();curDataString=curDataString+\"&seg\"+i+\"=\"+theSeg.seg+\"&ts\"+i+\"=\"+theSeg.ts+\"&d\"+i+\"=\"+theSeg.d,i++}return this.addLongPollTag_(theURL+=curDataString,this.currentSerial),!0}return!1},FirebaseIFrameScriptHolder.prototype.enqueueSegment=function(segnum,totalsegs,data){this.pendingSegs.push({seg:segnum,ts:totalsegs,d:data}),this.alive&&this.newRequest_()},FirebaseIFrameScriptHolder.prototype.addLongPollTag_=function(url,serial){var _this=this;this.outstandingRequests.add(serial);var doNewRequest=function(){_this.outstandingRequests.delete(serial),_this.newRequest_()},keepaliveTimeout=setTimeout(doNewRequest,Math.floor(25e3));this.addTag(url,(function(){clearTimeout(keepaliveTimeout),doNewRequest()}))},FirebaseIFrameScriptHolder.prototype.addTag=function(url,loadCB){var _this=this;util.isNodeSdk()?this.doNodeLongPoll(url,loadCB):setTimeout((function(){try{if(!_this.sendNewPolls)return;var newScript_1=_this.myIFrame.doc.createElement(\"script\");newScript_1.type=\"text/javascript\",newScript_1.async=!0,newScript_1.src=url,newScript_1.onload=newScript_1.onreadystatechange=function(){var rstate=newScript_1.readyState;rstate&&\"loaded\"!==rstate&&\"complete\"!==rstate||(newScript_1.onload=newScript_1.onreadystatechange=null,newScript_1.parentNode&&newScript_1.parentNode.removeChild(newScript_1),loadCB())},newScript_1.onerror=function(){log(\"Long-poll script failed to load: \"+url),_this.sendNewPolls=!1,_this.close()},_this.myIFrame.doc.body.appendChild(newScript_1)}catch(e){}}),Math.floor(1))},FirebaseIFrameScriptHolder}(),SDK_VERSION=\"\",WebSocketImpl=null;\"undefined\"!=typeof MozWebSocket?WebSocketImpl=MozWebSocket:\"undefined\"!=typeof WebSocket&&(WebSocketImpl=WebSocket);var WebSocketConnection=function(){function WebSocketConnection(connId,repoInfo,applicationId,transportSessionId,lastSessionId){this.connId=connId,this.applicationId=applicationId,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=StatsManager.getCollection(repoInfo),this.connURL=WebSocketConnection.connectionURL_(repoInfo,transportSessionId,lastSessionId),this.nodeAdmin=repoInfo.nodeAdmin}return WebSocketConnection.connectionURL_=function(repoInfo,transportSessionId,lastSessionId){var urlParams={v:\"5\"};return!util.isNodeSdk()&&\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(urlParams.r=\"f\"),transportSessionId&&(urlParams.s=transportSessionId),lastSessionId&&(urlParams.ls=lastSessionId),repoInfo.connectionURL(\"websocket\",urlParams)},WebSocketConnection.prototype.open=function(onMessage,onDisconnect){var _this=this;this.onDisconnect=onDisconnect,this.onMessage=onMessage,this.log_(\"Websocket connecting to \"+this.connURL),this.everConnected_=!1,PersistentStorage.set(\"previous_websocket_failure\",!0);try{if(util.isNodeSdk()){var options={headers:{\"User-Agent\":\"Firebase/5/\"+SDK_VERSION+\"/\"+process.platform+\"/\"+(this.nodeAdmin?\"AdminNode\":\"Node\"),\"X-Firebase-GMPID\":this.applicationId||\"\"}},env=process.env,proxy=0===this.connURL.indexOf(\"wss://\")?env.HTTPS_PROXY||env.https_proxy:env.HTTP_PROXY||env.http_proxy;proxy&&(options.proxy={origin:proxy}),this.mySock=new WebSocketImpl(this.connURL,[],options)}else this.mySock=new WebSocketImpl(this.connURL,[],options={headers:{\"X-Firebase-GMPID\":this.applicationId||\"\"}})}catch(e){this.log_(\"Error instantiating WebSocket.\");var error=e.message||e.data;return error&&this.log_(error),void this.onClosed_()}this.mySock.onopen=function(){_this.log_(\"Websocket connected.\"),_this.everConnected_=!0},this.mySock.onclose=function(){_this.log_(\"Websocket connection was disconnected.\"),_this.mySock=null,_this.onClosed_()},this.mySock.onmessage=function(m){_this.handleIncomingFrame(m)},this.mySock.onerror=function(e){_this.log_(\"WebSocket error.  Closing connection.\");var error=e.message||e.data;error&&_this.log_(error),_this.onClosed_()}},WebSocketConnection.prototype.start=function(){},WebSocketConnection.forceDisallow=function(){WebSocketConnection.forceDisallow_=!0},WebSocketConnection.isAvailable=function(){var isOldAndroid=!1;if(\"undefined\"!=typeof navigator&&navigator.userAgent){var oldAndroidMatch=navigator.userAgent.match(/Android ([0-9]{0,}\\.[0-9]{0,})/);oldAndroidMatch&&oldAndroidMatch.length>1&&parseFloat(oldAndroidMatch[1])<4.4&&(isOldAndroid=!0)}return!isOldAndroid&&null!==WebSocketImpl&&!WebSocketConnection.forceDisallow_},WebSocketConnection.previouslyFailed=function(){return PersistentStorage.isInMemoryStorage||!0===PersistentStorage.get(\"previous_websocket_failure\")},WebSocketConnection.prototype.markConnectionHealthy=function(){PersistentStorage.remove(\"previous_websocket_failure\")},WebSocketConnection.prototype.appendFrame_=function(data){if(this.frames.push(data),this.frames.length===this.totalFrames){var fullMess=this.frames.join(\"\");this.frames=null;var jsonMess=util.jsonEval(fullMess);this.onMessage(jsonMess)}},WebSocketConnection.prototype.handleNewFrameCount_=function(frameCount){this.totalFrames=frameCount,this.frames=[]},WebSocketConnection.prototype.extractFrameCount_=function(data){if(util.assert(null===this.frames,\"We already have a frame buffer\"),data.length<=6){var frameCount=Number(data);if(!isNaN(frameCount))return this.handleNewFrameCount_(frameCount),null}return this.handleNewFrameCount_(1),data},WebSocketConnection.prototype.handleIncomingFrame=function(mess){if(null!==this.mySock){var data=mess.data;if(this.bytesReceived+=data.length,this.stats_.incrementCounter(\"bytes_received\",data.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(data);else{var remainingData=this.extractFrameCount_(data);null!==remainingData&&this.appendFrame_(remainingData)}}},WebSocketConnection.prototype.send=function(data){this.resetKeepAlive();var dataStr=util.stringify(data);this.bytesSent+=dataStr.length,this.stats_.incrementCounter(\"bytes_sent\",dataStr.length);var dataSegs=splitStringBySize(dataStr,16384);dataSegs.length>1&&this.sendString_(String(dataSegs.length));for(var i=0;i<dataSegs.length;i++)this.sendString_(dataSegs[i])},WebSocketConnection.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},WebSocketConnection.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"WebSocket is closing itself\"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},WebSocketConnection.prototype.close=function(){this.isClosed_||(this.log_(\"WebSocket is being closed\"),this.shutdown_())},WebSocketConnection.prototype.resetKeepAlive=function(){var _this=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){_this.mySock&&_this.sendString_(\"0\"),_this.resetKeepAlive()}),Math.floor(45e3))},WebSocketConnection.prototype.sendString_=function(str){try{this.mySock.send(str)}catch(e){this.log_(\"Exception thrown from WebSocket.send():\",e.message||e.data,\"Closing connection.\"),setTimeout(this.onClosed_.bind(this),0)}},WebSocketConnection.responsesRequiredToBeHealthy=2,WebSocketConnection.healthyTimeout=3e4,WebSocketConnection}(),TransportManager=function(){function TransportManager(repoInfo){this.initTransports_(repoInfo)}return Object.defineProperty(TransportManager,\"ALL_TRANSPORTS\",{get:function(){return[BrowserPollConnection,WebSocketConnection]},enumerable:!1,configurable:!0}),TransportManager.prototype.initTransports_=function(repoInfo){var e_1,_a,isWebSocketsAvailable=WebSocketConnection&&WebSocketConnection.isAvailable(),isSkipPollConnection=isWebSocketsAvailable&&!WebSocketConnection.previouslyFailed();if(repoInfo.webSocketOnly&&(isWebSocketsAvailable||warn(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"),isSkipPollConnection=!0),isSkipPollConnection)this.transports_=[WebSocketConnection];else{var transports=this.transports_=[];try{for(var _b=tslib.__values(TransportManager.ALL_TRANSPORTS),_c=_b.next();!_c.done;_c=_b.next()){var transport=_c.value;transport&&transport.isAvailable()&&transports.push(transport)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}},TransportManager.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error(\"No transports available\")},TransportManager.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},TransportManager}(),Connection=function(){function Connection(id,repoInfo_,applicationId_,onMessage_,onReady_,onDisconnect_,onKill_,lastSessionId){this.id=id,this.repoInfo_=repoInfo_,this.applicationId_=applicationId_,this.onMessage_=onMessage_,this.onReady_=onReady_,this.onDisconnect_=onDisconnect_,this.onKill_=onKill_,this.lastSessionId=lastSessionId,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper(\"c:\"+this.id+\":\"),this.transportManager_=new TransportManager(repoInfo_),this.log_(\"Connection created\"),this.start_()}return Connection.prototype.start_=function(){var _this=this,conn=this.transportManager_.initialTransport();this.conn_=new conn(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=conn.responsesRequiredToBeHealthy||0;var onMessageReceived=this.connReceiver_(this.conn_),onConnectionLost=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){_this.conn_&&_this.conn_.open(onMessageReceived,onConnectionLost)}),Math.floor(0));var healthyTimeoutMS=conn.healthyTimeout||0;healthyTimeoutMS>0&&(this.healthyTimeout_=setTimeoutNonBlocking((function(){_this.healthyTimeout_=null,_this.isHealthy_||(_this.conn_&&_this.conn_.bytesReceived>102400?(_this.log_(\"Connection exceeded healthy timeout but has received \"+_this.conn_.bytesReceived+\" bytes.  Marking connection healthy.\"),_this.isHealthy_=!0,_this.conn_.markConnectionHealthy()):_this.conn_&&_this.conn_.bytesSent>10240?_this.log_(\"Connection exceeded healthy timeout but has sent \"+_this.conn_.bytesSent+\" bytes.  Leaving connection alive.\"):(_this.log_(\"Closing unhealthy connection after timeout.\"),_this.close()))}),Math.floor(healthyTimeoutMS)))},Connection.prototype.nextTransportId_=function(){return\"c:\"+this.id+\":\"+this.connectionCount++},Connection.prototype.disconnReceiver_=function(conn){var _this=this;return function(everConnected){conn===_this.conn_?_this.onConnectionLost_(everConnected):conn===_this.secondaryConn_?(_this.log_(\"Secondary connection lost.\"),_this.onSecondaryConnectionLost_()):_this.log_(\"closing an old connection\")}},Connection.prototype.connReceiver_=function(conn){var _this=this;return function(message){2!==_this.state_&&(conn===_this.rx_?_this.onPrimaryMessageReceived_(message):conn===_this.secondaryConn_?_this.onSecondaryMessageReceived_(message):_this.log_(\"message on old connection\"))}},Connection.prototype.sendRequest=function(dataMsg){this.sendData_({t:\"d\",d:dataMsg})},Connection.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(\"cleaning up and promoting a connection: \"+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Connection.prototype.onSecondaryControl_=function(controlData){if(\"t\"in controlData){var cmd=controlData.t;\"a\"===cmd?this.upgradeIfSecondaryHealthy_():\"r\"===cmd?(this.log_(\"Got a reset on secondary, closing it\"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):\"o\"===cmd&&(this.log_(\"got pong on secondary.\"),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},Connection.prototype.onSecondaryMessageReceived_=function(parsedData){var layer=requireKey(\"t\",parsedData),data=requireKey(\"d\",parsedData);if(\"c\"===layer)this.onSecondaryControl_(data);else{if(\"d\"!==layer)throw new Error(\"Unknown protocol layer: \"+layer);this.pendingDataMessages.push(data)}},Connection.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_(\"Secondary connection is healthy.\"),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(\"sending ping on secondary.\"),this.secondaryConn_.send({t:\"c\",d:{t:\"p\",d:{}}}))},Connection.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_(\"sending client ack on secondary\"),this.secondaryConn_.send({t:\"c\",d:{t:\"a\",d:{}}}),this.log_(\"Ending transmission on primary\"),this.conn_.send({t:\"c\",d:{t:\"n\",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Connection.prototype.onPrimaryMessageReceived_=function(parsedData){var layer=requireKey(\"t\",parsedData),data=requireKey(\"d\",parsedData);\"c\"===layer?this.onControl_(data):\"d\"===layer&&this.onDataMessage_(data)},Connection.prototype.onDataMessage_=function(message){this.onPrimaryResponse_(),this.onMessage_(message)},Connection.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Connection.prototype.onControl_=function(controlData){var cmd=requireKey(\"t\",controlData);if(\"d\"in controlData){var payload=controlData.d;if(\"h\"===cmd)this.onHandshake_(payload);else if(\"n\"===cmd){this.log_(\"recvd end transmission on primary\"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else\"s\"===cmd?this.onConnectionShutdown_(payload):\"r\"===cmd?this.onReset_(payload):\"e\"===cmd?error(\"Server Error: \"+payload):\"o\"===cmd?(this.log_(\"got pong on primary.\"),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error(\"Unknown control packet command: \"+cmd)}},Connection.prototype.onHandshake_=function(handshake){var timestamp=handshake.ts,version=handshake.v,host=handshake.h;this.sessionId=handshake.s,this.repoInfo_.updateHost(host),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,timestamp),\"5\"!==version&&warn(\"Protocol version mismatch detected\"),this.tryStartUpgrade_())},Connection.prototype.tryStartUpgrade_=function(){var conn=this.transportManager_.upgradeTransport();conn&&this.startUpgrade_(conn)},Connection.prototype.startUpgrade_=function(conn){var _this=this;this.secondaryConn_=new conn(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=conn.responsesRequiredToBeHealthy||0;var onMessage=this.connReceiver_(this.secondaryConn_),onDisconnect=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(onMessage,onDisconnect),setTimeoutNonBlocking((function(){_this.secondaryConn_&&(_this.log_(\"Timed out trying to upgrade.\"),_this.secondaryConn_.close())}),Math.floor(6e4))},Connection.prototype.onReset_=function(host){this.log_(\"Reset packet received.  New host: \"+host),this.repoInfo_.updateHost(host),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Connection.prototype.onConnectionEstablished_=function(conn,timestamp){var _this=this;this.log_(\"Realtime connection established.\"),this.conn_=conn,this.state_=1,this.onReady_&&(this.onReady_(timestamp,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0):setTimeoutNonBlocking((function(){_this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},Connection.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_(\"sending ping on primary.\"),this.sendData_({t:\"c\",d:{t:\"p\",d:{}}}))},Connection.prototype.onSecondaryConnectionLost_=function(){var conn=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==conn&&this.rx_!==conn||this.close()},Connection.prototype.onConnectionLost_=function(everConnected){this.conn_=null,everConnected||0!==this.state_?1===this.state_&&this.log_(\"Realtime connection lost.\"):(this.log_(\"Realtime connection failed.\"),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove(\"host:\"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Connection.prototype.onConnectionShutdown_=function(reason){this.log_(\"Connection shutdown command received. Shutting down...\"),this.onKill_&&(this.onKill_(reason),this.onKill_=null),this.onDisconnect_=null,this.close()},Connection.prototype.sendData_=function(data){if(1!==this.state_)throw\"Connection is not connected\";this.tx_.send(data)},Connection.prototype.close=function(){2!==this.state_&&(this.log_(\"Closing realtime connection.\"),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Connection.prototype.closeConnections_=function(){this.log_(\"Shutting down all connections\"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Connection}(),ServerActions=function(){function ServerActions(){}return ServerActions.prototype.put=function(pathString,data,onComplete,hash){},ServerActions.prototype.merge=function(pathString,data,onComplete,hash){},ServerActions.prototype.refreshAuthToken=function(token){},ServerActions.prototype.onDisconnectPut=function(pathString,data,onComplete){},ServerActions.prototype.onDisconnectMerge=function(pathString,data,onComplete){},ServerActions.prototype.onDisconnectCancel=function(pathString,onComplete){},ServerActions.prototype.reportStats=function(stats){},ServerActions}(),PersistentConnection=function(_super){function PersistentConnection(repoInfo_,applicationId_,onDataUpdate_,onConnectStatus_,onServerInfoUpdate_,authTokenProvider_,authOverride_){var _this=_super.call(this)||this;if(_this.repoInfo_=repoInfo_,_this.applicationId_=applicationId_,_this.onDataUpdate_=onDataUpdate_,_this.onConnectStatus_=onConnectStatus_,_this.onServerInfoUpdate_=onServerInfoUpdate_,_this.authTokenProvider_=authTokenProvider_,_this.authOverride_=authOverride_,_this.id=PersistentConnection.nextPersistentConnectionId_++,_this.log_=logWrapper(\"p:\"+_this.id+\":\"),_this.interruptReasons_={},_this.listens=new Map,_this.outstandingPuts_=[],_this.outstandingPutCount_=0,_this.onDisconnectRequestQueue_=[],_this.connected_=!1,_this.reconnectDelay_=1e3,_this.maxReconnectDelay_=3e5,_this.securityDebugCallback_=null,_this.lastSessionId=null,_this.establishConnectionTimer_=null,_this.visible_=!1,_this.requestCBHash_={},_this.requestNumber_=0,_this.realtime_=null,_this.authToken_=null,_this.forceTokenRefresh_=!1,_this.invalidAuthTokenCount_=0,_this.firstConnection_=!0,_this.lastConnectionAttemptTime_=null,_this.lastConnectionEstablishedTime_=null,authOverride_&&!util.isNodeSdk())throw new Error(\"Auth override specified in options, but not supported on non Node.js platforms\");return _this.scheduleConnect_(0),VisibilityMonitor.getInstance().on(\"visible\",_this.onVisible_,_this),-1===repoInfo_.host.indexOf(\"fblocal\")&&OnlineMonitor.getInstance().on(\"online\",_this.onOnline_,_this),_this}return tslib.__extends(PersistentConnection,_super),PersistentConnection.prototype.sendRequest=function(action,body,onResponse){var curReqNum=++this.requestNumber_,msg={r:curReqNum,a:action,b:body};this.log_(util.stringify(msg)),util.assert(this.connected_,\"sendRequest call when we're not connected not allowed.\"),this.realtime_.sendRequest(msg),onResponse&&(this.requestCBHash_[curReqNum]=onResponse)},PersistentConnection.prototype.listen=function(query,currentHashFn,tag,onComplete){var queryId=query.queryIdentifier(),pathString=query.path.toString();this.log_(\"Listen called for \"+pathString+\" \"+queryId),this.listens.has(pathString)||this.listens.set(pathString,new Map),util.assert(query.getQueryParams().isDefault()||!query.getQueryParams().loadsAllData(),\"listen() called for non-default but complete query\"),util.assert(!this.listens.get(pathString).has(queryId),\"listen() called twice for same path/queryId.\");var listenSpec={onComplete:onComplete,hashFn:currentHashFn,query:query,tag:tag};this.listens.get(pathString).set(queryId,listenSpec),this.connected_&&this.sendListen_(listenSpec)},PersistentConnection.prototype.sendListen_=function(listenSpec){var _this=this,query=listenSpec.query,pathString=query.path.toString(),queryId=query.queryIdentifier();this.log_(\"Listen on \"+pathString+\" for \"+queryId);var req={p:pathString};listenSpec.tag&&(req.q=query.queryObject(),req.t=listenSpec.tag),req.h=listenSpec.hashFn(),this.sendRequest(\"q\",req,(function(message){var payload=message.d,status=message.s;PersistentConnection.warnOnListenWarnings_(payload,query),(_this.listens.get(pathString)&&_this.listens.get(pathString).get(queryId))===listenSpec&&(_this.log_(\"listen response\",message),\"ok\"!==status&&_this.removeListen_(pathString,queryId),listenSpec.onComplete&&listenSpec.onComplete(status,payload))}))},PersistentConnection.warnOnListenWarnings_=function(payload,query){if(payload&&\"object\"==typeof payload&&util.contains(payload,\"w\")){var warnings=util.safeGet(payload,\"w\");if(Array.isArray(warnings)&&~warnings.indexOf(\"no_index\")){var indexSpec='\".indexOn\": \"'+query.getQueryParams().getIndex().toString()+'\"',indexPath=query.path.toString();warn(\"Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding \"+indexSpec+\" at \"+indexPath+\" to your security rules for better performance.\")}}},PersistentConnection.prototype.refreshAuthToken=function(token){this.authToken_=token,this.log_(\"Auth token refreshed\"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(\"unauth\",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(token)},PersistentConnection.prototype.reduceReconnectDelayIfAdminCredential_=function(credential){(credential&&40===credential.length||util.isAdmin(credential))&&(this.log_(\"Admin auth credential detected.  Reducing max reconnect time.\"),this.maxReconnectDelay_=3e4)},PersistentConnection.prototype.tryAuth=function(){var _this=this;if(this.connected_&&this.authToken_){var token_1=this.authToken_,authMethod=util.isValidFormat(token_1)?\"auth\":\"gauth\",requestData={cred:token_1};null===this.authOverride_?requestData.noauth=!0:\"object\"==typeof this.authOverride_&&(requestData.authvar=this.authOverride_),this.sendRequest(authMethod,requestData,(function(res){var status=res.s,data=res.d||\"error\";_this.authToken_===token_1&&(\"ok\"===status?_this.invalidAuthTokenCount_=0:_this.onAuthRevoked_(status,data))}))}},PersistentConnection.prototype.unlisten=function(query,tag){var pathString=query.path.toString(),queryId=query.queryIdentifier();this.log_(\"Unlisten called for \"+pathString+\" \"+queryId),util.assert(query.getQueryParams().isDefault()||!query.getQueryParams().loadsAllData(),\"unlisten() called for non-default but complete query\"),this.removeListen_(pathString,queryId)&&this.connected_&&this.sendUnlisten_(pathString,queryId,query.queryObject(),tag)},PersistentConnection.prototype.sendUnlisten_=function(pathString,queryId,queryObj,tag){this.log_(\"Unlisten on \"+pathString+\" for \"+queryId);var req={p:pathString};tag&&(req.q=queryObj,req.t=tag),this.sendRequest(\"n\",req)},PersistentConnection.prototype.onDisconnectPut=function(pathString,data,onComplete){this.connected_?this.sendOnDisconnect_(\"o\",pathString,data,onComplete):this.onDisconnectRequestQueue_.push({pathString:pathString,action:\"o\",data:data,onComplete:onComplete})},PersistentConnection.prototype.onDisconnectMerge=function(pathString,data,onComplete){this.connected_?this.sendOnDisconnect_(\"om\",pathString,data,onComplete):this.onDisconnectRequestQueue_.push({pathString:pathString,action:\"om\",data:data,onComplete:onComplete})},PersistentConnection.prototype.onDisconnectCancel=function(pathString,onComplete){this.connected_?this.sendOnDisconnect_(\"oc\",pathString,null,onComplete):this.onDisconnectRequestQueue_.push({pathString:pathString,action:\"oc\",data:null,onComplete:onComplete})},PersistentConnection.prototype.sendOnDisconnect_=function(action,pathString,data,onComplete){var request={p:pathString,d:data};this.log_(\"onDisconnect \"+action,request),this.sendRequest(action,request,(function(response){onComplete&&setTimeout((function(){onComplete(response.s,response.d)}),Math.floor(0))}))},PersistentConnection.prototype.put=function(pathString,data,onComplete,hash){this.putInternal(\"p\",pathString,data,onComplete,hash)},PersistentConnection.prototype.merge=function(pathString,data,onComplete,hash){this.putInternal(\"m\",pathString,data,onComplete,hash)},PersistentConnection.prototype.putInternal=function(action,pathString,data,onComplete,hash){var request={p:pathString,d:data};void 0!==hash&&(request.h=hash),this.outstandingPuts_.push({action:action,request:request,onComplete:onComplete}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_(\"Buffering put: \"+pathString)},PersistentConnection.prototype.sendPut_=function(index){var _this=this,action=this.outstandingPuts_[index].action,request=this.outstandingPuts_[index].request,onComplete=this.outstandingPuts_[index].onComplete;this.outstandingPuts_[index].queued=this.connected_,this.sendRequest(action,request,(function(message){_this.log_(action+\" response\",message),delete _this.outstandingPuts_[index],_this.outstandingPutCount_--,0===_this.outstandingPutCount_&&(_this.outstandingPuts_=[]),onComplete&&onComplete(message.s,message.d)}))},PersistentConnection.prototype.reportStats=function(stats){var _this=this;if(this.connected_){var request={c:stats};this.log_(\"reportStats\",request),this.sendRequest(\"s\",request,(function(result){\"ok\"!==result.s&&_this.log_(\"reportStats\",\"Error sending stats: \"+result.d)}))}},PersistentConnection.prototype.onDataMessage_=function(message){if(\"r\"in message){this.log_(\"from server: \"+util.stringify(message));var reqNum=message.r,onResponse=this.requestCBHash_[reqNum];onResponse&&(delete this.requestCBHash_[reqNum],onResponse(message.b))}else{if(\"error\"in message)throw\"A server-side error has occurred: \"+message.error;\"a\"in message&&this.onDataPush_(message.a,message.b)}},PersistentConnection.prototype.onDataPush_=function(action,body){this.log_(\"handleServerMessage\",action,body),\"d\"===action?this.onDataUpdate_(body.p,body.d,!1,body.t):\"m\"===action?this.onDataUpdate_(body.p,body.d,!0,body.t):\"c\"===action?this.onListenRevoked_(body.p,body.q):\"ac\"===action?this.onAuthRevoked_(body.s,body.d):\"sd\"===action?this.onSecurityDebugPacket_(body):error(\"Unrecognized action received from server: \"+util.stringify(action)+\"\\nAre you using the latest client?\")},PersistentConnection.prototype.onReady_=function(timestamp,sessionId){this.log_(\"connection ready\"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(timestamp),this.lastSessionId=sessionId,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},PersistentConnection.prototype.scheduleConnect_=function(timeout){var _this=this;util.assert(!this.realtime_,\"Scheduling a connect when we're already connected/ing?\"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){_this.establishConnectionTimer_=null,_this.establishConnection_()}),Math.floor(timeout))},PersistentConnection.prototype.onVisible_=function(visible){visible&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(\"Window became visible.  Reducing delay.\"),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=visible},PersistentConnection.prototype.onOnline_=function(online){online?(this.log_(\"Browser went online.\"),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_(\"Browser went offline.  Killing connection.\"),this.realtime_&&this.realtime_.close())},PersistentConnection.prototype.onRealtimeDisconnect_=function(){if(this.log_(\"data client disconnected\"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_(\"Window isn't visible.  Delaying reconnect.\"),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var timeSinceLastConnectAttempt=(new Date).getTime()-this.lastConnectionAttemptTime_,reconnectDelay=Math.max(0,this.reconnectDelay_-timeSinceLastConnectAttempt);reconnectDelay=Math.random()*reconnectDelay,this.log_(\"Trying to reconnect in \"+reconnectDelay+\"ms\"),this.scheduleConnect_(reconnectDelay),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},PersistentConnection.prototype.establishConnection_=function(){var _this=this;if(this.shouldReconnect_()){this.log_(\"Making a connection attempt\"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var onDataMessage_1=this.onDataMessage_.bind(this),onReady_1=this.onReady_.bind(this),onDisconnect_1=this.onRealtimeDisconnect_.bind(this),connId_1=this.id+\":\"+PersistentConnection.nextConnectionId_++,self_1=this,lastSessionId_1=this.lastSessionId,canceled_1=!1,connection_1=null,closeFn_1=function(){connection_1?connection_1.close():(canceled_1=!0,onDisconnect_1())};this.realtime_={close:closeFn_1,sendRequest:function(msg){util.assert(connection_1,\"sendRequest call when we're not connected not allowed.\"),connection_1.sendRequest(msg)}};var forceRefresh=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(forceRefresh).then((function(result){canceled_1?log(\"getToken() completed but was canceled\"):(log(\"getToken() completed. Creating connection.\"),self_1.authToken_=result&&result.accessToken,connection_1=new Connection(connId_1,self_1.repoInfo_,self_1.applicationId_,onDataMessage_1,onReady_1,onDisconnect_1,(function(reason){warn(reason+\" (\"+self_1.repoInfo_.toString()+\")\"),self_1.interrupt(\"server_kill\")}),lastSessionId_1))})).then(null,(function(error){self_1.log_(\"Failed to get token: \"+error),canceled_1||(_this.repoInfo_.nodeAdmin&&warn(error),closeFn_1())}))}},PersistentConnection.prototype.interrupt=function(reason){log(\"Interrupting connection for reason: \"+reason),this.interruptReasons_[reason]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},PersistentConnection.prototype.resume=function(reason){log(\"Resuming connection for reason: \"+reason),delete this.interruptReasons_[reason],util.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},PersistentConnection.prototype.handleTimestamp_=function(timestamp){var delta=timestamp-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:delta})},PersistentConnection.prototype.cancelSentTransactions_=function(){for(var i=0;i<this.outstandingPuts_.length;i++){var put=this.outstandingPuts_[i];put&&\"h\"in put.request&&put.queued&&(put.onComplete&&put.onComplete(\"disconnect\"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},PersistentConnection.prototype.onListenRevoked_=function(pathString,query){var queryId;queryId=query?query.map((function(q){return ObjectToUniqueKey(q)})).join(\"$\"):\"default\";var listen=this.removeListen_(pathString,queryId);listen&&listen.onComplete&&listen.onComplete(\"permission_denied\")},PersistentConnection.prototype.removeListen_=function(pathString,queryId){var listen,normalizedPathString=new Path(pathString).toString();if(this.listens.has(normalizedPathString)){var map=this.listens.get(normalizedPathString);listen=map.get(queryId),map.delete(queryId),0===map.size&&this.listens.delete(normalizedPathString)}else listen=void 0;return listen},PersistentConnection.prototype.onAuthRevoked_=function(statusCode,explanation){log(\"Auth token revoked: \"+statusCode+\"/\"+explanation),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),\"invalid_token\"!==statusCode&&\"permission_denied\"!==statusCode||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},PersistentConnection.prototype.onSecurityDebugPacket_=function(body){this.securityDebugCallback_?this.securityDebugCallback_(body):\"msg\"in body&&console.log(\"FIREBASE: \"+body.msg.replace(\"\\n\",\"\\nFIREBASE: \"))},PersistentConnection.prototype.restoreState_=function(){var e_1,_a,e_2,_b;this.tryAuth();try{for(var _c=tslib.__values(this.listens.values()),_d=_c.next();!_d.done;_d=_c.next()){var queries=_d.value;try{for(var _e=(e_2=void 0,tslib.__values(queries.values())),_f=_e.next();!_f.done;_f=_e.next())this.sendListen_(_f.value)}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_2)throw e_2.error}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}for(var i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){var request=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(request.action,request.pathString,request.data,request.onComplete)}},PersistentConnection.prototype.sendConnectStats_=function(){var stats={},clientName=\"js\";util.isNodeSdk()&&(clientName=this.repoInfo_.nodeAdmin?\"admin_node\":\"node\"),stats[\"sdk.\"+clientName+\".\"+SDK_VERSION.replace(/\\./g,\"-\")]=1,util.isMobileCordova()?stats[\"framework.cordova\"]=1:util.isReactNative()&&(stats[\"framework.reactnative\"]=1),this.reportStats(stats)},PersistentConnection.prototype.shouldReconnect_=function(){var online=OnlineMonitor.getInstance().currentlyOnline();return util.isEmpty(this.interruptReasons_)&&online},PersistentConnection.nextPersistentConnectionId_=0,PersistentConnection.nextConnectionId_=0,PersistentConnection}(ServerActions),ReadonlyRestClient=function(_super){function ReadonlyRestClient(repoInfo_,onDataUpdate_,authTokenProvider_){var _this=_super.call(this)||this;return _this.repoInfo_=repoInfo_,_this.onDataUpdate_=onDataUpdate_,_this.authTokenProvider_=authTokenProvider_,_this.log_=logWrapper(\"p:rest:\"),_this.listens_={},_this}return tslib.__extends(ReadonlyRestClient,_super),ReadonlyRestClient.prototype.reportStats=function(stats){throw new Error(\"Method not implemented.\")},ReadonlyRestClient.getListenId_=function(query,tag){return void 0!==tag?\"tag$\"+tag:(util.assert(query.getQueryParams().isDefault(),\"should have a tag if it's not a default query.\"),query.path.toString())},ReadonlyRestClient.prototype.listen=function(query,currentHashFn,tag,onComplete){var _this=this,pathString=query.path.toString();this.log_(\"Listen called for \"+pathString+\" \"+query.queryIdentifier());var listenId=ReadonlyRestClient.getListenId_(query,tag),thisListen={};this.listens_[listenId]=thisListen;var queryStringParameters=query.getQueryParams().toRestQueryStringParameters();this.restRequest_(pathString+\".json\",queryStringParameters,(function(error,result){var data=result;404===error&&(data=null,error=null),null===error&&_this.onDataUpdate_(pathString,data,!1,tag),util.safeGet(_this.listens_,listenId)===thisListen&&onComplete(error?401===error?\"permission_denied\":\"rest_error:\"+error:\"ok\",null)}))},ReadonlyRestClient.prototype.unlisten=function(query,tag){var listenId=ReadonlyRestClient.getListenId_(query,tag);delete this.listens_[listenId]},ReadonlyRestClient.prototype.refreshAuthToken=function(token){},ReadonlyRestClient.prototype.restRequest_=function(pathString,queryStringParameters,callback){var _this=this;void 0===queryStringParameters&&(queryStringParameters={}),queryStringParameters.format=\"export\",this.authTokenProvider_.getToken(!1).then((function(authTokenData){var authToken=authTokenData&&authTokenData.accessToken;authToken&&(queryStringParameters.auth=authToken);var url=(_this.repoInfo_.secure?\"https://\":\"http://\")+_this.repoInfo_.host+pathString+\"?ns=\"+_this.repoInfo_.namespace+util.querystring(queryStringParameters);_this.log_(\"Sending REST request for \"+url);var xhr=new XMLHttpRequest;xhr.onreadystatechange=function(){if(callback&&4===xhr.readyState){_this.log_(\"REST Response for \"+url+\" received. status:\",xhr.status,\"response:\",xhr.responseText);var res=null;if(xhr.status>=200&&xhr.status<300){try{res=util.jsonEval(xhr.responseText)}catch(e){warn(\"Failed to parse JSON response for \"+url+\": \"+xhr.responseText)}callback(null,res)}else 401!==xhr.status&&404!==xhr.status&&warn(\"Got unsuccessful REST response for \"+url+\" Status: \"+xhr.status),callback(xhr.status);callback=null}},xhr.open(\"GET\",url,!0),xhr.send()}))},ReadonlyRestClient}(ServerActions),Repo=function(){function Repo(repoInfo_,forceRestClient,app,authTokenProvider){var _this=this;if(this.repoInfo_=repoInfo_,this.app=app,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new SparseSnapshotTree,this.persistentConnection_=null,this.stats_=StatsManager.getCollection(repoInfo_),forceRestClient||(\"object\"==typeof window&&window.navigator&&window.navigator.userAgent||\"\").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new ReadonlyRestClient(this.repoInfo_,this.onDataUpdate_.bind(this),authTokenProvider),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var authOverride=app.options.databaseAuthVariableOverride;if(null!=authOverride){if(\"object\"!=typeof authOverride)throw new Error(\"Only objects are supported for option databaseAuthVariableOverride\");try{util.stringify(authOverride)}catch(e){throw new Error(\"Invalid authOverride provided: \"+e)}}this.persistentConnection_=new PersistentConnection(this.repoInfo_,app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),authTokenProvider,authOverride),this.server_=this.persistentConnection_}authTokenProvider.addTokenChangeListener((function(token){_this.server_.refreshAuthToken(token)})),this.statsReporter_=StatsManager.getOrCreateReporter(repoInfo_,(function(){return new StatsReporter(_this.stats_,_this.server_)})),this.transactionsInit_(),this.infoData_=new SnapshotHolder,this.infoSyncTree_=new SyncTree({startListening:function(query,tag,currentHashFn,onComplete){var infoEvents=[],node=_this.infoData_.getNode(query.path);return node.isEmpty()||(infoEvents=_this.infoSyncTree_.applyServerOverwrite(query.path,node),setTimeout((function(){onComplete(\"ok\")}),0)),infoEvents},stopListening:function(){}}),this.updateInfo_(\"connected\",!1),this.serverSyncTree_=new SyncTree({startListening:function(query,tag,currentHashFn,onComplete){return _this.server_.listen(query,currentHashFn,tag,(function(status,data){var events=onComplete(status,data);_this.eventQueue_.raiseEventsForChangedPath(query.path,events)})),[]},stopListening:function(query,tag){_this.server_.unlisten(query,tag)}})}return Repo.prototype.toString=function(){return(this.repoInfo_.secure?\"https://\":\"http://\")+this.repoInfo_.host},Repo.prototype.name=function(){return this.repoInfo_.namespace},Repo.prototype.serverTime=function(){var offset=this.infoData_.getNode(new Path(\".info/serverTimeOffset\")).val()||0;return(new Date).getTime()+offset},Repo.prototype.generateServerValues=function(){return(values=(values={timestamp:this.serverTime()})||{}).timestamp=values.timestamp||(new Date).getTime(),values;var values},Repo.prototype.onDataUpdate_=function(pathString,data,isMerge,tag){this.dataUpdateCount++;var path=new Path(pathString);data=this.interceptServerDataCallback_?this.interceptServerDataCallback_(pathString,data):data;var events=[];if(tag)if(isMerge){var taggedChildren=util.map(data,(function(raw){return nodeFromJSON$1(raw)}));events=this.serverSyncTree_.applyTaggedQueryMerge(path,taggedChildren,tag)}else{var taggedSnap=nodeFromJSON$1(data);events=this.serverSyncTree_.applyTaggedQueryOverwrite(path,taggedSnap,tag)}else if(isMerge){var changedChildren=util.map(data,(function(raw){return nodeFromJSON$1(raw)}));events=this.serverSyncTree_.applyServerMerge(path,changedChildren)}else{var snap=nodeFromJSON$1(data);events=this.serverSyncTree_.applyServerOverwrite(path,snap)}var affectedPath=path;events.length>0&&(affectedPath=this.rerunTransactions_(path)),this.eventQueue_.raiseEventsForChangedPath(affectedPath,events)},Repo.prototype.interceptServerData_=function(callback){this.interceptServerDataCallback_=callback},Repo.prototype.onConnectStatus_=function(connectStatus){this.updateInfo_(\"connected\",connectStatus),!1===connectStatus&&this.runOnDisconnectEvents_()},Repo.prototype.onServerInfoUpdate_=function(updates){var _this=this;each(updates,(function(key,value){_this.updateInfo_(key,value)}))},Repo.prototype.updateInfo_=function(pathString,value){var path=new Path(\"/.info/\"+pathString),newNode=nodeFromJSON$1(value);this.infoData_.updateSnapshot(path,newNode);var events=this.infoSyncTree_.applyServerOverwrite(path,newNode);this.eventQueue_.raiseEventsForChangedPath(path,events)},Repo.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Repo.prototype.setWithPriority=function(path,newVal,newPriority,onComplete){var _this=this;this.log_(\"set\",{path:path.toString(),value:newVal,priority:newPriority});var serverValues=this.generateServerValues(),newNodeUnresolved=nodeFromJSON$1(newVal,newPriority),existing=this.serverSyncTree_.calcCompleteEventCache(path),newNode=resolveDeferredValueSnapshot(newNodeUnresolved,existing,serverValues),writeId=this.getNextWriteId_(),events=this.serverSyncTree_.applyUserOverwrite(path,newNode,writeId,!0);this.eventQueue_.queueEvents(events),this.server_.put(path.toString(),newNodeUnresolved.val(!0),(function(status,errorReason){var success=\"ok\"===status;success||warn(\"set at \"+path+\" failed: \"+status);var clearEvents=_this.serverSyncTree_.ackUserWrite(writeId,!success);_this.eventQueue_.raiseEventsForChangedPath(path,clearEvents),_this.callOnCompleteCallback(onComplete,status,errorReason)}));var affectedPath=this.abortTransactions_(path);this.rerunTransactions_(affectedPath),this.eventQueue_.raiseEventsForChangedPath(affectedPath,[])},Repo.prototype.update=function(path,childrenToMerge,onComplete){var _this=this;this.log_(\"update\",{path:path.toString(),value:childrenToMerge});var empty=!0,serverValues=this.generateServerValues(),changedChildren={};if(each(childrenToMerge,(function(changedKey,changedValue){empty=!1,changedChildren[changedKey]=resolveDeferredValueTree(path.child(changedKey),nodeFromJSON$1(changedValue),_this.serverSyncTree_,serverValues)})),empty)log(\"update() called with empty data.  Don't do anything.\"),this.callOnCompleteCallback(onComplete,\"ok\");else{var writeId_1=this.getNextWriteId_(),events=this.serverSyncTree_.applyUserMerge(path,changedChildren,writeId_1);this.eventQueue_.queueEvents(events),this.server_.merge(path.toString(),childrenToMerge,(function(status,errorReason){var success=\"ok\"===status;success||warn(\"update at \"+path+\" failed: \"+status);var clearEvents=_this.serverSyncTree_.ackUserWrite(writeId_1,!success),affectedPath=clearEvents.length>0?_this.rerunTransactions_(path):path;_this.eventQueue_.raiseEventsForChangedPath(affectedPath,clearEvents),_this.callOnCompleteCallback(onComplete,status,errorReason)})),each(childrenToMerge,(function(changedPath){var affectedPath=_this.abortTransactions_(path.child(changedPath));_this.rerunTransactions_(affectedPath)})),this.eventQueue_.raiseEventsForChangedPath(path,[])}},Repo.prototype.runOnDisconnectEvents_=function(){var _this=this;this.log_(\"onDisconnectEvents\");var serverValues=this.generateServerValues(),resolvedOnDisconnectTree=new SparseSnapshotTree;this.onDisconnect_.forEachTree(Path.Empty,(function(path,node){var resolved=resolveDeferredValueTree(path,node,_this.serverSyncTree_,serverValues);resolvedOnDisconnectTree.remember(path,resolved)}));var events=[];resolvedOnDisconnectTree.forEachTree(Path.Empty,(function(path,snap){events=events.concat(_this.serverSyncTree_.applyServerOverwrite(path,snap));var affectedPath=_this.abortTransactions_(path);_this.rerunTransactions_(affectedPath)})),this.onDisconnect_=new SparseSnapshotTree,this.eventQueue_.raiseEventsForChangedPath(Path.Empty,events)},Repo.prototype.onDisconnectCancel=function(path,onComplete){var _this=this;this.server_.onDisconnectCancel(path.toString(),(function(status,errorReason){\"ok\"===status&&_this.onDisconnect_.forget(path),_this.callOnCompleteCallback(onComplete,status,errorReason)}))},Repo.prototype.onDisconnectSet=function(path,value,onComplete){var _this=this,newNode=nodeFromJSON$1(value);this.server_.onDisconnectPut(path.toString(),newNode.val(!0),(function(status,errorReason){\"ok\"===status&&_this.onDisconnect_.remember(path,newNode),_this.callOnCompleteCallback(onComplete,status,errorReason)}))},Repo.prototype.onDisconnectSetWithPriority=function(path,value,priority,onComplete){var _this=this,newNode=nodeFromJSON$1(value,priority);this.server_.onDisconnectPut(path.toString(),newNode.val(!0),(function(status,errorReason){\"ok\"===status&&_this.onDisconnect_.remember(path,newNode),_this.callOnCompleteCallback(onComplete,status,errorReason)}))},Repo.prototype.onDisconnectUpdate=function(path,childrenToMerge,onComplete){var _this=this;if(util.isEmpty(childrenToMerge))return log(\"onDisconnect().update() called with empty data.  Don't do anything.\"),void this.callOnCompleteCallback(onComplete,\"ok\");this.server_.onDisconnectMerge(path.toString(),childrenToMerge,(function(status,errorReason){\"ok\"===status&&each(childrenToMerge,(function(childName,childNode){var newChildNode=nodeFromJSON$1(childNode);_this.onDisconnect_.remember(path.child(childName),newChildNode)})),_this.callOnCompleteCallback(onComplete,status,errorReason)}))},Repo.prototype.addEventCallbackForQuery=function(query,eventRegistration){var events;events=\".info\"===query.path.getFront()?this.infoSyncTree_.addEventRegistration(query,eventRegistration):this.serverSyncTree_.addEventRegistration(query,eventRegistration),this.eventQueue_.raiseEventsAtPath(query.path,events)},Repo.prototype.removeEventCallbackForQuery=function(query,eventRegistration){var events;events=\".info\"===query.path.getFront()?this.infoSyncTree_.removeEventRegistration(query,eventRegistration):this.serverSyncTree_.removeEventRegistration(query,eventRegistration),this.eventQueue_.raiseEventsAtPath(query.path,events)},Repo.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(\"repo_interrupt\")},Repo.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(\"repo_interrupt\")},Repo.prototype.stats=function(showDelta){if(void 0===showDelta&&(showDelta=!1),\"undefined\"!=typeof console){var stats;showDelta?(this.statsListener_||(this.statsListener_=new StatsListener(this.stats_)),stats=this.statsListener_.get()):stats=this.stats_.get();var longestName=Object.keys(stats).reduce((function(previousValue,currentValue){return Math.max(currentValue.length,previousValue)}),0);each(stats,(function(stat,value){for(var paddedStat=stat,i=stat.length;i<longestName+2;i++)paddedStat+=\" \";console.log(paddedStat+value)}))}},Repo.prototype.statsIncrementCounter=function(metric){this.stats_.incrementCounter(metric),this.statsReporter_.includeStat(metric)},Repo.prototype.log_=function(){for(var varArgs=[],_i=0;_i<arguments.length;_i++)varArgs[_i]=arguments[_i];var prefix=\"\";this.persistentConnection_&&(prefix=this.persistentConnection_.id+\":\"),log.apply(void 0,tslib.__spread([prefix],varArgs))},Repo.prototype.callOnCompleteCallback=function(callback,status,errorReason){callback&&exceptionGuard((function(){if(\"ok\"===status)callback(null);else{var code=(status||\"error\").toUpperCase(),message=code;errorReason&&(message+=\": \"+errorReason);var error=new Error(message);error.code=code,callback(error)}}))},Object.defineProperty(Repo.prototype,\"database\",{get:function(){return this.__database||(this.__database=new Database(this))},enumerable:!1,configurable:!0}),Repo}(),RangedFilter=function(){function RangedFilter(params){this.indexedFilter_=new IndexedFilter(params.getIndex()),this.index_=params.getIndex(),this.startPost_=RangedFilter.getStartPost_(params),this.endPost_=RangedFilter.getEndPost_(params)}return RangedFilter.prototype.getStartPost=function(){return this.startPost_},RangedFilter.prototype.getEndPost=function(){return this.endPost_},RangedFilter.prototype.matches=function(node){return this.index_.compare(this.getStartPost(),node)<=0&&this.index_.compare(node,this.getEndPost())<=0},RangedFilter.prototype.updateChild=function(snap,key,newChild,affectedPath,source,optChangeAccumulator){return this.matches(new NamedNode(key,newChild))||(newChild=ChildrenNode.EMPTY_NODE),this.indexedFilter_.updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator)},RangedFilter.prototype.updateFullNode=function(oldSnap,newSnap,optChangeAccumulator){newSnap.isLeafNode()&&(newSnap=ChildrenNode.EMPTY_NODE);var filtered=newSnap.withIndex(this.index_);filtered=filtered.updatePriority(ChildrenNode.EMPTY_NODE);var self=this;return newSnap.forEachChild(PRIORITY_INDEX,(function(key,childNode){self.matches(new NamedNode(key,childNode))||(filtered=filtered.updateImmediateChild(key,ChildrenNode.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(oldSnap,filtered,optChangeAccumulator)},RangedFilter.prototype.updatePriority=function(oldSnap,newPriority){return oldSnap},RangedFilter.prototype.filtersNodes=function(){return!0},RangedFilter.prototype.getIndexedFilter=function(){return this.indexedFilter_},RangedFilter.prototype.getIndex=function(){return this.index_},RangedFilter.getStartPost_=function(params){if(params.hasStart()){var startName=params.getIndexStartName();return params.getIndex().makePost(params.getIndexStartValue(),startName)}return params.getIndex().minPost()},RangedFilter.getEndPost_=function(params){if(params.hasEnd()){var endName=params.getIndexEndName();return params.getIndex().makePost(params.getIndexEndValue(),endName)}return params.getIndex().maxPost()},RangedFilter}(),LimitedFilter=function(){function LimitedFilter(params){this.rangedFilter_=new RangedFilter(params),this.index_=params.getIndex(),this.limit_=params.getLimit(),this.reverse_=!params.isViewFromLeft()}return LimitedFilter.prototype.updateChild=function(snap,key,newChild,affectedPath,source,optChangeAccumulator){return this.rangedFilter_.matches(new NamedNode(key,newChild))||(newChild=ChildrenNode.EMPTY_NODE),snap.getImmediateChild(key).equals(newChild)?snap:snap.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(snap,key,newChild,affectedPath,source,optChangeAccumulator):this.fullLimitUpdateChild_(snap,key,newChild,source,optChangeAccumulator)},LimitedFilter.prototype.updateFullNode=function(oldSnap,newSnap,optChangeAccumulator){var filtered;if(newSnap.isLeafNode()||newSnap.isEmpty())filtered=ChildrenNode.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<newSnap.numChildren()&&newSnap.isIndexed(this.index_)){filtered=ChildrenNode.EMPTY_NODE.withIndex(this.index_);var iterator=void 0;iterator=this.reverse_?newSnap.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):newSnap.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var count=0;iterator.hasNext()&&count<this.limit_;){var next=iterator.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),next)<=0:this.index_.compare(next,this.rangedFilter_.getEndPost())<=0))break;filtered=filtered.updateImmediateChild(next.name,next.node),count++}}else{filtered=(filtered=newSnap.withIndex(this.index_)).updatePriority(ChildrenNode.EMPTY_NODE);var startPost=void 0,endPost=void 0,cmp=void 0;if(iterator=void 0,this.reverse_){iterator=filtered.getReverseIterator(this.index_),startPost=this.rangedFilter_.getEndPost(),endPost=this.rangedFilter_.getStartPost();var indexCompare_1=this.index_.getCompare();cmp=function(a,b){return indexCompare_1(b,a)}}else iterator=filtered.getIterator(this.index_),startPost=this.rangedFilter_.getStartPost(),endPost=this.rangedFilter_.getEndPost(),cmp=this.index_.getCompare();count=0;for(var foundStartPost=!1;iterator.hasNext();)next=iterator.getNext(),!foundStartPost&&cmp(startPost,next)<=0&&(foundStartPost=!0),foundStartPost&&count<this.limit_&&cmp(next,endPost)<=0?count++:filtered=filtered.updateImmediateChild(next.name,ChildrenNode.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(oldSnap,filtered,optChangeAccumulator)},LimitedFilter.prototype.updatePriority=function(oldSnap,newPriority){return oldSnap},LimitedFilter.prototype.filtersNodes=function(){return!0},LimitedFilter.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},LimitedFilter.prototype.getIndex=function(){return this.index_},LimitedFilter.prototype.fullLimitUpdateChild_=function(snap,childKey,childSnap,source,changeAccumulator){var cmp;if(this.reverse_){var indexCmp_1=this.index_.getCompare();cmp=function(a,b){return indexCmp_1(b,a)}}else cmp=this.index_.getCompare();var oldEventCache=snap;util.assert(oldEventCache.numChildren()===this.limit_,\"\");var newChildNamedNode=new NamedNode(childKey,childSnap),windowBoundary=this.reverse_?oldEventCache.getFirstChild(this.index_):oldEventCache.getLastChild(this.index_),inRange=this.rangedFilter_.matches(newChildNamedNode);if(oldEventCache.hasChild(childKey)){for(var oldChildSnap=oldEventCache.getImmediateChild(childKey),nextChild=source.getChildAfterChild(this.index_,windowBoundary,this.reverse_);null!=nextChild&&(nextChild.name===childKey||oldEventCache.hasChild(nextChild.name));)nextChild=source.getChildAfterChild(this.index_,nextChild,this.reverse_);var compareNext=null==nextChild?1:cmp(nextChild,newChildNamedNode);if(inRange&&!childSnap.isEmpty()&&compareNext>=0)return null!=changeAccumulator&&changeAccumulator.trackChildChange(Change.childChangedChange(childKey,childSnap,oldChildSnap)),oldEventCache.updateImmediateChild(childKey,childSnap);null!=changeAccumulator&&changeAccumulator.trackChildChange(Change.childRemovedChange(childKey,oldChildSnap));var newEventCache=oldEventCache.updateImmediateChild(childKey,ChildrenNode.EMPTY_NODE);return null!=nextChild&&this.rangedFilter_.matches(nextChild)?(null!=changeAccumulator&&changeAccumulator.trackChildChange(Change.childAddedChange(nextChild.name,nextChild.node)),newEventCache.updateImmediateChild(nextChild.name,nextChild.node)):newEventCache}return childSnap.isEmpty()?snap:inRange&&cmp(windowBoundary,newChildNamedNode)>=0?(null!=changeAccumulator&&(changeAccumulator.trackChildChange(Change.childRemovedChange(windowBoundary.name,windowBoundary.node)),changeAccumulator.trackChildChange(Change.childAddedChange(childKey,childSnap))),oldEventCache.updateImmediateChild(childKey,childSnap).updateImmediateChild(windowBoundary.name,ChildrenNode.EMPTY_NODE)):snap},LimitedFilter}(),QueryParams=function(){function QueryParams(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_=\"\",this.indexStartValue_=null,this.indexStartName_=\"\",this.indexEndValue_=null,this.indexEndName_=\"\",this.index_=PRIORITY_INDEX}return QueryParams.prototype.hasStart=function(){return this.startSet_},QueryParams.prototype.isViewFromLeft=function(){return\"\"===this.viewFrom_?this.startSet_:this.viewFrom_===QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},QueryParams.prototype.getIndexStartValue=function(){return util.assert(this.startSet_,\"Only valid if start has been set\"),this.indexStartValue_},QueryParams.prototype.getIndexStartName=function(){return util.assert(this.startSet_,\"Only valid if start has been set\"),this.startNameSet_?this.indexStartName_:MIN_NAME},QueryParams.prototype.hasEnd=function(){return this.endSet_},QueryParams.prototype.getIndexEndValue=function(){return util.assert(this.endSet_,\"Only valid if end has been set\"),this.indexEndValue_},QueryParams.prototype.getIndexEndName=function(){return util.assert(this.endSet_,\"Only valid if end has been set\"),this.endNameSet_?this.indexEndName_:MAX_NAME},QueryParams.prototype.hasLimit=function(){return this.limitSet_},QueryParams.prototype.hasAnchoredLimit=function(){return this.limitSet_&&\"\"!==this.viewFrom_},QueryParams.prototype.getLimit=function(){return util.assert(this.limitSet_,\"Only valid if limit has been set\"),this.limit_},QueryParams.prototype.getIndex=function(){return this.index_},QueryParams.prototype.copy_=function(){var copy=new QueryParams;return copy.limitSet_=this.limitSet_,copy.limit_=this.limit_,copy.startSet_=this.startSet_,copy.indexStartValue_=this.indexStartValue_,copy.startNameSet_=this.startNameSet_,copy.indexStartName_=this.indexStartName_,copy.endSet_=this.endSet_,copy.indexEndValue_=this.indexEndValue_,copy.endNameSet_=this.endNameSet_,copy.indexEndName_=this.indexEndName_,copy.index_=this.index_,copy.viewFrom_=this.viewFrom_,copy},QueryParams.prototype.limit=function(newLimit){var newParams=this.copy_();return newParams.limitSet_=!0,newParams.limit_=newLimit,newParams.viewFrom_=\"\",newParams},QueryParams.prototype.limitToFirst=function(newLimit){var newParams=this.copy_();return newParams.limitSet_=!0,newParams.limit_=newLimit,newParams.viewFrom_=QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,newParams},QueryParams.prototype.limitToLast=function(newLimit){var newParams=this.copy_();return newParams.limitSet_=!0,newParams.limit_=newLimit,newParams.viewFrom_=QueryParams.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,newParams},QueryParams.prototype.startAt=function(indexValue,key){var newParams=this.copy_();return newParams.startSet_=!0,void 0===indexValue&&(indexValue=null),newParams.indexStartValue_=indexValue,null!=key?(newParams.startNameSet_=!0,newParams.indexStartName_=key):(newParams.startNameSet_=!1,newParams.indexStartName_=\"\"),newParams},QueryParams.prototype.endAt=function(indexValue,key){var newParams=this.copy_();return newParams.endSet_=!0,void 0===indexValue&&(indexValue=null),newParams.indexEndValue_=indexValue,void 0!==key?(newParams.endNameSet_=!0,newParams.indexEndName_=key):(newParams.endNameSet_=!1,newParams.indexEndName_=\"\"),newParams},QueryParams.prototype.orderBy=function(index){var newParams=this.copy_();return newParams.index_=index,newParams},QueryParams.prototype.getQueryObject=function(){var WIRE_PROTOCOL_CONSTANTS=QueryParams.WIRE_PROTOCOL_CONSTANTS_,obj={};if(this.startSet_&&(obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(obj[WIRE_PROTOCOL_CONSTANTS.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(obj[WIRE_PROTOCOL_CONSTANTS.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){obj[WIRE_PROTOCOL_CONSTANTS.LIMIT]=this.limit_;var viewFrom=this.viewFrom_;\"\"===viewFrom&&(viewFrom=this.isViewFromLeft()?WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_LEFT:WIRE_PROTOCOL_CONSTANTS.VIEW_FROM_RIGHT),obj[WIRE_PROTOCOL_CONSTANTS.VIEW_FROM]=viewFrom}return this.index_!==PRIORITY_INDEX&&(obj[WIRE_PROTOCOL_CONSTANTS.INDEX]=this.index_.toString()),obj},QueryParams.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},QueryParams.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX},QueryParams.prototype.getNodeFilter=function(){return this.loadsAllData()?new IndexedFilter(this.getIndex()):this.hasLimit()?new LimitedFilter(this):new RangedFilter(this)},QueryParams.prototype.toRestQueryStringParameters=function(){var orderBy,REST_CONSTANTS=QueryParams.REST_QUERY_CONSTANTS_,qs={};return this.isDefault()||(this.index_===PRIORITY_INDEX?orderBy=REST_CONSTANTS.PRIORITY_INDEX:this.index_===VALUE_INDEX?orderBy=REST_CONSTANTS.VALUE_INDEX:this.index_===KEY_INDEX?orderBy=REST_CONSTANTS.KEY_INDEX:(util.assert(this.index_ instanceof PathIndex,\"Unrecognized index type!\"),orderBy=this.index_.toString()),qs[REST_CONSTANTS.ORDER_BY]=util.stringify(orderBy),this.startSet_&&(qs[REST_CONSTANTS.START_AT]=util.stringify(this.indexStartValue_),this.startNameSet_&&(qs[REST_CONSTANTS.START_AT]+=\",\"+util.stringify(this.indexStartName_))),this.endSet_&&(qs[REST_CONSTANTS.END_AT]=util.stringify(this.indexEndValue_),this.endNameSet_&&(qs[REST_CONSTANTS.END_AT]+=\",\"+util.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?qs[REST_CONSTANTS.LIMIT_TO_FIRST]=this.limit_:qs[REST_CONSTANTS.LIMIT_TO_LAST]=this.limit_)),qs},QueryParams.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:\"sp\",INDEX_START_NAME:\"sn\",INDEX_END_VALUE:\"ep\",INDEX_END_NAME:\"en\",LIMIT:\"l\",VIEW_FROM:\"vf\",VIEW_FROM_LEFT:\"l\",VIEW_FROM_RIGHT:\"r\",INDEX:\"i\"},QueryParams.REST_QUERY_CONSTANTS_={ORDER_BY:\"orderBy\",PRIORITY_INDEX:\"$priority\",VALUE_INDEX:\"$value\",KEY_INDEX:\"$key\",START_AT:\"startAt\",END_AT:\"endAt\",LIMIT_TO_FIRST:\"limitToFirst\",LIMIT_TO_LAST:\"limitToLast\"},QueryParams.DEFAULT=new QueryParams,QueryParams}(),Reference=function(_super){function Reference(repo,path){if(!(repo instanceof Repo))throw new Error(\"new Reference() no longer supported - use app.database().\");return _super.call(this,repo,path,QueryParams.DEFAULT,!1)||this}return tslib.__extends(Reference,_super),Reference.prototype.getKey=function(){return util.validateArgCount(\"Reference.key\",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Reference.prototype.child=function(pathString){return util.validateArgCount(\"Reference.child\",1,1,arguments.length),\"number\"==typeof pathString?pathString=String(pathString):pathString instanceof Path||(null===this.path.getFront()?validateRootPathString(\"Reference.child\",1,pathString,!1):validatePathString(\"Reference.child\",1,pathString,!1)),new Reference(this.repo,this.path.child(pathString))},Reference.prototype.getParent=function(){util.validateArgCount(\"Reference.parent\",0,0,arguments.length);var parentPath=this.path.parent();return null===parentPath?null:new Reference(this.repo,parentPath)},Reference.prototype.getRoot=function(){util.validateArgCount(\"Reference.root\",0,0,arguments.length);for(var ref=this;null!==ref.getParent();)ref=ref.getParent();return ref},Reference.prototype.databaseProp=function(){return this.repo.database},Reference.prototype.set=function(newVal,onComplete){util.validateArgCount(\"Reference.set\",1,2,arguments.length),validateWritablePath(\"Reference.set\",this.path),validateFirebaseDataArg(\"Reference.set\",1,newVal,this.path,!1),util.validateCallback(\"Reference.set\",2,onComplete,!0);var deferred=new util.Deferred;return this.repo.setWithPriority(this.path,newVal,null,deferred.wrapCallback(onComplete)),deferred.promise},Reference.prototype.update=function(objectToMerge,onComplete){if(util.validateArgCount(\"Reference.update\",1,2,arguments.length),validateWritablePath(\"Reference.update\",this.path),Array.isArray(objectToMerge)){for(var newObjectToMerge={},i=0;i<objectToMerge.length;++i)newObjectToMerge[\"\"+i]=objectToMerge[i];objectToMerge=newObjectToMerge,warn(\"Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}validateFirebaseMergeDataArg(\"Reference.update\",1,objectToMerge,this.path,!1),util.validateCallback(\"Reference.update\",2,onComplete,!0);var deferred=new util.Deferred;return this.repo.update(this.path,objectToMerge,deferred.wrapCallback(onComplete)),deferred.promise},Reference.prototype.setWithPriority=function(newVal,newPriority,onComplete){if(util.validateArgCount(\"Reference.setWithPriority\",2,3,arguments.length),validateWritablePath(\"Reference.setWithPriority\",this.path),validateFirebaseDataArg(\"Reference.setWithPriority\",1,newVal,this.path,!1),validatePriority(\"Reference.setWithPriority\",2,newPriority,!1),util.validateCallback(\"Reference.setWithPriority\",3,onComplete,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.setWithPriority failed: \"+this.getKey()+\" is a read-only object.\";var deferred=new util.Deferred;return this.repo.setWithPriority(this.path,newVal,newPriority,deferred.wrapCallback(onComplete)),deferred.promise},Reference.prototype.remove=function(onComplete){return util.validateArgCount(\"Reference.remove\",0,1,arguments.length),validateWritablePath(\"Reference.remove\",this.path),util.validateCallback(\"Reference.remove\",1,onComplete,!0),this.set(null,onComplete)},Reference.prototype.transaction=function(transactionUpdate,onComplete,applyLocally){if(util.validateArgCount(\"Reference.transaction\",1,3,arguments.length),validateWritablePath(\"Reference.transaction\",this.path),util.validateCallback(\"Reference.transaction\",1,transactionUpdate,!1),util.validateCallback(\"Reference.transaction\",2,onComplete,!0),validateBoolean(\"Reference.transaction\",3,applyLocally,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.transaction failed: \"+this.getKey()+\" is a read-only object.\";void 0===applyLocally&&(applyLocally=!0);var deferred=new util.Deferred;\"function\"==typeof onComplete&&deferred.promise.catch((function(){}));var promiseComplete=function(error,committed,snapshot){error?deferred.reject(error):deferred.resolve(new TransactionResult(committed,snapshot)),\"function\"==typeof onComplete&&onComplete(error,committed,snapshot)};return this.repo.startTransaction(this.path,transactionUpdate,promiseComplete,applyLocally),deferred.promise},Reference.prototype.setPriority=function(priority,onComplete){util.validateArgCount(\"Reference.setPriority\",1,2,arguments.length),validateWritablePath(\"Reference.setPriority\",this.path),validatePriority(\"Reference.setPriority\",1,priority,!1),util.validateCallback(\"Reference.setPriority\",2,onComplete,!0);var deferred=new util.Deferred;return this.repo.setWithPriority(this.path.child(\".priority\"),priority,null,deferred.wrapCallback(onComplete)),deferred.promise},Reference.prototype.push=function(value,onComplete){util.validateArgCount(\"Reference.push\",0,2,arguments.length),validateWritablePath(\"Reference.push\",this.path),validateFirebaseDataArg(\"Reference.push\",1,value,this.path,!0),util.validateCallback(\"Reference.push\",2,onComplete,!0);var promise,now=this.repo.serverTime(),name=nextPushId(now),thennablePushRef=this.child(name),pushRef=this.child(name);return promise=null!=value?thennablePushRef.set(value,onComplete).then((function(){return pushRef})):Promise.resolve(pushRef),thennablePushRef.then=promise.then.bind(promise),thennablePushRef.catch=promise.then.bind(promise,void 0),\"function\"==typeof onComplete&&promise.catch((function(){})),thennablePushRef},Reference.prototype.onDisconnect=function(){return validateWritablePath(\"Reference.onDisconnect\",this.path),new OnDisconnect(this.repo,this.path)},Object.defineProperty(Reference.prototype,\"database\",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"key\",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"parent\",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,\"root\",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Reference}(Query);Query.__referenceConstructor=Reference,SyncPoint.__referenceConstructor=Reference;var TreeNode=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Tree=function(){function Tree(name_,parent_,node_){void 0===name_&&(name_=\"\"),void 0===parent_&&(parent_=null),void 0===node_&&(node_=new TreeNode),this.name_=name_,this.parent_=parent_,this.node_=node_}return Tree.prototype.subTree=function(pathObj){for(var path=pathObj instanceof Path?pathObj:new Path(pathObj),child=this,next=path.getFront();null!==next;)child=new Tree(next,child,util.safeGet(child.node_.children,next)||new TreeNode),next=(path=path.popFront()).getFront();return child},Tree.prototype.getValue=function(){return this.node_.value},Tree.prototype.setValue=function(value){util.assert(void 0!==value,\"Cannot set value to undefined\"),this.node_.value=value,this.updateParents_()},Tree.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Tree.prototype.hasChildren=function(){return this.node_.childCount>0},Tree.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Tree.prototype.forEachChild=function(action){var _this=this;each(this.node_.children,(function(child,childTree){action(new Tree(child,_this,childTree))}))},Tree.prototype.forEachDescendant=function(action,includeSelf,childrenFirst){includeSelf&&!childrenFirst&&action(this),this.forEachChild((function(child){child.forEachDescendant(action,!0,childrenFirst)})),includeSelf&&childrenFirst&&action(this)},Tree.prototype.forEachAncestor=function(action,includeSelf){for(var node=includeSelf?this:this.parent();null!==node;){if(action(node))return!0;node=node.parent()}return!1},Tree.prototype.forEachImmediateDescendantWithValue=function(action){this.forEachChild((function(child){null!==child.getValue()?action(child):child.forEachImmediateDescendantWithValue(action)}))},Tree.prototype.path=function(){return new Path(null===this.parent_?this.name_:this.parent_.path()+\"/\"+this.name_)},Tree.prototype.name=function(){return this.name_},Tree.prototype.parent=function(){return this.parent_},Tree.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Tree.prototype.updateChild_=function(childName,child){var childEmpty=child.isEmpty(),childExists=util.contains(this.node_.children,childName);childEmpty&&childExists?(delete this.node_.children[childName],this.node_.childCount--,this.updateParents_()):childEmpty||childExists||(this.node_.children[childName]=child.node_,this.node_.childCount++,this.updateParents_())},Tree}(),TransactionStatus=function(TransactionStatus){return TransactionStatus[TransactionStatus.RUN=0]=\"RUN\",TransactionStatus[TransactionStatus.SENT=1]=\"SENT\",TransactionStatus[TransactionStatus.COMPLETED=2]=\"COMPLETED\",TransactionStatus[TransactionStatus.SENT_NEEDS_ABORT=3]=\"SENT_NEEDS_ABORT\",TransactionStatus[TransactionStatus.NEEDS_ABORT=4]=\"NEEDS_ABORT\",TransactionStatus}({});Repo.MAX_TRANSACTION_RETRIES_=25,Repo.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Tree},Repo.prototype.startTransaction=function(path,transactionUpdate,onComplete,applyLocally){this.log_(\"transaction on \"+path);var valueCallback=function(){},watchRef=new Reference(this,path);watchRef.on(\"value\",valueCallback);var transaction={path:path,update:transactionUpdate,onComplete:onComplete,status:null,order:LUIDGenerator(),applyLocally:applyLocally,retryCount:0,unwatcher:function(){watchRef.off(\"value\",valueCallback)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},currentState=this.getLatestState_(path);transaction.currentInputSnapshot=currentState;var newVal=transaction.update(currentState.val());if(void 0===newVal){if(transaction.unwatcher(),transaction.currentOutputSnapshotRaw=null,transaction.currentOutputSnapshotResolved=null,transaction.onComplete){var snapshot=new DataSnapshot(transaction.currentInputSnapshot,new Reference(this,transaction.path),PRIORITY_INDEX);transaction.onComplete(null,!1,snapshot)}}else{validateFirebaseData(\"transaction failed: Data returned \",newVal,transaction.path),transaction.status=TransactionStatus.RUN;var queueNode=this.transactionQueueTree_.subTree(path),nodeQueue=queueNode.getValue()||[];nodeQueue.push(transaction),queueNode.setValue(nodeQueue);var priorityForNode=void 0;\"object\"==typeof newVal&&null!==newVal&&util.contains(newVal,\".priority\")?(priorityForNode=util.safeGet(newVal,\".priority\"),util.assert(isValidPriority(priorityForNode),\"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.\")):priorityForNode=(this.serverSyncTree_.calcCompleteEventCache(path)||ChildrenNode.EMPTY_NODE).getPriority().val(),priorityForNode=priorityForNode;var serverValues=this.generateServerValues(),newNodeUnresolved=nodeFromJSON$1(newVal,priorityForNode),newNode=resolveDeferredValueSnapshot(newNodeUnresolved,currentState,serverValues);transaction.currentOutputSnapshotRaw=newNodeUnresolved,transaction.currentOutputSnapshotResolved=newNode,transaction.currentWriteId=this.getNextWriteId_();var events=this.serverSyncTree_.applyUserOverwrite(path,newNode,transaction.currentWriteId,transaction.applyLocally);this.eventQueue_.raiseEventsForChangedPath(path,events),this.sendReadyTransactions_()}},Repo.prototype.getLatestState_=function(path,excludeSets){return this.serverSyncTree_.calcCompleteEventCache(path,excludeSets)||ChildrenNode.EMPTY_NODE},Repo.prototype.sendReadyTransactions_=function(node){var _this=this;if(void 0===node&&(node=this.transactionQueueTree_),node||this.pruneCompletedTransactionsBelowNode_(node),null!==node.getValue()){var queue=this.buildTransactionQueue_(node);util.assert(queue.length>0,\"Sending zero length transaction queue\"),queue.every((function(transaction){return transaction.status===TransactionStatus.RUN}))&&this.sendTransactionQueue_(node.path(),queue)}else node.hasChildren()&&node.forEachChild((function(childNode){_this.sendReadyTransactions_(childNode)}))},Repo.prototype.sendTransactionQueue_=function(path,queue){for(var _this=this,setsToIgnore=queue.map((function(txn){return txn.currentWriteId})),latestState=this.getLatestState_(path,setsToIgnore),snapToSend=latestState,latestHash=latestState.hash(),i=0;i<queue.length;i++){var txn=queue[i];util.assert(txn.status===TransactionStatus.RUN,\"tryToSendTransactionQueue_: items in queue should all be run.\"),txn.status=TransactionStatus.SENT,txn.retryCount++;var relativePath=Path.relativePath(path,txn.path);snapToSend=snapToSend.updateChild(relativePath,txn.currentOutputSnapshotRaw)}var dataToSend=snapToSend.val(!0),pathToSend=path;this.server_.put(pathToSend.toString(),dataToSend,(function(status){_this.log_(\"transaction put response\",{path:pathToSend.toString(),status:status});var events=[];if(\"ok\"===status){for(var callbacks=[],i=0;i<queue.length;i++){if(queue[i].status=TransactionStatus.COMPLETED,events=events.concat(_this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId)),queue[i].onComplete){var node=queue[i].currentOutputSnapshotResolved,ref=new Reference(_this,queue[i].path),snapshot=new DataSnapshot(node,ref,PRIORITY_INDEX);callbacks.push(queue[i].onComplete.bind(null,null,!0,snapshot))}queue[i].unwatcher()}for(_this.pruneCompletedTransactionsBelowNode_(_this.transactionQueueTree_.subTree(path)),_this.sendReadyTransactions_(),_this.eventQueue_.raiseEventsForChangedPath(path,events),i=0;i<callbacks.length;i++)exceptionGuard(callbacks[i])}else{if(\"datastale\"===status)for(i=0;i<queue.length;i++)queue[i].status=queue[i].status===TransactionStatus.SENT_NEEDS_ABORT?TransactionStatus.NEEDS_ABORT:TransactionStatus.RUN;else for(warn(\"transaction at \"+pathToSend.toString()+\" failed: \"+status),i=0;i<queue.length;i++)queue[i].status=TransactionStatus.NEEDS_ABORT,queue[i].abortReason=status;_this.rerunTransactions_(path)}}),latestHash)},Repo.prototype.rerunTransactions_=function(changedPath){var rootMostTransactionNode=this.getAncestorTransactionNode_(changedPath),path=rootMostTransactionNode.path(),queue=this.buildTransactionQueue_(rootMostTransactionNode);return this.rerunTransactionQueue_(queue,path),path},Repo.prototype.rerunTransactionQueue_=function(queue,path){if(0!==queue.length){for(var callbacks=[],events=[],setsToIgnore=queue.filter((function(q){return q.status===TransactionStatus.RUN})).map((function(q){return q.currentWriteId})),i=0;i<queue.length;i++){var transaction=queue[i],relativePath=Path.relativePath(path,transaction.path),abortTransaction=!1,abortReason=void 0;if(util.assert(null!==relativePath,\"rerunTransactionsUnderNode_: relativePath should not be null.\"),transaction.status===TransactionStatus.NEEDS_ABORT)abortTransaction=!0,abortReason=transaction.abortReason,events=events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId,!0));else if(transaction.status===TransactionStatus.RUN)if(transaction.retryCount>=Repo.MAX_TRANSACTION_RETRIES_)abortTransaction=!0,abortReason=\"maxretry\",events=events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId,!0));else{var currentNode=this.getLatestState_(transaction.path,setsToIgnore);transaction.currentInputSnapshot=currentNode;var newData=queue[i].update(currentNode.val());if(void 0!==newData){validateFirebaseData(\"transaction failed: Data returned \",newData,transaction.path);var newDataNode=nodeFromJSON$1(newData);\"object\"==typeof newData&&null!=newData&&util.contains(newData,\".priority\")||(newDataNode=newDataNode.updatePriority(currentNode.getPriority()));var oldWriteId=transaction.currentWriteId,serverValues=this.generateServerValues(),newNodeResolved=resolveDeferredValueSnapshot(newDataNode,currentNode,serverValues);transaction.currentOutputSnapshotRaw=newDataNode,transaction.currentOutputSnapshotResolved=newNodeResolved,transaction.currentWriteId=this.getNextWriteId_(),setsToIgnore.splice(setsToIgnore.indexOf(oldWriteId),1),events=(events=events.concat(this.serverSyncTree_.applyUserOverwrite(transaction.path,newNodeResolved,transaction.currentWriteId,transaction.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(oldWriteId,!0))}else abortTransaction=!0,abortReason=\"nodata\",events=events.concat(this.serverSyncTree_.ackUserWrite(transaction.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(path,events),events=[],abortTransaction&&(queue[i].status=TransactionStatus.COMPLETED,setTimeout(queue[i].unwatcher,Math.floor(0)),queue[i].onComplete))if(\"nodata\"===abortReason){var ref=new Reference(this,queue[i].path),snapshot=new DataSnapshot(queue[i].currentInputSnapshot,ref,PRIORITY_INDEX);callbacks.push(queue[i].onComplete.bind(null,null,!1,snapshot))}else callbacks.push(queue[i].onComplete.bind(null,new Error(abortReason),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),i=0;i<callbacks.length;i++)exceptionGuard(callbacks[i]);this.sendReadyTransactions_()}},Repo.prototype.getAncestorTransactionNode_=function(path){var front,transactionNode=this.transactionQueueTree_;for(front=path.getFront();null!==front&&null===transactionNode.getValue();)transactionNode=transactionNode.subTree(front),front=(path=path.popFront()).getFront();return transactionNode},Repo.prototype.buildTransactionQueue_=function(transactionNode){var transactionQueue=[];return this.aggregateTransactionQueuesForNode_(transactionNode,transactionQueue),transactionQueue.sort((function(a,b){return a.order-b.order})),transactionQueue},Repo.prototype.aggregateTransactionQueuesForNode_=function(node,queue){var _this=this,nodeQueue=node.getValue();if(null!==nodeQueue)for(var i=0;i<nodeQueue.length;i++)queue.push(nodeQueue[i]);node.forEachChild((function(child){_this.aggregateTransactionQueuesForNode_(child,queue)}))},Repo.prototype.pruneCompletedTransactionsBelowNode_=function(node){var _this=this,queue=node.getValue();if(queue){for(var to=0,from=0;from<queue.length;from++)queue[from].status!==TransactionStatus.COMPLETED&&(queue[to]=queue[from],to++);queue.length=to,node.setValue(queue.length>0?queue:null)}node.forEachChild((function(childNode){_this.pruneCompletedTransactionsBelowNode_(childNode)}))},Repo.prototype.abortTransactions_=function(path){var _this=this,affectedPath=this.getAncestorTransactionNode_(path).path(),transactionNode=this.transactionQueueTree_.subTree(path);return transactionNode.forEachAncestor((function(node){_this.abortTransactionsOnNode_(node)})),this.abortTransactionsOnNode_(transactionNode),transactionNode.forEachDescendant((function(node){_this.abortTransactionsOnNode_(node)})),affectedPath},Repo.prototype.abortTransactionsOnNode_=function(node){var queue=node.getValue();if(null!==queue){for(var callbacks=[],events=[],lastSent=-1,i=0;i<queue.length;i++)queue[i].status===TransactionStatus.SENT_NEEDS_ABORT||(queue[i].status===TransactionStatus.SENT?(util.assert(lastSent===i-1,\"All SENT items should be at beginning of queue.\"),lastSent=i,queue[i].status=TransactionStatus.SENT_NEEDS_ABORT,queue[i].abortReason=\"set\"):(util.assert(queue[i].status===TransactionStatus.RUN,\"Unexpected transaction status in abort\"),queue[i].unwatcher(),events=events.concat(this.serverSyncTree_.ackUserWrite(queue[i].currentWriteId,!0)),queue[i].onComplete&&callbacks.push(queue[i].onComplete.bind(null,new Error(\"set\"),!1,null))));for(-1===lastSent?node.setValue(null):queue.length=lastSent+1,this.eventQueue_.raiseEventsForChangedPath(node.path(),events),i=0;i<callbacks.length;i++)exceptionGuard(callbacks[i])}};var _staticInstance,FirebaseAuthTokenProvider=function(){function FirebaseAuthTokenProvider(app_,authProvider_){var _this=this;this.app_=app_,this.authProvider_=authProvider_,this.auth_=null,this.auth_=authProvider_.getImmediate({optional:!0}),this.auth_||authProvider_.get().then((function(auth){return _this.auth_=auth}))}return FirebaseAuthTokenProvider.prototype.getToken=function(forceRefresh){return this.auth_?this.auth_.getToken(forceRefresh).catch((function(error){return error&&\"auth/token-not-initialized\"===error.code?(log(\"Got auth/token-not-initialized error.  Treating as null token.\"),null):Promise.reject(error)})):Promise.resolve(null)},FirebaseAuthTokenProvider.prototype.addTokenChangeListener=function(listener){this.auth_?this.auth_.addAuthTokenListener(listener):(setTimeout((function(){return listener(null)}),0),this.authProvider_.get().then((function(auth){return auth.addAuthTokenListener(listener)})))},FirebaseAuthTokenProvider.prototype.removeTokenChangeListener=function(listener){this.authProvider_.get().then((function(auth){return auth.removeAuthTokenListener(listener)}))},FirebaseAuthTokenProvider.prototype.notifyForInvalidToken=function(){var errorMessage='Provided authentication credentials for the app named \"'+this.app_.name+'\" are invalid. This usually indicates your app was not initialized correctly. ';warn(errorMessage+=\"credential\"in this.app_.options?'Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':\"serviceAccount\"in this.app_.options?'Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':'Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},FirebaseAuthTokenProvider}(),EmulatorAdminTokenProvider=function(){function EmulatorAdminTokenProvider(){}return EmulatorAdminTokenProvider.prototype.getToken=function(forceRefresh){return Promise.resolve({accessToken:EmulatorAdminTokenProvider.EMULATOR_AUTH_TOKEN})},EmulatorAdminTokenProvider.prototype.addTokenChangeListener=function(listener){listener(EmulatorAdminTokenProvider.EMULATOR_AUTH_TOKEN)},EmulatorAdminTokenProvider.prototype.removeTokenChangeListener=function(listener){},EmulatorAdminTokenProvider.prototype.notifyForInvalidToken=function(){},EmulatorAdminTokenProvider.EMULATOR_AUTH_TOKEN=\"owner\",EmulatorAdminTokenProvider}(),RepoManager=function(){function RepoManager(){this.repos_={},this.useRestClient_=!1}return RepoManager.getInstance=function(){return _staticInstance||(_staticInstance=new RepoManager),_staticInstance},RepoManager.prototype.interrupt=function(){var e_1,_a,e_2,_b;try{for(var _c=tslib.__values(Object.keys(this.repos_)),_d=_c.next();!_d.done;_d=_c.next()){var appName=_d.value;try{for(var _e=(e_2=void 0,tslib.__values(Object.keys(this.repos_[appName]))),_f=_e.next();!_f.done;_f=_e.next())this.repos_[appName][_f.value].interrupt()}catch(e_2_1){e_2={error:e_2_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_2)throw e_2.error}}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}},RepoManager.prototype.resume=function(){var e_3,_a,e_4,_b;try{for(var _c=tslib.__values(Object.keys(this.repos_)),_d=_c.next();!_d.done;_d=_c.next()){var appName=_d.value;try{for(var _e=(e_4=void 0,tslib.__values(Object.keys(this.repos_[appName]))),_f=_e.next();!_f.done;_f=_e.next())this.repos_[appName][_f.value].resume()}catch(e_4_1){e_4={error:e_4_1}}finally{try{_f&&!_f.done&&(_b=_e.return)&&_b.call(_e)}finally{if(e_4)throw e_4.error}}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_3)throw e_3.error}}},RepoManager.prototype.databaseFromApp=function(app,authProvider,url,nodeAdmin){var dbUrl=url||app.options.databaseURL;void 0===dbUrl&&(app.options.projectId||fatal(\"Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp().\"),log(\"Using default host for project \",app.options.projectId),dbUrl=app.options.projectId+\"-default-rtdb.firebaseio.com\");var isEmulator,parsedUrl=parseRepoInfo(dbUrl,nodeAdmin),repoInfo=parsedUrl.repoInfo,dbEmulatorHost=void 0;\"undefined\"!=typeof process&&(dbEmulatorHost=process.env.FIREBASE_DATABASE_EMULATOR_HOST),dbEmulatorHost?(isEmulator=!0,repoInfo=(parsedUrl=parseRepoInfo(dbUrl=\"http://\"+dbEmulatorHost+\"?ns=\"+repoInfo.namespace,nodeAdmin)).repoInfo):isEmulator=!parsedUrl.repoInfo.secure;var authTokenProvider=nodeAdmin&&isEmulator?new EmulatorAdminTokenProvider:new FirebaseAuthTokenProvider(app,authProvider);return validateUrl(\"Invalid Firebase Database URL\",1,parsedUrl),parsedUrl.path.isEmpty()||fatal(\"Database URL must point to the root of a Firebase Database (not including a child path).\"),this.createRepo(repoInfo,app,authTokenProvider).database},RepoManager.prototype.deleteRepo=function(repo){var appRepos=util.safeGet(this.repos_,repo.app.name);appRepos&&util.safeGet(appRepos,repo.repoInfo_.toURLString())===repo||fatal(\"Database \"+repo.app.name+\"(\"+repo.repoInfo_+\") has already been deleted.\"),repo.interrupt(),delete appRepos[repo.repoInfo_.toURLString()]},RepoManager.prototype.createRepo=function(repoInfo,app,authTokenProvider){var appRepos=util.safeGet(this.repos_,app.name);appRepos||(this.repos_[app.name]=appRepos={});var repo=util.safeGet(appRepos,repoInfo.toURLString());return repo&&fatal(\"Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.\"),repo=new Repo(repoInfo,this.useRestClient_,app,authTokenProvider),appRepos[repoInfo.toURLString()]=repo,repo},RepoManager.prototype.forceRestClient=function(forceRestClient){this.useRestClient_=forceRestClient},RepoManager}(),Database=function(){function Database(repo_){this.repo_=repo_,repo_ instanceof Repo||fatal(\"Don't call new Database() directly - please use firebase.database().\"),this.root_=new Reference(repo_,Path.Empty),this.INTERNAL=new DatabaseInternals(this)}return Object.defineProperty(Database.prototype,\"app\",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),Database.prototype.ref=function(path){return this.checkDeleted_(\"ref\"),util.validateArgCount(\"database.ref\",0,1,arguments.length),path instanceof Reference?this.refFromURL(path.toString()):void 0!==path?this.root_.child(path):this.root_},Database.prototype.refFromURL=function(url){var apiName=\"database.refFromURL\";this.checkDeleted_(apiName),util.validateArgCount(apiName,1,1,arguments.length);var parsedURL=parseRepoInfo(url,this.repo_.repoInfo_.nodeAdmin);validateUrl(apiName,1,parsedURL);var repoInfo=parsedURL.repoInfo;return repoInfo.host!==this.repo_.repoInfo_.host&&fatal(apiName+\": Host name does not match the current database: (found \"+repoInfo.host+\" but expected \"+this.repo_.repoInfo_.host+\")\"),this.ref(parsedURL.path.toString())},Database.prototype.checkDeleted_=function(apiName){null===this.repo_&&fatal(\"Cannot call \"+apiName+\" on a deleted database.\")},Database.prototype.goOffline=function(){util.validateArgCount(\"database.goOffline\",0,0,arguments.length),this.checkDeleted_(\"goOffline\"),this.repo_.interrupt()},Database.prototype.goOnline=function(){util.validateArgCount(\"database.goOnline\",0,0,arguments.length),this.checkDeleted_(\"goOnline\"),this.repo_.resume()},Database.ServerValue={TIMESTAMP:{\".sv\":\"timestamp\"},increment:function(delta){return{\".sv\":{increment:delta}}}},Database}(),DatabaseInternals=function(){function DatabaseInternals(database){this.database=database}return DatabaseInternals.prototype.delete=function(){return tslib.__awaiter(this,void 0,void 0,(function(){return tslib.__generator(this,(function(_a){return this.database.checkDeleted_(\"delete\"),RepoManager.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},DatabaseInternals}(),INTERNAL=Object.freeze({__proto__:null,forceLongPolling:function(){WebSocketConnection.forceDisallow(),BrowserPollConnection.forceAllow()},forceWebSockets:function(){BrowserPollConnection.forceDisallow()},isWebSocketsAvailable:function(){return WebSocketConnection.isAvailable()},setSecurityDebugCallback:function(ref,callback){ref.repo.persistentConnection_.securityDebugCallback_=callback},stats:function(ref,showDelta){ref.repo.stats(showDelta)},statsIncrementCounter:function(ref,metric){ref.repo.statsIncrementCounter(metric)},dataUpdateCount:function(ref){return ref.repo.dataUpdateCount},interceptServerData:function(ref,callback){return ref.repo.interceptServerData_(callback)}}),DataConnection=PersistentConnection;PersistentConnection.prototype.simpleListen=function(pathString,onComplete){this.sendRequest(\"q\",{p:pathString},onComplete)},PersistentConnection.prototype.echo=function(data,onEcho){this.sendRequest(\"echo\",{d:data},onEcho)};var TEST_ACCESS=Object.freeze({__proto__:null,DataConnection:DataConnection,RealTimeConnection:Connection,hijackHash:function(newHash){var oldPut=PersistentConnection.prototype.put;return PersistentConnection.prototype.put=function(pathString,data,onComplete,hash){void 0!==hash&&(hash=newHash()),oldPut.call(this,pathString,data,onComplete,hash)},function(){PersistentConnection.prototype.put=oldPut}},ConnectionTarget:RepoInfo,queryIdentifier:function(query){return query.queryIdentifier()},forceRestClient:function(forceRestClient){RepoManager.getInstance().forceRestClient(forceRestClient)}}),ServerValue=Database.ServerValue;function registerDatabase(instance){SDK_VERSION=instance.SDK_VERSION;var namespace=instance.INTERNAL.registerComponent(new component.Component(\"database\",(function(container,url){var app=container.getProvider(\"app\").getImmediate(),authProvider=container.getProvider(\"auth-internal\");return RepoManager.getInstance().databaseFromApp(app,authProvider,url)}),\"PUBLIC\").setServiceProps({Reference:Reference,Query:Query,Database:Database,DataSnapshot:DataSnapshot,enableLogging:enableLogging,INTERNAL:INTERNAL,ServerValue:ServerValue,TEST_ACCESS:TEST_ACCESS}).setMultipleInstances(!0));instance.registerVersion(\"@firebase/database\",\"0.6.13\"),util.isNodeSdk()&&(module.exports=namespace)}registerDatabase(firebase__default.default),exports.DataSnapshot=DataSnapshot,exports.Database=Database,exports.OnDisconnect=OnDisconnect,exports.Query=Query,exports.Reference=Reference,exports.ServerValue=ServerValue,exports.enableLogging=enableLogging,exports.registerDatabase=registerDatabase},O1kn:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var firebase=__webpack_require__(\"wj3C\");__webpack_require__(\"fSjL\");var tslib=__webpack_require__(\"mrSG\"),util=__webpack_require__(\"zVF4\"),logger=__webpack_require__(\"q/0M\"),component=__webpack_require__(\"S+S0\");function _interopDefaultLegacy(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var _a,firebase__default=_interopDefaultLegacy(firebase),CachingClient=function(){function CachingClient(client,storage,storageCache,logger){this.client=client,this.storage=storage,this.storageCache=storageCache,this.logger=logger}return CachingClient.prototype.isCachedDataFresh=function(cacheMaxAgeMillis,lastSuccessfulFetchTimestampMillis){if(!lastSuccessfulFetchTimestampMillis)return this.logger.debug(\"Config fetch cache check. Cache unpopulated.\"),!1;var cacheAgeMillis=Date.now()-lastSuccessfulFetchTimestampMillis,isCachedDataFresh=cacheAgeMillis<=cacheMaxAgeMillis;return this.logger.debug(\"Config fetch cache check. Cache age millis: \"+cacheAgeMillis+\". Cache max age millis (minimumFetchIntervalMillis setting): \"+cacheMaxAgeMillis+\". Is cache hit: \"+isCachedDataFresh+\".\"),isCachedDataFresh},CachingClient.prototype.fetch=function(request){return tslib.__awaiter(this,void 0,void 0,(function(){var _a,lastSuccessfulFetchTimestampMillis,lastSuccessfulFetchResponse,response,storageOperations;return tslib.__generator(this,(function(_b){switch(_b.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return _a=_b.sent(),lastSuccessfulFetchTimestampMillis=_a[0],(lastSuccessfulFetchResponse=_a[1])&&this.isCachedDataFresh(request.cacheMaxAgeMillis,lastSuccessfulFetchTimestampMillis)?[2,lastSuccessfulFetchResponse]:(request.eTag=lastSuccessfulFetchResponse&&lastSuccessfulFetchResponse.eTag,[4,this.client.fetch(request)]);case 2:return response=_b.sent(),storageOperations=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===response.status&&storageOperations.push(this.storage.setLastSuccessfulFetchResponse(response)),[4,Promise.all(storageOperations)];case 3:return _b.sent(),[2,response]}}))}))},CachingClient}(),ERROR_DESCRIPTION_MAP=((_a={})[\"registration-window\"]=\"Undefined window object. This SDK only supports usage in a browser environment.\",_a[\"registration-project-id\"]=\"Undefined project identifier. Check Firebase app initialization.\",_a[\"registration-api-key\"]=\"Undefined API key. Check Firebase app initialization.\",_a[\"registration-app-id\"]=\"Undefined app identifier. Check Firebase app initialization.\",_a[\"storage-open\"]=\"Error thrown when opening storage. Original error: {$originalErrorMessage}.\",_a[\"storage-get\"]=\"Error thrown when reading from storage. Original error: {$originalErrorMessage}.\",_a[\"storage-set\"]=\"Error thrown when writing to storage. Original error: {$originalErrorMessage}.\",_a[\"storage-delete\"]=\"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.\",_a[\"fetch-client-network\"]=\"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.\",_a[\"fetch-timeout\"]='The config fetch request timed out.  Configure timeout using \"fetchTimeoutMillis\" SDK setting.',_a[\"fetch-throttle\"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using \"fetchTimeoutMillis\" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',_a[\"fetch-client-parse\"]=\"Fetch client could not parse response. Original error: {$originalErrorMessage}.\",_a[\"fetch-status\"]=\"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.\",_a),ERROR_FACTORY=new util.ErrorFactory(\"remoteconfig\",\"Remote Config\",ERROR_DESCRIPTION_MAP),RestClient=function(){function RestClient(firebaseInstallations,sdkVersion,namespace,projectId,apiKey,appId){this.firebaseInstallations=firebaseInstallations,this.sdkVersion=sdkVersion,this.namespace=namespace,this.projectId=projectId,this.apiKey=apiKey,this.appId=appId}return RestClient.prototype.fetch=function(request){return tslib.__awaiter(this,void 0,void 0,(function(){var _a,urlBase,url,requestBody,options,fetchPromise,timeoutPromise,response,originalError_1,errorCode,status,responseEtag,config,state,responseBody,originalError_2;return tslib.__generator(this,(function(_b){switch(_b.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:_a=_b.sent(),urlBase=window.FIREBASE_REMOTE_CONFIG_URL_BASE||\"https://firebaseremoteconfig.googleapis.com\",url=urlBase+\"/v1/projects/\"+this.projectId+\"/namespaces/\"+this.namespace+\":fetch?key=\"+this.apiKey,requestBody={sdk_version:this.sdkVersion,app_instance_id:_a[0],app_instance_id_token:_a[1],app_id:this.appId,language_code:(void 0===navigatorLanguage&&(navigatorLanguage=navigator),navigatorLanguage.languages&&navigatorLanguage.languages[0]||navigatorLanguage.language)},options={method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Content-Encoding\":\"gzip\",\"If-None-Match\":request.eTag||\"*\"},body:JSON.stringify(requestBody)},fetchPromise=fetch(url,options),timeoutPromise=new Promise((function(_resolve,reject){request.signal.addEventListener((function(){var error=new Error(\"The operation was aborted.\");error.name=\"AbortError\",reject(error)}))})),_b.label=2;case 2:return _b.trys.push([2,5,,6]),[4,Promise.race([fetchPromise,timeoutPromise])];case 3:return _b.sent(),[4,fetchPromise];case 4:return response=_b.sent(),[3,6];case 5:throw originalError_1=_b.sent(),errorCode=\"fetch-client-network\",\"AbortError\"===originalError_1.name&&(errorCode=\"fetch-timeout\"),ERROR_FACTORY.create(errorCode,{originalErrorMessage:originalError_1.message});case 6:if(status=response.status,responseEtag=response.headers.get(\"ETag\")||void 0,200!==response.status)return[3,11];responseBody=void 0,_b.label=7;case 7:return _b.trys.push([7,9,,10]),[4,response.json()];case 8:return responseBody=_b.sent(),[3,10];case 9:throw originalError_2=_b.sent(),ERROR_FACTORY.create(\"fetch-client-parse\",{originalErrorMessage:originalError_2.message});case 10:config=responseBody.entries,state=responseBody.state,_b.label=11;case 11:if(\"INSTANCE_STATE_UNSPECIFIED\"===state?status=500:\"NO_CHANGE\"===state?status=304:\"NO_TEMPLATE\"!==state&&\"EMPTY_CONFIG\"!==state||(config={}),304!==status&&200!==status)throw ERROR_FACTORY.create(\"fetch-status\",{httpStatus:status});return[2,{status:status,eTag:responseEtag,config:config}]}var navigatorLanguage}))}))},RestClient}(),RemoteConfigAbortSignal=function(){function RemoteConfigAbortSignal(){this.listeners=[]}return RemoteConfigAbortSignal.prototype.addEventListener=function(listener){this.listeners.push(listener)},RemoteConfigAbortSignal.prototype.abort=function(){this.listeners.forEach((function(listener){return listener()}))},RemoteConfigAbortSignal}(),BOOLEAN_TRUTHY_VALUES=[\"1\",\"true\",\"t\",\"yes\",\"y\",\"on\"],Value=function(){function Value(_source,_value){void 0===_value&&(_value=\"\"),this._source=_source,this._value=_value}return Value.prototype.asString=function(){return this._value},Value.prototype.asBoolean=function(){return\"static\"!==this._source&&BOOLEAN_TRUTHY_VALUES.indexOf(this._value.toLowerCase())>=0},Value.prototype.asNumber=function(){if(\"static\"===this._source)return 0;var num=Number(this._value);return isNaN(num)&&(num=0),num},Value.prototype.getSource=function(){return this._source},Value}(),RemoteConfig=function(){function RemoteConfig(app,_client,_storageCache,_storage,_logger){this.app=app,this._client=_client,this._storageCache=_storageCache,this._storage=_storage,this._logger=_logger,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return RemoteConfig.prototype.setLogLevel=function(logLevel){switch(logLevel){case\"debug\":this._logger.logLevel=logger.LogLevel.DEBUG;break;case\"silent\":this._logger.logLevel=logger.LogLevel.SILENT;break;default:this._logger.logLevel=logger.LogLevel.ERROR}},Object.defineProperty(RemoteConfig.prototype,\"fetchTimeMillis\",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(RemoteConfig.prototype,\"lastFetchStatus\",{get:function(){return this._storageCache.getLastFetchStatus()||\"no-fetch-yet\"},enumerable:!1,configurable:!0}),RemoteConfig.prototype.activate=function(){return tslib.__awaiter(this,void 0,void 0,(function(){var _a,lastSuccessfulFetchResponse,activeConfigEtag;return tslib.__generator(this,(function(_b){switch(_b.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return _a=_b.sent(),activeConfigEtag=_a[1],(lastSuccessfulFetchResponse=_a[0])&&lastSuccessfulFetchResponse.config&&lastSuccessfulFetchResponse.eTag&&lastSuccessfulFetchResponse.eTag!==activeConfigEtag?[4,Promise.all([this._storageCache.setActiveConfig(lastSuccessfulFetchResponse.config),this._storage.setActiveConfigEtag(lastSuccessfulFetchResponse.eTag)])]:[2,!1];case 2:return _b.sent(),[2,!0]}}))}))},RemoteConfig.prototype.ensureInitialized=function(){var _this=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){_this._isInitializationComplete=!0}))),this._initializePromise},RemoteConfig.prototype.fetch=function(){return tslib.__awaiter(this,void 0,void 0,(function(){var abortSignal,e_1,lastFetchStatus,_this=this;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:abortSignal=new RemoteConfigAbortSignal,setTimeout((function(){return tslib.__awaiter(_this,void 0,void 0,(function(){return tslib.__generator(this,(function(_a){return abortSignal.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),_a.label=1;case 1:return _a.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:abortSignal})];case 2:return _a.sent(),[4,this._storageCache.setLastFetchStatus(\"success\")];case 3:return _a.sent(),[3,6];case 4:return e_1=_a.sent(),lastFetchStatus=(e=e_1)instanceof util.FirebaseError&&-1!==e.code.indexOf(\"fetch-throttle\")?\"throttle\":\"failure\",[4,this._storageCache.setLastFetchStatus(lastFetchStatus)];case 5:throw _a.sent(),e_1;case 6:return[2]}var e}))}))},RemoteConfig.prototype.fetchAndActivate=function(){return tslib.__awaiter(this,void 0,void 0,(function(){return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return[4,this.fetch()];case 1:return _a.sent(),[2,this.activate()]}}))}))},RemoteConfig.prototype.getAll=function(){var obj1,obj2,_this=this;return(obj1=this._storageCache.getActiveConfig(),obj2=this.defaultConfig,void 0===obj1&&(obj1={}),void 0===obj2&&(obj2={}),Object.keys(tslib.__assign(tslib.__assign({},obj1),obj2))).reduce((function(allConfigs,key){return allConfigs[key]=_this.getValue(key),allConfigs}),{})},RemoteConfig.prototype.getBoolean=function(key){return this.getValue(key).asBoolean()},RemoteConfig.prototype.getNumber=function(key){return this.getValue(key).asNumber()},RemoteConfig.prototype.getString=function(key){return this.getValue(key).asString()},RemoteConfig.prototype.getValue=function(key){this._isInitializationComplete||this._logger.debug('A value was requested for key \"'+key+'\" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var activeConfig=this._storageCache.getActiveConfig();return activeConfig&&void 0!==activeConfig[key]?new Value(\"remote\",activeConfig[key]):this.defaultConfig&&void 0!==this.defaultConfig[key]?new Value(\"default\",String(this.defaultConfig[key])):(this._logger.debug('Returning static value for key \"'+key+'\". Define a default or remote value if this is unintentional.'),new Value(\"static\"))},RemoteConfig}();function toFirebaseError(event,errorCode){var originalError=event.target.error||void 0;return ERROR_FACTORY.create(errorCode,{originalErrorMessage:originalError&&originalError.message})}var Storage=function(){function Storage(appId,appName,namespace,openDbPromise){void 0===openDbPromise&&(openDbPromise=new Promise((function(resolve,reject){var request=indexedDB.open(\"firebase_remote_config\",1);request.onerror=function(event){reject(toFirebaseError(event,\"storage-open\"))},request.onsuccess=function(event){resolve(event.target.result)},request.onupgradeneeded=function(event){var db=event.target.result;switch(event.oldVersion){case 0:db.createObjectStore(\"app_namespace_store\",{keyPath:\"compositeKey\"})}}}))),this.appId=appId,this.appName=appName,this.namespace=namespace,this.openDbPromise=openDbPromise}return Storage.prototype.getLastFetchStatus=function(){return this.get(\"last_fetch_status\")},Storage.prototype.setLastFetchStatus=function(status){return this.set(\"last_fetch_status\",status)},Storage.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get(\"last_successful_fetch_timestamp_millis\")},Storage.prototype.setLastSuccessfulFetchTimestampMillis=function(timestamp){return this.set(\"last_successful_fetch_timestamp_millis\",timestamp)},Storage.prototype.getLastSuccessfulFetchResponse=function(){return this.get(\"last_successful_fetch_response\")},Storage.prototype.setLastSuccessfulFetchResponse=function(response){return this.set(\"last_successful_fetch_response\",response)},Storage.prototype.getActiveConfig=function(){return this.get(\"active_config\")},Storage.prototype.setActiveConfig=function(config){return this.set(\"active_config\",config)},Storage.prototype.getActiveConfigEtag=function(){return this.get(\"active_config_etag\")},Storage.prototype.setActiveConfigEtag=function(etag){return this.set(\"active_config_etag\",etag)},Storage.prototype.getThrottleMetadata=function(){return this.get(\"throttle_metadata\")},Storage.prototype.setThrottleMetadata=function(metadata){return this.set(\"throttle_metadata\",metadata)},Storage.prototype.deleteThrottleMetadata=function(){return this.delete(\"throttle_metadata\")},Storage.prototype.get=function(key){return tslib.__awaiter(this,void 0,void 0,(function(){var db,_this=this;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return[4,this.openDbPromise];case 1:return db=_a.sent(),[2,new Promise((function(resolve,reject){var objectStore=db.transaction([\"app_namespace_store\"],\"readonly\").objectStore(\"app_namespace_store\"),compositeKey=_this.createCompositeKey(key);try{var request=objectStore.get(compositeKey);request.onerror=function(event){reject(toFirebaseError(event,\"storage-get\"))},request.onsuccess=function(event){var result=event.target.result;resolve(result?result.value:void 0)}}catch(e){reject(ERROR_FACTORY.create(\"storage-get\",{originalErrorMessage:e&&e.message}))}}))]}}))}))},Storage.prototype.set=function(key,value){return tslib.__awaiter(this,void 0,void 0,(function(){var db,_this=this;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return[4,this.openDbPromise];case 1:return db=_a.sent(),[2,new Promise((function(resolve,reject){var objectStore=db.transaction([\"app_namespace_store\"],\"readwrite\").objectStore(\"app_namespace_store\"),compositeKey=_this.createCompositeKey(key);try{var request=objectStore.put({compositeKey:compositeKey,value:value});request.onerror=function(event){reject(toFirebaseError(event,\"storage-set\"))},request.onsuccess=function(){resolve()}}catch(e){reject(ERROR_FACTORY.create(\"storage-set\",{originalErrorMessage:e&&e.message}))}}))]}}))}))},Storage.prototype.delete=function(key){return tslib.__awaiter(this,void 0,void 0,(function(){var db,_this=this;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return[4,this.openDbPromise];case 1:return db=_a.sent(),[2,new Promise((function(resolve,reject){var objectStore=db.transaction([\"app_namespace_store\"],\"readwrite\").objectStore(\"app_namespace_store\"),compositeKey=_this.createCompositeKey(key);try{var request=objectStore.delete(compositeKey);request.onerror=function(event){reject(toFirebaseError(event,\"storage-delete\"))},request.onsuccess=function(){resolve()}}catch(e){reject(ERROR_FACTORY.create(\"storage-delete\",{originalErrorMessage:e&&e.message}))}}))]}}))}))},Storage.prototype.createCompositeKey=function(key){return[this.appId,this.appName,this.namespace,key].join()},Storage}(),StorageCache=function(){function StorageCache(storage){this.storage=storage}return StorageCache.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},StorageCache.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},StorageCache.prototype.getActiveConfig=function(){return this.activeConfig},StorageCache.prototype.loadFromStorage=function(){return tslib.__awaiter(this,void 0,void 0,(function(){var lastFetchStatusPromise,lastSuccessfulFetchTimestampMillisPromise,activeConfigPromise,lastFetchStatus,lastSuccessfulFetchTimestampMillis,activeConfig;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return lastFetchStatusPromise=this.storage.getLastFetchStatus(),lastSuccessfulFetchTimestampMillisPromise=this.storage.getLastSuccessfulFetchTimestampMillis(),activeConfigPromise=this.storage.getActiveConfig(),[4,lastFetchStatusPromise];case 1:return(lastFetchStatus=_a.sent())&&(this.lastFetchStatus=lastFetchStatus),[4,lastSuccessfulFetchTimestampMillisPromise];case 2:return(lastSuccessfulFetchTimestampMillis=_a.sent())&&(this.lastSuccessfulFetchTimestampMillis=lastSuccessfulFetchTimestampMillis),[4,activeConfigPromise];case 3:return(activeConfig=_a.sent())&&(this.activeConfig=activeConfig),[2]}}))}))},StorageCache.prototype.setLastFetchStatus=function(status){return this.lastFetchStatus=status,this.storage.setLastFetchStatus(status)},StorageCache.prototype.setLastSuccessfulFetchTimestampMillis=function(timestampMillis){return this.lastSuccessfulFetchTimestampMillis=timestampMillis,this.storage.setLastSuccessfulFetchTimestampMillis(timestampMillis)},StorageCache.prototype.setActiveConfig=function(activeConfig){return this.activeConfig=activeConfig,this.storage.setActiveConfig(activeConfig)},StorageCache}();function setAbortableTimeout(signal,throttleEndTimeMillis){return new Promise((function(resolve,reject){var backoffMillis=Math.max(throttleEndTimeMillis-Date.now(),0),timeout=setTimeout(resolve,backoffMillis);signal.addEventListener((function(){clearTimeout(timeout),reject(ERROR_FACTORY.create(\"fetch-throttle\",{throttleEndTimeMillis:throttleEndTimeMillis}))}))}))}var RetryingClient=function(){function RetryingClient(client,storage){this.client=client,this.storage=storage}return RetryingClient.prototype.fetch=function(request){return tslib.__awaiter(this,void 0,void 0,(function(){var throttleMetadata;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return throttleMetadata=_a.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(request,throttleMetadata)]}}))}))},RetryingClient.prototype.attemptFetch=function(request,_a){var throttleEndTimeMillis=_a.throttleEndTimeMillis,backoffCount=_a.backoffCount;return tslib.__awaiter(this,void 0,void 0,(function(){var response,e_1,throttleMetadata;return tslib.__generator(this,(function(_b){switch(_b.label){case 0:return[4,setAbortableTimeout(request.signal,throttleEndTimeMillis)];case 1:_b.sent(),_b.label=2;case 2:return _b.trys.push([2,5,,7]),[4,this.client.fetch(request)];case 3:return response=_b.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return _b.sent(),[2,response];case 5:if(!function(e){if(!(e instanceof util.FirebaseError))return!1;var httpStatus=Number(e.httpStatus);return 429===httpStatus||500===httpStatus||503===httpStatus||504===httpStatus}(e_1=_b.sent()))throw e_1;return throttleMetadata={throttleEndTimeMillis:Date.now()+util.calculateBackoffMillis(backoffCount),backoffCount:backoffCount+1},[4,this.storage.setThrottleMetadata(throttleMetadata)];case 6:return _b.sent(),[2,this.attemptFetch(request,throttleMetadata)];case 7:return[2]}}))}))},RetryingClient}(),name=\"@firebase/remote-config\";function registerRemoteConfig(firebaseInstance){firebaseInstance.INTERNAL.registerComponent(new component.Component(\"remoteConfig\",(function(container,namespace){var app=container.getProvider(\"app\").getImmediate(),installations=container.getProvider(\"installations\").getImmediate();if(\"undefined\"==typeof window)throw ERROR_FACTORY.create(\"registration-window\");var _a=app.options,projectId=_a.projectId,apiKey=_a.apiKey,appId=_a.appId;if(!projectId)throw ERROR_FACTORY.create(\"registration-project-id\");if(!apiKey)throw ERROR_FACTORY.create(\"registration-api-key\");if(!appId)throw ERROR_FACTORY.create(\"registration-app-id\");var storage=new Storage(appId,app.name,namespace=namespace||\"firebase\"),storageCache=new StorageCache(storage),logger$1=new logger.Logger(name);logger$1.logLevel=logger.LogLevel.ERROR;var restClient=new RestClient(installations,firebaseInstance.SDK_VERSION,namespace,projectId,apiKey,appId),retryingClient=new RetryingClient(restClient,storage),cachingClient=new CachingClient(retryingClient,storage,storageCache,logger$1),remoteConfigInstance=new RemoteConfig(app,cachingClient,storageCache,storage,logger$1);return remoteConfigInstance.ensureInitialized(),remoteConfigInstance}),\"PUBLIC\").setMultipleInstances(!0)),firebaseInstance.registerVersion(name,\"0.1.28\")}registerRemoteConfig(firebase__default.default),exports.registerRemoteConfig=registerRemoteConfig},\"S+S0\":function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var tslib=__webpack_require__(\"mrSG\"),util=__webpack_require__(\"zVF4\"),Component=function(){function Component(name,instanceFactory,type){this.name=name,this.instanceFactory=instanceFactory,this.type=type,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=\"LAZY\"}return Component.prototype.setInstantiationMode=function(mode){return this.instantiationMode=mode,this},Component.prototype.setMultipleInstances=function(multipleInstances){return this.multipleInstances=multipleInstances,this},Component.prototype.setServiceProps=function(props){return this.serviceProps=props,this},Component}(),Provider=function(){function Provider(name,container){this.name=name,this.container=container,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return Provider.prototype.get=function(identifier){void 0===identifier&&(identifier=\"[DEFAULT]\");var normalizedIdentifier=this.normalizeInstanceIdentifier(identifier);if(!this.instancesDeferred.has(normalizedIdentifier)){var deferred=new util.Deferred;this.instancesDeferred.set(normalizedIdentifier,deferred);try{var instance=this.getOrInitializeService(normalizedIdentifier);instance&&deferred.resolve(instance)}catch(e){}}return this.instancesDeferred.get(normalizedIdentifier).promise},Provider.prototype.getImmediate=function(options){var _a=tslib.__assign({identifier:\"[DEFAULT]\",optional:!1},options),optional=_a.optional,normalizedIdentifier=this.normalizeInstanceIdentifier(_a.identifier);try{var instance=this.getOrInitializeService(normalizedIdentifier);if(!instance){if(optional)return null;throw Error(\"Service \"+this.name+\" is not available\")}return instance}catch(e){if(optional)return null;throw e}},Provider.prototype.getComponent=function(){return this.component},Provider.prototype.setComponent=function(component){var e_1,_a;if(component.name!==this.name)throw Error(\"Mismatching Component \"+component.name+\" for Provider \"+this.name+\".\");if(this.component)throw Error(\"Component for \"+this.name+\" has already been provided\");if(this.component=component,function(component){return\"EAGER\"===component.instantiationMode}(component))try{this.getOrInitializeService(\"[DEFAULT]\")}catch(e){}try{for(var _b=tslib.__values(this.instancesDeferred.entries()),_c=_b.next();!_c.done;_c=_b.next()){var _d=tslib.__read(_c.value,2),instanceDeferred=_d[1],normalizedIdentifier=this.normalizeInstanceIdentifier(_d[0]);try{var instance=this.getOrInitializeService(normalizedIdentifier);instanceDeferred.resolve(instance)}catch(e){}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}},Provider.prototype.clearInstance=function(identifier){void 0===identifier&&(identifier=\"[DEFAULT]\"),this.instancesDeferred.delete(identifier),this.instances.delete(identifier)},Provider.prototype.delete=function(){return tslib.__awaiter(this,void 0,void 0,(function(){var services;return tslib.__generator(this,(function(_a){switch(_a.label){case 0:return services=Array.from(this.instances.values()),[4,Promise.all(tslib.__spread(services.filter((function(service){return\"INTERNAL\"in service})).map((function(service){return service.INTERNAL.delete()})),services.filter((function(service){return\"_delete\"in service})).map((function(service){return service._delete()}))))];case 1:return _a.sent(),[2]}}))}))},Provider.prototype.isComponentSet=function(){return null!=this.component},Provider.prototype.getOrInitializeService=function(identifier){var instance=this.instances.get(identifier);return!instance&&this.component&&(instance=this.component.instanceFactory(this.container,function(identifier){return\"[DEFAULT]\"===identifier?void 0:identifier}(identifier)),this.instances.set(identifier,instance)),instance||null},Provider.prototype.normalizeInstanceIdentifier=function(identifier){return this.component?this.component.multipleInstances?identifier:\"[DEFAULT]\":identifier},Provider}(),ComponentContainer=function(){function ComponentContainer(name){this.name=name,this.providers=new Map}return ComponentContainer.prototype.addComponent=function(component){var provider=this.getProvider(component.name);if(provider.isComponentSet())throw new Error(\"Component \"+component.name+\" has already been registered with \"+this.name);provider.setComponent(component)},ComponentContainer.prototype.addOrOverwriteComponent=function(component){this.getProvider(component.name).isComponentSet()&&this.providers.delete(component.name),this.addComponent(component)},ComponentContainer.prototype.getProvider=function(name){if(this.providers.has(name))return this.providers.get(name);var provider=new Provider(name,this);return this.providers.set(name,provider),provider},ComponentContainer.prototype.getProviders=function(){return Array.from(this.providers.values())},ComponentContainer}();exports.Component=Component,exports.ComponentContainer=ComponentContainer,exports.Provider=Provider},Wcq6:function(module,exports,__webpack_require__){\"use strict\";function _interopDefaultLegacy(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var firebase__default=_interopDefaultLegacy(__webpack_require__(\"wj3C\"));firebase__default.default.registerVersion(\"firebase\",\"7.24.0\",\"app\"),module.exports=firebase__default.default},bQlE:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var firebase=__webpack_require__(\"wj3C\");__webpack_require__(\"fSjL\");var tslib=__webpack_require__(\"mrSG\"),util=__webpack_require__(\"zVF4\"),logger$1=__webpack_require__(\"q/0M\"),component=__webpack_require__(\"S+S0\");function _interopDefaultLegacy(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}var _a,apiInstance,windowInstance,firebase__default=_interopDefaultLegacy(firebase),ERROR_DESCRIPTION_MAP=((_a={})[\"trace started\"]=\"Trace {$traceName} was started before.\",_a[\"trace stopped\"]=\"Trace {$traceName} is not running.\",_a[\"nonpositive trace startTime\"]=\"Trace {$traceName} startTime should be positive.\",_a[\"nonpositive trace duration\"]=\"Trace {$traceName} duration should be positive.\",_a[\"no window\"]=\"Window is not available.\",_a[\"no app id\"]=\"App id is not available.\",_a[\"no project id\"]=\"Project id is not available.\",_a[\"no api key\"]=\"Api key is not available.\",_a[\"invalid cc log\"]=\"Attempted to queue invalid cc event\",_a[\"FB not default\"]=\"Performance can only start when Firebase app instance is the default one.\",_a[\"RC response not ok\"]=\"RC response is not ok\",_a[\"invalid attribute name\"]=\"Attribute name {$attributeName} is invalid.\",_a[\"invalid attribute value\"]=\"Attribute value {$attributeValue} is invalid.\",_a[\"invalid custom metric name\"]=\"Custom metric name {$customMetricName} is invalid\",_a[\"invalid String merger input\"]=\"Input for String merger is invalid, contact support team to resolve.\",_a),ERROR_FACTORY=new util.ErrorFactory(\"performance\",\"Performance\",ERROR_DESCRIPTION_MAP),consoleLogger=new logger$1.Logger(\"Performance\");consoleLogger.logLevel=logger$1.LogLevel.INFO;var settingsServiceInstance,Api=function(){function Api(window){if(this.window=window,!window)throw ERROR_FACTORY.create(\"no window\");this.performance=window.performance,this.PerformanceObserver=window.PerformanceObserver,this.windowLocation=window.location,this.navigator=window.navigator,this.document=window.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=window.localStorage),window.perfMetrics&&window.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=window.perfMetrics.onFirstInputDelay)}return Api.prototype.getUrl=function(){return this.windowLocation.href.split(\"?\")[0]},Api.prototype.mark=function(name){this.performance&&this.performance.mark&&this.performance.mark(name)},Api.prototype.measure=function(measureName,mark1,mark2){this.performance&&this.performance.measure&&this.performance.measure(measureName,mark1,mark2)},Api.prototype.getEntriesByType=function(type){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(type):[]},Api.prototype.getEntriesByName=function(name){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(name):[]},Api.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},Api.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!util.isIndexedDBAvailable()||(consoleLogger.info(\"IndexedDB is not supported by current browswer\"),!1):(consoleLogger.info(\"Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.\"),!1)},Api.prototype.setupObserver=function(entryType,callback){this.PerformanceObserver&&new this.PerformanceObserver((function(list){for(var _i=0,_a=list.getEntries();_i<_a.length;_i++)callback(_a[_i])})).observe({entryTypes:[entryType]})},Api.getInstance=function(){return void 0===apiInstance&&(apiInstance=new Api(windowInstance)),apiInstance},Api}();function mergeStrings(part1,part2){var sizeDiff=part1.length-part2.length;if(sizeDiff<0||sizeDiff>1)throw ERROR_FACTORY.create(\"invalid String merger input\");for(var resultArray=[],i=0;i<part1.length;i++)resultArray.push(part1.charAt(i)),part2.length>i&&resultArray.push(part2.charAt(i));return resultArray.join(\"\")}var iid,SettingsService=function(){function SettingsService(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl=\"https://firebaselogging.googleapis.com/v0cc/log?format=json_proto\",this.flTransportEndpointUrl=mergeStrings(\"hts/frbslgigp.ogepscmv/ieo/eaylg\",\"tp:/ieaeogn-agolai.o/1frlglgc/o\"),this.transportKey=mergeStrings(\"AzSC8r6ReiGqFMyfvgow\",\"Iayx0u-XT3vksVM-pIV\"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return SettingsService.prototype.getAppId=function(){var appId=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!appId)throw ERROR_FACTORY.create(\"no app id\");return appId},SettingsService.prototype.getProjectId=function(){var projectId=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!projectId)throw ERROR_FACTORY.create(\"no project id\");return projectId},SettingsService.prototype.getApiKey=function(){var apiKey=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!apiKey)throw ERROR_FACTORY.create(\"no api key\");return apiKey},SettingsService.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat(\"?key=\",this.transportKey)},SettingsService.getInstance=function(){return void 0===settingsServiceInstance&&(settingsServiceInstance=new SettingsService),settingsServiceInstance},SettingsService}();function getIid(){return iid}var VisibilityState=function(VisibilityState){return VisibilityState[VisibilityState.UNKNOWN=0]=\"UNKNOWN\",VisibilityState[VisibilityState.VISIBLE=1]=\"VISIBLE\",VisibilityState[VisibilityState.HIDDEN=2]=\"HIDDEN\",VisibilityState}({}),RESERVED_ATTRIBUTE_PREFIXES=[\"firebase_\",\"google_\",\"ga_\"],ATTRIBUTE_FORMAT_REGEX=new RegExp(\"^[a-zA-Z]\\\\w*$\");function getServiceWorkerStatus(){var navigator=Api.getInstance().navigator;return\"serviceWorker\"in navigator?navigator.serviceWorker.controller?2:3:1}function getVisibilityState(){switch(Api.getInstance().document.visibilityState){case\"visible\":return VisibilityState.VISIBLE;case\"hidden\":return VisibilityState.HIDDEN;default:return VisibilityState.UNKNOWN}}function getEffectiveConnectionType(){var navigatorConnection=Api.getInstance().navigator.connection;switch(navigatorConnection&&navigatorConnection.effectiveType){case\"slow-2g\":return 1;case\"2g\":return 2;case\"3g\":return 3;case\"4g\":return 4;default:return 0}}function processConfig(config){if(!config)return config;var settingsServiceInstance=SettingsService.getInstance(),entries=config.entries||{};return settingsServiceInstance.loggingEnabled=void 0===entries.fpr_enabled||\"true\"===String(entries.fpr_enabled),entries.fpr_log_source&&(settingsServiceInstance.logSource=Number(entries.fpr_log_source)),entries.fpr_log_endpoint_url&&(settingsServiceInstance.logEndPointUrl=entries.fpr_log_endpoint_url),entries.fpr_log_transport_key&&(settingsServiceInstance.transportKey=entries.fpr_log_transport_key),void 0!==entries.fpr_vc_network_request_sampling_rate&&(settingsServiceInstance.networkRequestsSamplingRate=Number(entries.fpr_vc_network_request_sampling_rate)),void 0!==entries.fpr_vc_trace_sampling_rate&&(settingsServiceInstance.tracesSamplingRate=Number(entries.fpr_vc_trace_sampling_rate)),settingsServiceInstance.logTraceAfterSampling=shouldLogAfterSampling(settingsServiceInstance.tracesSamplingRate),settingsServiceInstance.logNetworkAfterSampling=shouldLogAfterSampling(settingsServiceInstance.networkRequestsSamplingRate),config}function shouldLogAfterSampling(samplingRate){return Math.random()<=samplingRate}var initializationPromise,initializationStatus=1;function getInitializationPromise(){return initializationStatus=2,initializationPromise=initializationPromise||function(){var document=Api.getInstance().document;return new Promise((function(resolve){if(document&&\"complete\"!==document.readyState){var handler_1=function(){\"complete\"===document.readyState&&(document.removeEventListener(\"readystatechange\",handler_1),resolve())};document.addEventListener(\"readystatechange\",handler_1)}else resolve()}))}().then((function(){return(iidPromise=SettingsService.getInstance().installationsService.getId()).then((function(iidVal){iid=iidVal})),iidPromise;var iidPromise})).then((function(iid){return function(iid){var config=function(){var localStorage=Api.getInstance().localStorage;if(localStorage){var expiryString=localStorage.getItem(\"@firebase/performance/configexpire\");if(expiryString&&Number(expiryString)>Date.now()){var configStringified=localStorage.getItem(\"@firebase/performance/config\");if(configStringified)try{return JSON.parse(configStringified)}catch(_a){return}}}}();return config?(processConfig(config),Promise.resolve()):function(iid){return(authTokenPromise=SettingsService.getInstance().installationsService.getToken(),authTokenPromise.then((function(authTokenVal){})),authTokenPromise).then((function(authToken){var configEndPoint=\"https://firebaseremoteconfig.googleapis.com/v1/projects/\"+SettingsService.getInstance().getProjectId()+\"/namespaces/fireperf:fetch?key=\"+SettingsService.getInstance().getApiKey(),request=new Request(configEndPoint,{method:\"POST\",headers:{Authorization:\"FIREBASE_INSTALLATIONS_AUTH \"+authToken},body:JSON.stringify({app_instance_id:iid,app_instance_id_token:authToken,app_id:SettingsService.getInstance().getAppId(),app_version:\"0.4.2\",sdk_version:\"0.0.1\"})});return fetch(request).then((function(response){if(response.ok)return response.json();throw ERROR_FACTORY.create(\"RC response not ok\")}))})).catch((function(){consoleLogger.info(\"Could not fetch config, will use default configs\")}));var authTokenPromise}(iid).then(processConfig).then((function(config){return function(config){var localStorage=Api.getInstance().localStorage;config&&localStorage&&(localStorage.setItem(\"@firebase/performance/config\",JSON.stringify(config)),localStorage.setItem(\"@firebase/performance/configexpire\",String(Date.now()+60*SettingsService.getInstance().configTimeToLive*60*1e3)))}(config)}),(function(){}))}(iid)})).then((function(){return changeInitializationStatus()}),(function(){return changeInitializationStatus()}))}function changeInitializationStatus(){initializationStatus=3}var logger,remainingTries=3,queue=[],isTransportSetup=!1;function addToQueue(evt){if(!evt.eventTime||!evt.message)throw ERROR_FACTORY.create(\"invalid cc log\");queue=tslib.__spreadArrays(queue,[evt])}function sendLog(resource,resourceType){logger||(logger=function(serializer){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var message=serializer.apply(void 0,args);addToQueue({message:message,eventTime:Date.now()})}}(serializer)),logger(resource,resourceType)}function logTrace(trace){var settingsService=SettingsService.getInstance();!settingsService.instrumentationEnabled&&trace.isAuto||(settingsService.dataCollectionEnabled||trace.isAuto)&&Api.getInstance().requiredApisAvailable()&&(trace.isAuto&&getVisibilityState()!==VisibilityState.VISIBLE||(3===initializationStatus?sendTraceLog(trace):getInitializationPromise().then((function(){return sendTraceLog(trace)}),(function(){return sendTraceLog(trace)}))))}function sendTraceLog(trace){if(getIid()){var settingsService=SettingsService.getInstance();settingsService.loggingEnabled&&settingsService.logTraceAfterSampling&&setTimeout((function(){return sendLog(trace,1)}),0)}}function serializer(resource,resourceType){return 0===resourceType?(networkRequestMetric={url:(networkRequest=resource).url,http_method:networkRequest.httpMethod||0,http_response_code:200,response_payload_bytes:networkRequest.responsePayloadBytes,client_start_time_us:networkRequest.startTimeUs,time_to_response_initiated_us:networkRequest.timeToResponseInitiatedUs,time_to_response_completed_us:networkRequest.timeToResponseCompletedUs},perfMetric={application_info:getApplicationInfo(),network_request_metric:networkRequestMetric},JSON.stringify(perfMetric)):function(trace){var traceMetric={name:trace.name,is_auto:trace.isAuto,client_start_time_us:trace.startTimeUs,duration_us:trace.durationUs};0!==Object.keys(trace.counters).length&&(traceMetric.counters=trace.counters);var customAttributes=trace.getAttributes();0!==Object.keys(customAttributes).length&&(traceMetric.custom_attributes=customAttributes);var perfMetric={application_info:getApplicationInfo(),trace_metric:traceMetric};return JSON.stringify(perfMetric)}(resource);var networkRequest,networkRequestMetric,perfMetric}function getApplicationInfo(){return{google_app_id:SettingsService.getInstance().getAppId(),app_instance_id:getIid(),web_app_info:{sdk_version:\"0.4.2\",page_url:Api.getInstance().getUrl(),service_worker_status:getServiceWorkerStatus(),visibility_state:getVisibilityState(),effective_connection_type:getEffectiveConnectionType()},application_process_state:0}}var oobMetrics=[\"_fp\",\"_fcp\",\"_fid\"],Trace=function(){function Trace(name,isAuto,traceMeasureName){void 0===isAuto&&(isAuto=!1),this.name=name,this.isAuto=isAuto,this.state=1,this.customAttributes={},this.counters={},this.api=Api.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=\"FB-PERF-TRACE-START-\"+this.randomId+\"-\"+this.name,this.traceStopMark=\"FB-PERF-TRACE-STOP-\"+this.randomId+\"-\"+this.name,this.traceMeasure=traceMeasureName||\"FB-PERF-TRACE-MEASURE-\"+this.randomId+\"-\"+this.name,traceMeasureName&&this.calculateTraceMetrics())}return Trace.prototype.start=function(){if(1!==this.state)throw ERROR_FACTORY.create(\"trace started\",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},Trace.prototype.stop=function(){if(2!==this.state)throw ERROR_FACTORY.create(\"trace stopped\",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),logTrace(this)},Trace.prototype.record=function(startTime,duration,options){if(startTime<=0)throw ERROR_FACTORY.create(\"nonpositive trace startTime\",{traceName:this.name});if(duration<=0)throw ERROR_FACTORY.create(\"nonpositive trace duration\",{traceName:this.name});if(this.durationUs=Math.floor(1e3*duration),this.startTimeUs=Math.floor(1e3*startTime),options&&options.attributes&&(this.customAttributes=tslib.__assign({},options.attributes)),options&&options.metrics)for(var _i=0,_a=Object.keys(options.metrics);_i<_a.length;_i++){var metric=_a[_i];isNaN(Number(options.metrics[metric]))||(this.counters[metric]=Number(Math.floor(options.metrics[metric])))}logTrace(this)},Trace.prototype.incrementMetric=function(counter,numAsInteger){void 0===numAsInteger&&(numAsInteger=1),this.putMetric(counter,void 0===this.counters[counter]?numAsInteger:this.counters[counter]+numAsInteger)},Trace.prototype.putMetric=function(counter,numAsInteger){if(!function(name,traceName){return!(0===name.length||name.length>100)&&(traceName&&traceName.startsWith(\"_wt_\")&&oobMetrics.indexOf(name)>-1||!name.startsWith(\"_\"))}(counter,this.name))throw ERROR_FACTORY.create(\"invalid custom metric name\",{customMetricName:counter});var providedValue,valueAsInteger;this.counters[counter]=(providedValue=numAsInteger,(valueAsInteger=Math.floor(providedValue))<providedValue&&consoleLogger.info(\"Metric value should be an Integer, setting the value as : \"+valueAsInteger+\".\"),valueAsInteger)},Trace.prototype.getMetric=function(counter){return this.counters[counter]||0},Trace.prototype.putAttribute=function(attr,value){var isValidName=function(name){return!(0===name.length||name.length>40||RESERVED_ATTRIBUTE_PREFIXES.some((function(prefix){return name.startsWith(prefix)}))||!name.match(ATTRIBUTE_FORMAT_REGEX))}(attr),isValidValue=function(value){return 0!==value.length&&value.length<=100}(value);if(isValidName&&isValidValue)this.customAttributes[attr]=value;else{if(!isValidName)throw ERROR_FACTORY.create(\"invalid attribute name\",{attributeName:attr});if(!isValidValue)throw ERROR_FACTORY.create(\"invalid attribute value\",{attributeValue:value})}},Trace.prototype.getAttribute=function(attr){return this.customAttributes[attr]},Trace.prototype.removeAttribute=function(attr){void 0!==this.customAttributes[attr]&&delete this.customAttributes[attr]},Trace.prototype.getAttributes=function(){return tslib.__assign({},this.customAttributes)},Trace.prototype.setStartTime=function(startTime){this.startTimeUs=startTime},Trace.prototype.setDuration=function(duration){this.durationUs=duration},Trace.prototype.calculateTraceMetrics=function(){var perfMeasureEntries=this.api.getEntriesByName(this.traceMeasure),perfMeasureEntry=perfMeasureEntries&&perfMeasureEntries[0];perfMeasureEntry&&(this.durationUs=Math.floor(1e3*perfMeasureEntry.duration),this.startTimeUs=Math.floor(1e3*(perfMeasureEntry.startTime+this.api.getTimeOrigin())))},Trace.createOobTrace=function(navigationTimings,paintTimings,firstInputDelay){var route=Api.getInstance().getUrl();if(route){var trace=new Trace(\"_wt_\"+route,!0),timeOriginUs=Math.floor(1e3*Api.getInstance().getTimeOrigin());if(trace.setStartTime(timeOriginUs),navigationTimings&&navigationTimings[0]&&(trace.setDuration(Math.floor(1e3*navigationTimings[0].duration)),trace.putMetric(\"domInteractive\",Math.floor(1e3*navigationTimings[0].domInteractive)),trace.putMetric(\"domContentLoadedEventEnd\",Math.floor(1e3*navigationTimings[0].domContentLoadedEventEnd)),trace.putMetric(\"loadEventEnd\",Math.floor(1e3*navigationTimings[0].loadEventEnd))),paintTimings){var firstPaint=paintTimings.find((function(paintObject){return\"first-paint\"===paintObject.name}));firstPaint&&firstPaint.startTime&&trace.putMetric(\"_fp\",Math.floor(1e3*firstPaint.startTime));var firstContentfulPaint=paintTimings.find((function(paintObject){return\"first-contentful-paint\"===paintObject.name}));firstContentfulPaint&&firstContentfulPaint.startTime&&trace.putMetric(\"_fcp\",Math.floor(1e3*firstContentfulPaint.startTime)),firstInputDelay&&trace.putMetric(\"_fid\",Math.floor(1e3*firstInputDelay))}logTrace(trace)}},Trace.createUserTimingTrace=function(measureName){logTrace(new Trace(measureName,!1,measureName))},Trace}();function createNetworkRequestEntry(entry){var performanceEntry=entry;if(performanceEntry&&void 0!==performanceEntry.responseStart){var timeOrigin=Api.getInstance().getTimeOrigin(),startTimeUs=Math.floor(1e3*(performanceEntry.startTime+timeOrigin)),timeToResponseInitiatedUs=performanceEntry.responseStart?Math.floor(1e3*(performanceEntry.responseStart-performanceEntry.startTime)):void 0,timeToResponseCompletedUs=Math.floor(1e3*(performanceEntry.responseEnd-performanceEntry.startTime));!function(networkRequest){var settingsService=SettingsService.getInstance();if(settingsService.instrumentationEnabled){var networkRequestUrl=networkRequest.url,logEndpointUrl=settingsService.logEndPointUrl.split(\"?\")[0],flEndpointUrl=settingsService.flTransportEndpointUrl.split(\"?\")[0];networkRequestUrl!==logEndpointUrl&&networkRequestUrl!==flEndpointUrl&&settingsService.loggingEnabled&&settingsService.logNetworkAfterSampling&&setTimeout((function(){return sendLog(networkRequest,0)}),0)}}({url:performanceEntry.name&&performanceEntry.name.split(\"?\")[0],responsePayloadBytes:performanceEntry.transferSize,startTimeUs:startTimeUs,timeToResponseInitiatedUs:timeToResponseInitiatedUs,timeToResponseCompletedUs:timeToResponseCompletedUs})}}function setupOobResources(){getIid()&&(setTimeout((function(){return function(){var api=Api.getInstance(),navigationTimings=api.getEntriesByType(\"navigation\"),paintTimings=api.getEntriesByType(\"paint\");if(api.onFirstInputDelay){var timeoutId_1=setTimeout((function(){Trace.createOobTrace(navigationTimings,paintTimings),timeoutId_1=void 0}),5e3);api.onFirstInputDelay((function(fid){timeoutId_1&&(clearTimeout(timeoutId_1),Trace.createOobTrace(navigationTimings,paintTimings,fid))}))}else Trace.createOobTrace(navigationTimings,paintTimings)}()}),0),setTimeout((function(){return function(){for(var api=Api.getInstance(),_i=0,resources_1=api.getEntriesByType(\"resource\");_i<resources_1.length;_i++)createNetworkRequestEntry(resources_1[_i]);api.setupObserver(\"resource\",createNetworkRequestEntry)}()}),0),setTimeout((function(){return function(){for(var api=Api.getInstance(),_i=0,measures_1=api.getEntriesByType(\"measure\");_i<measures_1.length;_i++)createUserTimingTrace(measures_1[_i]);api.setupObserver(\"measure\",createUserTimingTrace)}()}),0))}function createUserTimingTrace(measure){var measureName=measure.name;\"FB-PERF-TRACE-MEASURE\"!==measureName.substring(0,\"FB-PERF-TRACE-MEASURE\".length)&&Trace.createUserTimingTrace(measureName)}var PerformanceController=function(){function PerformanceController(app){this.app=app,Api.getInstance().requiredApisAvailable()&&util.validateIndexedDBOpenable().then((function(isAvailable){isAvailable&&(isTransportSetup||(function processQueue(timeOffset){setTimeout((function(){if(0!==remainingTries)return queue.length?void function(){var staged=tslib.__spreadArrays(queue);queue=[];var log_event=staged.map((function(evt){return{source_extension_json_proto3:evt.message,event_time_ms:String(evt.eventTime)}}));(function(data,staged){return function(data){var flTransportFullUrl=SettingsService.getInstance().getFlTransportFullUrl();return fetch(flTransportFullUrl,{method:\"POST\",body:JSON.stringify(data)})}(data).then((function(res){return res.ok||consoleLogger.info(\"Call to Firebase backend failed.\"),res.json()})).then((function(res){var transportWait=Number(res.nextRequestWaitMillis),requestOffset=1e4;isNaN(transportWait)||(requestOffset=Math.max(transportWait,requestOffset));var logResponseDetails=res.logResponseDetails;Array.isArray(logResponseDetails)&&logResponseDetails.length>0&&\"RETRY_REQUEST_LATER\"===logResponseDetails[0].responseAction&&(queue=tslib.__spreadArrays(staged,queue),consoleLogger.info(\"Retry transport request later.\")),remainingTries=3,processQueue(requestOffset)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:SettingsService.getInstance().logSource,log_event:log_event},staged).catch((function(){queue=tslib.__spreadArrays(staged,queue),remainingTries--,consoleLogger.info(\"Tries left: \"+remainingTries+\".\"),processQueue(1e4)}))}():processQueue(1e4)}),timeOffset)}(5500),isTransportSetup=!0),getInitializationPromise().then(setupOobResources,setupOobResources))})).catch((function(error){consoleLogger.info(\"Environment doesn't support IndexedDB: \"+error)}))}return PerformanceController.prototype.trace=function(name){return new Trace(name)},Object.defineProperty(PerformanceController.prototype,\"instrumentationEnabled\",{get:function(){return SettingsService.getInstance().instrumentationEnabled},set:function(val){SettingsService.getInstance().instrumentationEnabled=val},enumerable:!1,configurable:!0}),Object.defineProperty(PerformanceController.prototype,\"dataCollectionEnabled\",{get:function(){return SettingsService.getInstance().dataCollectionEnabled},set:function(val){SettingsService.getInstance().dataCollectionEnabled=val},enumerable:!1,configurable:!0}),PerformanceController}();function registerPerformance(instance){instance.INTERNAL.registerComponent(new component.Component(\"performance\",(function(container){return function(app,installations){if(\"[DEFAULT]\"!==app.name)throw ERROR_FACTORY.create(\"FB not default\");if(\"undefined\"==typeof window)throw ERROR_FACTORY.create(\"no window\");return function(window){windowInstance=window}(window),SettingsService.getInstance().firebaseAppInstance=app,SettingsService.getInstance().installationsService=installations,new PerformanceController(app)}(container.getProvider(\"app\").getImmediate(),container.getProvider(\"installations\").getImmediate())}),\"PUBLIC\")),instance.registerVersion(\"@firebase/performance\",\"0.4.2\")}registerPerformance(firebase__default.default),exports.registerPerformance=registerPerformance},fSjL:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"registerInstallations\",(function(){return registerInstallations}));var _a,_firebase_app__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(\"wj3C\"),_firebase_app__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_firebase_app__WEBPACK_IMPORTED_MODULE_0__),_firebase_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"S+S0\"),tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"mrSG\"),_firebase_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"zVF4\"),idb__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"nbvr\"),ERROR_DESCRIPTION_MAP=((_a={})[\"missing-app-config-values\"]='Missing App configuration value: \"{$valueName}\"',_a[\"not-registered\"]=\"Firebase Installation is not registered.\",_a[\"installation-not-found\"]=\"Firebase Installation not found.\",_a[\"request-failed\"]='{$requestName} request failed with error \"{$serverCode} {$serverStatus}: {$serverMessage}\"',_a[\"app-offline\"]=\"Could not process request. Application offline.\",_a[\"delete-pending-registration\"]=\"Can't delete installation while there is a pending registration request.\",_a),ERROR_FACTORY=new _firebase_util__WEBPACK_IMPORTED_MODULE_3__.ErrorFactory(\"installations\",\"Installations\",ERROR_DESCRIPTION_MAP);function isServerError(error){return error instanceof _firebase_util__WEBPACK_IMPORTED_MODULE_3__.FirebaseError&&error.code.includes(\"request-failed\")}function getInstallationsEndpoint(_a){return\"https://firebaseinstallations.googleapis.com/v1/projects/\"+_a.projectId+\"/installations\"}function extractAuthTokenInfoFromResponse(response){return{token:response.token,requestStatus:2,expiresIn:(responseExpiresIn=response.expiresIn,Number(responseExpiresIn.replace(\"s\",\"000\"))),creationTime:Date.now()};var responseExpiresIn}function getErrorFromResponse(requestName,response){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var responseJson,errorData;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,response.json()];case 1:return responseJson=_a.sent(),[2,ERROR_FACTORY.create(\"request-failed\",{requestName:requestName,serverCode:(errorData=responseJson.error).code,serverMessage:errorData.message,serverStatus:errorData.status})]}}))}))}function getHeaders(_a){return new Headers({\"Content-Type\":\"application/json\",Accept:\"application/json\",\"x-goog-api-key\":_a.apiKey})}function getHeadersWithAuth(appConfig,_a){var refreshToken=_a.refreshToken,headers=getHeaders(appConfig);return headers.append(\"Authorization\",function(refreshToken){return\"FIS_v2 \"+refreshToken}(refreshToken)),headers}function retryIfServerError(fn){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var result;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,fn()];case 1:return(result=_a.sent()).status>=500&&result.status<600?[2,fn()]:[2,result]}}))}))}function createInstallationRequest(appConfig,_a){var fid=_a.fid;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var endpoint,headers,request,response,responseValue;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_b){switch(_b.label){case 0:return endpoint=getInstallationsEndpoint(appConfig),headers=getHeaders(appConfig),request={method:\"POST\",headers:headers,body:JSON.stringify({fid:fid,authVersion:\"FIS_v2\",appId:appConfig.appId,sdkVersion:\"w:0.4.17\"})},[4,retryIfServerError((function(){return fetch(endpoint,request)}))];case 1:return(response=_b.sent()).ok?[4,response.json()]:[3,3];case 2:return[2,{fid:(responseValue=_b.sent()).fid||fid,registrationStatus:2,refreshToken:responseValue.refreshToken,authToken:extractAuthTokenInfoFromResponse(responseValue.authToken)}];case 3:return[4,getErrorFromResponse(\"Create Installation\",response)];case 4:throw _b.sent()}}))}))}function sleep(ms){return new Promise((function(resolve){setTimeout(resolve,ms)}))}var VALID_FID_PATTERN=/^[cdef][\\w-]{21}$/;function generateFid(){try{var fidByteArray=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(fidByteArray),fidByteArray[0]=112+fidByteArray[0]%16;var fid=function(fidByteArray){return(array=fidByteArray,btoa(String.fromCharCode.apply(String,Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__spread)(array))).replace(/\\+/g,\"-\").replace(/\\//g,\"_\")).substr(0,22);var array}(fidByteArray);return VALID_FID_PATTERN.test(fid)?fid:\"\"}catch(_a){return\"\"}}function getKey(appConfig){return appConfig.appName+\"!\"+appConfig.appId}var fidChangeCallbacks=new Map;function fidChanged(appConfig,fid){var key=getKey(appConfig);callFidChangeCallbacks(key,fid),function(key,fid){var channel=getBroadcastChannel();channel&&channel.postMessage({key:key,fid:fid}),closeBroadcastChannel()}(key,fid)}function callFidChangeCallbacks(key,fid){var e_1,_a,callbacks=fidChangeCallbacks.get(key);if(callbacks)try{for(var callbacks_1=Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__values)(callbacks),callbacks_1_1=callbacks_1.next();!callbacks_1_1.done;callbacks_1_1=callbacks_1.next())(0,callbacks_1_1.value)(fid)}catch(e_1_1){e_1={error:e_1_1}}finally{try{callbacks_1_1&&!callbacks_1_1.done&&(_a=callbacks_1.return)&&_a.call(callbacks_1)}finally{if(e_1)throw e_1.error}}}var broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&\"BroadcastChannel\"in self&&((broadcastChannel=new BroadcastChannel(\"[Firebase] FID Change\")).onmessage=function(e){callFidChangeCallbacks(e.data.key,e.data.fid)}),broadcastChannel}function closeBroadcastChannel(){0===fidChangeCallbacks.size&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}var OBJECT_STORE_NAME=\"firebase-installations-store\",dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=Object(idb__WEBPACK_IMPORTED_MODULE_4__.openDb)(\"firebase-installations-database\",1,(function(upgradeDB){switch(upgradeDB.oldVersion){case 0:upgradeDB.createObjectStore(OBJECT_STORE_NAME)}}))),dbPromise}function set(appConfig,value){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var key,db,tx,objectStore,oldValue;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return key=getKey(appConfig),[4,getDbPromise()];case 1:return db=_a.sent(),tx=db.transaction(OBJECT_STORE_NAME,\"readwrite\"),[4,(objectStore=tx.objectStore(OBJECT_STORE_NAME)).get(key)];case 2:return oldValue=_a.sent(),[4,objectStore.put(value,key)];case 3:return _a.sent(),[4,tx.complete];case 4:return _a.sent(),oldValue&&oldValue.fid===value.fid||fidChanged(appConfig,value.fid),[2,value]}}))}))}function remove(appConfig){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var key,db,tx;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return key=getKey(appConfig),[4,getDbPromise()];case 1:return db=_a.sent(),[4,(tx=db.transaction(OBJECT_STORE_NAME,\"readwrite\")).objectStore(OBJECT_STORE_NAME).delete(key)];case 2:return _a.sent(),[4,tx.complete];case 3:return _a.sent(),[2]}}))}))}function update(appConfig,updateFn){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var key,db,tx,store,oldValue,newValue;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return key=getKey(appConfig),[4,getDbPromise()];case 1:return db=_a.sent(),tx=db.transaction(OBJECT_STORE_NAME,\"readwrite\"),[4,(store=tx.objectStore(OBJECT_STORE_NAME)).get(key)];case 2:return oldValue=_a.sent(),void 0!==(newValue=updateFn(oldValue))?[3,4]:[4,store.delete(key)];case 3:return _a.sent(),[3,6];case 4:return[4,store.put(newValue,key)];case 5:_a.sent(),_a.label=6;case 6:return[4,tx.complete];case 7:return _a.sent(),!newValue||oldValue&&oldValue.fid===newValue.fid||fidChanged(appConfig,newValue.fid),[2,newValue]}}))}))}function getInstallationEntry(appConfig){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var registrationPromise,installationEntry,_a;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_b){switch(_b.label){case 0:return[4,update(appConfig,(function(oldEntry){var installationEntry=function(oldEntry){return clearTimedOutRequest(oldEntry||{fid:generateFid(),registrationStatus:0})}(oldEntry),entryWithPromise=function(appConfig,installationEntry){if(0===installationEntry.registrationStatus){if(!navigator.onLine)return{installationEntry:installationEntry,registrationPromise:Promise.reject(ERROR_FACTORY.create(\"app-offline\"))};var inProgressEntry={fid:installationEntry.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:inProgressEntry,registrationPromise:function(appConfig,installationEntry){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var registeredInstallationEntry,e_1;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,2,,7]),[4,createInstallationRequest(appConfig,installationEntry)];case 1:return registeredInstallationEntry=_a.sent(),[2,set(appConfig,registeredInstallationEntry)];case 2:return isServerError(e_1=_a.sent())&&409===e_1.serverCode?[4,remove(appConfig)]:[3,4];case 3:return _a.sent(),[3,6];case 4:return[4,set(appConfig,{fid:installationEntry.fid,registrationStatus:0})];case 5:_a.sent(),_a.label=6;case 6:throw e_1;case 7:return[2]}}))}))}(appConfig,inProgressEntry)}}return 1===installationEntry.registrationStatus?{installationEntry:installationEntry,registrationPromise:waitUntilFidRegistration(appConfig)}:{installationEntry:installationEntry}}(appConfig,installationEntry);return registrationPromise=entryWithPromise.registrationPromise,entryWithPromise.installationEntry}))];case 1:return\"\"!==(installationEntry=_b.sent()).fid?[3,3]:(_a={},[4,registrationPromise]);case 2:return[2,(_a.installationEntry=_b.sent(),_a)];case 3:return[2,{installationEntry:installationEntry,registrationPromise:registrationPromise}]}}))}))}function waitUntilFidRegistration(appConfig){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var entry,_a,installationEntry,registrationPromise;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_b){switch(_b.label){case 0:return[4,updateInstallationRequest(appConfig)];case 1:entry=_b.sent(),_b.label=2;case 2:return 1!==entry.registrationStatus?[3,5]:[4,sleep(100)];case 3:return _b.sent(),[4,updateInstallationRequest(appConfig)];case 4:return entry=_b.sent(),[3,2];case 5:return 0!==entry.registrationStatus?[3,7]:[4,getInstallationEntry(appConfig)];case 6:return _a=_b.sent(),installationEntry=_a.installationEntry,(registrationPromise=_a.registrationPromise)?[2,registrationPromise]:[2,installationEntry];case 7:return[2,entry]}}))}))}function updateInstallationRequest(appConfig){return update(appConfig,(function(oldEntry){if(!oldEntry)throw ERROR_FACTORY.create(\"installation-not-found\");return clearTimedOutRequest(oldEntry)}))}function clearTimedOutRequest(entry){return 1===(installationEntry=entry).registrationStatus&&installationEntry.registrationTime+1e4<Date.now()?{fid:entry.fid,registrationStatus:0}:entry;var installationEntry}function generateAuthTokenRequest(_a,installationEntry){var appConfig=_a.appConfig,platformLoggerProvider=_a.platformLoggerProvider;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var endpoint,headers,platformLogger,request,response;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_b){switch(_b.label){case 0:return endpoint=function(appConfig,_a){var fid=_a.fid;return getInstallationsEndpoint(appConfig)+\"/\"+fid+\"/authTokens:generate\"}(appConfig,installationEntry),headers=getHeadersWithAuth(appConfig,installationEntry),(platformLogger=platformLoggerProvider.getImmediate({optional:!0}))&&headers.append(\"x-firebase-client\",platformLogger.getPlatformInfoString()),request={method:\"POST\",headers:headers,body:JSON.stringify({installation:{sdkVersion:\"w:0.4.17\"}})},[4,retryIfServerError((function(){return fetch(endpoint,request)}))];case 1:return(response=_b.sent()).ok?[4,response.json()]:[3,3];case 2:return[2,extractAuthTokenInfoFromResponse(_b.sent())];case 3:return[4,getErrorFromResponse(\"Generate Auth Token\",response)];case 4:throw _b.sent()}}))}))}function refreshAuthToken(dependencies,forceRefresh){return void 0===forceRefresh&&(forceRefresh=!1),Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var tokenPromise,entry,_a;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_b){switch(_b.label){case 0:return[4,update(dependencies.appConfig,(function(oldEntry){if(!isEntryRegistered(oldEntry))throw ERROR_FACTORY.create(\"not-registered\");var authToken,oldAuthToken=oldEntry.authToken;if(!forceRefresh&&2===(authToken=oldAuthToken).requestStatus&&!function(authToken){var now=Date.now();return now<authToken.creationTime||authToken.creationTime+authToken.expiresIn<now+36e5}(authToken))return oldEntry;if(1===oldAuthToken.requestStatus)return tokenPromise=function(dependencies,forceRefresh){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var entry,authToken;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,updateAuthTokenRequest(dependencies.appConfig)];case 1:entry=_a.sent(),_a.label=2;case 2:return 1!==entry.authToken.requestStatus?[3,5]:[4,sleep(100)];case 3:return _a.sent(),[4,updateAuthTokenRequest(dependencies.appConfig)];case 4:return entry=_a.sent(),[3,2];case 5:return 0===(authToken=entry.authToken).requestStatus?[2,refreshAuthToken(dependencies,forceRefresh)]:[2,authToken]}}))}))}(dependencies,forceRefresh),oldEntry;if(!navigator.onLine)throw ERROR_FACTORY.create(\"app-offline\");var inProgressEntry=function(oldEntry){var inProgressAuthToken={requestStatus:1,requestTime:Date.now()};return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({},oldEntry),{authToken:inProgressAuthToken})}(oldEntry);return tokenPromise=function(dependencies,installationEntry){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var authToken,e_1,updatedInstallationEntry;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,8]),[4,generateAuthTokenRequest(dependencies,installationEntry)];case 1:return authToken=_a.sent(),updatedInstallationEntry=Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({},installationEntry),{authToken:authToken}),[4,set(dependencies.appConfig,updatedInstallationEntry)];case 2:return _a.sent(),[2,authToken];case 3:return!isServerError(e_1=_a.sent())||401!==e_1.serverCode&&404!==e_1.serverCode?[3,5]:[4,remove(dependencies.appConfig)];case 4:return _a.sent(),[3,7];case 5:return updatedInstallationEntry=Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({},installationEntry),{authToken:{requestStatus:0}}),[4,set(dependencies.appConfig,updatedInstallationEntry)];case 6:_a.sent(),_a.label=7;case 7:throw e_1;case 8:return[2]}}))}))}(dependencies,inProgressEntry),inProgressEntry}))];case 1:return entry=_b.sent(),tokenPromise?[4,tokenPromise]:[3,3];case 2:return _a=_b.sent(),[3,4];case 3:_a=entry.authToken,_b.label=4;case 4:return[2,_a]}}))}))}function updateAuthTokenRequest(appConfig){return update(appConfig,(function(oldEntry){if(!isEntryRegistered(oldEntry))throw ERROR_FACTORY.create(\"not-registered\");var authToken;return 1===(authToken=oldEntry.authToken).requestStatus&&authToken.requestTime+1e4<Date.now()?Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__assign)({},oldEntry),{authToken:{requestStatus:0}}):oldEntry}))}function isEntryRegistered(installationEntry){return void 0!==installationEntry&&2===installationEntry.registrationStatus}function completeInstallationRegistration(appConfig){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var registrationPromise;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,getInstallationEntry(appConfig)];case 1:return(registrationPromise=_a.sent().registrationPromise)?[4,registrationPromise]:[3,3];case 2:_a.sent(),_a.label=3;case 3:return[2]}}))}))}function deleteInstallationRequest(appConfig,installationEntry){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var endpoint,headers,request,response;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return endpoint=function(appConfig,_a){var fid=_a.fid;return getInstallationsEndpoint(appConfig)+\"/\"+fid}(appConfig,installationEntry),headers=getHeadersWithAuth(appConfig,installationEntry),request={method:\"DELETE\",headers:headers},[4,retryIfServerError((function(){return fetch(endpoint,request)}))];case 1:return(response=_a.sent()).ok?[3,3]:[4,getErrorFromResponse(\"Delete Installation\",response)];case 2:throw _a.sent();case 3:return[2]}}))}))}function getMissingValueError(valueName){return ERROR_FACTORY.create(\"missing-app-config-values\",{valueName:valueName})}function registerInstallations(instance){instance.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_1__.Component(\"installations\",(function(container){var app=container.getProvider(\"app\").getImmediate(),dependencies={appConfig:function(app){var e_1,_a;if(!app||!app.options)throw getMissingValueError(\"App Configuration\");if(!app.name)throw getMissingValueError(\"App Name\");try{for(var configKeys_1=Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__values)([\"projectId\",\"apiKey\",\"appId\"]),configKeys_1_1=configKeys_1.next();!configKeys_1_1.done;configKeys_1_1=configKeys_1.next()){var keyName=configKeys_1_1.value;if(!app.options[keyName])throw getMissingValueError(keyName)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{configKeys_1_1&&!configKeys_1_1.done&&(_a=configKeys_1.return)&&_a.call(configKeys_1)}finally{if(e_1)throw e_1.error}}return{appName:app.name,projectId:app.options.projectId,apiKey:app.options.apiKey,appId:app.options.appId}}(app),platformLoggerProvider:container.getProvider(\"platform-logger\")};return{app:app,getId:function(){return function(dependencies){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var _a,installationEntry,registrationPromise;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_b){switch(_b.label){case 0:return[4,getInstallationEntry(dependencies.appConfig)];case 1:return _a=_b.sent(),installationEntry=_a.installationEntry,(registrationPromise=_a.registrationPromise)?registrationPromise.catch(console.error):refreshAuthToken(dependencies).catch(console.error),[2,installationEntry.fid]}}))}))}(dependencies)},getToken:function(forceRefresh){return function(dependencies,forceRefresh){return void 0===forceRefresh&&(forceRefresh=!1),Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,completeInstallationRegistration(dependencies.appConfig)];case 1:return _a.sent(),[4,refreshAuthToken(dependencies,forceRefresh)];case 2:return[2,_a.sent().token]}}))}))}(dependencies,forceRefresh)},delete:function(){return function(dependencies){return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__awaiter)(this,void 0,void 0,(function(){var appConfig,entry;return Object(tslib__WEBPACK_IMPORTED_MODULE_2__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,update(appConfig=dependencies.appConfig,(function(oldEntry){if(!oldEntry||0!==oldEntry.registrationStatus)return oldEntry}))];case 1:if(!(entry=_a.sent()))return[3,6];if(1!==entry.registrationStatus)return[3,2];throw ERROR_FACTORY.create(\"delete-pending-registration\");case 2:if(2!==entry.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw ERROR_FACTORY.create(\"app-offline\");case 3:return[4,deleteInstallationRequest(appConfig,entry)];case 4:return _a.sent(),[4,remove(appConfig)];case 5:_a.sent(),_a.label=6;case 6:return[2]}}))}))}(dependencies)},onIdChange:function(callback){return function(_a,callback){var appConfig=_a.appConfig;return function(appConfig,callback){getBroadcastChannel();var key=getKey(appConfig),callbackSet=fidChangeCallbacks.get(key);callbackSet||(callbackSet=new Set,fidChangeCallbacks.set(key,callbackSet)),callbackSet.add(callback)}(appConfig,callback),function(){!function(appConfig,callback){var key=getKey(appConfig),callbackSet=fidChangeCallbacks.get(key);callbackSet&&(callbackSet.delete(callback),0===callbackSet.size&&fidChangeCallbacks.delete(key),closeBroadcastChannel())}(appConfig,callback)}}(dependencies,callback)}}}),\"PUBLIC\")),instance.registerVersion(\"@firebase/installations\",\"0.4.17\")}registerInstallations(_firebase_app__WEBPACK_IMPORTED_MODULE_0___default.a)},gHGA:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__(\"fSjL\");var _a,_firebase_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(\"S+S0\"),_firebase_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(\"zVF4\"),tslib__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(\"mrSG\"),idb__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(\"nbvr\"),_firebase_app__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(\"wj3C\"),_firebase_app__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_firebase_app__WEBPACK_IMPORTED_MODULE_5__),ERROR_MAP=((_a={})[\"missing-app-config-values\"]='Missing App configuration value: \"{$valueName}\"',_a[\"only-available-in-window\"]=\"This method is available in a Window context.\",_a[\"only-available-in-sw\"]=\"This method is available in a service worker context.\",_a[\"permission-default\"]=\"The notification permission was not granted and dismissed instead.\",_a[\"permission-blocked\"]=\"The notification permission was not granted and blocked instead.\",_a[\"unsupported-browser\"]=\"This browser doesn't support the API's required to use the firebase SDK.\",_a[\"failed-service-worker-registration\"]=\"We are unable to register the default service worker. {$browserErrorMessage}\",_a[\"token-subscribe-failed\"]=\"A problem occurred while subscribing the user to FCM: {$errorInfo}\",_a[\"token-subscribe-no-token\"]=\"FCM returned no token when subscribing the user to push.\",_a[\"token-unsubscribe-failed\"]=\"A problem occurred while unsubscribing the user from FCM: {$errorInfo}\",_a[\"token-update-failed\"]=\"A problem occurred while updating the user from FCM: {$errorInfo}\",_a[\"token-update-no-token\"]=\"FCM returned no token when updating the user to push.\",_a[\"use-sw-after-get-token\"]=\"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.\",_a[\"invalid-sw-registration\"]=\"The input to useServiceWorker() must be a ServiceWorkerRegistration.\",_a[\"invalid-bg-handler\"]=\"The input to setBackgroundMessageHandler() must be a function.\",_a[\"invalid-vapid-key\"]=\"The public VAPID key must be a string.\",_a[\"use-vapid-key-after-get-token\"]=\"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.\",_a),ERROR_FACTORY=new _firebase_util__WEBPACK_IMPORTED_MODULE_2__.ErrorFactory(\"messaging\",\"Messaging\",ERROR_MAP),DEFAULT_VAPID_KEY=\"BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4\",MessageType=function(MessageType){return MessageType.PUSH_RECEIVED=\"push-received\",MessageType.NOTIFICATION_CLICKED=\"notification-clicked\",MessageType}({});function arrayToBase64(array){var uint8Array=new Uint8Array(array);return btoa(String.fromCharCode.apply(String,Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__spread)(uint8Array))).replace(/=/g,\"\").replace(/\\+/g,\"-\").replace(/\\//g,\"_\")}function base64ToArray(base64String){for(var base64=(base64String+\"=\".repeat((4-base64String.length%4)%4)).replace(/\\-/g,\"+\").replace(/_/g,\"/\"),rawData=atob(base64),outputArray=new Uint8Array(rawData.length),i=0;i<rawData.length;++i)outputArray[i]=rawData.charCodeAt(i);return outputArray}function migrateOldDatabase(senderId){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var tokenDetails,_this=this;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return\"databases\"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!_a.sent().map((function(db){return db.name})).includes(\"fcm_token_details_db\"))return[2,null];_a.label=2;case 2:return tokenDetails=null,[4,Object(idb__WEBPACK_IMPORTED_MODULE_4__.openDb)(\"fcm_token_details_db\",5,(function(db){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(_this,void 0,void 0,(function(){var objectStore,value,oldDetails,_a;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_b){switch(_b.label){case 0:return db.oldVersion<2?[2]:db.objectStoreNames.contains(\"fcm_token_object_Store\")?[4,(objectStore=db.transaction.objectStore(\"fcm_token_object_Store\")).index(\"fcmSenderId\").get(senderId)]:[2];case 1:return value=_b.sent(),[4,objectStore.clear()];case 2:if(_b.sent(),!value)return[2];if(2===db.oldVersion){if(!(oldDetails=value).auth||!oldDetails.p256dh||!oldDetails.endpoint)return[2];tokenDetails={token:oldDetails.fcmToken,createTime:null!==(_a=oldDetails.createTime)&&void 0!==_a?_a:Date.now(),subscriptionOptions:{auth:oldDetails.auth,p256dh:oldDetails.p256dh,endpoint:oldDetails.endpoint,swScope:oldDetails.swScope,vapidKey:\"string\"==typeof oldDetails.vapidKey?oldDetails.vapidKey:arrayToBase64(oldDetails.vapidKey)}}}else(3===db.oldVersion||4===db.oldVersion)&&(tokenDetails={token:(oldDetails=value).fcmToken,createTime:oldDetails.createTime,subscriptionOptions:{auth:arrayToBase64(oldDetails.auth),p256dh:arrayToBase64(oldDetails.p256dh),endpoint:oldDetails.endpoint,swScope:oldDetails.swScope,vapidKey:arrayToBase64(oldDetails.vapidKey)}});return[2]}}))}))}))];case 3:return _a.sent().close(),[4,Object(idb__WEBPACK_IMPORTED_MODULE_4__.deleteDb)(\"fcm_token_details_db\")];case 4:return _a.sent(),[4,Object(idb__WEBPACK_IMPORTED_MODULE_4__.deleteDb)(\"fcm_vapid_details_db\")];case 5:return _a.sent(),[4,Object(idb__WEBPACK_IMPORTED_MODULE_4__.deleteDb)(\"undefined\")];case 6:return _a.sent(),[2,checkTokenDetails(tokenDetails)?tokenDetails:null]}}))}))}function checkTokenDetails(tokenDetails){if(!tokenDetails||!tokenDetails.subscriptionOptions)return!1;var subscriptionOptions=tokenDetails.subscriptionOptions;return\"number\"==typeof tokenDetails.createTime&&tokenDetails.createTime>0&&\"string\"==typeof tokenDetails.token&&tokenDetails.token.length>0&&\"string\"==typeof subscriptionOptions.auth&&subscriptionOptions.auth.length>0&&\"string\"==typeof subscriptionOptions.p256dh&&subscriptionOptions.p256dh.length>0&&\"string\"==typeof subscriptionOptions.endpoint&&subscriptionOptions.endpoint.length>0&&\"string\"==typeof subscriptionOptions.swScope&&subscriptionOptions.swScope.length>0&&\"string\"==typeof subscriptionOptions.vapidKey&&subscriptionOptions.vapidKey.length>0}var OBJECT_STORE_NAME=\"firebase-messaging-store\",dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=Object(idb__WEBPACK_IMPORTED_MODULE_4__.openDb)(\"firebase-messaging-database\",1,(function(upgradeDb){switch(upgradeDb.oldVersion){case 0:upgradeDb.createObjectStore(OBJECT_STORE_NAME)}}))),dbPromise}function dbGet(firebaseDependencies){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var key,tokenDetails,oldTokenDetails;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return key=getKey(firebaseDependencies),[4,getDbPromise()];case 1:return[4,_a.sent().transaction(OBJECT_STORE_NAME).objectStore(OBJECT_STORE_NAME).get(key)];case 2:return(tokenDetails=_a.sent())?[2,tokenDetails]:[3,3];case 3:return[4,migrateOldDatabase(firebaseDependencies.appConfig.senderId)];case 4:return(oldTokenDetails=_a.sent())?[4,dbSet(firebaseDependencies,oldTokenDetails)]:[3,6];case 5:return _a.sent(),[2,oldTokenDetails];case 6:return[2]}}))}))}function dbSet(firebaseDependencies,tokenDetails){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var key,db,tx;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return key=getKey(firebaseDependencies),[4,getDbPromise()];case 1:return db=_a.sent(),[4,(tx=db.transaction(OBJECT_STORE_NAME,\"readwrite\")).objectStore(OBJECT_STORE_NAME).put(tokenDetails,key)];case 2:return _a.sent(),[4,tx.complete];case 3:return _a.sent(),[2,tokenDetails]}}))}))}function dbRemove(firebaseDependencies){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var key,db,tx;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return key=getKey(firebaseDependencies),[4,getDbPromise()];case 1:return db=_a.sent(),[4,(tx=db.transaction(OBJECT_STORE_NAME,\"readwrite\")).objectStore(OBJECT_STORE_NAME).delete(key)];case 2:return _a.sent(),[4,tx.complete];case 3:return _a.sent(),[2]}}))}))}function getKey(_a){return _a.appConfig.appId}function requestGetToken(firebaseDependencies,subscriptionOptions){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var headers,body,subscribeOptions,responseData,err_1;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,getHeaders(firebaseDependencies)];case 1:headers=_a.sent(),body=getBody(subscriptionOptions),subscribeOptions={method:\"POST\",headers:headers,body:JSON.stringify(body)},_a.label=2;case 2:return _a.trys.push([2,5,,6]),[4,fetch(getEndpoint(firebaseDependencies.appConfig),subscribeOptions)];case 3:return[4,_a.sent().json()];case 4:return responseData=_a.sent(),[3,6];case 5:throw err_1=_a.sent(),ERROR_FACTORY.create(\"token-subscribe-failed\",{errorInfo:err_1});case 6:if(responseData.error)throw ERROR_FACTORY.create(\"token-subscribe-failed\",{errorInfo:responseData.error.message});if(!responseData.token)throw ERROR_FACTORY.create(\"token-subscribe-no-token\");return[2,responseData.token]}}))}))}function requestUpdateToken(firebaseDependencies,tokenDetails){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var headers,body,updateOptions,responseData,err_2;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,getHeaders(firebaseDependencies)];case 1:headers=_a.sent(),body=getBody(tokenDetails.subscriptionOptions),updateOptions={method:\"PATCH\",headers:headers,body:JSON.stringify(body)},_a.label=2;case 2:return _a.trys.push([2,5,,6]),[4,fetch(getEndpoint(firebaseDependencies.appConfig)+\"/\"+tokenDetails.token,updateOptions)];case 3:return[4,_a.sent().json()];case 4:return responseData=_a.sent(),[3,6];case 5:throw err_2=_a.sent(),ERROR_FACTORY.create(\"token-update-failed\",{errorInfo:err_2});case 6:if(responseData.error)throw ERROR_FACTORY.create(\"token-update-failed\",{errorInfo:responseData.error.message});if(!responseData.token)throw ERROR_FACTORY.create(\"token-update-no-token\");return[2,responseData.token]}}))}))}function requestDeleteToken(firebaseDependencies,token){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var headers,unsubscribeOptions,responseData,err_3;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,getHeaders(firebaseDependencies)];case 1:headers=_a.sent(),unsubscribeOptions={method:\"DELETE\",headers:headers},_a.label=2;case 2:return _a.trys.push([2,5,,6]),[4,fetch(getEndpoint(firebaseDependencies.appConfig)+\"/\"+token,unsubscribeOptions)];case 3:return[4,_a.sent().json()];case 4:if((responseData=_a.sent()).error)throw ERROR_FACTORY.create(\"token-unsubscribe-failed\",{errorInfo:responseData.error.message});return[3,6];case 5:throw err_3=_a.sent(),ERROR_FACTORY.create(\"token-unsubscribe-failed\",{errorInfo:err_3});case 6:return[2]}}))}))}function getEndpoint(_a){return\"https://fcmregistrations.googleapis.com/v1/projects/\"+_a.projectId+\"/registrations\"}function getHeaders(_a){var appConfig=_a.appConfig,installations=_a.installations;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var authToken;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_b){switch(_b.label){case 0:return[4,installations.getToken()];case 1:return authToken=_b.sent(),[2,new Headers({\"Content-Type\":\"application/json\",Accept:\"application/json\",\"x-goog-api-key\":appConfig.apiKey,\"x-goog-firebase-installations-auth\":\"FIS \"+authToken})]}}))}))}function getBody(_a){var vapidKey=_a.vapidKey,body={web:{endpoint:_a.endpoint,auth:_a.auth,p256dh:_a.p256dh}};return vapidKey!==DEFAULT_VAPID_KEY&&(body.web.applicationPubKey=vapidKey),body}function getToken(firebaseDependencies,swRegistration,vapidKey){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var pushSubscription,tokenDetails,subscriptionOptions,e_1;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:if(\"granted\"!==Notification.permission)throw ERROR_FACTORY.create(\"permission-blocked\");return[4,getPushSubscription(swRegistration,vapidKey)];case 1:return pushSubscription=_a.sent(),[4,dbGet(firebaseDependencies)];case 2:return tokenDetails=_a.sent(),subscriptionOptions={vapidKey:vapidKey,swScope:swRegistration.scope,endpoint:pushSubscription.endpoint,auth:arrayToBase64(pushSubscription.getKey(\"auth\")),p256dh:arrayToBase64(pushSubscription.getKey(\"p256dh\"))},tokenDetails?[3,3]:[2,getNewToken(firebaseDependencies,subscriptionOptions)];case 3:if(isEndpointEqual=(currentOptions=subscriptionOptions).endpoint===(dbOptions=tokenDetails.subscriptionOptions).endpoint,currentOptions.vapidKey===dbOptions.vapidKey&&isEndpointEqual&&currentOptions.auth===dbOptions.auth&&currentOptions.p256dh===dbOptions.p256dh)return[3,8];_a.label=4;case 4:return _a.trys.push([4,6,,7]),[4,requestDeleteToken(firebaseDependencies,tokenDetails.token)];case 5:return _a.sent(),[3,7];case 6:return e_1=_a.sent(),console.warn(e_1),[3,7];case 7:return[2,getNewToken(firebaseDependencies,subscriptionOptions)];case 8:return Date.now()>=tokenDetails.createTime+6048e5?[2,updateToken({token:tokenDetails.token,createTime:Date.now(),subscriptionOptions:subscriptionOptions},firebaseDependencies,swRegistration)]:[2,tokenDetails.token];case 9:return[2]}var dbOptions,currentOptions,isEndpointEqual}))}))}function deleteToken(firebaseDependencies,swRegistration){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var tokenDetails,pushSubscription;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,dbGet(firebaseDependencies)];case 1:return(tokenDetails=_a.sent())?[4,requestDeleteToken(firebaseDependencies,tokenDetails.token)]:[3,4];case 2:return _a.sent(),[4,dbRemove(firebaseDependencies)];case 3:_a.sent(),_a.label=4;case 4:return[4,swRegistration.pushManager.getSubscription()];case 5:return(pushSubscription=_a.sent())?[2,pushSubscription.unsubscribe()]:[2,!0]}}))}))}function updateToken(tokenDetails,firebaseDependencies,swRegistration){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var updatedToken,updatedTokenDetails,e_2;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return _a.trys.push([0,3,,5]),[4,requestUpdateToken(firebaseDependencies,tokenDetails)];case 1:return updatedToken=_a.sent(),updatedTokenDetails=Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)(Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({},tokenDetails),{token:updatedToken,createTime:Date.now()}),[4,dbSet(firebaseDependencies,updatedTokenDetails)];case 2:return _a.sent(),[2,updatedToken];case 3:return e_2=_a.sent(),[4,deleteToken(firebaseDependencies,swRegistration)];case 4:throw _a.sent(),e_2;case 5:return[2]}}))}))}function getNewToken(firebaseDependencies,subscriptionOptions){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var token,tokenDetails;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,requestGetToken(firebaseDependencies,subscriptionOptions)];case 1:return token=_a.sent(),tokenDetails={token:token,createTime:Date.now(),subscriptionOptions:subscriptionOptions},[4,dbSet(firebaseDependencies,tokenDetails)];case 2:return _a.sent(),[2,tokenDetails.token]}}))}))}function getPushSubscription(swRegistration,vapidKey){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var subscription;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return[4,swRegistration.pushManager.getSubscription()];case 1:return(subscription=_a.sent())?[2,subscription]:[2,swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:base64ToArray(vapidKey)})]}}))}))}function isConsoleMessage(data){return\"object\"==typeof data&&!!data&&\"google.c.a.c_id\"in data}var SwController=function(){function SwController(firebaseDependencies){var _this=this;this.firebaseDependencies=firebaseDependencies,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener(\"push\",(function(e){e.waitUntil(_this.onPush(e))})),self.addEventListener(\"pushsubscriptionchange\",(function(e){e.waitUntil(_this.onSubChange(e))})),self.addEventListener(\"notificationclick\",(function(e){e.waitUntil(_this.onNotificationClick(e))}))}return Object.defineProperty(SwController.prototype,\"app\",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),SwController.prototype.setBackgroundMessageHandler=function(callback){if(this.isOnBackgroundMessageUsed=!1,!callback||\"function\"!=typeof callback)throw ERROR_FACTORY.create(\"invalid-bg-handler\");this.bgMessageHandler=callback},SwController.prototype.onBackgroundMessage=function(nextOrObserver){var _this=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=nextOrObserver,function(){_this.bgMessageHandler=null}},SwController.prototype.getToken=function(){var _a,_b;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var tokenDetails;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_c){switch(_c.label){case 0:return this.vapidKey?[3,2]:[4,dbGet(this.firebaseDependencies)];case 1:tokenDetails=_c.sent(),this.vapidKey=null!==(_b=null===(_a=null==tokenDetails?void 0:tokenDetails.subscriptionOptions)||void 0===_a?void 0:_a.vapidKey)&&void 0!==_b?_b:DEFAULT_VAPID_KEY,_c.label=2;case 2:return[2,getToken(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},SwController.prototype.deleteToken=function(){return deleteToken(this.firebaseDependencies,self.registration)},SwController.prototype.requestPermission=function(){throw ERROR_FACTORY.create(\"only-available-in-window\")},SwController.prototype.usePublicVapidKey=function(vapidKey){if(null!==this.vapidKey)throw ERROR_FACTORY.create(\"use-vapid-key-after-get-token\");if(\"string\"!=typeof vapidKey||0===vapidKey.length)throw ERROR_FACTORY.create(\"invalid-vapid-key\");this.vapidKey=vapidKey},SwController.prototype.useServiceWorker=function(){throw ERROR_FACTORY.create(\"only-available-in-window\")},SwController.prototype.onMessage=function(){throw ERROR_FACTORY.create(\"only-available-in-window\")},SwController.prototype.onTokenRefresh=function(){throw ERROR_FACTORY.create(\"only-available-in-window\")},SwController.prototype.onPush=function(event){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var internalPayload,clientList,isNotificationShown,payload;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return(internalPayload=function(_a){var data=_a.data;if(!data)return null;try{return data.json()}catch(err){return null}}(event))?[4,getClientList()]:(console.debug(\"FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push.\"),[2]);case 1:return function(clientList){return clientList.some((function(client){return\"visible\"===client.visibilityState&&!client.url.startsWith(\"chrome-extension://\")}))}(clientList=_a.sent())?[2,sendMessagePayloadInternalToWindows(clientList,internalPayload)]:(isNotificationShown=!1,internalPayload.notification?[4,showNotification(wrapInternalPayload(internalPayload))]:[3,3]);case 2:_a.sent(),isNotificationShown=!0,_a.label=3;case 3:return!0===isNotificationShown&&!1===this.isOnBackgroundMessageUsed||this.bgMessageHandler&&(payload=function(internalPayload){var payload={from:internalPayload.from,collapseKey:internalPayload.collapse_key};return function(payload,messagePayloadInternal){if(messagePayloadInternal.notification){payload.notification={};var title=messagePayloadInternal.notification.title;title&&(payload.notification.title=title);var body=messagePayloadInternal.notification.body;body&&(payload.notification.body=body);var image=messagePayloadInternal.notification.image;image&&(payload.notification.image=image)}}(payload,internalPayload),function(payload,messagePayloadInternal){messagePayloadInternal.data&&(payload.data=messagePayloadInternal.data)}(payload,internalPayload),function(payload,messagePayloadInternal){if(messagePayloadInternal.fcmOptions){payload.fcmOptions={};var link=messagePayloadInternal.fcmOptions.link;link&&(payload.fcmOptions.link=link);var analyticsLabel=messagePayloadInternal.fcmOptions.analytics_label;analyticsLabel&&(payload.fcmOptions.analyticsLabel=analyticsLabel)}}(payload,internalPayload),payload}(internalPayload),\"function\"==typeof this.bgMessageHandler?this.bgMessageHandler(payload):this.bgMessageHandler.next(payload)),[2]}}))}))},SwController.prototype.onSubChange=function(event){var _a,_b;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var tokenDetails;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_c){switch(_c.label){case 0:return event.newSubscription?[3,2]:[4,deleteToken(this.firebaseDependencies,self.registration)];case 1:return _c.sent(),[2];case 2:return[4,dbGet(this.firebaseDependencies)];case 3:return tokenDetails=_c.sent(),[4,deleteToken(this.firebaseDependencies,self.registration)];case 4:return _c.sent(),[4,getToken(this.firebaseDependencies,self.registration,null!==(_b=null===(_a=null==tokenDetails?void 0:tokenDetails.subscriptionOptions)||void 0===_a?void 0:_a.vapidKey)&&void 0!==_b?_b:DEFAULT_VAPID_KEY)];case 5:return _c.sent(),[2]}}))}))},SwController.prototype.onNotificationClick=function(event){var _a,_b;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var internalPayload,link,url,originUrl,client;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_c){switch(_c.label){case 0:return(internalPayload=null===(_b=null===(_a=event.notification)||void 0===_a?void 0:_a.data)||void 0===_b?void 0:_b.FCM_MSG)?event.action?[2]:(event.stopImmediatePropagation(),event.notification.close(),(link=function(payload){var _a,_b,_c;return(null!==(_b=null===(_a=payload.fcmOptions)||void 0===_a?void 0:_a.link)&&void 0!==_b?_b:null===(_c=payload.notification)||void 0===_c?void 0:_c.click_action)||(isConsoleMessage(payload.data)?self.location.origin:null)}(internalPayload))?(url=new URL(link,self.location.href),originUrl=new URL(self.location.origin),url.host!==originUrl.host?[2]:[4,getWindowClient(url)]):[2]):[2];case 1:return(client=_c.sent())?[3,4]:[4,self.clients.openWindow(link)];case 2:return client=_c.sent(),[4,new Promise((function(resolve){setTimeout(resolve,3e3)}))];case 3:return _c.sent(),[3,6];case 4:return[4,client.focus()];case 5:client=_c.sent(),_c.label=6;case 6:return client?(internalPayload.messageType=MessageType.NOTIFICATION_CLICKED,internalPayload.isFirebaseMessaging=!0,[2,client.postMessage(internalPayload)]):[2]}}))}))},SwController}();function wrapInternalPayload(internalPayload){var _a,wrappedInternalPayload=Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__assign)({},internalPayload.notification);return wrappedInternalPayload.data=((_a={}).FCM_MSG=internalPayload,_a),wrappedInternalPayload}function getWindowClient(url){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var clientList,clientList_1,clientList_1_1,client,clientUrl,e_1,_a;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_b){switch(_b.label){case 0:return[4,getClientList()];case 1:clientList=_b.sent();try{for(clientList_1=Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__values)(clientList),clientList_1_1=clientList_1.next();!clientList_1_1.done;clientList_1_1=clientList_1.next())if(client=clientList_1_1.value,clientUrl=new URL(client.url,self.location.href),url.host===clientUrl.host)return[2,client]}catch(e_1_1){e_1={error:e_1_1}}finally{try{clientList_1_1&&!clientList_1_1.done&&(_a=clientList_1.return)&&_a.call(clientList_1)}finally{if(e_1)throw e_1.error}}return[2,null]}}))}))}function sendMessagePayloadInternalToWindows(clientList,internalPayload){var e_2,_a;internalPayload.isFirebaseMessaging=!0,internalPayload.messageType=MessageType.PUSH_RECEIVED;try{for(var clientList_2=Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__values)(clientList),clientList_2_1=clientList_2.next();!clientList_2_1.done;clientList_2_1=clientList_2.next())clientList_2_1.value.postMessage(internalPayload)}catch(e_2_1){e_2={error:e_2_1}}finally{try{clientList_2_1&&!clientList_2_1.done&&(_a=clientList_2.return)&&_a.call(clientList_2)}finally{if(e_2)throw e_2.error}}}function getClientList(){return self.clients.matchAll({type:\"window\",includeUncontrolled:!0})}function showNotification(notificationPayloadInternal){var _a,actions=notificationPayloadInternal.actions,maxActions=Notification.maxActions;return actions&&maxActions&&actions.length>maxActions&&console.warn(\"This browser only supports \"+maxActions+\" actions. The remaining actions will not be displayed.\"),self.registration.showNotification(null!==(_a=notificationPayloadInternal.title)&&void 0!==_a?_a:\"\",notificationPayloadInternal)}var WindowController=function(){function WindowController(firebaseDependencies){var _this=this;this.firebaseDependencies=firebaseDependencies,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener(\"message\",(function(e){return _this.messageEventListener(e)}))}return Object.defineProperty(WindowController.prototype,\"app\",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),WindowController.prototype.messageEventListener=function(event){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var internalPayload,dataPayload;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return(internalPayload=event.data).isFirebaseMessaging?(this.onMessageCallback&&internalPayload.messageType===MessageType.PUSH_RECEIVED&&(\"function\"==typeof this.onMessageCallback?this.onMessageCallback(function(internalPayload){return delete internalPayload.messageType,delete internalPayload.isFirebaseMessaging,internalPayload}(Object.assign({},internalPayload))):this.onMessageCallback.next(Object.assign({},internalPayload))),isConsoleMessage(dataPayload=internalPayload.data)&&\"1\"===dataPayload[\"google.c.a.e\"]?[4,this.logEvent(internalPayload.messageType,dataPayload)]:[3,2]):[2];case 1:_a.sent(),_a.label=2;case 2:return[2]}}))}))},WindowController.prototype.getVapidKey=function(){return this.vapidKey},WindowController.prototype.getSwReg=function(){return this.swRegistration},WindowController.prototype.getToken=function(options){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return\"default\"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:_a.sent(),_a.label=2;case 2:if(\"granted\"!==Notification.permission)throw ERROR_FACTORY.create(\"permission-blocked\");return[4,this.updateVapidKey(null==options?void 0:options.vapidKey)];case 3:return _a.sent(),[4,this.updateSwReg(null==options?void 0:options.serviceWorkerRegistration)];case 4:return _a.sent(),[2,getToken(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},WindowController.prototype.updateVapidKey=function(vapidKey){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){return vapidKey?this.vapidKey=vapidKey:this.vapidKey||(this.vapidKey=DEFAULT_VAPID_KEY),[2]}))}))},WindowController.prototype.updateSwReg=function(swRegistration){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return swRegistration||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:_a.sent(),_a.label=2;case 2:if(!swRegistration&&this.swRegistration)return[2];if(!(swRegistration instanceof ServiceWorkerRegistration))throw ERROR_FACTORY.create(\"invalid-sw-registration\");return this.swRegistration=swRegistration,[2]}}))}))},WindowController.prototype.registerDefaultSw=function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var _a,e_1;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_b){switch(_b.label){case 0:return _b.trys.push([0,2,,3]),_a=this,[4,navigator.serviceWorker.register(\"/firebase-messaging-sw.js\",{scope:\"/firebase-cloud-messaging-push-scope\"})];case 1:return _a.swRegistration=_b.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e_1=_b.sent(),ERROR_FACTORY.create(\"failed-service-worker-registration\",{browserErrorMessage:e_1.message});case 3:return[2]}}))}))},WindowController.prototype.deleteToken=function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:_a.sent(),_a.label=2;case 2:return[2,deleteToken(this.firebaseDependencies,this.swRegistration)]}}))}))},WindowController.prototype.requestPermission=function(){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var permissionResult;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return\"granted\"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(\"granted\"===(permissionResult=_a.sent()))return[2];throw ERROR_FACTORY.create(\"denied\"===permissionResult?\"permission-blocked\":\"permission-default\")}}))}))},WindowController.prototype.usePublicVapidKey=function(vapidKey){if(null!==this.vapidKey)throw ERROR_FACTORY.create(\"use-vapid-key-after-get-token\");if(\"string\"!=typeof vapidKey||0===vapidKey.length)throw ERROR_FACTORY.create(\"invalid-vapid-key\");this.vapidKey=vapidKey},WindowController.prototype.useServiceWorker=function(swRegistration){if(!(swRegistration instanceof ServiceWorkerRegistration))throw ERROR_FACTORY.create(\"invalid-sw-registration\");if(this.swRegistration)throw ERROR_FACTORY.create(\"use-sw-after-get-token\");this.swRegistration=swRegistration},WindowController.prototype.onMessage=function(nextOrObserver){var _this=this;return this.onMessageCallback=nextOrObserver,function(){_this.onMessageCallback=null}},WindowController.prototype.setBackgroundMessageHandler=function(){throw ERROR_FACTORY.create(\"only-available-in-sw\")},WindowController.prototype.onBackgroundMessage=function(){throw ERROR_FACTORY.create(\"only-available-in-sw\")},WindowController.prototype.onTokenRefresh=function(){return function(){}},WindowController.prototype.logEvent=function(messageType,data){return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__awaiter)(this,void 0,void 0,(function(){var eventType;return Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__generator)(this,(function(_a){switch(_a.label){case 0:return eventType=function(messageType){switch(messageType){case MessageType.NOTIFICATION_CLICKED:return\"notification_open\";case MessageType.PUSH_RECEIVED:return\"notification_foreground\";default:throw new Error}}(messageType),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return _a.sent().logEvent(eventType,{message_id:data[\"google.c.a.c_id\"],message_name:data[\"google.c.a.c_l\"],message_time:data[\"google.c.a.ts\"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},WindowController}();function getMissingValueError(valueName){return ERROR_FACTORY.create(\"missing-app-config-values\",{valueName:valueName})}var NAMESPACE_EXPORTS={isSupported:isSupported};function isSupported(){return self&&\"ServiceWorkerGlobalScope\"in self?\"indexedDB\"in self&&null!==indexedDB&&\"PushManager\"in self&&\"Notification\"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\")&&PushSubscription.prototype.hasOwnProperty(\"getKey\"):\"indexedDB\"in window&&null!==indexedDB&&navigator.cookieEnabled&&\"serviceWorker\"in navigator&&\"PushManager\"in window&&\"Notification\"in window&&\"fetch\"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty(\"showNotification\")&&PushSubscription.prototype.hasOwnProperty(\"getKey\")}_firebase_app__WEBPACK_IMPORTED_MODULE_5___default.a.INTERNAL.registerComponent(new _firebase_component__WEBPACK_IMPORTED_MODULE_1__.Component(\"messaging\",(function(container){var app=container.getProvider(\"app\").getImmediate(),firebaseDependencies={app:app,appConfig:function(app){var e_1,_a;if(!app||!app.options)throw getMissingValueError(\"App Configuration Object\");if(!app.name)throw getMissingValueError(\"App Name\");var options=app.options;try{for(var configKeys_1=Object(tslib__WEBPACK_IMPORTED_MODULE_3__.__values)([\"projectId\",\"apiKey\",\"appId\",\"messagingSenderId\"]),configKeys_1_1=configKeys_1.next();!configKeys_1_1.done;configKeys_1_1=configKeys_1.next()){var keyName=configKeys_1_1.value;if(!options[keyName])throw getMissingValueError(keyName)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{configKeys_1_1&&!configKeys_1_1.done&&(_a=configKeys_1.return)&&_a.call(configKeys_1)}finally{if(e_1)throw e_1.error}}return{appName:app.name,projectId:options.projectId,apiKey:options.apiKey,appId:options.appId,senderId:options.messagingSenderId}}(app),installations:container.getProvider(\"installations\").getImmediate(),analyticsProvider:container.getProvider(\"analytics-internal\")};if(!isSupported())throw ERROR_FACTORY.create(\"unsupported-browser\");return self&&\"ServiceWorkerGlobalScope\"in self?new SwController(firebaseDependencies):new WindowController(firebaseDependencies)}),\"PUBLIC\").setServiceProps(NAMESPACE_EXPORTS))},iqUP:function(module,exports,__webpack_require__){\"use strict\";var firebase=__webpack_require__(\"wj3C\");function _interopDefaultLegacy(e){return e&&\"object\"==typeof e&&\"default\"in e?e:{default:e}}__webpack_require__(\"LOEa\"),__webpack_require__(\"NSPt\"),__webpack_require__(\"6Joi\"),__webpack_require__(\"ABqa\"),__webpack_require__(\"gHGA\"),__webpack_require__(\"LmZi\"),__webpack_require__(\"bQlE\"),__webpack_require__(\"3Kre\"),__webpack_require__(\"O1kn\");var firebase__default=_interopDefaultLegacy(firebase);firebase__default.default.registerVersion(\"firebase\",\"7.24.0\",\"app\"),console.warn(\"\\nIt looks like you're using the development build of the Firebase JS SDK.\\nWhen deploying Firebase apps to production, it is advisable to only import\\nthe individual SDK components you intend to use.\\n\\nFor the module builds, these are available in the following manner\\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\\n\\nCommonJS Modules:\\nconst firebase = require('firebase/app');\\nrequire('firebase/<PACKAGE>');\\n\\nES Modules:\\nimport firebase from 'firebase/app';\\nimport 'firebase/<PACKAGE>';\\n\\nTypescript:\\nimport * as firebase from 'firebase/app';\\nimport 'firebase/<PACKAGE>';\\n\"),firebase__default.default.registerVersion(\"firebase\",\"7.24.0\"),module.exports=firebase__default.default},mrSG:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"__extends\",(function(){return __extends})),__webpack_require__.d(__webpack_exports__,\"__assign\",(function(){return __assign})),__webpack_require__.d(__webpack_exports__,\"__rest\",(function(){return __rest})),__webpack_require__.d(__webpack_exports__,\"__decorate\",(function(){return __decorate})),__webpack_require__.d(__webpack_exports__,\"__param\",(function(){return __param})),__webpack_require__.d(__webpack_exports__,\"__metadata\",(function(){return __metadata})),__webpack_require__.d(__webpack_exports__,\"__awaiter\",(function(){return __awaiter})),__webpack_require__.d(__webpack_exports__,\"__generator\",(function(){return __generator})),__webpack_require__.d(__webpack_exports__,\"__createBinding\",(function(){return __createBinding})),__webpack_require__.d(__webpack_exports__,\"__exportStar\",(function(){return __exportStar})),__webpack_require__.d(__webpack_exports__,\"__values\",(function(){return __values})),__webpack_require__.d(__webpack_exports__,\"__read\",(function(){return __read})),__webpack_require__.d(__webpack_exports__,\"__spread\",(function(){return __spread})),__webpack_require__.d(__webpack_exports__,\"__spreadArrays\",(function(){return __spreadArrays})),__webpack_require__.d(__webpack_exports__,\"__await\",(function(){return __await})),__webpack_require__.d(__webpack_exports__,\"__asyncGenerator\",(function(){return __asyncGenerator})),__webpack_require__.d(__webpack_exports__,\"__asyncDelegator\",(function(){return __asyncDelegator})),__webpack_require__.d(__webpack_exports__,\"__asyncValues\",(function(){return __asyncValues})),__webpack_require__.d(__webpack_exports__,\"__makeTemplateObject\",(function(){return __makeTemplateObject})),__webpack_require__.d(__webpack_exports__,\"__importStar\",(function(){return __importStar})),__webpack_require__.d(__webpack_exports__,\"__importDefault\",(function(){return __importDefault})),__webpack_require__.d(__webpack_exports__,\"__classPrivateFieldGet\",(function(){return __classPrivateFieldGet})),__webpack_require__.d(__webpack_exports__,\"__classPrivateFieldSet\",(function(){return __classPrivateFieldSet}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)};function __extends(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t}).apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(null!=s&&\"function\"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]])}return t}function __decorate(decorators,target,key,desc){var d,c=arguments.length,r=c<3?target:null===desc?desc=Object.getOwnPropertyDescriptor(target,key):desc;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):(value=result.value,value instanceof P?value:new P((function(resolve){resolve(value)}))).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},\"function\"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function(op){if(f)throw new TypeError(\"Generator is already executing.\");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!((t=(t=_.trys).length>0&&t[t.length-1])||6!==op[0]&&2!==op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}}function __createBinding(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}function __exportStar(m,exports){for(var p in m)\"default\"===p||exports.hasOwnProperty(p)||(exports[p]=m[p])}function __values(o){var s=\"function\"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&\"number\"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function __read(o,n){var m=\"function\"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb(\"next\"),verb(\"throw\"),verb(\"return\"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise((function(a,b){q.push([n,v,a,b])>1||resume(n,v)}))})}function resume(n,v){try{(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}var r}function fulfill(value){resume(\"next\",value)}function reject(value){resume(\"throw\",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb(\"next\"),verb(\"throw\",(function(e){throw e})),verb(\"return\"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:\"return\"===n}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=__values(o),i={},verb(\"next\"),verb(\"throw\"),verb(\"return\"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise((function(resolve,reject){!function(resolve,reject,d,v){Promise.resolve(v).then((function(v){resolve({value:v,done:d})}),reject)}(resolve,reject,(v=o[n](v)).done,v.value)}))}}}function __makeTemplateObject(cooked,raw){return Object.defineProperty?Object.defineProperty(cooked,\"raw\",{value:raw}):cooked.raw=raw,cooked}function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)Object.hasOwnProperty.call(mod,k)&&(result[k]=mod[k]);return result.default=mod,result}function __importDefault(mod){return mod&&mod.__esModule?mod:{default:mod}}function __classPrivateFieldGet(receiver,privateMap){if(!privateMap.has(receiver))throw new TypeError(\"attempted to get private field on non-instance\");return privateMap.get(receiver)}function __classPrivateFieldSet(receiver,privateMap,value){if(!privateMap.has(receiver))throw new TypeError(\"attempted to set private field on non-instance\");return privateMap.set(receiver,value),value}},nbvr:function(module,exports,__webpack_require__){!function(exports){\"use strict\";function toArray(arr){return Array.prototype.slice.call(arr)}function promisifyRequest(request){return new Promise((function(resolve,reject){request.onsuccess=function(){resolve(request.result)},request.onerror=function(){reject(request.error)}}))}function promisifyRequestCall(obj,method,args){var request,p=new Promise((function(resolve,reject){promisifyRequest(request=obj[method].apply(obj,args)).then(resolve,reject)}));return p.request=request,p}function promisifyCursorRequestCall(obj,method,args){var p=promisifyRequestCall(obj,method,args);return p.then((function(value){if(value)return new Cursor(value,p.request)}))}function proxyProperties(ProxyClass,targetProp,properties){properties.forEach((function(prop){Object.defineProperty(ProxyClass.prototype,prop,{get:function(){return this[targetProp][prop]},set:function(val){this[targetProp][prop]=val}})}))}function proxyRequestMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach((function(prop){prop in Constructor.prototype&&(ProxyClass.prototype[prop]=function(){return promisifyRequestCall(this[targetProp],prop,arguments)})}))}function proxyMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach((function(prop){prop in Constructor.prototype&&(ProxyClass.prototype[prop]=function(){return this[targetProp][prop].apply(this[targetProp],arguments)})}))}function proxyCursorRequestMethods(ProxyClass,targetProp,Constructor,properties){properties.forEach((function(prop){prop in Constructor.prototype&&(ProxyClass.prototype[prop]=function(){return promisifyCursorRequestCall(this[targetProp],prop,arguments)})}))}function Index(index){this._index=index}function Cursor(cursor,request){this._cursor=cursor,this._request=request}function ObjectStore(store){this._store=store}function Transaction(idbTransaction){this._tx=idbTransaction,this.complete=new Promise((function(resolve,reject){idbTransaction.oncomplete=function(){resolve()},idbTransaction.onerror=function(){reject(idbTransaction.error)},idbTransaction.onabort=function(){reject(idbTransaction.error)}}))}function UpgradeDB(db,oldVersion,transaction){this._db=db,this.oldVersion=oldVersion,this.transaction=new Transaction(transaction)}function DB(db){this._db=db}proxyProperties(Index,\"_index\",[\"name\",\"keyPath\",\"multiEntry\",\"unique\"]),proxyRequestMethods(Index,\"_index\",IDBIndex,[\"get\",\"getKey\",\"getAll\",\"getAllKeys\",\"count\"]),proxyCursorRequestMethods(Index,\"_index\",IDBIndex,[\"openCursor\",\"openKeyCursor\"]),proxyProperties(Cursor,\"_cursor\",[\"direction\",\"key\",\"primaryKey\",\"value\"]),proxyRequestMethods(Cursor,\"_cursor\",IDBCursor,[\"update\",\"delete\"]),[\"advance\",\"continue\",\"continuePrimaryKey\"].forEach((function(methodName){methodName in IDBCursor.prototype&&(Cursor.prototype[methodName]=function(){var cursor=this,args=arguments;return Promise.resolve().then((function(){return cursor._cursor[methodName].apply(cursor._cursor,args),promisifyRequest(cursor._request).then((function(value){if(value)return new Cursor(value,cursor._request)}))}))})})),ObjectStore.prototype.createIndex=function(){return new Index(this._store.createIndex.apply(this._store,arguments))},ObjectStore.prototype.index=function(){return new Index(this._store.index.apply(this._store,arguments))},proxyProperties(ObjectStore,\"_store\",[\"name\",\"keyPath\",\"indexNames\",\"autoIncrement\"]),proxyRequestMethods(ObjectStore,\"_store\",IDBObjectStore,[\"put\",\"add\",\"delete\",\"clear\",\"get\",\"getAll\",\"getKey\",\"getAllKeys\",\"count\"]),proxyCursorRequestMethods(ObjectStore,\"_store\",IDBObjectStore,[\"openCursor\",\"openKeyCursor\"]),proxyMethods(ObjectStore,\"_store\",IDBObjectStore,[\"deleteIndex\"]),Transaction.prototype.objectStore=function(){return new ObjectStore(this._tx.objectStore.apply(this._tx,arguments))},proxyProperties(Transaction,\"_tx\",[\"objectStoreNames\",\"mode\"]),proxyMethods(Transaction,\"_tx\",IDBTransaction,[\"abort\"]),UpgradeDB.prototype.createObjectStore=function(){return new ObjectStore(this._db.createObjectStore.apply(this._db,arguments))},proxyProperties(UpgradeDB,\"_db\",[\"name\",\"version\",\"objectStoreNames\"]),proxyMethods(UpgradeDB,\"_db\",IDBDatabase,[\"deleteObjectStore\",\"close\"]),DB.prototype.transaction=function(){return new Transaction(this._db.transaction.apply(this._db,arguments))},proxyProperties(DB,\"_db\",[\"name\",\"version\",\"objectStoreNames\"]),proxyMethods(DB,\"_db\",IDBDatabase,[\"close\"]),[\"openCursor\",\"openKeyCursor\"].forEach((function(funcName){[ObjectStore,Index].forEach((function(Constructor){funcName in Constructor.prototype&&(Constructor.prototype[funcName.replace(\"open\",\"iterate\")]=function(){var args=toArray(arguments),callback=args[args.length-1],nativeObject=this._store||this._index,request=nativeObject[funcName].apply(nativeObject,args.slice(0,-1));request.onsuccess=function(){callback(request.result)}})}))})),[Index,ObjectStore].forEach((function(Constructor){Constructor.prototype.getAll||(Constructor.prototype.getAll=function(query,count){var instance=this,items=[];return new Promise((function(resolve){instance.iterateCursor(query,(function(cursor){cursor?(items.push(cursor.value),void 0===count||items.length!=count?cursor.continue():resolve(items)):resolve(items)}))}))})})),exports.openDb=function(name,version,upgradeCallback){var p=promisifyRequestCall(indexedDB,\"open\",[name,version]),request=p.request;return request&&(request.onupgradeneeded=function(event){upgradeCallback&&upgradeCallback(new UpgradeDB(request.result,event.oldVersion,request.transaction))}),p.then((function(db){return new DB(db)}))},exports.deleteDb=function(name){return promisifyRequestCall(indexedDB,\"deleteDatabase\",[name])},Object.defineProperty(exports,\"__esModule\",{value:!0})}(exports)},\"q/0M\":function(module,__webpack_exports__,__webpack_require__){\"use strict\";function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;var r=Array(s),k=0;for(i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}var _a;__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"LogLevel\",(function(){return LogLevel})),__webpack_require__.d(__webpack_exports__,\"Logger\",(function(){return Logger})),__webpack_require__.d(__webpack_exports__,\"setLogLevel\",(function(){return setLogLevel})),__webpack_require__.d(__webpack_exports__,\"setUserLogHandler\",(function(){return setUserLogHandler}));var instances=[],LogLevel=function(LogLevel){return LogLevel[LogLevel.DEBUG=0]=\"DEBUG\",LogLevel[LogLevel.VERBOSE=1]=\"VERBOSE\",LogLevel[LogLevel.INFO=2]=\"INFO\",LogLevel[LogLevel.WARN=3]=\"WARN\",LogLevel[LogLevel.ERROR=4]=\"ERROR\",LogLevel[LogLevel.SILENT=5]=\"SILENT\",LogLevel}({}),levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod=((_a={})[LogLevel.DEBUG]=\"log\",_a[LogLevel.VERBOSE]=\"log\",_a[LogLevel.INFO]=\"info\",_a[LogLevel.WARN]=\"warn\",_a[LogLevel.ERROR]=\"error\",_a),defaultLogHandler=function(instance,logType){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];if(!(logType<instance.logLevel)){var now=(new Date).toISOString(),method=ConsoleMethod[logType];if(!method)throw new Error(\"Attempted to log a message with an invalid logType (value: \"+logType+\")\");console[method].apply(console,__spreadArrays([\"[\"+now+\"]  \"+instance.name+\":\"],args))}},Logger=function(){function Logger(name){this.name=name,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null,instances.push(this)}return Object.defineProperty(Logger.prototype,\"logLevel\",{get:function(){return this._logLevel},set:function(val){if(!(val in LogLevel))throw new TypeError('Invalid value \"'+val+'\" assigned to `logLevel`');this._logLevel=val},enumerable:!1,configurable:!0}),Logger.prototype.setLogLevel=function(val){this._logLevel=\"string\"==typeof val?levelStringToEnum[val]:val},Object.defineProperty(Logger.prototype,\"logHandler\",{get:function(){return this._logHandler},set:function(val){if(\"function\"!=typeof val)throw new TypeError(\"Value assigned to `logHandler` must be a function\");this._logHandler=val},enumerable:!1,configurable:!0}),Object.defineProperty(Logger.prototype,\"userLogHandler\",{get:function(){return this._userLogHandler},set:function(val){this._userLogHandler=val},enumerable:!1,configurable:!0}),Logger.prototype.debug=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,LogLevel.DEBUG],args)),this._logHandler.apply(this,__spreadArrays([this,LogLevel.DEBUG],args))},Logger.prototype.log=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,LogLevel.VERBOSE],args)),this._logHandler.apply(this,__spreadArrays([this,LogLevel.VERBOSE],args))},Logger.prototype.info=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,LogLevel.INFO],args)),this._logHandler.apply(this,__spreadArrays([this,LogLevel.INFO],args))},Logger.prototype.warn=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,LogLevel.WARN],args)),this._logHandler.apply(this,__spreadArrays([this,LogLevel.WARN],args))},Logger.prototype.error=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,LogLevel.ERROR],args)),this._logHandler.apply(this,__spreadArrays([this,LogLevel.ERROR],args))},Logger}();function setLogLevel(level){instances.forEach((function(inst){inst.setLogLevel(level)}))}function setUserLogHandler(logCallback,options){for(var _loop_1=function(instance){var customLogLevel=null;options&&options.level&&(customLogLevel=levelStringToEnum[options.level]),instance.userLogHandler=null===logCallback?null:function(instance,level){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var message=args.map((function(arg){if(null==arg)return null;if(\"string\"==typeof arg)return arg;if(\"number\"==typeof arg||\"boolean\"==typeof arg)return arg.toString();if(arg instanceof Error)return arg.message;try{return JSON.stringify(arg)}catch(ignored){return null}})).filter((function(arg){return arg})).join(\" \");level>=(null!=customLogLevel?customLogLevel:instance.logLevel)&&logCallback({level:LogLevel[level].toLowerCase(),message:message,args:args,type:instance.name})}},_i=0,instances_1=instances;_i<instances_1.length;_i++)_loop_1(instances_1[_i])}},wj3C:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var _a,_a$1,tslib=__webpack_require__(\"mrSG\"),util=__webpack_require__(\"zVF4\"),component=__webpack_require__(\"S+S0\"),logger$1=__webpack_require__(\"q/0M\"),ERRORS=((_a={})[\"no-app\"]=\"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()\",_a[\"bad-app-name\"]=\"Illegal App name: '{$appName}\",_a[\"duplicate-app\"]=\"Firebase App named '{$appName}' already exists\",_a[\"app-deleted\"]=\"Firebase App named '{$appName}' already deleted\",_a[\"invalid-app-argument\"]=\"firebase.{$appName}() takes either no argument or a Firebase App instance.\",_a[\"invalid-log-argument\"]=\"First argument to `onLog` must be null or a function.\",_a),ERROR_FACTORY=new util.ErrorFactory(\"app\",\"Firebase\",ERRORS),PLATFORM_LOG_STRING=((_a$1={})[\"@firebase/app\"]=\"fire-core\",_a$1[\"@firebase/analytics\"]=\"fire-analytics\",_a$1[\"@firebase/auth\"]=\"fire-auth\",_a$1[\"@firebase/database\"]=\"fire-rtdb\",_a$1[\"@firebase/functions\"]=\"fire-fn\",_a$1[\"@firebase/installations\"]=\"fire-iid\",_a$1[\"@firebase/messaging\"]=\"fire-fcm\",_a$1[\"@firebase/performance\"]=\"fire-perf\",_a$1[\"@firebase/remote-config\"]=\"fire-rc\",_a$1[\"@firebase/storage\"]=\"fire-gcs\",_a$1[\"@firebase/firestore\"]=\"fire-fst\",_a$1[\"fire-js\"]=\"fire-js\",_a$1[\"firebase-wrapper\"]=\"fire-js-all\",_a$1),logger=new logger$1.Logger(\"@firebase/app\"),FirebaseAppImpl=function(){function FirebaseAppImpl(options,config,firebase_){var e_1,_a,_this=this;this.firebase_=firebase_,this.isDeleted_=!1,this.name_=config.name,this.automaticDataCollectionEnabled_=config.automaticDataCollectionEnabled||!1,this.options_=util.deepCopy(options),this.container=new component.ComponentContainer(config.name),this._addComponent(new component.Component(\"app\",(function(){return _this}),\"PUBLIC\"));try{for(var _b=tslib.__values(this.firebase_.INTERNAL.components.values()),_c=_b.next();!_c.done;_c=_b.next())this._addComponent(_c.value)}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}return Object.defineProperty(FirebaseAppImpl.prototype,\"automaticDataCollectionEnabled\",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(val){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=val},enumerable:!1,configurable:!0}),Object.defineProperty(FirebaseAppImpl.prototype,\"name\",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(FirebaseAppImpl.prototype,\"options\",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),FirebaseAppImpl.prototype.delete=function(){var _this=this;return new Promise((function(resolve){_this.checkDestroyed_(),resolve()})).then((function(){return _this.firebase_.INTERNAL.removeApp(_this.name_),Promise.all(_this.container.getProviders().map((function(provider){return provider.delete()})))})).then((function(){_this.isDeleted_=!0}))},FirebaseAppImpl.prototype._getService=function(name,instanceIdentifier){return void 0===instanceIdentifier&&(instanceIdentifier=\"[DEFAULT]\"),this.checkDestroyed_(),this.container.getProvider(name).getImmediate({identifier:instanceIdentifier})},FirebaseAppImpl.prototype._removeServiceInstance=function(name,instanceIdentifier){void 0===instanceIdentifier&&(instanceIdentifier=\"[DEFAULT]\"),this.container.getProvider(name).clearInstance(instanceIdentifier)},FirebaseAppImpl.prototype._addComponent=function(component){try{this.container.addComponent(component)}catch(e){logger.debug(\"Component \"+component.name+\" failed to register with FirebaseApp \"+this.name,e)}},FirebaseAppImpl.prototype._addOrOverwriteComponent=function(component){this.container.addOrOverwriteComponent(component)},FirebaseAppImpl.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ERROR_FACTORY.create(\"app-deleted\",{appName:this.name_})},FirebaseAppImpl}();FirebaseAppImpl.prototype.name&&FirebaseAppImpl.prototype.options||FirebaseAppImpl.prototype.delete||console.log(\"dc\");var firebase=function createFirebaseNamespace(){var namespace=function(firebaseAppImpl){var apps={},components=new Map,namespace={__esModule:!0,initializeApp:function(options,rawConfig){void 0===rawConfig&&(rawConfig={}),\"object\"==typeof rawConfig&&null!==rawConfig||(rawConfig={name:rawConfig});var config=rawConfig;void 0===config.name&&(config.name=\"[DEFAULT]\");var name=config.name;if(\"string\"!=typeof name||!name)throw ERROR_FACTORY.create(\"bad-app-name\",{appName:String(name)});if(util.contains(apps,name))throw ERROR_FACTORY.create(\"duplicate-app\",{appName:name});var app=new firebaseAppImpl(options,config,namespace);return apps[name]=app,app},app:app,registerVersion:function(libraryKeyOrName,version,variant){var _a,library=null!==(_a=PLATFORM_LOG_STRING[libraryKeyOrName])&&void 0!==_a?_a:libraryKeyOrName;variant&&(library+=\"-\"+variant);var libraryMismatch=library.match(/\\s|\\//),versionMismatch=version.match(/\\s|\\//);if(libraryMismatch||versionMismatch){var warning=['Unable to register library \"'+library+'\" with version \"'+version+'\":'];return libraryMismatch&&warning.push('library name \"'+library+'\" contains illegal characters (whitespace or \"/\")'),libraryMismatch&&versionMismatch&&warning.push(\"and\"),versionMismatch&&warning.push('version name \"'+version+'\" contains illegal characters (whitespace or \"/\")'),void logger.warn(warning.join(\" \"))}registerComponent(new component.Component(library+\"-version\",(function(){return{library:library,version:version}}),\"VERSION\"))},setLogLevel:logger$1.setLogLevel,onLog:function(logCallback,options){if(null!==logCallback&&\"function\"!=typeof logCallback)throw ERROR_FACTORY.create(\"invalid-log-argument\",{appName:name});logger$1.setUserLogHandler(logCallback,options)},apps:null,SDK_VERSION:\"7.20.0\",INTERNAL:{registerComponent:registerComponent,removeApp:function(name){delete apps[name]},components:components,useAsService:function(app,name){return\"serverAuth\"===name?null:name}}};function app(name){if(!util.contains(apps,name=name||\"[DEFAULT]\"))throw ERROR_FACTORY.create(\"no-app\",{appName:name});return apps[name]}function registerComponent(component){var e_1,_a,componentName=component.name;if(components.has(componentName))return logger.debug(\"There were multiple attempts to register component \"+componentName+\".\"),\"PUBLIC\"===component.type?namespace[componentName]:null;if(components.set(componentName,component),\"PUBLIC\"===component.type){var serviceNamespace=function(appArg){if(void 0===appArg&&(appArg=app()),\"function\"!=typeof appArg[componentName])throw ERROR_FACTORY.create(\"invalid-app-argument\",{appName:componentName});return appArg[componentName]()};void 0!==component.serviceProps&&util.deepExtend(serviceNamespace,component.serviceProps),namespace[componentName]=serviceNamespace,firebaseAppImpl.prototype[componentName]=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var serviceFxn=this._getService.bind(this,componentName);return serviceFxn.apply(this,component.multipleInstances?args:[])}}try{for(var _b=tslib.__values(Object.keys(apps)),_c=_b.next();!_c.done;_c=_b.next())apps[_c.value]._addComponent(component)}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return\"PUBLIC\"===component.type?namespace[componentName]:null}return namespace.default=namespace,Object.defineProperty(namespace,\"apps\",{get:function(){return Object.keys(apps).map((function(name){return apps[name]}))}}),app.App=firebaseAppImpl,namespace}(FirebaseAppImpl);return namespace.INTERNAL=tslib.__assign(tslib.__assign({},namespace.INTERNAL),{createFirebaseNamespace:createFirebaseNamespace,extendNamespace:function(props){util.deepExtend(namespace,props)},createSubscribe:util.createSubscribe,ErrorFactory:util.ErrorFactory,deepExtend:util.deepExtend}),namespace}(),PlatformLoggerService=function(){function PlatformLoggerService(container){this.container=container}return PlatformLoggerService.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(provider){if(function(provider){var component=provider.getComponent();return\"VERSION\"===(null==component?void 0:component.type)}(provider)){var service=provider.getImmediate();return service.library+\"/\"+service.version}return null})).filter((function(logString){return logString})).join(\" \")},PlatformLoggerService}();if(util.isBrowser()&&void 0!==self.firebase){logger.warn(\"\\n    Warning: Firebase is already defined in the global scope. Please make sure\\n    Firebase library is only loaded once.\\n  \");var sdkVersion=self.firebase.SDK_VERSION;sdkVersion&&sdkVersion.indexOf(\"LITE\")>=0&&logger.warn(\"\\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\\n    \")}var initializeApp=firebase.initializeApp;firebase.initializeApp=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return util.isNode()&&logger.warn('\\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\\n      run in a Node environment.  If running in a Node environment, make sure you\\n      are using the bundle specified by the \"main\" field in package.json.\\n      \\n      If you are using Webpack, you can specify \"main\" as the first item in\\n      \"resolve.mainFields\":\\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\\n      \\n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify \"main\"\\n      as the first item in \"mainFields\", e.g. [\\'main\\', \\'module\\'].\\n      https://github.com/rollup/rollup-plugin-node-resolve\\n      '),initializeApp.apply(void 0,args)};var firebase$1=firebase;!function(firebase,variant){firebase.INTERNAL.registerComponent(new component.Component(\"platform-logger\",(function(container){return new PlatformLoggerService(container)}),\"PRIVATE\")),firebase.registerVersion(\"@firebase/app\",\"0.6.11\",void 0),firebase.registerVersion(\"fire-js\",\"\")}(firebase$1),exports.default=firebase$1,exports.firebase=firebase$1},x7I3:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,\"ErrorCode\",(function(){return ErrorCode})),__webpack_require__.d(__webpack_exports__,\"EventType\",(function(){return EventType})),__webpack_require__.d(__webpack_exports__,\"WebChannel\",(function(){return WebChannel})),__webpack_require__.d(__webpack_exports__,\"XhrIo\",(function(){return XhrIo})),__webpack_require__.d(__webpack_exports__,\"createWebChannelTransport\",(function(){return createWebChannelTransport}));var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};function __values(o){var s=\"function\"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&\"number\"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}var g,commonjsGlobal=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:{},goog=goog||{},k=commonjsGlobal||self;function aa(){}function ba(a){var b=typeof a;return\"object\"!=b?b:a?Array.isArray(a)?\"array\":b:\"null\"}function ca(a){var b=ba(a);return\"array\"==b||\"object\"==b&&\"number\"==typeof a.length}function n(a){var b=typeof a;return\"object\"==b&&null!=a||\"function\"==b}var ea=\"closure_uid_\"+(1e9*Math.random()>>>0),fa=0;function ha(a,b,c){return a.call.apply(a.bind,arguments)}function ja(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,d),a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?ha:ja).apply(null,arguments)}function ka(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var d=c.slice();return d.push.apply(d,arguments),a.apply(this,d)}}var q=Date.now;function r(a,b){function c(){}c.prototype=b.prototype,a.S=b.prototype,a.prototype=new c,a.prototype.constructor=a}function u(){this.j=this.j,this.i=this.i}u.prototype.j=!1,u.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(a){Object.prototype.hasOwnProperty.call(a,ea)&&a[ea]||(a[ea]=++fa)}(this)},u.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var na=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(\"string\"==typeof a)return\"string\"!=typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},oa=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=\"string\"==typeof a?a.split(\"\"):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function ra(a){return Array.prototype.concat.apply([],arguments)}function sa(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function ta(a){return/^[\\s\\xa0]*$/.test(a)}var w,ua=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(a)[1]};function v(a,b){return-1!=a.indexOf(b)}function xa(a,b){return a<b?-1:a>b?1:0}a:{var ya=k.navigator;if(ya){var za=ya.userAgent;if(za){w=za;break a}}w=\"\"}function Aa(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Ba(a){var b={};for(var c in a)b[c]=a[c];return b}var Ca=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");function Da(a,b){for(var c,d,e=1;e<arguments.length;e++){for(c in d=arguments[e])a[c]=d[c];for(var f=0;f<Ca.length;f++)c=Ca[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Ea(a){return Ea[\" \"](a),a}Ea[\" \"]=aa;var Na,a,Ha=v(w,\"Opera\"),x=v(w,\"Trident\")||v(w,\"MSIE\"),Ia=v(w,\"Edge\"),Ja=Ia||x,Ka=v(w,\"Gecko\")&&!(v(w.toLowerCase(),\"webkit\")&&!v(w,\"Edge\"))&&!(v(w,\"Trident\")||v(w,\"MSIE\"))&&!v(w,\"Edge\"),La=v(w.toLowerCase(),\"webkit\")&&!v(w,\"Edge\");function Ma(){var a=k.document;return a?a.documentMode:void 0}a:{var Oa=\"\",Pa=(a=w,Ka?/rv:([^\\);]+)(\\)|;)/.exec(a):Ia?/Edge\\/([\\d\\.]+)/.exec(a):x?/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(a):La?/WebKit\\/(\\S+)/.exec(a):Ha?/(?:Version)[ \\/]?(\\S+)/.exec(a):void 0);if(Pa&&(Oa=Pa?Pa[1]:\"\"),x){var Qa=Ma();if(null!=Qa&&Qa>parseFloat(Oa)){Na=String(Qa);break a}}Na=Oa}var Ga={};function Ra(a){return function(a,b){var c=Ga;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b()}(a,(function(){for(var b=0,e=ua(String(Na)).split(\".\"),f=ua(String(a)).split(\".\"),h=Math.max(e.length,f.length),m=0;0==b&&m<h;m++){var c=e[m]||\"\",d=f[m]||\"\";do{if(c=/(\\d*)(\\D*)(.*)/.exec(c)||[\"\",\"\",\"\",\"\"],d=/(\\d*)(\\D*)(.*)/.exec(d)||[\"\",\"\",\"\",\"\"],0==c[0].length&&0==d[0].length)break;b=xa(0==c[1].length?0:parseInt(c[1],10),0==d[1].length?0:parseInt(d[1],10))||xa(0==c[2].length,0==d[2].length)||xa(c[2],d[2]),c=c[3],d=d[3]}while(0==b)}return 0<=b}))}var Ua=k.document&&x&&(Ma()||parseInt(Na,10))||void 0,Va=!x||9<=Number(Ua),Wa=x&&!Ra(\"9\"),Xa=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},\"passive\",{get:function(){a=!0}});try{k.addEventListener(\"test\",aa,b),k.removeEventListener(\"test\",aa,b)}catch(c){}return a}();function y(a,b){this.type=a,this.a=this.target=b,this.defaultPrevented=!1}function A(a,b){if(y.call(this,a?a.type:\"\"),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=\"\",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType=\"\",this.c=null,a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.a=b,b=a.relatedTarget){if(Ka){a:{try{Ea(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else\"mouseover\"==c?b=a.fromElement:\"mouseout\"==c&&(b=a.toElement);this.relatedTarget=b,d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||\"\",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=\"string\"==typeof a.pointerType?a.pointerType:Ya[a.pointerType]||\"\",this.c=a,a.defaultPrevented&&this.b()}}y.prototype.b=function(){this.defaultPrevented=!0},r(A,y);var Ya={2:\"touch\",3:\"pen\",4:\"mouse\"};A.prototype.b=function(){A.S.b.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Wa)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(b){}};var C=\"closure_listenable_\"+(1e6*Math.random()|0),Za=0;function $a(a,b,c,d,e){this.listener=a,this.proxy=null,this.src=b,this.type=c,this.capture=!!d,this.ca=e,this.key=++Za,this.Y=this.Z=!1}function ab(a){a.Y=!0,a.listener=null,a.proxy=null,a.src=null,a.ca=null}function bb(a){this.src=a,this.a={},this.b=0}function db(a,b){var c=b.type;if(c in a.a){var f,d=a.a[c],e=na(d,b);(f=0<=e)&&Array.prototype.splice.call(d,e,1),f&&(ab(b),0==a.a[c].length&&(delete a.a[c],a.b--))}}function cb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Y&&f.listener==b&&f.capture==!!c&&f.ca==d)return e}return-1}bb.prototype.add=function(a,b,c,d,e){var f=a.toString();(a=this.a[f])||(a=this.a[f]=[],this.b++);var h=cb(a,b,d,e);return-1<h?(b=a[h],c||(b.Z=!1)):((b=new $a(b,this.src,f,!!d,e)).Z=c,a.push(b)),b};var eb=\"closure_lm_\"+(1e6*Math.random()|0),fb={};function hb(a,b,c,d,e){if(d&&d.once)return function ib(a,b,c,d,e){if(Array.isArray(b)){for(var f=0;f<b.length;f++)ib(a,b[f],c,d,e);return null}return c=jb(c),a&&a[C]?a.wa(b,c,n(d)?!!d.capture:!!d,e):kb(a,b,c,!0,d,e)}(a,b,c,d,e);if(Array.isArray(b)){for(var f=0;f<b.length;f++)hb(a,b[f],c,d,e);return null}return c=jb(c),a&&a[C]?a.va(b,c,n(d)?!!d.capture:!!d,e):kb(a,b,c,!1,d,e)}function kb(a,b,c,d,e,f){if(!b)throw Error(\"Invalid event type\");var h=n(e)?!!e.capture:!!e;if(h&&!Va)return null;var m=lb(a);if(m||(a[eb]=m=new bb(a)),(c=m.add(b,c,d,h,f)).proxy)return c;if(d=function(){var a=ob,b=Va?function(c){return a.call(b.src,b.listener,c)}:function(c){if(!(c=a.call(b.src,b.listener,c)))return c};return b}(),c.proxy=d,d.src=a,d.listener=c,a.addEventListener)Xa||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(nb(b.toString()),d);else{if(!a.addListener||!a.removeListener)throw Error(\"addEventListener and attachEvent are unavailable.\");a.addListener(d)}return c}function rb(a){if(\"number\"!=typeof a&&a&&!a.Y){var b=a.src;if(b&&b[C])db(b.c,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(nb(c),d):b.addListener&&b.removeListener&&b.removeListener(d),(c=lb(b))?(db(c,a),0==c.b&&(c.src=null,b[eb]=null)):ab(a)}}}function nb(a){return a in fb?fb[a]:fb[a]=\"on\"+a}function sb(a,b){var c=a.listener,d=a.ca||a.src;return a.Z&&rb(a),c.call(d,b)}function ob(a,b){if(a.Y)return!0;if(!Va){if(!b)a:{b=[\"window\",\"event\"];for(var c=k,d=0;d<b.length;d++)if(null==(c=c[b[d]])){b=null;break a}b=c}return sb(a,b=new A(b,this))}return sb(a,new A(b,this))}function lb(a){return(a=a[eb])instanceof bb?a:null}var tb=\"__closure_events_fn_\"+(1e9*Math.random()>>>0);function jb(a){return\"function\"==ba(a)?a:(a[tb]||(a[tb]=function(b){return a.handleEvent(b)}),a[tb])}function D(){u.call(this),this.c=new bb(this),this.J=this,this.C=null}function ub(a,b,c,d){if(!(b=a.c.a[String(b)]))return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.Y&&h.capture==c){var m=h.listener,l=h.ca||h.src;h.Z&&db(a.c,h),e=!1!==m.call(l,d)&&e}}return e&&!d.defaultPrevented}r(D,u),D.prototype[C]=!0,(g=D.prototype).addEventListener=function(a,b,c,d){hb(this,a,b,c,d)},g.removeEventListener=function(a,b,c,d){!function pb(a,b,c,d,e){if(Array.isArray(b))for(var f=0;f<b.length;f++)pb(a,b[f],c,d,e);else d=n(d)?!!d.capture:!!d,c=jb(c),a&&a[C]?(a=a.c,(b=String(b).toString())in a.a&&-1<(c=cb(f=a.a[b],c,d,e))&&(ab(f[c]),Array.prototype.splice.call(f,c,1),0==f.length&&(delete a.a[b],a.b--))):a&&(a=lb(a))&&(b=a.a[b.toString()],a=-1,b&&(a=cb(b,c,d,e)),(c=-1<a?b[a]:null)&&rb(c))}(this,a,b,c,d)},g.dispatchEvent=function(a){var b,c=this.C;if(c)for(b=[];c;c=c.C)b.push(c);c=this.J;var d=a.type||a;if(\"string\"==typeof a)a=new y(a,c);else if(a instanceof y)a.target=a.target||c;else{var e=a;Da(a=new y(d,c),e)}if(e=!0,b)for(var f=b.length-1;0<=f;f--){var h=a.a=b[f];e=ub(h,d,!0,a)&&e}if(e=ub(h=a.a=c,d,!0,a)&&e,e=ub(h,d,!1,a)&&e,b)for(f=0;f<b.length;f++)e=ub(h=a.a=b[f],d,!1,a)&&e;return e},g.G=function(){if(D.S.G.call(this),this.c){var c,a=this.c;for(c in a.a){for(var d=a.a[c],e=0;e<d.length;e++)ab(d[e]);delete a.a[c],a.b--}}this.C=null},g.va=function(a,b,c,d){return this.c.add(String(a),b,!1,c,d)},g.wa=function(a,b,c,d){return this.c.add(String(a),b,!0,c,d)};var vb=k.JSON.stringify;function wb(){this.b=this.a=null}var Db,yb=new(function(){function class_1(a,b,c){this.f=c,this.c=a,this.g=b,this.b=0,this.a=null}return class_1.prototype.get=function(){var a;return 0<this.b?(this.b--,this.a=(a=this.a).next,a.next=null):a=this.c(),a},class_1}())((function(){return new xb}),(function(a){a.reset()}),100);function zb(){var a=Ab,b=null;return a.a&&(b=a.a,a.a=a.a.next,a.a||(a.b=null),b.next=null),b}function xb(){this.next=this.b=this.a=null}function Bb(a){k.setTimeout((function(){throw a}),0)}function Cb(a,b){Db||function(){var a=k.Promise.resolve(void 0);Db=function(){a.then(Gb)}}(),Fb||(Db(),Fb=!0),Ab.add(a,b)}wb.prototype.add=function(a,b){var c=yb.get();c.set(a,b),this.b?this.b.next=c:this.a=c,this.b=c},xb.prototype.set=function(a,b){this.a=a,this.b=b,this.next=null},xb.prototype.reset=function(){this.next=this.b=this.a=null};var Fb=!1,Ab=new wb;function Gb(){for(var a;a=zb();){try{a.a.call(a.b)}catch(c){Bb(c)}var b=yb;b.g(a),b.b<b.f&&(b.b++,a.next=b.a,b.a=a)}Fb=!1}function Hb(a,b){D.call(this),this.b=a||1,this.a=b||k,this.f=p(this.Ya,this),this.g=q()}function Ib(a){a.aa=!1,a.M&&(a.a.clearTimeout(a.M),a.M=null)}function Jb(a,b,c){if(\"function\"==ba(a))c&&(a=p(a,c));else{if(!a||\"function\"!=typeof a.handleEvent)throw Error(\"Invalid listener argument\");a=p(a.handleEvent,a)}return 2147483647<Number(b)?-1:k.setTimeout(a,b||0)}function Kb(a){a.a=Jb((function(){a.a=null,a.c&&(a.c=!1,Kb(a))}),a.h);var b=a.b;a.b=null,a.g.apply(null,b)}r(Hb,D),(g=Hb.prototype).aa=!1,g.M=null,g.Ya=function(){if(this.aa){var a=q()-this.g;0<a&&a<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-a):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent(\"tick\"),this.aa&&(Ib(this),this.start()))}},g.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=q())},g.G=function(){Hb.S.G.call(this),Ib(this),delete this.a};var Lb=function(_super){function Lb(a,b,c){var _this=_super.call(this)||this;return _this.g=null!=c?a.bind(c):a,_this.h=b,_this.b=null,_this.c=!1,_this.a=null,_this}return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}(Lb,_super),Lb.prototype.f=function(a){this.b=arguments,this.a?this.c=!0:Kb(this)},Lb.prototype.G=function(){_super.prototype.G.call(this),this.a&&(k.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Lb}(u);function E(a){u.call(this),this.b=a,this.a={}}r(E,u);var Mb=[];function Nb(a,b,c,d){Array.isArray(c)||(c&&(Mb[0]=c.toString()),c=Mb);for(var e=0;e<c.length;e++){var f=hb(b,c[e],d||a.handleEvent,!1,a.b||a);if(!f)break;a.a[f.key]=f}}function Ob(a){Aa(a.a,(function(b,c){this.a.hasOwnProperty(c)&&rb(b)}),a),a.a={}}function Pb(){this.a=!0}function F(a,b,c,d){a.info((function(){return\"XMLHTTP TEXT (\"+b+\"): \"+function(a,b){if(!a.a)return b;if(!b)return null;try{var c=JSON.parse(b);if(c)for(a=0;a<c.length;a++)if(Array.isArray(c[a])){var d=c[a];if(!(2>d.length)){var e=d[1];if(Array.isArray(e)&&!(1>e.length)){var f=e[0];if(\"noop\"!=f&&\"stop\"!=f&&\"close\"!=f)for(var h=1;h<e.length;h++)e[h]=\"\"}}}return vb(c)}catch(m){return b}}(a,c)+(d?\" \"+d:\"\")}))}E.prototype.G=function(){E.S.G.call(this),Ob(this)},E.prototype.handleEvent=function(){throw Error(\"EventHandler.handleEvent not implemented\")},Pb.prototype.info=function(){};var Ub=null;function Vb(){return Ub=Ub||new D}function Wb(a){y.call(this,\"serverreachability\",a)}function G(a){var b=Vb();b.dispatchEvent(new Wb(b,a))}function Xb(a){y.call(this,\"statevent\",a)}function H(a){var b=Vb();b.dispatchEvent(new Xb(b,a))}function Yb(a){y.call(this,\"timingevent\",a)}function I(a,b){if(\"function\"!=ba(a))throw Error(\"Fn must not be null and must be a function\");return k.setTimeout((function(){a()}),b)}r(Wb,y),r(Xb,y),r(Yb,y);var Zb={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},$b={ab:\"complete\",ob:\"success\",Ea:\"error\",Da:\"abort\",mb:\"ready\",nb:\"readystatechange\",TIMEOUT:\"timeout\",ib:\"incrementaldata\",lb:\"progress\",cb:\"downloadprogress\",pb:\"uploadprogress\"};function ac(){}function cc(){}ac.prototype.a=null;var fc,J={OPEN:\"a\",$a:\"b\",Ea:\"c\",jb:\"d\"};function dc(){y.call(this,\"d\")}function ec(){y.call(this,\"c\")}function gc(){}function K(a,b,c,d){this.g=a,this.c=b,this.f=c,this.T=d||1,this.J=new E(this),this.P=hc,this.R=new Hb(a=Ja?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}r(dc,y),r(ec,y),r(gc,ac),fc=new gc;var hc=45e3,ic={},jc={};function kc(a,b,c){a.H=1,a.i=lc(L(b)),a.j=c,a.I=!0,mc(a,null)}function mc(a,b){a.u=q(),M(a),a.l=L(a.i);var c=a.l,d=a.T;Array.isArray(d)||(d=[String(d)]),nc(c.b,\"t\",d),a.D=0,a.a=oc(a.g,a.g.C?b:null),0<a.O&&(a.F=new Lb(p(a.Ca,a,a.a),a.O)),Nb(a.J,a.a,\"readystatechange\",a.Wa),b=a.B?Ba(a.B):{},a.j?(a.m||(a.m=\"POST\"),b[\"Content-Type\"]=\"application/x-www-form-urlencoded\",a.a.ba(a.l,a.m,a.j,b)):(a.m=\"GET\",a.a.ba(a.l,a.m,null,b)),G(1),function(a,b,c,d,e,f){a.info((function(){if(a.a)if(f)for(var h=\"\",m=f.split(\"&\"),l=0;l<m.length;l++){var t=m[l].split(\"=\");if(1<t.length){var B=t[0];t=t[1];var z=B.split(\"_\");h=2<=z.length&&\"type\"==z[1]?h+(B+\"=\")+t+\"&\":h+(B+\"=redacted&\")}}else h=null;else h=f;return\"XMLHTTP REQ (\"+d+\") [attempt \"+e+\"]: \"+b+\"\\n\"+c+\"\\n\"+h}))}(a.c,a.m,a.l,a.f,a.T,a.j)}function tc(a,b,c){for(var d=!0;!a.A&&a.D<c.length;){var e=vc(a,c);if(e==jc){4==b&&(a.h=4,H(14),d=!1),F(a.c,a.f,null,\"[Incomplete Response]\");break}if(e==ic){a.h=4,H(15),F(a.c,a.f,c,\"[Invalid Chunk]\"),d=!1;break}F(a.c,a.f,e,null),qc(a,e)}4==b&&0==c.length&&(a.h=1,H(16),d=!1),a.b=a.b&&d,d?0<c.length&&!a.W&&(a.W=!0,(b=a.g).a==a&&b.V&&!b.F&&(b.c.info(\"Great, no buffering proxy detected. Bytes received: \"+c.length),xc(b),b.F=!0)):(F(a.c,a.f,c,\"[Invalid Chunked Response]\"),O(a),rc(a))}function vc(a,b){var c=a.D,d=b.indexOf(\"\\n\",c);return-1==d?jc:(c=Number(b.substring(c,d)),isNaN(c)?ic:(d+=1)+c>b.length?jc:(b=b.substr(d,c),a.D=d+c,b))}function M(a){a.U=q()+a.P,yc(a,a.P)}function yc(a,b){if(null!=a.o)throw Error(\"WatchDog timer not null\");a.o=I(p(a.Ua,a),b)}function pc(a){a.o&&(k.clearTimeout(a.o),a.o=null)}function rc(a){0==a.g.v||a.A||uc(a.g,a)}function O(a){pc(a);var b=a.F;b&&\"function\"==typeof b.ja&&b.ja(),a.F=null,Ib(a.R),Ob(a.J),a.a&&(b=a.a,a.a=null,b.abort(),b.ja())}function qc(a,b){try{var c=a.g;if(0!=c.v&&(c.a==a||zc(c.b,a)))if(c.I=a.N,!a.C&&zc(c.b,a)&&3==c.v){try{var d=c.ka.a.parse(b)}catch(sc){d=null}if(Array.isArray(d)&&3==d.length){var e=d;if(0==e[0]){a:if(!c.j){if(c.a){if(!(c.a.u+3e3<a.u))break a;Ac(c),Bc(c)}Cc(c),H(18)}}else c.oa=e[1],0<c.oa-c.P&&37500>e[2]&&c.H&&0==c.o&&!c.m&&(c.m=I(p(c.Ra,c),6e3));if(1>=Dc(c.b)&&c.ea){try{c.ea()}catch(sc){}c.ea=void 0}}else P(c,11)}else if((a.C||c.a==a)&&Ac(c),!ta(b))for(b=d=c.ka.a.parse(b),d=0;d<b.length;d++)if(c.P=(e=b[d])[0],e=e[1],2==c.v)if(\"c\"==e[0]){c.J=e[1],c.ga=e[2];var f=e[3];null!=f&&(c.ha=f,c.c.info(\"VER=\"+c.ha));var h=e[4];null!=h&&(c.pa=h,c.c.info(\"SVER=\"+c.pa));var m=e[5];if(null!=m&&\"number\"==typeof m&&0<m){var l=1.5*m;c.D=l,c.c.info(\"backChannelRequestTimeoutMs_=\"+l)}l=c;var t=a.a;if(t){var B=t.a?t.a.getResponseHeader(\"X-Client-Wire-Protocol\"):null;if(B){var z=l.b;!z.a&&(v(B,\"spdy\")||v(B,\"quic\")||v(B,\"h2\"))&&(z.f=z.g,z.a=new Set,z.b&&(Ec(z,z.b),z.b=null))}if(l.A){var qb=t.a?t.a.getResponseHeader(\"X-HTTP-Session-Id\"):null;qb&&(l.na=qb,Q(l.B,l.A,qb))}}c.v=3,c.f&&c.f.ta(),c.V&&(c.N=q()-a.u,c.c.info(\"Handshake RTT: \"+c.N+\"ms\"));var va=a;if((l=c).la=Fc(l,l.C?l.ga:null,l.fa),va.C){Gc(l.b,va);var wa=va,wc=l.D;wc&&wa.setTimeout(wc),wa.o&&(pc(wa),M(wa)),l.a=va}else Hc(l);0<c.g.length&&Ic(c)}else\"stop\"!=e[0]&&\"close\"!=e[0]||P(c,7);else 3==c.v&&(\"stop\"==e[0]||\"close\"==e[0]?\"stop\"==e[0]?P(c,7):Jc(c):\"noop\"!=e[0]&&c.f&&c.f.sa(e),c.o=0);G(4)}catch(sc){}}function Lc(a,b){if(a.forEach&&\"function\"==typeof a.forEach)a.forEach(b,void 0);else if(ca(a)||\"string\"==typeof a)oa(a,b,void 0);else{if(a.L&&\"function\"==typeof a.L)var c=a.L();else if(a.K&&\"function\"==typeof a.K)c=void 0;else if(ca(a)||\"string\"==typeof a){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else for(e in c=[],d=0,a)c[d++]=e;e=(d=function(a){if(a.K&&\"function\"==typeof a.K)return a.K();if(\"string\"==typeof a)return a.split(\"\");if(ca(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}for(d in b=[],c=0,a)b[c++]=a[d];return b}(a)).length;for(var f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}}function R(a,b){this.b={},this.a=[],this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error(\"Uneven number of arguments\");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof R)for(c=a.L(),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}function Mc(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];S(a.b,d)&&(a.a[c++]=d),b++}a.a.length=c}if(a.c!=a.a.length){var e={};for(c=b=0;b<a.a.length;)S(e,d=a.a[b])||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function S(a,b){return Object.prototype.hasOwnProperty.call(a,b)}(g=K.prototype).setTimeout=function(a){this.P=a},g.Wa=function(a){a=a.target;var b=this.F;b&&3==N(a)?b.f():this.Ca(a)},g.Ca=function(a){try{if(a==this.a)a:{var b=N(this.a),c=this.a.ua(),d=this.a.X();if(!(3>b||3==b&&!Ja&&!this.a.$())){this.A||4!=b||7==c||G(8==c||0>=d?3:2),pc(this);var e=this.a.X();this.N=e;var f=this.a.$();if(this.b=200==e,function(a,b,c,d,e,f,h){a.info((function(){return\"XMLHTTP RESP (\"+d+\") [ attempt \"+e+\"]: \"+b+\"\\n\"+c+\"\\n\"+f+\" \"+h}))}(this.c,this.m,this.l,this.f,this.T,b,e),this.b){if(this.V&&!this.C){b:{if(this.a){var h,m=this.a;if((h=m.a?m.a.getResponseHeader(\"X-HTTP-Initial-Response\"):null)&&!ta(h)){var l=h;break b}}l=null}if(!l){this.b=!1,this.h=3,H(12),O(this),rc(this);break a}F(this.c,this.f,l,\"Initial handshake response via X-HTTP-Initial-Response\"),this.C=!0,qc(this,l)}this.I?(tc(this,b,f),Ja&&this.b&&3==b&&(Nb(this.J,this.R,\"tick\",this.Va),this.R.start())):(F(this.c,this.f,f,null),qc(this,f)),4==b&&O(this),this.b&&!this.A&&(4==b?uc(this.g,this):(this.b=!1,M(this)))}else 400==e&&0<f.indexOf(\"Unknown SID\")?(this.h=3,H(12)):(this.h=0,H(13)),O(this),rc(this)}}}catch(t){}},g.Va=function(){if(this.a){var a=N(this.a),b=this.a.$();this.D<b.length&&(pc(this),tc(this,a,b),this.b&&4!=a&&M(this))}},g.cancel=function(){this.A=!0,O(this)},g.Ua=function(){this.o=null;var a=q();0<=a-this.U?(function(a,b){a.info((function(){return\"TIMEOUT: \"+b}))}(this.c,this.l),2!=this.H&&(G(3),H(17)),O(this),this.h=2,rc(this)):yc(this,this.U-a)},(g=R.prototype).K=function(){Mc(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a},g.L=function(){return Mc(this),this.a.concat()},g.get=function(a,b){return S(this.b,a)?this.b[a]:b},g.set=function(a,b){S(this.b,a)||(this.c++,this.a.push(a)),this.b[a]=b},g.forEach=function(a,b){for(var c=this.L(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};var Nc=/^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;function T(a,b){if(this.c=this.j=this.f=\"\",this.h=null,this.i=this.g=\"\",this.a=!1,a instanceof T){this.a=void 0!==b?b:a.a,Pc(this,a.f),this.j=a.j,Qc(this,a.c),Rc(this,a.h),this.g=a.g,b=a.b;var c=new U;c.c=b.c,b.a&&(c.a=new R(b.a),c.b=b.b),Sc(this,c),this.i=a.i}else a&&(c=String(a).match(Nc))?(this.a=!!b,Pc(this,c[1]||\"\",!0),this.j=Tc(c[2]||\"\"),Qc(this,c[3]||\"\",!0),Rc(this,c[4]),this.g=Tc(c[5]||\"\",!0),Sc(this,c[6]||\"\",!0),this.i=Tc(c[7]||\"\")):(this.a=!!b,this.b=new U(null,this.a))}function L(a){return new T(a)}function Pc(a,b,c){a.f=c?Tc(b,!0):b,a.f&&(a.f=a.f.replace(/:$/,\"\"))}function Qc(a,b,c){a.c=c?Tc(b,!0):b}function Rc(a,b){if(b){if(b=Number(b),isNaN(b)||0>b)throw Error(\"Bad port number \"+b);a.h=b}else a.h=null}function Sc(a,b,c){b instanceof U?(a.b=b,function(a,b){b&&!a.f&&(V(a),a.c=null,a.a.forEach((function(c,d){var e=d.toLowerCase();d!=e&&(dd(this,d),nc(this,e,c))}),a)),a.f=b}(a.b,a.a)):(c||(b=Uc(b,$c)),a.b=new U(b,a.a))}function Q(a,b,c){a.b.set(b,c)}function lc(a){return Q(a,\"zx\",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^q()).toString(36)),a}function Tc(a,b){return a?b?decodeURI(a.replace(/%25/g,\"%2525\")):decodeURIComponent(a):\"\"}function Uc(a,b,c){return\"string\"==typeof a?(a=encodeURI(a).replace(b,cd),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),a):null}function cd(a){return\"%\"+((a=a.charCodeAt(0))>>4&15).toString(16)+(15&a).toString(16)}T.prototype.toString=function(){var a=[],b=this.f;b&&a.push(Uc(b,Vc,!0),\":\");var c=this.c;return(c||\"file\"==b)&&(a.push(\"//\"),(b=this.j)&&a.push(Uc(b,Vc,!0),\"@\"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),null!=(c=this.h)&&a.push(\":\",String(c))),(c=this.g)&&(this.c&&\"/\"!=c.charAt(0)&&a.push(\"/\"),a.push(Uc(c,\"/\"==c.charAt(0)?Wc:Xc,!0))),(c=this.b.toString())&&a.push(\"?\",c),(c=this.i)&&a.push(\"#\",Uc(c,Yc)),a.join(\"\")};var Vc=/[#\\/\\?@]/g,Xc=/[#\\?:]/g,Wc=/[#\\?]/g,$c=/[#\\?@]/g,Yc=/#/g;function U(a,b){this.b=this.a=null,this.c=a||null,this.f=!!b}function V(a){a.a||(a.a=new R,a.b=0,a.c&&function(a,b){if(a){a=a.split(\"&\");for(var c=0;c<a.length;c++){var d=a[c].indexOf(\"=\"),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\\+/g,\" \")):\"\")}}}(a.c,(function(b,c){a.add(decodeURIComponent(b.replace(/\\+/g,\" \")),c)})))}function dd(a,b){V(a),b=W(a,b),S(a.a.b,b)&&(a.c=null,a.b-=a.a.get(b).length,S((a=a.a).b,b)&&(delete a.b[b],a.c--,a.a.length>2*a.c&&Mc(a)))}function ed(a,b){return V(a),b=W(a,b),S(a.a.b,b)}function nc(a,b,c){dd(a,b),0<c.length&&(a.c=null,a.a.set(W(a,b),sa(c)),a.b+=c.length)}function W(a,b){return b=String(b),a.f&&(b=b.toLowerCase()),b}function fd(a,b){this.b=a,this.a=b}function gd(a){this.g=a||hd,a=k.PerformanceNavigationTiming?0<(a=k.performance.getEntriesByType(\"navigation\")).length&&(\"hq\"==a[0].nextHopProtocol||\"h2\"==a[0].nextHopProtocol):!!(k.ia&&k.ia.ya&&k.ia.ya()&&k.ia.ya().qb),this.f=a?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(g=U.prototype).add=function(a,b){V(this),this.c=null,a=W(this,a);var c=this.a.get(a);return c||this.a.set(a,c=[]),c.push(b),this.b+=1,this},g.forEach=function(a,b){V(this),this.a.forEach((function(c,d){oa(c,(function(e){a.call(b,e,d,this)}),this)}),this)},g.L=function(){V(this);for(var a=this.a.K(),b=this.a.L(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c},g.K=function(a){V(this);var b=[];if(\"string\"==typeof a)ed(this,a)&&(b=ra(b,this.a.get(W(this,a))));else{a=this.a.K();for(var c=0;c<a.length;c++)b=ra(b,a[c])}return b},g.set=function(a,b){return V(this),this.c=null,ed(this,a=W(this,a))&&(this.b-=this.a.get(a).length),this.a.set(a,[b]),this.b+=1,this},g.get=function(a,b){return a&&0<(a=this.K(a)).length?String(a[0]):b},g.toString=function(){if(this.c)return this.c;if(!this.a)return\"\";for(var a=[],b=this.a.L(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.K(d);for(var f=0;f<d.length;f++){var h=e;\"\"!==d[f]&&(h+=\"=\"+encodeURIComponent(String(d[f]))),a.push(h)}}return this.c=a.join(\"&\")};var hd=10;function id(a){return!!a.b||!!a.a&&a.a.size>=a.f}function Dc(a){return a.b?1:a.a?a.a.size:0}function zc(a,b){return a.b?a.b==b:!!a.a&&a.a.has(b)}function Ec(a,b){a.a?a.a.add(b):a.b=b}function Gc(a,b){a.b&&a.b==b?a.b=null:a.a&&a.a.has(b)&&a.a.delete(b)}function jd(a){var e_2,_a;if(null!=a.b)return a.c.concat(a.b.s);if(null!=a.a&&0!==a.a.size){var b=a.c;try{for(var _b=__values(a.a.values()),_c=_b.next();!_c.done;_c=_b.next())b=b.concat(_c.value.s)}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_2)throw e_2.error}}return b}return sa(a.c)}function kd(){}function ld(){this.a=new kd}function md(a,b,c){var d=c||\"\";try{Lc(a,(function(e,f){var h=e;n(e)&&(h=vb(e)),b.push(d+f+\"=\"+encodeURIComponent(h))}))}catch(e){throw b.push(d+\"type=\"+encodeURIComponent(\"_badmap\")),e}}function od(a,b,c,d,e){try{b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null,e(d)}catch(f){}}gd.prototype.cancel=function(){var e_1,_a;if(this.c=jd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var _b=__values(this.a.values()),_c=_b.next();!_c.done;_c=_b.next())_c.value.cancel()}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}this.a.clear()}},kd.prototype.stringify=function(a){return k.JSON.stringify(a,void 0)},kd.prototype.parse=function(a){return k.JSON.parse(a,void 0)};var pd=k.JSON.parse;function X(a){D.call(this),this.headers=new R,this.H=a||null,this.b=!1,this.s=this.a=null,this.B=\"\",this.h=0,this.f=\"\",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=qd,this.D=this.F=!1}r(X,D);var qd=\"\",rd=/^https?$/i,sd=[\"POST\",\"PUT\"];function qa(a){return\"content-type\"==a.toLowerCase()}function td(a,b){a.b=!1,a.a&&(a.g=!0,a.a.abort(),a.g=!1),a.f=b,a.h=5,wd(a),xd(a)}function wd(a){a.u||(a.u=!0,a.dispatchEvent(\"complete\"),a.dispatchEvent(\"error\"))}function yd(a){if(a.b&&void 0!==goog&&(!a.s[1]||4!=N(a)||2!=a.X()))if(a.l&&4==N(a))Jb(a.za,0,a);else if(a.dispatchEvent(\"readystatechange\"),4==N(a)){a.b=!1;try{var d,b=a.X();a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}if(!(d=c)){var e;if(e=0===b){var f=String(a.B).match(Nc)[1]||null;if(!f&&k.self&&k.self.location){var h=k.self.location.protocol;f=h.substr(0,h.length-1)}e=!rd.test(f?f.toLowerCase():\"\")}d=e}if(d)a.dispatchEvent(\"complete\"),a.dispatchEvent(\"success\");else{a.h=6;try{var m=2<N(a)?a.a.statusText:\"\"}catch(l){m=\"\"}a.f=m+\" [\"+a.X()+\"]\",wd(a)}}finally{xd(a)}}}function xd(a,b){if(a.a){ud(a);var c=a.a,d=a.s[0]?aa:null;a.a=null,a.s=null,b||a.dispatchEvent(\"ready\");try{c.onreadystatechange=d}catch(e){}}}function ud(a){a.a&&a.D&&(a.a.ontimeout=null),a.m&&(k.clearTimeout(a.m),a.m=null)}function N(a){return a.a?a.a.readyState:0}function Ad(a,b,c){a:{for(d in c){var d=!1;break a}d=!0}d||(c=function(a){var b=\"\";return Aa(a,(function(c,d){b+=d,b+=\":\",b+=c,b+=\"\\r\\n\"})),b}(c),\"string\"==typeof a?null!=c&&encodeURIComponent(String(c)):Q(a,b,c))}function Bd(a,b,c){return c&&c.internalChannelParams&&c.internalChannelParams[a]||b}function Cd(a){this.pa=0,this.g=[],this.c=new Pb,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Bd(\"failFast\",!1,a),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Bd(\"baseRetryDelayMs\",5e3,a),this.Ma=Bd(\"retryDelaySeedMs\",1e4,a),this.Ja=Bd(\"forwardChannelMaxRetries\",2,a),this.ma=Bd(\"forwardChannelRequestTimeoutMs\",2e4,a),this.Ka=a&&a.g||void 0,this.D=void 0,this.C=a&&a.supportsCrossDomainXhr||!1,this.J=\"\",this.b=new gd(a&&a.concurrentRequestLimit),this.ka=new ld,this.da=a&&a.fastHandshake||!1,this.Ga=a&&a.b||!1,a&&a.f&&(this.c.a=!1),a&&a.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&a&&a.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Jc(a){if(Dd(a),3==a.v){var b=a.R++,c=L(a.B);Q(c,\"SID\",a.J),Q(c,\"RID\",b),Q(c,\"TYPE\",\"terminate\"),Ed(a,c),(b=new K(a,a.c,b,void 0)).H=2,b.i=lc(L(c)),c=!1,k.navigator&&k.navigator.sendBeacon&&(c=k.navigator.sendBeacon(b.i.toString(),\"\")),!c&&k.Image&&((new Image).src=b.i,c=!0),c||(b.a=oc(b.g,null),b.a.ba(b.i)),b.u=q(),M(b)}Fd(a)}function Bc(a){a.a&&(xc(a),a.a.cancel(),a.a=null)}function Dd(a){Bc(a),a.j&&(k.clearTimeout(a.j),a.j=null),Ac(a),a.b.cancel(),a.h&&(\"number\"==typeof a.h&&k.clearTimeout(a.h),a.h=null)}function Gd(a,b){a.g.push(new fd(a.La++,b)),3==a.v&&Ic(a)}function Ic(a){id(a.b)||a.h||(a.h=!0,Cb(a.Ba,a),a.u=0)}function Kd(a,b){var c;c=b?b.f:a.R++;var d=L(a.B);Q(d,\"SID\",a.J),Q(d,\"RID\",c),Q(d,\"AID\",a.P),Ed(a,d),a.i&&a.l&&Ad(d,a.i,a.l),c=new K(a,a.c,c,a.u+1),null===a.i&&(c.B=a.l),b&&(a.g=b.s.concat(a.g)),b=Jd(a,c,1e3),c.setTimeout(Math.round(.5*a.ma)+Math.round(.5*a.ma*Math.random())),Ec(a.b,c),kc(c,d,b)}function Ed(a,b){a.f&&Lc({},(function(c,d){Q(b,d,c)}))}function Jd(a,b,c){c=Math.min(a.g.length,c);var d=a.f?p(a.f.Ha,a.f,a):null;a:for(var e=a.g,f=-1;;){var h=[\"count=\"+c];-1==f?0<c?h.push(\"ofs=\"+(f=e[0].b)):f=0:h.push(\"ofs=\"+f);for(var m=!0,l=0;l<c;l++){var t=e[l].b,B=e[l].a;if(0>(t-=f))f=Math.max(0,e[l].b-100),m=!1;else try{md(B,h,\"req\"+t+\"_\")}catch(z){d&&d(B)}}if(m){d=h.join(\"&\");break a}}return a=a.g.splice(0,c),b.s=a,d}function Hc(a){a.a||a.j||(a.U=1,Cb(a.Aa,a),a.o=0)}function Cc(a){return!(a.a||a.j||3<=a.o||(a.U++,a.j=I(p(a.Aa,a),Id(a,a.o)),a.o++,0))}function xc(a){null!=a.s&&(k.clearTimeout(a.s),a.s=null)}function Ld(a){a.a=new K(a,a.c,\"rpc\",a.U),null===a.i&&(a.a.B=a.l),a.a.O=0;var b=L(a.la);Q(b,\"RID\",\"rpc\"),Q(b,\"SID\",a.J),Q(b,\"CI\",a.H?\"0\":\"1\"),Q(b,\"AID\",a.P),Ed(a,b),Q(b,\"TYPE\",\"xmlhttp\"),a.i&&a.l&&Ad(b,a.i,a.l),a.D&&a.a.setTimeout(a.D);var c=a.a;a=a.ga,c.H=1,c.i=lc(L(b)),c.j=null,c.I=!0,mc(c,a)}function Ac(a){null!=a.m&&(k.clearTimeout(a.m),a.m=null)}function uc(a,b){var c=null;if(a.a==b){Ac(a),xc(a),a.a=null;var d=2}else{if(!zc(a.b,b))return;c=b.s,Gc(a.b,b),d=1}if(a.I=b.N,0!=a.v)if(b.b)if(1==d){c=b.j?b.j.length:0,b=q()-b.u;var e=a.u;(d=Vb()).dispatchEvent(new Yb(d,c,b,e)),Ic(a)}else Hc(a);else if(3==(e=b.h)||0==e&&0<a.I||!(1==d&&function(a,b){return!(Dc(a.b)>=a.b.f-(a.h?1:0)||(a.h?(a.g=b.s.concat(a.g),0):1==a.v||2==a.v||a.u>=(a.Ia?0:a.Ja)||(a.h=I(p(a.Ba,a,b),Id(a,a.u)),a.u++,0)))}(a,b)||2==d&&Cc(a)))switch(c&&0<c.length&&(b=a.b,b.c=b.c.concat(c)),e){case 1:P(a,5);break;case 4:P(a,10);break;case 3:P(a,6);break;default:P(a,2)}}function Id(a,b){var c=a.Fa+Math.floor(Math.random()*a.Ma);return a.f||(c*=2),c*b}function P(a,b){if(a.c.info(\"Error code \"+b),2==b){var c=null;a.f&&(c=null);var d=p(a.Xa,a);c||(c=new T(\"//www.google.com/images/cleardot.gif\"),k.location&&\"http\"==k.location.protocol||Pc(c,\"https\"),lc(c)),function(a,b){var c=new Pb;if(k.Image){var d=new Image;d.onload=ka(od,c,d,\"TestLoadImage: loaded\",!0,b),d.onerror=ka(od,c,d,\"TestLoadImage: error\",!1,b),d.onabort=ka(od,c,d,\"TestLoadImage: abort\",!1,b),d.ontimeout=ka(od,c,d,\"TestLoadImage: timeout\",!1,b),k.setTimeout((function(){d.ontimeout&&d.ontimeout()}),1e4),d.src=a}else b(!1)}(c.toString(),d)}else H(2);a.v=0,a.f&&a.f.ra(b),Fd(a),Dd(a)}function Fd(a){a.v=0,a.I=-1,a.f&&(0==jd(a.b).length&&0==a.g.length||(a.b.c.length=0,sa(a.g),a.g.length=0),a.f.qa())}function Fc(a,b,c){var d=function(a){return a instanceof T?L(a):new T(a,void 0)}(c);if(\"\"!=d.c)b&&Qc(d,b+\".\"+d.c),Rc(d,d.h);else{var e=k.location;d=function(a,b,c,d){var e=new T(null,void 0);return a&&Pc(e,a),b&&Qc(e,b),c&&Rc(e,c),d&&(e.g=d),e}(e.protocol,b?b+\".\"+e.hostname:e.hostname,+e.port,c)}return a.W&&Aa(a.W,(function(f,h){Q(d,h,f)})),c=a.na,(b=a.A)&&c&&Q(d,b,c),Q(d,\"VER\",a.ha),Ed(a,d),d}function oc(a,b){if(b&&!a.C)throw Error(\"Can't create secondary domain capable XhrIo object.\");return(b=new X(a.Ka)).F=a.C,b}function Md(){}function Nd(){if(x&&!(10<=Number(Ua)))throw Error(\"Environmental error: no available transport.\")}function Y(a,b){D.call(this),this.a=new Cd(b),this.l=a,this.b=b&&b.messageUrlParams||null,a=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(a?a[\"X-Client-Protocol\"]=\"webchannel\":a={\"X-Client-Protocol\":\"webchannel\"}),this.a.l=a,a=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(a?a[\"X-WebChannel-Content-Type\"]=b.messageContentType:a={\"X-WebChannel-Content-Type\":b.messageContentType}),b&&b.a&&(a?a[\"X-WebChannel-Client-Profile\"]=b.a:a={\"X-WebChannel-Client-Profile\":b.a}),this.a.O=a,(a=b&&b.httpHeadersOverwriteParam)&&!ta(a)&&(this.a.i=a),this.h=b&&b.supportsCrossDomainXhr||!1,this.g=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!ta(b)&&(this.a.A=b,null!==(a=this.b)&&b in a&&b in(a=this.b)&&delete a[b]),this.f=new Z(this)}function Od(a){dc.call(this);var b=a.__sm__;if(b){a:{for(var c in b){a=c;break a}a=void 0}(this.c=a)?(a=this.c,this.data=null!==b&&a in b?b[a]:void 0):this.data=b}else this.data=a}function Pd(){ec.call(this),this.status=1}function Z(a){this.a=a}(g=X.prototype).ba=function(a,b,c,d){if(this.a)throw Error(\"[goog.net.XhrIo] Object is active with another request=\"+this.B+\"; newUri=\"+a);b=b?b.toUpperCase():\"GET\",this.B=a,this.f=\"\",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(a){var b;return(b=a.a)||(b=a.a={}),b}(this.H?this.H:fc),this.a.onreadystatechange=p(this.za,this);try{this.A=!0,this.a.open(b,String(a),!0),this.A=!1}catch(f){return void td(this,f)}a=c||\"\";var e=new R(this.headers);d&&Lc(d,(function(f,h){e.set(h,f)})),d=function(a){a:{for(var b=qa,c=a.length,d=\"string\"==typeof a?a.split(\"\"):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:\"string\"==typeof a?a.charAt(b):a[b]}(e.L()),c=k.FormData&&a instanceof k.FormData,!(0<=na(sd,b))||d||c||e.set(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\"),e.forEach((function(f,h){this.a.setRequestHeader(h,f)}),this),this.I&&(this.a.responseType=this.I),\"withCredentials\"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ud(this),0<this.o&&((this.D=function(a){return x&&Ra(9)&&\"number\"==typeof a.timeout&&void 0!==a.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=p(this.xa,this)):this.m=Jb(this.xa,this.o,this)),this.l=!0,this.a.send(a),this.l=!1}catch(f){td(this,f)}},g.xa=function(){void 0!==goog&&this.a&&(this.f=\"Timed out after \"+this.o+\"ms, aborting\",this.h=8,this.dispatchEvent(\"timeout\"),this.abort(8))},g.abort=function(a){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=a||7,this.dispatchEvent(\"complete\"),this.dispatchEvent(\"abort\"),xd(this))},g.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),xd(this,!0)),X.S.G.call(this)},g.za=function(){this.j||(this.A||this.l||this.g?yd(this):this.Ta())},g.Ta=function(){yd(this)},g.X=function(){try{return 2<N(this)?this.a.status:-1}catch(a){return-1}},g.$=function(){try{return this.a?this.a.responseText:\"\"}catch(a){return\"\"}},g.Na=function(a){if(this.a){var b=this.a.responseText;return a&&0==b.indexOf(a)&&(b=b.substring(a.length)),pd(b)}},g.ua=function(){return this.h},g.Qa=function(){return\"string\"==typeof this.f?this.f:String(this.f)},(g=Cd.prototype).ha=8,g.v=1,g.Ba=function(a){if(this.h)if(this.h=null,1==this.v){if(!a){this.R=Math.floor(1e5*Math.random()),a=this.R++;var d,b=new K(this,this.c,a,void 0),c=this.l;if(this.O&&(c?Da(c=Ba(c),this.O):c=this.O),null===this.i&&(b.B=c),this.da)a:{for(var e=d=0;e<this.g.length;e++){var f=this.g[e];if(void 0===(f=\"__data__\"in f.a&&\"string\"==typeof(f=f.a.__data__)?f.length:void 0))break;if(4096<(d+=f)){d=e;break a}if(4096===d||e===this.g.length-1){d=e+1;break a}}d=1e3}else d=1e3;d=Jd(this,b,d),Q(e=L(this.B),\"RID\",a),Q(e,\"CVER\",22),this.A&&Q(e,\"X-HTTP-Session-Id\",this.A),Ed(this,e),this.i&&c&&Ad(e,this.i,c),Ec(this.b,b),this.Ga&&Q(e,\"TYPE\",\"init\"),this.da?(Q(e,\"$req\",d),Q(e,\"SID\",\"null\"),b.V=!0,kc(b,e,null)):kc(b,e,d),this.v=2}}else 3==this.v&&(a?Kd(this,a):0==this.g.length||id(this.b)||Kd(this))},g.Aa=function(){if(this.j=null,Ld(this),this.V&&!(this.F||null==this.a||0>=this.N)){var a=2*this.N;this.c.info(\"BP detection timer enabled: \"+a),this.s=I(p(this.Sa,this),a)}},g.Sa=function(){this.s&&(this.s=null,this.c.info(\"BP detection timeout reached.\"),this.c.info(\"Buffering proxy detected and switch to long-polling!\"),this.H=!1,this.F=!0,Bc(this),Ld(this))},g.Ra=function(){null!=this.m&&(this.m=null,Bc(this),Cc(this),H(19))},g.Xa=function(a){a?(this.c.info(\"Successfully pinged google.com\"),H(2)):(this.c.info(\"Failed to ping google.com\"),H(1))},(g=Md.prototype).ta=function(){},g.sa=function(){},g.ra=function(){},g.qa=function(){},g.Ha=function(){},Nd.prototype.a=function(a,b){return new Y(a,b)},r(Y,D),(g=Y.prototype).addEventListener=function(a,b,c,d){Y.S.addEventListener.call(this,a,b,c,d)},g.removeEventListener=function(a,b,c,d){Y.S.removeEventListener.call(this,a,b,c,d)},g.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var a=this.a,b=this.l,c=this.b||void 0;H(0),a.fa=b,a.W=c||{},a.H=a.T,a.B=Fc(a,null,a.fa),Ic(a)},g.close=function(){Jc(this.a)},g.Pa=function(a){if(\"string\"==typeof a){var b={};b.__data__=a,Gd(this.a,b)}else this.g?((b={}).__data__=vb(a),Gd(this.a,b)):Gd(this.a,a)},g.G=function(){this.a.f=null,delete this.f,Jc(this.a),delete this.a,Y.S.G.call(this)},r(Od,dc),r(Pd,ec),r(Z,Md),Z.prototype.ta=function(){this.a.dispatchEvent(\"a\")},Z.prototype.sa=function(a){this.a.dispatchEvent(new Od(a))},Z.prototype.ra=function(a){this.a.dispatchEvent(new Pd(a))},Z.prototype.qa=function(){this.a.dispatchEvent(\"b\")},Nd.prototype.createWebChannel=Nd.prototype.a,Y.prototype.send=Y.prototype.Pa,Y.prototype.open=Y.prototype.Oa,Y.prototype.close=Y.prototype.close,Zb.NO_ERROR=0,Zb.TIMEOUT=8,Zb.HTTP_ERROR=6,$b.COMPLETE=\"complete\",cc.EventType=J,J.OPEN=\"a\",J.CLOSE=\"b\",J.ERROR=\"c\",J.MESSAGE=\"d\",D.prototype.listen=D.prototype.va,X.prototype.listenOnce=X.prototype.wa,X.prototype.getLastError=X.prototype.Qa,X.prototype.getLastErrorCode=X.prototype.ua,X.prototype.getStatus=X.prototype.X,X.prototype.getResponseJson=X.prototype.Na,X.prototype.getResponseText=X.prototype.$,X.prototype.send=X.prototype.ba;var createWebChannelTransport=function(){return new Nd},ErrorCode=Zb,EventType=$b,WebChannel=cc,XhrIo=X;__webpack_exports__.default={createWebChannelTransport:createWebChannelTransport,ErrorCode:ErrorCode,EventType:EventType,WebChannel:WebChannel,XhrIo:XhrIo}},zUnb:function(module,__webpack_exports__,__webpack_require__){\"use strict\";function isFunction(x){return\"function\"==typeof x}__webpack_require__.r(__webpack_exports__);let _enable_super_gross_mode_that_will_cause_bad_things=!1;const config_config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(value){if(value){const error=new Error;console.warn(\"DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n\"+error.stack)}else _enable_super_gross_mode_that_will_cause_bad_things&&console.log(\"RxJS: Back to a better error behavior. Thank you. <3\");_enable_super_gross_mode_that_will_cause_bad_things=value},get useDeprecatedSynchronousErrorHandling(){return _enable_super_gross_mode_that_will_cause_bad_things}};function hostReportError(err){setTimeout(()=>{throw err})}const empty={closed:!0,next(value){},error(err){if(config_config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)},complete(){}},isArray=Array.isArray||(x=>x&&\"number\"==typeof x.length);function isObject(x){return null!==x&&\"object\"==typeof x}function UnsubscriptionErrorImpl(errors){return Error.call(this),this.message=errors?`${errors.length} errors occurred during unsubscription:\\n${errors.map((err,i)=>`${i+1}) ${err.toString()}`).join(\"\\n  \")}`:\"\",this.name=\"UnsubscriptionError\",this.errors=errors,this}UnsubscriptionErrorImpl.prototype=Object.create(Error.prototype);const UnsubscriptionError=UnsubscriptionErrorImpl;let Subscription_Subscription=(()=>{class Subscription{constructor(unsubscribe){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,unsubscribe&&(this._unsubscribe=unsubscribe)}unsubscribe(){let errors,hasErrors=!1;if(this.closed)return;let{_parent:_parent,_parents:_parents,_unsubscribe:_unsubscribe,_subscriptions:_subscriptions}=this;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;let index=-1,len=_parents?_parents.length:0;for(;_parent;)_parent.remove(this),_parent=++index<len&&_parents[index]||null;if(isFunction(_unsubscribe))try{_unsubscribe.call(this)}catch(e){hasErrors=!0,errors=e instanceof UnsubscriptionError?flattenUnsubscriptionErrors(e.errors):[e]}if(isArray(_subscriptions))for(index=-1,len=_subscriptions.length;++index<len;){const sub=_subscriptions[index];if(isObject(sub))try{sub.unsubscribe()}catch(e){hasErrors=!0,errors=errors||[],e instanceof UnsubscriptionError?errors=errors.concat(flattenUnsubscriptionErrors(e.errors)):errors.push(e)}}if(hasErrors)throw new UnsubscriptionError(errors)}add(teardown){let subscription=teardown;switch(typeof teardown){case\"function\":subscription=new Subscription(teardown);case\"object\":if(subscription===this||subscription.closed||\"function\"!=typeof subscription.unsubscribe)return subscription;if(this.closed)return subscription.unsubscribe(),subscription;if(!(subscription instanceof Subscription)){const tmp=subscription;subscription=new Subscription,subscription._subscriptions=[tmp]}break;default:if(!teardown)return Subscription.EMPTY;throw new Error(\"unrecognized teardown \"+teardown+\" added to Subscription.\")}if(subscription._addParent(this)){const subscriptions=this._subscriptions;subscriptions?subscriptions.push(subscription):this._subscriptions=[subscription]}return subscription}remove(subscription){const subscriptions=this._subscriptions;if(subscriptions){const subscriptionIndex=subscriptions.indexOf(subscription);-1!==subscriptionIndex&&subscriptions.splice(subscriptionIndex,1)}}_addParent(parent){let{_parent:_parent,_parents:_parents}=this;return _parent!==parent&&(_parent?_parents?-1===_parents.indexOf(parent)&&(_parents.push(parent),!0):(this._parents=[parent],!0):(this._parent=parent,!0))}}return Subscription.EMPTY=function(empty){return empty.closed=!0,empty}(new Subscription),Subscription})();function flattenUnsubscriptionErrors(errors){return errors.reduce((errs,err)=>errs.concat(err instanceof UnsubscriptionError?err.errors:err),[])}const rxSubscriber=\"function\"==typeof Symbol?Symbol(\"rxSubscriber\"):\"@@rxSubscriber_\"+Math.random();class Subscriber_Subscriber extends Subscription_Subscription{constructor(destinationOrNext,error,complete){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=empty;break;case 1:if(!destinationOrNext){this.destination=empty;break}if(\"object\"==typeof destinationOrNext){destinationOrNext instanceof Subscriber_Subscriber?(this.syncErrorThrowable=destinationOrNext.syncErrorThrowable,this.destination=destinationOrNext,destinationOrNext.add(this)):(this.syncErrorThrowable=!0,this.destination=new Subscriber_SafeSubscriber(this,destinationOrNext));break}default:this.syncErrorThrowable=!0,this.destination=new Subscriber_SafeSubscriber(this,destinationOrNext,error,complete)}}[rxSubscriber](){return this}static create(next,error,complete){const subscriber=new Subscriber_Subscriber(next,error,complete);return subscriber.syncErrorThrowable=!1,subscriber}next(value){this.isStopped||this._next(value)}error(err){this.isStopped||(this.isStopped=!0,this._error(err))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(value){this.destination.next(value)}_error(err){this.destination.error(err),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parent:_parent,_parents:_parents}=this;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=_parent,this._parents=_parents,this}}class Subscriber_SafeSubscriber extends Subscriber_Subscriber{constructor(_parentSubscriber,observerOrNext,error,complete){let next;super(),this._parentSubscriber=_parentSubscriber;let context=this;isFunction(observerOrNext)?next=observerOrNext:observerOrNext&&(next=observerOrNext.next,error=observerOrNext.error,complete=observerOrNext.complete,observerOrNext!==empty&&(context=Object.create(observerOrNext),isFunction(context.unsubscribe)&&this.add(context.unsubscribe.bind(context)),context.unsubscribe=this.unsubscribe.bind(this))),this._context=context,this._next=next,this._error=error,this._complete=complete}next(value){if(!this.isStopped&&this._next){const{_parentSubscriber:_parentSubscriber}=this;config_config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?this.__tryOrSetError(_parentSubscriber,this._next,value)&&this.unsubscribe():this.__tryOrUnsub(this._next,value)}}error(err){if(!this.isStopped){const{_parentSubscriber:_parentSubscriber}=this,{useDeprecatedSynchronousErrorHandling:useDeprecatedSynchronousErrorHandling}=config_config;if(this._error)useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,this._error,err),this.unsubscribe()):(this.__tryOrUnsub(this._error,err),this.unsubscribe());else if(_parentSubscriber.syncErrorThrowable)useDeprecatedSynchronousErrorHandling?(_parentSubscriber.syncErrorValue=err,_parentSubscriber.syncErrorThrown=!0):hostReportError(err),this.unsubscribe();else{if(this.unsubscribe(),useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}}}complete(){if(!this.isStopped){const{_parentSubscriber:_parentSubscriber}=this;if(this._complete){const wrappedComplete=()=>this._complete.call(this._context);config_config.useDeprecatedSynchronousErrorHandling&&_parentSubscriber.syncErrorThrowable?(this.__tryOrSetError(_parentSubscriber,wrappedComplete),this.unsubscribe()):(this.__tryOrUnsub(wrappedComplete),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(fn,value){try{fn.call(this._context,value)}catch(err){if(this.unsubscribe(),config_config.useDeprecatedSynchronousErrorHandling)throw err;hostReportError(err)}}__tryOrSetError(parent,fn,value){if(!config_config.useDeprecatedSynchronousErrorHandling)throw new Error(\"bad call\");try{fn.call(this._context,value)}catch(err){return config_config.useDeprecatedSynchronousErrorHandling?(parent.syncErrorValue=err,parent.syncErrorThrown=!0,!0):(hostReportError(err),!0)}return!1}_unsubscribe(){const{_parentSubscriber:_parentSubscriber}=this;this._context=null,this._parentSubscriber=null,_parentSubscriber.unsubscribe()}}const observable_observable=\"function\"==typeof Symbol&&Symbol.observable||\"@@observable\";function noop(){}function pipe(...fns){return pipeFromArray(fns)}function pipeFromArray(fns){return fns?1===fns.length?fns[0]:function(input){return fns.reduce((prev,fn)=>fn(prev),input)}:noop}let Observable_Observable=(()=>{class Observable{constructor(subscribe){this._isScalar=!1,subscribe&&(this._subscribe=subscribe)}lift(operator){const observable=new Observable;return observable.source=this,observable.operator=operator,observable}subscribe(observerOrNext,error,complete){const{operator:operator}=this,sink=function(nextOrObserver,error,complete){if(nextOrObserver){if(nextOrObserver instanceof Subscriber_Subscriber)return nextOrObserver;if(nextOrObserver[rxSubscriber])return nextOrObserver[rxSubscriber]()}return nextOrObserver||error||complete?new Subscriber_Subscriber(nextOrObserver,error,complete):new Subscriber_Subscriber(empty)}(observerOrNext,error,complete);if(sink.add(operator?operator.call(sink,this.source):this.source||config_config.useDeprecatedSynchronousErrorHandling&&!sink.syncErrorThrowable?this._subscribe(sink):this._trySubscribe(sink)),config_config.useDeprecatedSynchronousErrorHandling&&sink.syncErrorThrowable&&(sink.syncErrorThrowable=!1,sink.syncErrorThrown))throw sink.syncErrorValue;return sink}_trySubscribe(sink){try{return this._subscribe(sink)}catch(err){config_config.useDeprecatedSynchronousErrorHandling&&(sink.syncErrorThrown=!0,sink.syncErrorValue=err),function(observer){for(;observer;){const{closed:closed,destination:destination,isStopped:isStopped}=observer;if(closed||isStopped)return!1;observer=destination&&destination instanceof Subscriber_Subscriber?destination:null}return!0}(sink)?sink.error(err):console.warn(err)}}forEach(next,promiseCtor){return new(promiseCtor=getPromiseCtor(promiseCtor))((resolve,reject)=>{let subscription;subscription=this.subscribe(value=>{try{next(value)}catch(err){reject(err),subscription&&subscription.unsubscribe()}},reject,resolve)})}_subscribe(subscriber){const{source:source}=this;return source&&source.subscribe(subscriber)}[observable_observable](){return this}pipe(...operations){return 0===operations.length?this:pipeFromArray(operations)(this)}toPromise(promiseCtor){return new(promiseCtor=getPromiseCtor(promiseCtor))((resolve,reject)=>{let value;this.subscribe(x=>value=x,err=>reject(err),()=>resolve(value))})}}return Observable.create=subscribe=>new Observable(subscribe),Observable})();function getPromiseCtor(promiseCtor){if(promiseCtor||(promiseCtor=config_config.Promise||Promise),!promiseCtor)throw new Error(\"no Promise impl found\");return promiseCtor}function ObjectUnsubscribedErrorImpl(){return Error.call(this),this.message=\"object unsubscribed\",this.name=\"ObjectUnsubscribedError\",this}ObjectUnsubscribedErrorImpl.prototype=Object.create(Error.prototype);const ObjectUnsubscribedError=ObjectUnsubscribedErrorImpl;class SubjectSubscription_SubjectSubscription extends Subscription_Subscription{constructor(subject,subscriber){super(),this.subject=subject,this.subscriber=subscriber,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const subject=this.subject,observers=subject.observers;if(this.subject=null,!observers||0===observers.length||subject.isStopped||subject.closed)return;const subscriberIndex=observers.indexOf(this.subscriber);-1!==subscriberIndex&&observers.splice(subscriberIndex,1)}}class Subject_SubjectSubscriber extends Subscriber_Subscriber{constructor(destination){super(destination),this.destination=destination}}let Subject_Subject=(()=>{class Subject extends Observable_Observable{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[rxSubscriber](){return new Subject_SubjectSubscriber(this)}lift(operator){const subject=new Subject_AnonymousSubject(this,this);return subject.operator=operator,subject}next(value){if(this.closed)throw new ObjectUnsubscribedError;if(!this.isStopped){const{observers:observers}=this,len=observers.length,copy=observers.slice();for(let i=0;i<len;i++)copy[i].next(value)}}error(err){if(this.closed)throw new ObjectUnsubscribedError;this.hasError=!0,this.thrownError=err,this.isStopped=!0;const{observers:observers}=this,len=observers.length,copy=observers.slice();for(let i=0;i<len;i++)copy[i].error(err);this.observers.length=0}complete(){if(this.closed)throw new ObjectUnsubscribedError;this.isStopped=!0;const{observers:observers}=this,len=observers.length,copy=observers.slice();for(let i=0;i<len;i++)copy[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return super._trySubscribe(subscriber)}_subscribe(subscriber){if(this.closed)throw new ObjectUnsubscribedError;return this.hasError?(subscriber.error(this.thrownError),Subscription_Subscription.EMPTY):this.isStopped?(subscriber.complete(),Subscription_Subscription.EMPTY):(this.observers.push(subscriber),new SubjectSubscription_SubjectSubscription(this,subscriber))}asObservable(){const observable=new Observable_Observable;return observable.source=this,observable}}return Subject.create=(destination,source)=>new Subject_AnonymousSubject(destination,source),Subject})();class Subject_AnonymousSubject extends Subject_Subject{constructor(destination,source){super(),this.destination=destination,this.source=source}next(value){const{destination:destination}=this;destination&&destination.next&&destination.next(value)}error(err){const{destination:destination}=this;destination&&destination.error&&this.destination.error(err)}complete(){const{destination:destination}=this;destination&&destination.complete&&this.destination.complete()}_subscribe(subscriber){const{source:source}=this;return source?this.source.subscribe(subscriber):Subscription_Subscription.EMPTY}}function isScheduler(value){return value&&\"function\"==typeof value.schedule}class InnerSubscriber_InnerSubscriber extends Subscriber_Subscriber{constructor(parent,outerValue,outerIndex){super(),this.parent=parent,this.outerValue=outerValue,this.outerIndex=outerIndex,this.index=0}_next(value){this.parent.notifyNext(this.outerValue,value,this.outerIndex,this.index++,this)}_error(error){this.parent.notifyError(error,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const subscribeToArray=array=>subscriber=>{for(let i=0,len=array.length;i<len&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.closed||subscriber.complete()},subscribeToPromise=promise=>subscriber=>(promise.then(value=>{subscriber.closed||(subscriber.next(value),subscriber.complete())},err=>subscriber.error(err)).then(null,hostReportError),subscriber);function getSymbolIterator(){return\"function\"==typeof Symbol&&Symbol.iterator?Symbol.iterator:\"@@iterator\"}const iterator_iterator=getSymbolIterator(),subscribeToIterable=iterable=>subscriber=>{const iterator=iterable[iterator_iterator]();for(;;){const item=iterator.next();if(item.done){subscriber.complete();break}if(subscriber.next(item.value),subscriber.closed)break}return\"function\"==typeof iterator.return&&subscriber.add(()=>{iterator.return&&iterator.return()}),subscriber},subscribeToObservable=obj=>subscriber=>{const obs=obj[observable_observable]();if(\"function\"!=typeof obs.subscribe)throw new TypeError(\"Provided object does not correctly implement Symbol.observable\");return obs.subscribe(subscriber)},isArrayLike=x=>x&&\"number\"==typeof x.length&&\"function\"!=typeof x;function isPromise(value){return!!value&&\"function\"!=typeof value.subscribe&&\"function\"==typeof value.then}const subscribeTo=result=>{if(result instanceof Observable_Observable)return subscriber=>result._isScalar?(subscriber.next(result.value),void subscriber.complete()):result.subscribe(subscriber);if(result&&\"function\"==typeof result[observable_observable])return subscribeToObservable(result);if(isArrayLike(result))return subscribeToArray(result);if(isPromise(result))return subscribeToPromise(result);if(result&&\"function\"==typeof result[iterator_iterator])return subscribeToIterable(result);{const value=isObject(result)?\"an invalid object\":`'${result}'`;throw new TypeError(`You provided ${value} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}};function subscribeToResult(outerSubscriber,result,outerValue,outerIndex,destination=new InnerSubscriber_InnerSubscriber(outerSubscriber,outerValue,outerIndex)){if(!destination.closed)return subscribeTo(result)(destination)}class OuterSubscriber_OuterSubscriber extends Subscriber_Subscriber{notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)}notifyError(error,innerSub){this.destination.error(error)}notifyComplete(innerSub){this.destination.complete()}}function map(project,thisArg){return function(source){if(\"function\"!=typeof project)throw new TypeError(\"argument is not a function. Are you looking for `mapTo()`?\");return source.lift(new MapOperator(project,thisArg))}}class MapOperator{constructor(project,thisArg){this.project=project,this.thisArg=thisArg}call(subscriber,source){return source.subscribe(new map_MapSubscriber(subscriber,this.project,this.thisArg))}}class map_MapSubscriber extends Subscriber_Subscriber{constructor(destination,project,thisArg){super(destination),this.project=project,this.count=0,this.thisArg=thisArg||this}_next(value){let result;try{result=this.project.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}this.destination.next(result)}}function fromArray(input,scheduler){return new Observable_Observable(scheduler?subscriber=>{const sub=new Subscription_Subscription;let i=0;return sub.add(scheduler.schedule((function(){i!==input.length?(subscriber.next(input[i++]),subscriber.closed||sub.add(this.schedule())):subscriber.complete()}))),sub}:subscribeToArray(input))}function from(input,scheduler){if(!scheduler)return input instanceof Observable_Observable?input:new Observable_Observable(subscribeTo(input));if(null!=input){if(function(input){return input&&\"function\"==typeof input[observable_observable]}(input))return function(input,scheduler){return new Observable_Observable(scheduler?subscriber=>{const sub=new Subscription_Subscription;return sub.add(scheduler.schedule(()=>{const observable=input[observable_observable]();sub.add(observable.subscribe({next(value){sub.add(scheduler.schedule(()=>subscriber.next(value)))},error(err){sub.add(scheduler.schedule(()=>subscriber.error(err)))},complete(){sub.add(scheduler.schedule(()=>subscriber.complete()))}}))})),sub}:subscribeToObservable(input))}(input,scheduler);if(isPromise(input))return function(input,scheduler){return new Observable_Observable(scheduler?subscriber=>{const sub=new Subscription_Subscription;return sub.add(scheduler.schedule(()=>input.then(value=>{sub.add(scheduler.schedule(()=>{subscriber.next(value),sub.add(scheduler.schedule(()=>subscriber.complete()))}))},err=>{sub.add(scheduler.schedule(()=>subscriber.error(err)))}))),sub}:subscribeToPromise(input))}(input,scheduler);if(isArrayLike(input))return fromArray(input,scheduler);if(function(input){return input&&\"function\"==typeof input[iterator_iterator]}(input)||\"string\"==typeof input)return function(input,scheduler){if(!input)throw new Error(\"Iterable cannot be null\");return new Observable_Observable(scheduler?subscriber=>{const sub=new Subscription_Subscription;let iterator;return sub.add(()=>{iterator&&\"function\"==typeof iterator.return&&iterator.return()}),sub.add(scheduler.schedule(()=>{iterator=input[iterator_iterator](),sub.add(scheduler.schedule((function(){if(subscriber.closed)return;let value,done;try{const result=iterator.next();value=result.value,done=result.done}catch(err){return void subscriber.error(err)}done?subscriber.complete():(subscriber.next(value),this.schedule())})))})),sub}:subscribeToIterable(input))}(input,scheduler)}throw new TypeError((null!==input&&typeof input||input)+\" is not observable\")}function mergeMap(project,resultSelector,concurrent=Number.POSITIVE_INFINITY){return\"function\"==typeof resultSelector?source=>source.pipe(mergeMap((a,i)=>from(project(a,i)).pipe(map((b,ii)=>resultSelector(a,b,i,ii))),concurrent)):(\"number\"==typeof resultSelector&&(concurrent=resultSelector),source=>source.lift(new MergeMapOperator(project,concurrent)))}class MergeMapOperator{constructor(project,concurrent=Number.POSITIVE_INFINITY){this.project=project,this.concurrent=concurrent}call(observer,source){return source.subscribe(new mergeMap_MergeMapSubscriber(observer,this.project,this.concurrent))}}class mergeMap_MergeMapSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,project,concurrent=Number.POSITIVE_INFINITY){super(destination),this.project=project,this.concurrent=concurrent,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(value){this.active<this.concurrent?this._tryNext(value):this.buffer.push(value)}_tryNext(value){let result;const index=this.index++;try{result=this.project(value,index)}catch(err){return void this.destination.error(err)}this.active++,this._innerSub(result,value,index)}_innerSub(ish,value,index){const innerSubscriber=new InnerSubscriber_InnerSubscriber(this,void 0,void 0);this.destination.add(innerSubscriber),subscribeToResult(this,ish,value,index,innerSubscriber)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)}notifyComplete(innerSub){const buffer=this.buffer;this.remove(innerSub),this.active--,buffer.length>0?this._next(buffer.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function identity(x){return x}function mergeAll(concurrent=Number.POSITIVE_INFINITY){return mergeMap(identity,concurrent)}function refCount(){return function(source){return source.lift(new RefCountOperator(source))}}class RefCountOperator{constructor(connectable){this.connectable=connectable}call(subscriber,source){const{connectable:connectable}=this;connectable._refCount++;const refCounter=new refCount_RefCountSubscriber(subscriber,connectable),subscription=source.subscribe(refCounter);return refCounter.closed||(refCounter.connection=connectable.connect()),subscription}}class refCount_RefCountSubscriber extends Subscriber_Subscriber{constructor(destination,connectable){super(destination),this.connectable=connectable}_unsubscribe(){const{connectable:connectable}=this;if(!connectable)return void(this.connection=null);this.connectable=null;const refCount=connectable._refCount;if(refCount<=0)return void(this.connection=null);if(connectable._refCount=refCount-1,refCount>1)return void(this.connection=null);const{connection:connection}=this,sharedConnection=connectable._connection;this.connection=null,!sharedConnection||connection&&sharedConnection!==connection||sharedConnection.unsubscribe()}}const connectableProto=class extends Observable_Observable{constructor(source,subjectFactory){super(),this.source=source,this.subjectFactory=subjectFactory,this._refCount=0,this._isComplete=!1}_subscribe(subscriber){return this.getSubject().subscribe(subscriber)}getSubject(){const subject=this._subject;return subject&&!subject.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let connection=this._connection;return connection||(this._isComplete=!1,connection=this._connection=new Subscription_Subscription,connection.add(this.source.subscribe(new ConnectableObservable_ConnectableSubscriber(this.getSubject(),this))),connection.closed?(this._connection=null,connection=Subscription_Subscription.EMPTY):this._connection=connection),connection}refCount(){return refCount()(this)}}.prototype,connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:connectableProto._subscribe},_isComplete:{value:connectableProto._isComplete,writable:!0},getSubject:{value:connectableProto.getSubject},connect:{value:connectableProto.connect},refCount:{value:connectableProto.refCount}};class ConnectableObservable_ConnectableSubscriber extends Subject_SubjectSubscriber{constructor(destination,connectable){super(destination),this.connectable=connectable}_error(err){this._unsubscribe(),super._error(err)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const connectable=this.connectable;if(connectable){this.connectable=null;const connection=connectable._connection;connectable._refCount=0,connectable._subject=null,connectable._connection=null,connection&&connection.unsubscribe()}}}function shareSubjectFactory(){return new Subject_Subject}function makeParamDecorator(name,props,parentClass){const metaCtor=function(props){return function(...args){if(props){const values=props(...args);for(const propName in values)this[propName]=values[propName]}}}(props);function ParamDecoratorFactory(...args){if(this instanceof ParamDecoratorFactory)return metaCtor.apply(this,args),this;const annotationInstance=new ParamDecoratorFactory(...args);return ParamDecorator.annotation=annotationInstance,ParamDecorator;function ParamDecorator(cls,unusedKey,index){const parameters=cls.hasOwnProperty(\"__parameters__\")?cls.__parameters__:Object.defineProperty(cls,\"__parameters__\",{value:[]}).__parameters__;for(;parameters.length<=index;)parameters.push(null);return(parameters[index]=parameters[index]||[]).push(annotationInstance),cls}}return parentClass&&(ParamDecoratorFactory.prototype=Object.create(parentClass.prototype)),ParamDecoratorFactory.prototype.ngMetadataName=name,ParamDecoratorFactory.annotationCls=ParamDecoratorFactory,ParamDecoratorFactory}const Inject=makeParamDecorator(\"Inject\",token=>({token:token})),Optional=makeParamDecorator(\"Optional\"),Self=makeParamDecorator(\"Self\"),SkipSelf=makeParamDecorator(\"SkipSelf\");var InjectFlags=function(InjectFlags){return InjectFlags[InjectFlags.Default=0]=\"Default\",InjectFlags[InjectFlags.Host=1]=\"Host\",InjectFlags[InjectFlags.Self=2]=\"Self\",InjectFlags[InjectFlags.SkipSelf=4]=\"SkipSelf\",InjectFlags[InjectFlags.Optional=8]=\"Optional\",InjectFlags}({});function getClosureSafeProperty(objWithPropertyToExtract){for(let key in objWithPropertyToExtract)if(objWithPropertyToExtract[key]===getClosureSafeProperty)return key;throw Error(\"Could not find renamed property on target object.\")}function defineInjectable(opts){return{token:opts.token,providedIn:opts.providedIn||null,factory:opts.factory,value:void 0}}const defineInjectable=defineInjectable;function getInjectableDef(type){const def=type[NG_INJECTABLE_DEF];return def&&def.token===type?def:null}const NG_INJECTABLE_DEF=getClosureSafeProperty({ngInjectableDef:getClosureSafeProperty});function stringify(token){if(\"string\"==typeof token)return token;if(token instanceof Array)return\"[\"+token.map(stringify).join(\", \")+\"]\";if(null==token)return\"\"+token;if(token.overriddenName)return\"\"+token.overriddenName;if(token.name)return\"\"+token.name;const res=token.toString();if(null==res)return\"\"+res;const newLineIndex=res.indexOf(\"\\n\");return-1===newLineIndex?res:res.substring(0,newLineIndex)}const __forward_ref__=getClosureSafeProperty({__forward_ref__:getClosureSafeProperty});function forwardRef(forwardRefFn){return forwardRefFn.__forward_ref__=forwardRef,forwardRefFn.toString=function(){return stringify(this())},forwardRefFn}function resolveForwardRef(type){const fn=type;return\"function\"==typeof fn&&fn.hasOwnProperty(__forward_ref__)&&fn.__forward_ref__===forwardRef?fn():type}const __globalThis=\"undefined\"!=typeof globalThis&&globalThis,__window=\"undefined\"!=typeof window&&window,__self=\"undefined\"!=typeof self&&\"undefined\"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,__global=\"undefined\"!=typeof global&&global,_global=__globalThis||__global||__window||__self;class InjectionToken{constructor(_desc,options){this._desc=_desc,this.ngMetadataName=\"InjectionToken\",this.ngInjectableDef=void 0,\"number\"==typeof options?this.__NG_ELEMENT_ID__=options:void 0!==options&&(this.ngInjectableDef=defineInjectable({token:this,providedIn:options.providedIn||\"root\",factory:options.factory}))}toString(){return\"InjectionToken \"+this._desc}}const INJECTOR=new InjectionToken(\"INJECTOR\",-1),THROW_IF_NOT_FOUND=new Object,NEW_LINE=/\\n/gm,USE_VALUE=getClosureSafeProperty({provide:String,useValue:getClosureSafeProperty});let _currentInjector=void 0;function setCurrentInjector(injector){const former=_currentInjector;return _currentInjector=injector,former}function inject(token,flags=InjectFlags.Default){return function(token,flags=InjectFlags.Default){if(void 0===_currentInjector)throw new Error(\"inject() must be called from an injection context\");return null===_currentInjector?function(token,notFoundValue,flags){const injectableDef=getInjectableDef(token);if(injectableDef&&\"root\"==injectableDef.providedIn)return void 0===injectableDef.value?injectableDef.value=injectableDef.factory():injectableDef.value;if(flags&InjectFlags.Optional)return null;throw new Error(`Injector: NOT_FOUND [${stringify(token)}]`)}(token,0,flags):_currentInjector.get(token,flags&InjectFlags.Optional?null:void 0,flags)}(token,flags)}class NullInjector{get(token,notFoundValue=THROW_IF_NOT_FOUND){if(notFoundValue===THROW_IF_NOT_FOUND){const error=new Error(`NullInjectorError: No provider for ${stringify(token)}!`);throw error.name=\"NullInjectorError\",error}return notFoundValue}}function formatError(text,obj,injectorErrorName,source=null){text=text&&\"\\n\"===text.charAt(0)&&\"\"==text.charAt(1)?text.substr(2):text;let context=stringify(obj);if(obj instanceof Array)context=obj.map(stringify).join(\" -> \");else if(\"object\"==typeof obj){let parts=[];for(let key in obj)if(obj.hasOwnProperty(key)){let value=obj[key];parts.push(key+\":\"+(\"string\"==typeof value?JSON.stringify(value):stringify(value)))}context=`{${parts.join(\", \")}}`}return`${injectorErrorName}${source?\"(\"+source+\")\":\"\"}[${context}]: ${text.replace(NEW_LINE,\"\\n  \")}`}class NgModuleRef{}class NgModuleFactory{}function addToArray(arr,index,value){index>=arr.length?arr.push(value):arr.splice(index,0,value)}function removeFromArray(arr,index){return index>=arr.length-1?arr.pop():arr.splice(index,1)[0]}const ViewEncapsulation=function(){var ViewEncapsulation={Emulated:0,Native:1,None:2,ShadowDom:3};return ViewEncapsulation[ViewEncapsulation.Emulated]=\"Emulated\",ViewEncapsulation[ViewEncapsulation.Native]=\"Native\",ViewEncapsulation[ViewEncapsulation.None]=\"None\",ViewEncapsulation[ViewEncapsulation.ShadowDom]=\"ShadowDom\",ViewEncapsulation}(),defaultScheduler=(()=>(\"undefined\"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(_global))();function getDebugContext(error){return error.ngDebugContext}function getOriginalError(error){return error.ngOriginalError}function defaultErrorLogger(console,...values){console.error(...values)}class ErrorHandler{constructor(){this._console=console}handleError(error){const originalError=this._findOriginalError(error),context=this._findContext(error),errorLogger=function(error){return error.ngErrorLogger||defaultErrorLogger}(error);errorLogger(this._console,\"ERROR\",error),originalError&&errorLogger(this._console,\"ORIGINAL ERROR\",originalError),context&&errorLogger(this._console,\"ERROR CONTEXT\",context)}_findContext(error){return error?getDebugContext(error)?getDebugContext(error):this._findContext(getOriginalError(error)):null}_findOriginalError(error){let e=getOriginalError(error);for(;e&&getOriginalError(e);)e=getOriginalError(e);return e}}let _runModeLocked=!1;function isDevMode(){return _runModeLocked=!0,!0}class InertBodyHelper{constructor(defaultDoc){if(this.defaultDoc=defaultDoc,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument(\"sanitization-inert\"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){const inertHtml=this.inertDocument.createElement(\"html\");this.inertDocument.appendChild(inertHtml),this.inertBodyElement=this.inertDocument.createElement(\"body\"),inertHtml.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload=\"this.parentNode.remove()\"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector(\"svg\")?(this.inertBodyElement.innerHTML='<svg><p><style><img src=\"</style><img src=x onerror=alert(1)//\">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector(\"svg img\")&&function(){try{return!!window.DOMParser}catch(_a){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}getInertBodyElement_XHR(html){html=\"<body><remove></remove>\"+html+\"</body>\";try{html=encodeURI(html)}catch(_a){return null}const xhr=new XMLHttpRequest;xhr.responseType=\"document\",xhr.open(\"GET\",\"data:text/html;charset=utf-8,\"+html,!1),xhr.send(void 0);const body=xhr.response.body;return body.removeChild(body.firstChild),body}getInertBodyElement_DOMParser(html){html=\"<body><remove></remove>\"+html+\"</body>\";try{const body=(new window.DOMParser).parseFromString(html,\"text/html\").body;return body.removeChild(body.firstChild),body}catch(_a){return null}}getInertBodyElement_InertDocument(html){const templateEl=this.inertDocument.createElement(\"template\");return\"content\"in templateEl?(templateEl.innerHTML=html,templateEl):(this.inertBodyElement.innerHTML=html,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)}stripCustomNsAttrs(el){const elAttrs=el.attributes;for(let i=elAttrs.length-1;0<i;i--){const attrName=elAttrs.item(i).name;\"xmlns:ns1\"!==attrName&&0!==attrName.indexOf(\"ns1:\")||el.removeAttribute(attrName)}let childNode=el.firstChild;for(;childNode;)childNode.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(childNode),childNode=childNode.nextSibling}}const SAFE_URL_PATTERN=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,DATA_URL_PATTERN=/^data:(?:image\\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\\/(?:mpeg|mp4|ogg|webm)|audio\\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\\/]+=*$/i;function _sanitizeUrl(url){return(url=String(url)).match(SAFE_URL_PATTERN)||url.match(DATA_URL_PATTERN)?url:(isDevMode()&&console.warn(`WARNING: sanitizing unsafe URL value ${url} (see http://g.co/ng/security#xss)`),\"unsafe:\"+url)}function tagSet(tags){const res={};for(const t of tags.split(\",\"))res[t]=!0;return res}function core_merge(...sets){const res={};for(const s of sets)for(const v in s)s.hasOwnProperty(v)&&(res[v]=!0);return res}const VOID_ELEMENTS=tagSet(\"area,br,col,hr,img,wbr\"),OPTIONAL_END_TAG_BLOCK_ELEMENTS=tagSet(\"colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr\"),OPTIONAL_END_TAG_INLINE_ELEMENTS=tagSet(\"rp,rt\"),OPTIONAL_END_TAG_ELEMENTS=core_merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,OPTIONAL_END_TAG_BLOCK_ELEMENTS),VALID_ELEMENTS=core_merge(VOID_ELEMENTS,core_merge(OPTIONAL_END_TAG_BLOCK_ELEMENTS,tagSet(\"address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul\")),core_merge(OPTIONAL_END_TAG_INLINE_ELEMENTS,tagSet(\"a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video\")),OPTIONAL_END_TAG_ELEMENTS),URI_ATTRS=tagSet(\"background,cite,href,itemtype,longdesc,poster,src,xlink:href\"),SRCSET_ATTRS=tagSet(\"srcset\"),VALID_ATTRS=core_merge(URI_ATTRS,SRCSET_ATTRS,tagSet(\"abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width\"),tagSet(\"aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext\")),SKIP_TRAVERSING_CONTENT_IF_INVALID_ELEMENTS=tagSet(\"script,style,template\");class SanitizingHtmlSerializer{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(el){let current=el.firstChild,traverseContent=!0;for(;current;)if(current.nodeType===Node.ELEMENT_NODE?traverseContent=this.startElement(current):current.nodeType===Node.TEXT_NODE?this.chars(current.nodeValue):this.sanitizedSomething=!0,traverseContent&&current.firstChild)current=current.firstChild;else for(;current;){current.nodeType===Node.ELEMENT_NODE&&this.endElement(current);let next=this.checkClobberedElement(current,current.nextSibling);if(next){current=next;break}current=this.checkClobberedElement(current,current.parentNode)}return this.buf.join(\"\")}startElement(element){const tagName=element.nodeName.toLowerCase();if(!VALID_ELEMENTS.hasOwnProperty(tagName))return this.sanitizedSomething=!0,!SKIP_TRAVERSING_CONTENT_IF_INVALID_ELEMENTS.hasOwnProperty(tagName);this.buf.push(\"<\"),this.buf.push(tagName);const elAttrs=element.attributes;for(let i=0;i<elAttrs.length;i++){const elAttr=elAttrs.item(i),attrName=elAttr.name,lower=attrName.toLowerCase();if(!VALID_ATTRS.hasOwnProperty(lower)){this.sanitizedSomething=!0;continue}let value=elAttr.value;URI_ATTRS[lower]&&(value=_sanitizeUrl(value)),SRCSET_ATTRS[lower]&&(srcset=value,value=(srcset=String(srcset)).split(\",\").map(srcset=>_sanitizeUrl(srcset.trim())).join(\", \")),this.buf.push(\" \",attrName,'=\"',encodeEntities(value),'\"')}var srcset;return this.buf.push(\">\"),!0}endElement(current){const tagName=current.nodeName.toLowerCase();VALID_ELEMENTS.hasOwnProperty(tagName)&&!VOID_ELEMENTS.hasOwnProperty(tagName)&&(this.buf.push(\"</\"),this.buf.push(tagName),this.buf.push(\">\"))}chars(chars){this.buf.push(encodeEntities(chars))}checkClobberedElement(node,nextNode){if(nextNode&&(node.compareDocumentPosition(nextNode)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(\"Failed to sanitize html because the element is clobbered: \"+node.outerHTML);return nextNode}}const SURROGATE_PAIR_REGEXP=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\\#-~ |!])/g;function encodeEntities(value){return value.replace(/&/g,\"&amp;\").replace(SURROGATE_PAIR_REGEXP,(function(match){return\"&#\"+(1024*(match.charCodeAt(0)-55296)+(match.charCodeAt(1)-56320)+65536)+\";\"})).replace(NON_ALPHANUMERIC_REGEXP,(function(match){return\"&#\"+match.charCodeAt(0)+\";\"})).replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\")}let inertBodyHelper;function getTemplateContent(el){return\"content\"in el&&function(el){return el.nodeType===Node.ELEMENT_NODE&&\"TEMPLATE\"===el.nodeName}(el)?el.content:null}const SecurityContext=function(){var SecurityContext={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return SecurityContext[SecurityContext.NONE]=\"NONE\",SecurityContext[SecurityContext.HTML]=\"HTML\",SecurityContext[SecurityContext.STYLE]=\"STYLE\",SecurityContext[SecurityContext.SCRIPT]=\"SCRIPT\",SecurityContext[SecurityContext.URL]=\"URL\",SecurityContext[SecurityContext.RESOURCE_URL]=\"RESOURCE_URL\",SecurityContext}();class Sanitizer{}const SAFE_STYLE_VALUE=new RegExp(\"^([-,.\\\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|Z|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\\\([-0-9.%, #a-zA-Z]+\\\\))$\",\"g\"),URL_RE=/^url\\(([^)]+)\\)$/;function normalizeDebugBindingName(name){return\"ng-reflect-\"+name.replace(/[$@]/g,\"_\").replace(CAMEL_CASE_REGEXP,(...m)=>\"-\"+m[1].toLowerCase())}const CAMEL_CASE_REGEXP=/([A-Z])/g;function normalizeDebugBindingValue(value){try{return null!=value?value.toString().slice(0,30):value}catch(e){return\"[ERROR] Exception while trying to serialize the value\"}}let ChangeDetectorRef=(()=>{class ChangeDetectorRef{}return ChangeDetectorRef.__NG_ELEMENT_ID__=()=>SWITCH_CHANGE_DETECTOR_REF_FACTORY(),ChangeDetectorRef})();const SWITCH_CHANGE_DETECTOR_REF_FACTORY=(...args)=>{},APP_ROOT=new InjectionToken(\"The presence of this token marks an injector as being the root injector.\"),INJECTOR_IMPL=function(providers,parent,name){return new StaticInjector(providers,parent,name)};let Injector=(()=>{class Injector{static create(options,parent){return Array.isArray(options)?INJECTOR_IMPL(options,parent,\"\"):INJECTOR_IMPL(options.providers,options.parent,options.name||\"\")}}return Injector.THROW_IF_NOT_FOUND=THROW_IF_NOT_FOUND,Injector.NULL=new NullInjector,Injector.ngInjectableDef=defineInjectable({token:Injector,providedIn:\"any\",factory:()=>inject(INJECTOR)}),Injector.__NG_ELEMENT_ID__=-1,Injector})();const IDENT=function(value){return value},EMPTY=[],CIRCULAR$1=IDENT,MULTI_PROVIDER_FN=function(){return Array.prototype.slice.call(arguments)};class StaticInjector{constructor(providers,parent=Injector.NULL,source=null){this.parent=parent,this.source=source;const records=this._records=new Map;records.set(Injector,{token:Injector,fn:IDENT,deps:EMPTY,value:this,useNew:!1}),records.set(INJECTOR,{token:INJECTOR,fn:IDENT,deps:EMPTY,value:this,useNew:!1}),function recursivelyProcessProviders(records,provider){if(provider)if((provider=resolveForwardRef(provider))instanceof Array)for(let i=0;i<provider.length;i++)recursivelyProcessProviders(records,provider[i]);else{if(\"function\"==typeof provider)throw staticError(\"Function/Class not supported\",provider);if(!provider||\"object\"!=typeof provider||!provider.provide)throw staticError(\"Unexpected provider\",provider);{let token=resolveForwardRef(provider.provide);const resolvedProvider=function(provider){const deps=function(provider){let deps=EMPTY;const providerDeps=provider.deps;if(providerDeps&&providerDeps.length){deps=[];for(let i=0;i<providerDeps.length;i++){let options=6,token=resolveForwardRef(providerDeps[i]);if(token instanceof Array)for(let j=0,annotations=token;j<annotations.length;j++){const annotation=annotations[j];annotation instanceof Optional||annotation==Optional?options|=1:annotation instanceof SkipSelf||annotation==SkipSelf?options&=-3:annotation instanceof Self||annotation==Self?options&=-5:token=annotation instanceof Inject?annotation.token:resolveForwardRef(annotation)}deps.push({token:token,options:options})}}else if(provider.useExisting)deps=[{token:resolveForwardRef(provider.useExisting),options:6}];else if(!providerDeps&&!(USE_VALUE in provider))throw staticError(\"'deps' required\",provider);return deps}(provider);let fn=IDENT,value=EMPTY,useNew=!1,provide=resolveForwardRef(provider.provide);if(USE_VALUE in provider)value=provider.useValue;else if(provider.useFactory)fn=provider.useFactory;else if(provider.useExisting);else if(provider.useClass)useNew=!0,fn=resolveForwardRef(provider.useClass);else{if(\"function\"!=typeof provide)throw staticError(\"StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable\",provider);useNew=!0,fn=provide}return{deps:deps,fn:fn,useNew:useNew,value:value}}(provider);if(!0===provider.multi){let multiProvider=records.get(token);if(multiProvider){if(multiProvider.fn!==MULTI_PROVIDER_FN)throw multiProviderMixError(token)}else records.set(token,multiProvider={token:provider.provide,deps:[],useNew:!1,fn:MULTI_PROVIDER_FN,value:EMPTY});token=provider,multiProvider.deps.push({token:token,options:6})}const record=records.get(token);if(record&&record.fn==MULTI_PROVIDER_FN)throw multiProviderMixError(token);records.set(token,resolvedProvider)}}}(records,providers)}get(token,notFoundValue,flags=InjectFlags.Default){const record=this._records.get(token);try{return function tryResolveToken(token,record,records,parent,notFoundValue,flags){try{return function(token,record,records,parent,notFoundValue,flags){let value;if(!record||flags&InjectFlags.SkipSelf)flags&InjectFlags.Self||(value=parent.get(token,notFoundValue,InjectFlags.Default));else{if(value=record.value,value==CIRCULAR$1)throw Error(\"Circular dependency\");if(value===EMPTY){record.value=CIRCULAR$1;let obj=void 0,useNew=record.useNew,fn=record.fn,depRecords=record.deps,deps=EMPTY;if(depRecords.length){deps=[];for(let i=0;i<depRecords.length;i++){const depRecord=depRecords[i],options=depRecord.options,childRecord=2&options?records.get(depRecord.token):void 0;deps.push(tryResolveToken(depRecord.token,childRecord,records,childRecord||4&options?parent:Injector.NULL,1&options?null:Injector.THROW_IF_NOT_FOUND,InjectFlags.Default))}}record.value=value=useNew?new fn(...deps):fn.apply(obj,deps)}}return value}(token,record,records,parent,notFoundValue,flags)}catch(e){throw e instanceof Error||(e=new Error(e)),(e.ngTempTokenPath=e.ngTempTokenPath||[]).unshift(token),record&&record.value==CIRCULAR$1&&(record.value=EMPTY),e}}(token,record,this._records,this.parent,notFoundValue,flags)}catch(e){return function(e,token,injectorErrorName,source){const tokenPath=e.ngTempTokenPath;throw token.__source&&tokenPath.unshift(token.__source),e.message=formatError(\"\\n\"+e.message,tokenPath,\"StaticInjectorError\",source),e.ngTokenPath=tokenPath,e.ngTempTokenPath=null,e}(e,token,0,this.source)}}toString(){const tokens=[];return this._records.forEach((v,token)=>tokens.push(stringify(token))),`StaticInjector[${tokens.join(\", \")}]`}}function multiProviderMixError(token){return staticError(\"Cannot mix multi providers and regular providers\",token)}function staticError(text,obj){return new Error(formatError(text,obj,\"StaticInjectorError\"))}const ANALYZE_FOR_ENTRY_COMPONENTS=new InjectionToken(\"AnalyzeForEntryComponents\");let _symbolIterator=null;function core_getSymbolIterator(){if(!_symbolIterator){const Symbol=_global.Symbol;if(Symbol&&Symbol.iterator)_symbolIterator=Symbol.iterator;else{const keys=Object.getOwnPropertyNames(Map.prototype);for(let i=0;i<keys.length;++i){const key=keys[i];\"entries\"!==key&&\"size\"!==key&&Map.prototype[key]===Map.prototype.entries&&(_symbolIterator=key)}}}return _symbolIterator}function looseIdentical(a,b){return a===b||\"number\"==typeof a&&\"number\"==typeof b&&isNaN(a)&&isNaN(b)}function devModeEqual$1(a,b){const isListLikeIterableA=isListLikeIterable$1(a),isListLikeIterableB=isListLikeIterable$1(b);if(isListLikeIterableA&&isListLikeIterableB)return function(a,b,comparator){const iterator1=a[core_getSymbolIterator()](),iterator2=b[core_getSymbolIterator()]();for(;;){const item1=iterator1.next(),item2=iterator2.next();if(item1.done&&item2.done)return!0;if(item1.done||item2.done)return!1;if(!comparator(item1.value,item2.value))return!1}}(a,b,devModeEqual$1);{const isAObject=a&&(\"object\"==typeof a||\"function\"==typeof a),isBObject=b&&(\"object\"==typeof b||\"function\"==typeof b);return!(isListLikeIterableA||!isAObject||isListLikeIterableB||!isBObject)||looseIdentical(a,b)}}class WrappedValue{constructor(value){this.wrapped=value}static wrap(value){return new WrappedValue(value)}static unwrap(value){return WrappedValue.isWrapped(value)?value.wrapped:value}static isWrapped(value){return value instanceof WrappedValue}}function isListLikeIterable$1(obj){return!!isJsObject$1(obj)&&(Array.isArray(obj)||!(obj instanceof Map)&&core_getSymbolIterator()in obj)}function isJsObject$1(o){return null!==o&&(\"function\"==typeof o||\"object\"==typeof o)}function core_isPromise(obj){return!!obj&&\"function\"==typeof obj.then}function isObservable(obj){return!!obj&&\"function\"==typeof obj.subscribe}class SimpleChange{constructor(previousValue,currentValue,firstChange){this.previousValue=previousValue,this.currentValue=currentValue,this.firstChange=firstChange}isFirstChange(){return this.firstChange}}class ComponentFactory{}function noComponentFactoryError(component){const error=Error(`No component factory found for ${stringify(component)}. Did you add it to @NgModule.entryComponents?`);return error[ERROR_COMPONENT]=component,error}const ERROR_COMPONENT=\"ngComponent\";class _NullComponentFactoryResolver{resolveComponentFactory(component){throw noComponentFactoryError(component)}}let ComponentFactoryResolver=(()=>{class ComponentFactoryResolver{}return ComponentFactoryResolver.NULL=new _NullComponentFactoryResolver,ComponentFactoryResolver})();class CodegenComponentFactoryResolver{constructor(factories,_parent,_ngModule){this._parent=_parent,this._ngModule=_ngModule,this._factories=new Map;for(let i=0;i<factories.length;i++){const factory=factories[i];this._factories.set(factory.componentType,factory)}}resolveComponentFactory(component){let factory=this._factories.get(component);if(!factory&&this._parent&&(factory=this._parent.resolveComponentFactory(component)),!factory)throw noComponentFactoryError(component);return new ComponentFactoryBoundToModule(factory,this._ngModule)}}class ComponentFactoryBoundToModule extends ComponentFactory{constructor(factory,ngModule){super(),this.factory=factory,this.ngModule=ngModule,this.selector=factory.selector,this.componentType=factory.componentType,this.ngContentSelectors=factory.ngContentSelectors,this.inputs=factory.inputs,this.outputs=factory.outputs}create(injector,projectableNodes,rootSelectorOrNode,ngModule){return this.factory.create(injector,projectableNodes,rootSelectorOrNode,ngModule||this.ngModule)}}function core_noop(...args){}let ElementRef=(()=>{class ElementRef{constructor(nativeElement){this.nativeElement=nativeElement}}return ElementRef.__NG_ELEMENT_ID__=()=>SWITCH_ELEMENT_REF_FACTORY(ElementRef),ElementRef})();const SWITCH_ELEMENT_REF_FACTORY=core_noop;class Renderer{}class RendererFactory2{}const RendererStyleFlags2=function(){var RendererStyleFlags2={Important:1,DashCase:2};return RendererStyleFlags2[RendererStyleFlags2.Important]=\"Important\",RendererStyleFlags2[RendererStyleFlags2.DashCase]=\"DashCase\",RendererStyleFlags2}();let Renderer2=(()=>{class Renderer2{}return Renderer2.__NG_ELEMENT_ID__=()=>SWITCH_RENDERER2_FACTORY(),Renderer2})();const SWITCH_RENDERER2_FACTORY=core_noop;class Version{constructor(full){this.full=full,this.major=full.split(\".\")[0],this.minor=full.split(\".\")[1],this.patch=full.split(\".\").slice(2).join(\".\")}}const VERSION=new Version(\"8.2.14\");class DefaultIterableDifferFactory{constructor(){}supports(obj){return isListLikeIterable$1(obj)}create(trackByFn){return new DefaultIterableDiffer(trackByFn)}}const trackByIdentity=(index,item)=>item;class DefaultIterableDiffer{constructor(trackByFn){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=trackByFn||trackByIdentity}forEachItem(fn){let record;for(record=this._itHead;null!==record;record=record._next)fn(record)}forEachOperation(fn){let nextIt=this._itHead,nextRemove=this._removalsHead,addRemoveOffset=0,moveOffsets=null;for(;nextIt||nextRemove;){const record=!nextRemove||nextIt&&nextIt.currentIndex<getPreviousIndex(nextRemove,addRemoveOffset,moveOffsets)?nextIt:nextRemove,adjPreviousIndex=getPreviousIndex(record,addRemoveOffset,moveOffsets),currentIndex=record.currentIndex;if(record===nextRemove)addRemoveOffset--,nextRemove=nextRemove._nextRemoved;else if(nextIt=nextIt._next,null==record.previousIndex)addRemoveOffset++;else{moveOffsets||(moveOffsets=[]);const localMovePreviousIndex=adjPreviousIndex-addRemoveOffset,localCurrentIndex=currentIndex-addRemoveOffset;if(localMovePreviousIndex!=localCurrentIndex){for(let i=0;i<localMovePreviousIndex;i++){const offset=i<moveOffsets.length?moveOffsets[i]:moveOffsets[i]=0,index=offset+i;localCurrentIndex<=index&&index<localMovePreviousIndex&&(moveOffsets[i]=offset+1)}moveOffsets[record.previousIndex]=localCurrentIndex-localMovePreviousIndex}}adjPreviousIndex!==currentIndex&&fn(record,adjPreviousIndex,currentIndex)}}forEachPreviousItem(fn){let record;for(record=this._previousItHead;null!==record;record=record._nextPrevious)fn(record)}forEachAddedItem(fn){let record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)}forEachMovedItem(fn){let record;for(record=this._movesHead;null!==record;record=record._nextMoved)fn(record)}forEachRemovedItem(fn){let record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)}forEachIdentityChange(fn){let record;for(record=this._identityChangesHead;null!==record;record=record._nextIdentityChange)fn(record)}diff(collection){if(null==collection&&(collection=[]),!isListLikeIterable$1(collection))throw new Error(`Error trying to diff '${stringify(collection)}'. Only arrays and iterables are allowed`);return this.check(collection)?this:null}onDestroy(){}check(collection){this._reset();let index,item,itemTrackBy,record=this._itHead,mayBeDirty=!1;if(Array.isArray(collection)){this.length=collection.length;for(let index=0;index<this.length;index++)item=collection[index],itemTrackBy=this._trackByFn(index,item),null!==record&&looseIdentical(record.trackById,itemTrackBy)?(mayBeDirty&&(record=this._verifyReinsertion(record,item,itemTrackBy,index)),looseIdentical(record.item,item)||this._addIdentityChange(record,item)):(record=this._mismatch(record,item,itemTrackBy,index),mayBeDirty=!0),record=record._next}else index=0,function(obj,fn){if(Array.isArray(obj))for(let i=0;i<obj.length;i++)fn(obj[i]);else{const iterator=obj[core_getSymbolIterator()]();let item;for(;!(item=iterator.next()).done;)fn(item.value)}}(collection,item=>{itemTrackBy=this._trackByFn(index,item),null!==record&&looseIdentical(record.trackById,itemTrackBy)?(mayBeDirty&&(record=this._verifyReinsertion(record,item,itemTrackBy,index)),looseIdentical(record.item,item)||this._addIdentityChange(record,item)):(record=this._mismatch(record,item,itemTrackBy,index),mayBeDirty=!0),record=record._next,index++}),this.length=index;return this._truncate(record),this.collection=collection,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let record,nextRecord;for(record=this._previousItHead=this._itHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._additionsHead;null!==record;record=record._nextAdded)record.previousIndex=record.currentIndex;for(this._additionsHead=this._additionsTail=null,record=this._movesHead;null!==record;record=nextRecord)record.previousIndex=record.currentIndex,nextRecord=record._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(record,item,itemTrackBy,index){let previousRecord;return null===record?previousRecord=this._itTail:(previousRecord=record._prev,this._remove(record)),null!==(record=null===this._linkedRecords?null:this._linkedRecords.get(itemTrackBy,index))?(looseIdentical(record.item,item)||this._addIdentityChange(record,item),this._moveAfter(record,previousRecord,index)):null!==(record=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy,null))?(looseIdentical(record.item,item)||this._addIdentityChange(record,item),this._reinsertAfter(record,previousRecord,index)):record=this._addAfter(new IterableChangeRecord_(item,itemTrackBy),previousRecord,index),record}_verifyReinsertion(record,item,itemTrackBy,index){let reinsertRecord=null===this._unlinkedRecords?null:this._unlinkedRecords.get(itemTrackBy,null);return null!==reinsertRecord?record=this._reinsertAfter(reinsertRecord,record._prev,index):record.currentIndex!=index&&(record.currentIndex=index,this._addToMoves(record,index)),record}_truncate(record){for(;null!==record;){const nextRecord=record._next;this._addToRemovals(this._unlink(record)),record=nextRecord}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(record,prevRecord,index){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(record);const prev=record._prevRemoved,next=record._nextRemoved;return null===prev?this._removalsHead=next:prev._nextRemoved=next,null===next?this._removalsTail=prev:next._prevRemoved=prev,this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record}_moveAfter(record,prevRecord,index){return this._unlink(record),this._insertAfter(record,prevRecord,index),this._addToMoves(record,index),record}_addAfter(record,prevRecord,index){return this._insertAfter(record,prevRecord,index),this._additionsTail=null===this._additionsTail?this._additionsHead=record:this._additionsTail._nextAdded=record,record}_insertAfter(record,prevRecord,index){const next=null===prevRecord?this._itHead:prevRecord._next;return record._next=next,record._prev=prevRecord,null===next?this._itTail=record:next._prev=record,null===prevRecord?this._itHead=record:prevRecord._next=record,null===this._linkedRecords&&(this._linkedRecords=new _DuplicateMap),this._linkedRecords.put(record),record.currentIndex=index,record}_remove(record){return this._addToRemovals(this._unlink(record))}_unlink(record){null!==this._linkedRecords&&this._linkedRecords.remove(record);const prev=record._prev,next=record._next;return null===prev?this._itHead=next:prev._next=next,null===next?this._itTail=prev:next._prev=prev,record}_addToMoves(record,toIndex){return record.previousIndex===toIndex||(this._movesTail=null===this._movesTail?this._movesHead=record:this._movesTail._nextMoved=record),record}_addToRemovals(record){return null===this._unlinkedRecords&&(this._unlinkedRecords=new _DuplicateMap),this._unlinkedRecords.put(record),record.currentIndex=null,record._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=record,record._prevRemoved=null):(record._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=record),record}_addIdentityChange(record,item){return record.item=item,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=record:this._identityChangesTail._nextIdentityChange=record,record}}class IterableChangeRecord_{constructor(item,trackById){this.item=item,this.trackById=trackById,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _DuplicateItemRecordList{constructor(){this._head=null,this._tail=null}add(record){null===this._head?(this._head=this._tail=record,record._nextDup=null,record._prevDup=null):(this._tail._nextDup=record,record._prevDup=this._tail,record._nextDup=null,this._tail=record)}get(trackById,atOrAfterIndex){let record;for(record=this._head;null!==record;record=record._nextDup)if((null===atOrAfterIndex||atOrAfterIndex<=record.currentIndex)&&looseIdentical(record.trackById,trackById))return record;return null}remove(record){const prev=record._prevDup,next=record._nextDup;return null===prev?this._head=next:prev._nextDup=next,null===next?this._tail=prev:next._prevDup=prev,null===this._head}}class _DuplicateMap{constructor(){this.map=new Map}put(record){const key=record.trackById;let duplicates=this.map.get(key);duplicates||(duplicates=new _DuplicateItemRecordList,this.map.set(key,duplicates)),duplicates.add(record)}get(trackById,atOrAfterIndex){const recordList=this.map.get(trackById);return recordList?recordList.get(trackById,atOrAfterIndex):null}remove(record){const key=record.trackById;return this.map.get(key).remove(record)&&this.map.delete(key),record}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function getPreviousIndex(item,addRemoveOffset,moveOffsets){const previousIndex=item.previousIndex;if(null===previousIndex)return previousIndex;let moveOffset=0;return moveOffsets&&previousIndex<moveOffsets.length&&(moveOffset=moveOffsets[previousIndex]),previousIndex+addRemoveOffset+moveOffset}class DefaultKeyValueDifferFactory{constructor(){}supports(obj){return obj instanceof Map||isJsObject$1(obj)}create(){return new DefaultKeyValueDiffer}}class DefaultKeyValueDiffer{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(fn){let record;for(record=this._mapHead;null!==record;record=record._next)fn(record)}forEachPreviousItem(fn){let record;for(record=this._previousMapHead;null!==record;record=record._nextPrevious)fn(record)}forEachChangedItem(fn){let record;for(record=this._changesHead;null!==record;record=record._nextChanged)fn(record)}forEachAddedItem(fn){let record;for(record=this._additionsHead;null!==record;record=record._nextAdded)fn(record)}forEachRemovedItem(fn){let record;for(record=this._removalsHead;null!==record;record=record._nextRemoved)fn(record)}diff(map){if(map){if(!(map instanceof Map||isJsObject$1(map)))throw new Error(`Error trying to diff '${stringify(map)}'. Only maps and objects are allowed`)}else map=new Map;return this.check(map)?this:null}onDestroy(){}check(map){this._reset();let insertBefore=this._mapHead;if(this._appendAfter=null,this._forEach(map,(value,key)=>{if(insertBefore&&insertBefore.key===key)this._maybeAddToChanges(insertBefore,value),this._appendAfter=insertBefore,insertBefore=insertBefore._next;else{const record=this._getOrCreateRecordForKey(key,value);insertBefore=this._insertBeforeOrAppend(insertBefore,record)}}),insertBefore){insertBefore._prev&&(insertBefore._prev._next=null),this._removalsHead=insertBefore;for(let record=insertBefore;null!==record;record=record._nextRemoved)record===this._mapHead&&(this._mapHead=null),this._records.delete(record.key),record._nextRemoved=record._next,record.previousValue=record.currentValue,record.currentValue=null,record._prev=null,record._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(before,record){if(before){const prev=before._prev;return record._next=before,record._prev=prev,before._prev=record,prev&&(prev._next=record),before===this._mapHead&&(this._mapHead=record),this._appendAfter=before,before}return this._appendAfter?(this._appendAfter._next=record,record._prev=this._appendAfter):this._mapHead=record,this._appendAfter=record,null}_getOrCreateRecordForKey(key,value){if(this._records.has(key)){const record=this._records.get(key);this._maybeAddToChanges(record,value);const prev=record._prev,next=record._next;return prev&&(prev._next=next),next&&(next._prev=prev),record._next=null,record._prev=null,record}const record=new KeyValueChangeRecord_(key);return this._records.set(key,record),record.currentValue=value,this._addToAdditions(record),record}_reset(){if(this.isDirty){let record;for(this._previousMapHead=this._mapHead,record=this._previousMapHead;null!==record;record=record._next)record._nextPrevious=record._next;for(record=this._changesHead;null!==record;record=record._nextChanged)record.previousValue=record.currentValue;for(record=this._additionsHead;null!=record;record=record._nextAdded)record.previousValue=record.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(record,newValue){looseIdentical(newValue,record.currentValue)||(record.previousValue=record.currentValue,record.currentValue=newValue,this._addToChanges(record))}_addToAdditions(record){null===this._additionsHead?this._additionsHead=this._additionsTail=record:(this._additionsTail._nextAdded=record,this._additionsTail=record)}_addToChanges(record){null===this._changesHead?this._changesHead=this._changesTail=record:(this._changesTail._nextChanged=record,this._changesTail=record)}_forEach(obj,fn){obj instanceof Map?obj.forEach(fn):Object.keys(obj).forEach(k=>fn(obj[k],k))}}class KeyValueChangeRecord_{constructor(key){this.key=key,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let IterableDiffers=(()=>{class IterableDiffers{constructor(factories){this.factories=factories}static create(factories,parent){if(null!=parent){const copied=parent.factories.slice();factories=factories.concat(copied)}return new IterableDiffers(factories)}static extend(factories){return{provide:IterableDiffers,useFactory:parent=>{if(!parent)throw new Error(\"Cannot extend IterableDiffers without a parent injector\");return IterableDiffers.create(factories,parent)},deps:[[IterableDiffers,new SkipSelf,new Optional]]}}find(iterable){const factory=this.factories.find(f=>f.supports(iterable));if(null!=factory)return factory;throw new Error(`Cannot find a differ supporting object '${iterable}' of type '${type=iterable,type.name||typeof type}'`);var type}}return IterableDiffers.ngInjectableDef=defineInjectable({token:IterableDiffers,providedIn:\"root\",factory:()=>new IterableDiffers([new DefaultIterableDifferFactory])}),IterableDiffers})(),KeyValueDiffers=(()=>{class KeyValueDiffers{constructor(factories){this.factories=factories}static create(factories,parent){if(parent){const copied=parent.factories.slice();factories=factories.concat(copied)}return new KeyValueDiffers(factories)}static extend(factories){return{provide:KeyValueDiffers,useFactory:parent=>{if(!parent)throw new Error(\"Cannot extend KeyValueDiffers without a parent injector\");return KeyValueDiffers.create(factories,parent)},deps:[[KeyValueDiffers,new SkipSelf,new Optional]]}}find(kv){const factory=this.factories.find(f=>f.supports(kv));if(factory)return factory;throw new Error(`Cannot find a differ supporting object '${kv}'`)}}return KeyValueDiffers.ngInjectableDef=defineInjectable({token:KeyValueDiffers,providedIn:\"root\",factory:()=>new KeyValueDiffers([new DefaultKeyValueDifferFactory])}),KeyValueDiffers})();const keyValDiff=[new DefaultKeyValueDifferFactory],defaultIterableDiffers=new IterableDiffers([new DefaultIterableDifferFactory]),defaultKeyValueDiffers=new KeyValueDiffers(keyValDiff);let TemplateRef=(()=>{class TemplateRef{}return TemplateRef.__NG_ELEMENT_ID__=()=>SWITCH_TEMPLATE_REF_FACTORY(TemplateRef,ElementRef),TemplateRef})();const SWITCH_TEMPLATE_REF_FACTORY=core_noop;let ViewContainerRef=(()=>{class ViewContainerRef{}return ViewContainerRef.__NG_ELEMENT_ID__=()=>SWITCH_VIEW_CONTAINER_REF_FACTORY(ViewContainerRef,ElementRef),ViewContainerRef})();const SWITCH_VIEW_CONTAINER_REF_FACTORY=core_noop;function expressionChangedAfterItHasBeenCheckedError(context,oldValue,currValue,isFirstCheck){let msg=`ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '${oldValue}'. Current value: '${currValue}'.`;return isFirstCheck&&(msg+=\" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?\"),function(msg,context){const err=new Error(msg);return _addDebugContext(err,context),err}(msg,context)}function _addDebugContext(err,context){err.ngDebugContext=context,err.ngErrorLogger=context.logError.bind(context)}function viewDestroyedError(action){return new Error(\"ViewDestroyedError: Attempt to use a destroyed view: \"+action)}function shiftInitState(view,priorInitState,newInitState){const state=view.state,initState=1792&state;return initState===priorInitState?(view.state=-1793&state|newInitState,view.initIndex=-1,!0):initState===newInitState}function shouldCallLifecycleInitHook(view,initState,index){return(1792&view.state)===initState&&view.initIndex<=index&&(view.initIndex=index+1,!0)}function asTextData(view,index){return view.nodes[index]}function asElementData(view,index){return view.nodes[index]}function asProviderData(view,index){return view.nodes[index]}function asPureExpressionData(view,index){return view.nodes[index]}function asQueryList(view,index){return view.nodes[index]}const Services={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},NOOP=()=>{},_tokenKeyCache=new Map;function tokenKey(token){let key=_tokenKeyCache.get(token);return key||(key=stringify(token)+\"_\"+_tokenKeyCache.size,_tokenKeyCache.set(token,key)),key}function unwrapValue(view,nodeIdx,bindingIdx,value){if(WrappedValue.isWrapped(value)){value=WrappedValue.unwrap(value);const globalBindingIdx=view.def.nodes[nodeIdx].bindingIndex+bindingIdx,oldValue=WrappedValue.unwrap(view.oldValues[globalBindingIdx]);view.oldValues[globalBindingIdx]=new WrappedValue(oldValue)}return value}function createRendererType2(values){return{id:\"$$undefined\",styles:values.styles,encapsulation:values.encapsulation,data:values.data}}let _renderCompCount$1=0;function checkBinding(view,def,bindingIdx,value){return!(!(2&view.state)&&looseIdentical(view.oldValues[def.bindingIndex+bindingIdx],value))}function checkAndUpdateBinding(view,def,bindingIdx,value){return!!checkBinding(view,def,bindingIdx,value)&&(view.oldValues[def.bindingIndex+bindingIdx]=value,!0)}function checkBindingNoChanges(view,def,bindingIdx,value){const oldValue=view.oldValues[def.bindingIndex+bindingIdx];if(1&view.state||!devModeEqual$1(oldValue,value)){const bindingName=def.bindings[bindingIdx].name;throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view,def.nodeIndex),`${bindingName}: ${oldValue}`,`${bindingName}: ${value}`,0!=(1&view.state))}}function markParentViewsForCheck(view){let currView=view;for(;currView;)2&currView.def.flags&&(currView.state|=8),currView=currView.viewContainerParent||currView.parent}function markParentViewsForCheckProjectedViews(view,endView){let currView=view;for(;currView&&currView!==endView;)currView.state|=64,currView=currView.viewContainerParent||currView.parent}function dispatchEvent(view,nodeIndex,eventName,event){try{return markParentViewsForCheck(33554432&view.def.nodes[nodeIndex].flags?asElementData(view,nodeIndex).componentView:view),Services.handleEvent(view,nodeIndex,eventName,event)}catch(e){view.root.errorHandler.handleError(e)}}function declaredViewContainer(view){return view.parent?asElementData(view.parent,view.parentNodeDef.nodeIndex):null}function viewParentEl(view){return view.parent?view.parentNodeDef.parent:null}function renderNode(view,def){switch(201347067&def.flags){case 1:return asElementData(view,def.nodeIndex).renderElement;case 2:return asTextData(view,def.nodeIndex).renderText}}function elementEventFullName(target,name){return target?`${target}:${name}`:name}function isComponentView(view){return!!view.parent&&!!(32768&view.parentNodeDef.flags)}function isEmbeddedView(view){return!(!view.parent||32768&view.parentNodeDef.flags)}function splitMatchedQueriesDsl(matchedQueriesDsl){const matchedQueries={};let matchedQueryIds=0;const references={};return matchedQueriesDsl&&matchedQueriesDsl.forEach(([queryId,valueType])=>{\"number\"==typeof queryId?(matchedQueries[queryId]=valueType,matchedQueryIds|=function(queryId){return 1<<queryId%32}(queryId)):references[queryId]=valueType}),{matchedQueries:matchedQueries,references:references,matchedQueryIds:matchedQueryIds}}function splitDepsDsl(deps,sourceName){return deps.map(value=>{let token,flags;return Array.isArray(value)?[flags,token]=value:(flags=0,token=value),token&&(\"function\"==typeof token||\"object\"==typeof token)&&sourceName&&Object.defineProperty(token,\"__source\",{value:sourceName,configurable:!0}),{flags:flags,token:token,tokenKey:tokenKey(token)}})}function getParentRenderElement(view,renderHost,def){let renderParent=def.renderParent;return renderParent?0==(1&renderParent.flags)||0==(33554432&renderParent.flags)||renderParent.element.componentRendererType&&renderParent.element.componentRendererType.encapsulation===ViewEncapsulation.Native?asElementData(view,def.renderParent.nodeIndex).renderElement:void 0:renderHost}const DEFINITION_CACHE=new WeakMap;function resolveDefinition(factory){let value=DEFINITION_CACHE.get(factory);return value||(value=factory(()=>NOOP),value.factory=factory,DEFINITION_CACHE.set(factory,value)),value}function visitRootRenderNodes(view,action,parentNode,nextSibling,target){3===action&&(parentNode=view.renderer.parentNode(renderNode(view,view.def.lastRenderRootNode))),visitSiblingRenderNodes(view,action,0,view.def.nodes.length-1,parentNode,nextSibling,target)}function visitSiblingRenderNodes(view,action,startIndex,endIndex,parentNode,nextSibling,target){for(let i=startIndex;i<=endIndex;i++){const nodeDef=view.def.nodes[i];11&nodeDef.flags&&visitRenderNode(view,nodeDef,action,parentNode,nextSibling,target),i+=nodeDef.childCount}}function visitProjectedRenderNodes(view,ngContentIndex,action,parentNode,nextSibling,target){let compView=view;for(;compView&&!isComponentView(compView);)compView=compView.parent;const hostView=compView.parent,hostElDef=viewParentEl(compView),endIndex=hostElDef.nodeIndex+hostElDef.childCount;for(let i=hostElDef.nodeIndex+1;i<=endIndex;i++){const nodeDef=hostView.def.nodes[i];nodeDef.ngContentIndex===ngContentIndex&&visitRenderNode(hostView,nodeDef,action,parentNode,nextSibling,target),i+=nodeDef.childCount}if(!hostView.parent){const projectedNodes=view.root.projectableNodes[ngContentIndex];if(projectedNodes)for(let i=0;i<projectedNodes.length;i++)execRenderNodeAction(view,projectedNodes[i],action,parentNode,nextSibling,target)}}function visitRenderNode(view,nodeDef,action,parentNode,nextSibling,target){if(8&nodeDef.flags)visitProjectedRenderNodes(view,nodeDef.ngContent.index,action,parentNode,nextSibling,target);else{const rn=renderNode(view,nodeDef);if(3===action&&33554432&nodeDef.flags&&48&nodeDef.bindingFlags?(16&nodeDef.bindingFlags&&execRenderNodeAction(view,rn,action,parentNode,nextSibling,target),32&nodeDef.bindingFlags&&execRenderNodeAction(asElementData(view,nodeDef.nodeIndex).componentView,rn,action,parentNode,nextSibling,target)):execRenderNodeAction(view,rn,action,parentNode,nextSibling,target),16777216&nodeDef.flags){const embeddedViews=asElementData(view,nodeDef.nodeIndex).viewContainer._embeddedViews;for(let k=0;k<embeddedViews.length;k++)visitRootRenderNodes(embeddedViews[k],action,parentNode,nextSibling,target)}1&nodeDef.flags&&!nodeDef.element.name&&visitSiblingRenderNodes(view,action,nodeDef.nodeIndex+1,nodeDef.nodeIndex+nodeDef.childCount,parentNode,nextSibling,target)}}function execRenderNodeAction(view,renderNode,action,parentNode,nextSibling,target){const renderer=view.renderer;switch(action){case 1:renderer.appendChild(parentNode,renderNode);break;case 2:renderer.insertBefore(parentNode,renderNode,nextSibling);break;case 3:renderer.removeChild(parentNode,renderNode);break;case 0:target.push(renderNode)}}const NS_PREFIX_RE=/^:([^:]+):(.+)$/;function splitNamespace(name){if(\":\"===name[0]){const match=name.match(NS_PREFIX_RE);return[match[1],match[2]]}return[\"\",name]}function calcBindingFlags(bindings){let flags=0;for(let i=0;i<bindings.length;i++)flags|=bindings[i].flags;return flags}function inlineInterpolate(valueCount,c0,a1,c1,a2,c2,a3,c3,a4,c4,a5,c5,a6,c6,a7,c7,a8,c8,a9,c9){switch(valueCount){case 1:return c0+_toStringWithNull(a1)+c1;case 2:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2;case 3:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3;case 4:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4;case 5:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5;case 6:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6;case 7:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6+_toStringWithNull(a7)+c7;case 8:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6+_toStringWithNull(a7)+c7+_toStringWithNull(a8)+c8;case 9:return c0+_toStringWithNull(a1)+c1+_toStringWithNull(a2)+c2+_toStringWithNull(a3)+c3+_toStringWithNull(a4)+c4+_toStringWithNull(a5)+c5+_toStringWithNull(a6)+c6+_toStringWithNull(a7)+c7+_toStringWithNull(a8)+c8+_toStringWithNull(a9)+c9;default:throw new Error(\"Does not support more than 9 expressions\")}}function _toStringWithNull(v){return null!=v?v.toString():\"\"}const UNDEFINED_VALUE=new Object,InjectorRefTokenKey=tokenKey(Injector),INJECTORRefTokenKey=tokenKey(INJECTOR),NgModuleRefTokenKey=tokenKey(NgModuleRef);function moduleProvideDef(flags,token,value,deps){return value=resolveForwardRef(value),{index:-1,deps:splitDepsDsl(deps,stringify(token)),flags:flags,token:token,value:value}}function resolveNgModuleDep(data,depDef,notFoundValue=Injector.THROW_IF_NOT_FOUND){const former=setCurrentInjector(data);try{if(8&depDef.flags)return depDef.token;if(2&depDef.flags&&(notFoundValue=null),1&depDef.flags)return data._parent.get(depDef.token,notFoundValue);const tokenKey=depDef.tokenKey;switch(tokenKey){case InjectorRefTokenKey:case INJECTORRefTokenKey:case NgModuleRefTokenKey:return data}const providerDef=data._def.providersByKey[tokenKey];let injectableDef;if(providerDef){let providerInstance=data._providers[providerDef.index];return void 0===providerInstance&&(providerInstance=data._providers[providerDef.index]=_createProviderInstance(data,providerDef)),providerInstance===UNDEFINED_VALUE?void 0:providerInstance}if((injectableDef=getInjectableDef(depDef.token))&&(ngModule=data,null!=(def=injectableDef).providedIn&&(function(ngModule,scope){return ngModule._def.modules.indexOf(scope)>-1}(ngModule,def.providedIn)||\"root\"===def.providedIn&&ngModule._def.isRoot))){const index=data._providers.length;return data._def.providers[index]=data._def.providersByKey[depDef.tokenKey]={flags:5120,value:injectableDef.factory,deps:[],index:index,token:depDef.token},data._providers[index]=UNDEFINED_VALUE,data._providers[index]=_createProviderInstance(data,data._def.providersByKey[depDef.tokenKey])}return 4&depDef.flags?notFoundValue:data._parent.get(depDef.token,notFoundValue)}finally{setCurrentInjector(former)}var ngModule,def}function _createProviderInstance(ngModule,providerDef){let injectable;switch(201347067&providerDef.flags){case 512:injectable=function(ngModule,ctor,deps){const len=deps.length;switch(len){case 0:return new ctor;case 1:return new ctor(resolveNgModuleDep(ngModule,deps[0]));case 2:return new ctor(resolveNgModuleDep(ngModule,deps[0]),resolveNgModuleDep(ngModule,deps[1]));case 3:return new ctor(resolveNgModuleDep(ngModule,deps[0]),resolveNgModuleDep(ngModule,deps[1]),resolveNgModuleDep(ngModule,deps[2]));default:const depValues=new Array(len);for(let i=0;i<len;i++)depValues[i]=resolveNgModuleDep(ngModule,deps[i]);return new ctor(...depValues)}}(ngModule,providerDef.value,providerDef.deps);break;case 1024:injectable=function(ngModule,factory,deps){const len=deps.length;switch(len){case 0:return factory();case 1:return factory(resolveNgModuleDep(ngModule,deps[0]));case 2:return factory(resolveNgModuleDep(ngModule,deps[0]),resolveNgModuleDep(ngModule,deps[1]));case 3:return factory(resolveNgModuleDep(ngModule,deps[0]),resolveNgModuleDep(ngModule,deps[1]),resolveNgModuleDep(ngModule,deps[2]));default:const depValues=Array(len);for(let i=0;i<len;i++)depValues[i]=resolveNgModuleDep(ngModule,deps[i]);return factory(...depValues)}}(ngModule,providerDef.value,providerDef.deps);break;case 2048:injectable=resolveNgModuleDep(ngModule,providerDef.deps[0]);break;case 256:injectable=providerDef.value}return injectable===UNDEFINED_VALUE||null===injectable||\"object\"!=typeof injectable||131072&providerDef.flags||\"function\"!=typeof injectable.ngOnDestroy||(providerDef.flags|=131072),void 0===injectable?UNDEFINED_VALUE:injectable}function detachEmbeddedView(elementData,viewIndex){const embeddedViews=elementData.viewContainer._embeddedViews;if((null==viewIndex||viewIndex>=embeddedViews.length)&&(viewIndex=embeddedViews.length-1),viewIndex<0)return null;const view=embeddedViews[viewIndex];return view.viewContainerParent=null,removeFromArray(embeddedViews,viewIndex),Services.dirtyParentQueries(view),renderDetachView$1(view),view}function renderAttachEmbeddedView(elementData,prevView,view){const prevRenderNode=prevView?renderNode(prevView,prevView.def.lastRenderRootNode):elementData.renderElement,parentNode=view.renderer.parentNode(prevRenderNode),nextSibling=view.renderer.nextSibling(prevRenderNode);visitRootRenderNodes(view,2,parentNode,nextSibling,void 0)}function renderDetachView$1(view){visitRootRenderNodes(view,3,null,null,void 0)}const EMPTY_CONTEXT=new Object;function createComponentFactory(selector,componentType,viewDefFactory,inputs,outputs,ngContentSelectors){return new ComponentFactory_(selector,componentType,viewDefFactory,inputs,outputs,ngContentSelectors)}class ComponentFactory_ extends ComponentFactory{constructor(selector,componentType,viewDefFactory,_inputs,_outputs,ngContentSelectors){super(),this.selector=selector,this.componentType=componentType,this._inputs=_inputs,this._outputs=_outputs,this.ngContentSelectors=ngContentSelectors,this.viewDefFactory=viewDefFactory}get inputs(){const inputsArr=[],inputs=this._inputs;for(let propName in inputs)inputsArr.push({propName:propName,templateName:inputs[propName]});return inputsArr}get outputs(){const outputsArr=[];for(let propName in this._outputs)outputsArr.push({propName:propName,templateName:this._outputs[propName]});return outputsArr}create(injector,projectableNodes,rootSelectorOrNode,ngModule){if(!ngModule)throw new Error(\"ngModule should be provided\");const viewDef=resolveDefinition(this.viewDefFactory),componentNodeIndex=viewDef.nodes[0].element.componentProvider.nodeIndex,view=Services.createRootView(injector,projectableNodes||[],rootSelectorOrNode,viewDef,ngModule,EMPTY_CONTEXT),component=asProviderData(view,componentNodeIndex).instance;return rootSelectorOrNode&&view.renderer.setAttribute(asElementData(view,0).renderElement,\"ng-version\",VERSION.full),new ComponentRef_(view,new ViewRef_(view),component)}}class ComponentRef_ extends class{}{constructor(_view,_viewRef,_component){super(),this._view=_view,this._viewRef=_viewRef,this._component=_component,this._elDef=this._view.def.nodes[0],this.hostView=_viewRef,this.changeDetectorRef=_viewRef,this.instance=_component}get location(){return new ElementRef(asElementData(this._view,this._elDef.nodeIndex).renderElement)}get injector(){return new Injector_(this._view,this._elDef)}get componentType(){return this._component.constructor}destroy(){this._viewRef.destroy()}onDestroy(callback){this._viewRef.onDestroy(callback)}}function createViewContainerData(view,elDef,elData){return new ViewContainerRef_(view,elDef,elData)}class ViewContainerRef_{constructor(_view,_elDef,_data){this._view=_view,this._elDef=_elDef,this._data=_data,this._embeddedViews=[]}get element(){return new ElementRef(this._data.renderElement)}get injector(){return new Injector_(this._view,this._elDef)}get parentInjector(){let view=this._view,elDef=this._elDef.parent;for(;!elDef&&view;)elDef=viewParentEl(view),view=view.parent;return view?new Injector_(view,elDef):new Injector_(this._view,null)}clear(){for(let i=this._embeddedViews.length-1;i>=0;i--){const view=detachEmbeddedView(this._data,i);Services.destroyView(view)}}get(index){const view=this._embeddedViews[index];if(view){const ref=new ViewRef_(view);return ref.attachToViewContainerRef(this),ref}return null}get length(){return this._embeddedViews.length}createEmbeddedView(templateRef,context,index){const viewRef=templateRef.createEmbeddedView(context||{});return this.insert(viewRef,index),viewRef}createComponent(componentFactory,index,injector,projectableNodes,ngModuleRef){const contextInjector=injector||this.parentInjector;ngModuleRef||componentFactory instanceof ComponentFactoryBoundToModule||(ngModuleRef=contextInjector.get(NgModuleRef));const componentRef=componentFactory.create(contextInjector,projectableNodes,void 0,ngModuleRef);return this.insert(componentRef.hostView,index),componentRef}insert(viewRef,index){if(viewRef.destroyed)throw new Error(\"Cannot insert a destroyed View in a ViewContainer!\");const viewRef_=viewRef;return function(parentView,elementData,viewIndex,view){let embeddedViews=elementData.viewContainer._embeddedViews;null==viewIndex&&(viewIndex=embeddedViews.length),view.viewContainerParent=parentView,addToArray(embeddedViews,viewIndex,view),function(vcElementData,view){const dvcElementData=declaredViewContainer(view);if(!dvcElementData||dvcElementData===vcElementData||16&view.state)return;view.state|=16;let projectedViews=dvcElementData.template._projectedViews;projectedViews||(projectedViews=dvcElementData.template._projectedViews=[]),projectedViews.push(view),function(viewDef,nodeDef){if(4&nodeDef.flags)return;viewDef.nodeFlags|=4,nodeDef.flags|=4;let parentNodeDef=nodeDef.parent;for(;parentNodeDef;)parentNodeDef.childFlags|=4,parentNodeDef=parentNodeDef.parent}(view.parent.def,view.parentNodeDef)}(elementData,view),Services.dirtyParentQueries(view),renderAttachEmbeddedView(elementData,viewIndex>0?embeddedViews[viewIndex-1]:null,view)}(this._view,this._data,index,viewRef_._view),viewRef_.attachToViewContainerRef(this),viewRef}move(viewRef,currentIndex){if(viewRef.destroyed)throw new Error(\"Cannot move a destroyed View in a ViewContainer!\");const previousIndex=this._embeddedViews.indexOf(viewRef._view);return function(elementData,oldViewIndex,newViewIndex){const embeddedViews=elementData.viewContainer._embeddedViews,view=embeddedViews[oldViewIndex];removeFromArray(embeddedViews,oldViewIndex),null==newViewIndex&&(newViewIndex=embeddedViews.length),addToArray(embeddedViews,newViewIndex,view),Services.dirtyParentQueries(view),renderDetachView$1(view),renderAttachEmbeddedView(elementData,newViewIndex>0?embeddedViews[newViewIndex-1]:null,view)}(this._data,previousIndex,currentIndex),viewRef}indexOf(viewRef){return this._embeddedViews.indexOf(viewRef._view)}remove(index){const viewData=detachEmbeddedView(this._data,index);viewData&&Services.destroyView(viewData)}detach(index){const view=detachEmbeddedView(this._data,index);return view?new ViewRef_(view):null}}function createChangeDetectorRef(view){return new ViewRef_(view)}class ViewRef_{constructor(_view){this._view=_view,this._viewContainerRef=null,this._appRef=null}get rootNodes(){return function(view){const renderNodes=[];return visitRootRenderNodes(view,0,void 0,void 0,renderNodes),renderNodes}(this._view)}get context(){return this._view.context}get destroyed(){return 0!=(128&this._view.state)}markForCheck(){markParentViewsForCheck(this._view)}detach(){this._view.state&=-5}detectChanges(){const fs=this._view.root.rendererFactory;fs.begin&&fs.begin();try{Services.checkAndUpdateView(this._view)}finally{fs.end&&fs.end()}}checkNoChanges(){Services.checkNoChangesView(this._view)}reattach(){this._view.state|=4}onDestroy(callback){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(callback)}destroy(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),Services.destroyView(this._view)}detachFromAppRef(){this._appRef=null,renderDetachView$1(this._view),Services.dirtyParentQueries(this._view)}attachToAppRef(appRef){if(this._viewContainerRef)throw new Error(\"This view is already attached to a ViewContainer!\");this._appRef=appRef}attachToViewContainerRef(vcRef){if(this._appRef)throw new Error(\"This view is already attached directly to the ApplicationRef!\");this._viewContainerRef=vcRef}}function createTemplateData(view,def){return new TemplateRef_(view,def)}class TemplateRef_ extends TemplateRef{constructor(_parentView,_def){super(),this._parentView=_parentView,this._def=_def}createEmbeddedView(context){return new ViewRef_(Services.createEmbeddedView(this._parentView,this._def,this._def.element.template,context))}get elementRef(){return new ElementRef(asElementData(this._parentView,this._def.nodeIndex).renderElement)}}function createInjector$1(view,elDef){return new Injector_(view,elDef)}class Injector_{constructor(view,elDef){this.view=view,this.elDef=elDef}get(token,notFoundValue=Injector.THROW_IF_NOT_FOUND){return Services.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:token,tokenKey:tokenKey(token)},notFoundValue)}}function nodeValue(view,index){const def=view.def.nodes[index];if(1&def.flags){const elData=asElementData(view,def.nodeIndex);return def.element.template?elData.template:elData.renderElement}if(2&def.flags)return asTextData(view,def.nodeIndex).renderText;if(20240&def.flags)return asProviderData(view,def.nodeIndex).instance;throw new Error(\"Illegal state: read nodeValue for node index \"+index)}function createRendererV1(view){return new RendererAdapter(view.renderer)}class RendererAdapter{constructor(delegate){this.delegate=delegate}selectRootElement(selectorOrNode){return this.delegate.selectRootElement(selectorOrNode)}createElement(parent,namespaceAndName){const[ns,name]=splitNamespace(namespaceAndName),el=this.delegate.createElement(name,ns);return parent&&this.delegate.appendChild(parent,el),el}createViewRoot(hostElement){return hostElement}createTemplateAnchor(parentElement){const comment=this.delegate.createComment(\"\");return parentElement&&this.delegate.appendChild(parentElement,comment),comment}createText(parentElement,value){const node=this.delegate.createText(value);return parentElement&&this.delegate.appendChild(parentElement,node),node}projectNodes(parentElement,nodes){for(let i=0;i<nodes.length;i++)this.delegate.appendChild(parentElement,nodes[i])}attachViewAfter(node,viewRootNodes){const parentElement=this.delegate.parentNode(node),nextSibling=this.delegate.nextSibling(node);for(let i=0;i<viewRootNodes.length;i++)this.delegate.insertBefore(parentElement,viewRootNodes[i],nextSibling)}detachView(viewRootNodes){for(let i=0;i<viewRootNodes.length;i++){const node=viewRootNodes[i],parentElement=this.delegate.parentNode(node);this.delegate.removeChild(parentElement,node)}}destroyView(hostElement,viewAllNodes){for(let i=0;i<viewAllNodes.length;i++)this.delegate.destroyNode(viewAllNodes[i])}listen(renderElement,name,callback){return this.delegate.listen(renderElement,name,callback)}listenGlobal(target,name,callback){return this.delegate.listen(target,name,callback)}setElementProperty(renderElement,propertyName,propertyValue){this.delegate.setProperty(renderElement,propertyName,propertyValue)}setElementAttribute(renderElement,namespaceAndName,attributeValue){const[ns,name]=splitNamespace(namespaceAndName);null!=attributeValue?this.delegate.setAttribute(renderElement,name,attributeValue,ns):this.delegate.removeAttribute(renderElement,name,ns)}setBindingDebugInfo(renderElement,propertyName,propertyValue){}setElementClass(renderElement,className,isAdd){isAdd?this.delegate.addClass(renderElement,className):this.delegate.removeClass(renderElement,className)}setElementStyle(renderElement,styleName,styleValue){null!=styleValue?this.delegate.setStyle(renderElement,styleName,styleValue):this.delegate.removeStyle(renderElement,styleName)}invokeElementMethod(renderElement,methodName,args){renderElement[methodName].apply(renderElement,args)}setText(renderNode,text){this.delegate.setValue(renderNode,text)}animate(){throw new Error(\"Renderer.animate is no longer supported!\")}}function createNgModuleRef(moduleType,parent,bootstrapComponents,def){return new NgModuleRef_(moduleType,parent,bootstrapComponents,def)}class NgModuleRef_{constructor(_moduleType,_parent,_bootstrapComponents,_def){this._moduleType=_moduleType,this._parent=_parent,this._bootstrapComponents=_bootstrapComponents,this._def=_def,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(data){const def=data._def,providers=data._providers=new Array(def.providers.length);for(let i=0;i<def.providers.length;i++){const provDef=def.providers[i];4096&provDef.flags||void 0===providers[i]&&(providers[i]=_createProviderInstance(data,provDef))}}(this)}get(token,notFoundValue=Injector.THROW_IF_NOT_FOUND,injectFlags=InjectFlags.Default){let flags=0;return injectFlags&InjectFlags.SkipSelf?flags|=1:injectFlags&InjectFlags.Self&&(flags|=4),resolveNgModuleDep(this,{token:token,tokenKey:tokenKey(token),flags:flags},notFoundValue)}get instance(){return this.get(this._moduleType)}get componentFactoryResolver(){return this.get(ComponentFactoryResolver)}destroy(){if(this._destroyed)throw new Error(`The ng module ${stringify(this.instance.constructor)} has already been destroyed.`);this._destroyed=!0,function(ngModule,lifecycles){const def=ngModule._def,destroyed=new Set;for(let i=0;i<def.providers.length;i++)if(131072&def.providers[i].flags){const instance=ngModule._providers[i];if(instance&&instance!==UNDEFINED_VALUE){const onDestroy=instance.ngOnDestroy;\"function\"!=typeof onDestroy||destroyed.has(instance)||(onDestroy.apply(instance),destroyed.add(instance))}}}(this),this._destroyListeners.forEach(listener=>listener())}onDestroy(callback){this._destroyListeners.push(callback)}}const RendererV1TokenKey=tokenKey(Renderer),Renderer2TokenKey=tokenKey(Renderer2),ElementRefTokenKey=tokenKey(ElementRef),ViewContainerRefTokenKey=tokenKey(ViewContainerRef),TemplateRefTokenKey=tokenKey(TemplateRef),ChangeDetectorRefTokenKey=tokenKey(ChangeDetectorRef),InjectorRefTokenKey$1=tokenKey(Injector),INJECTORRefTokenKey$1=tokenKey(INJECTOR);function directiveDef(checkIndex,flags,matchedQueries,childCount,ctor,deps,props,outputs){const bindings=[];if(props)for(let prop in props){const[bindingIndex,nonMinifiedName]=props[prop];bindings[bindingIndex]={flags:8,name:prop,nonMinifiedName:nonMinifiedName,ns:null,securityContext:null,suffix:null}}const outputDefs=[];if(outputs)for(let propName in outputs)outputDefs.push({type:1,propName:propName,target:null,eventName:outputs[propName]});return _def(checkIndex,flags|=16384,matchedQueries,childCount,ctor,ctor,deps,bindings,outputDefs)}function pipeDef(flags,ctor,deps){return _def(-1,flags|=16,null,0,ctor,ctor,deps)}function providerDef(flags,matchedQueries,token,value,deps){return _def(-1,flags,matchedQueries,0,token,value,deps)}function _def(checkIndex,flags,matchedQueriesDsl,childCount,token,value,deps,bindings,outputs){const{matchedQueries:matchedQueries,references:references,matchedQueryIds:matchedQueryIds}=splitMatchedQueriesDsl(matchedQueriesDsl);outputs||(outputs=[]),bindings||(bindings=[]),value=resolveForwardRef(value);const depDefs=splitDepsDsl(deps,stringify(token));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:checkIndex,flags:flags,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:matchedQueries,matchedQueryIds:matchedQueryIds,references:references,ngContentIndex:-1,childCount:childCount,bindings:bindings,bindingFlags:calcBindingFlags(bindings),outputs:outputs,element:null,provider:{token:token,value:value,deps:depDefs},text:null,query:null,ngContent:null}}function createProviderInstance(view,def){return _createProviderInstance$1(view,def)}function createPipeInstance(view,def){let compView=view;for(;compView.parent&&!isComponentView(compView);)compView=compView.parent;return createClass(compView.parent,viewParentEl(compView),!0,def.provider.value,def.provider.deps)}function createDirectiveInstance(view,def){const instance=createClass(view,def.parent,(32768&def.flags)>0,def.provider.value,def.provider.deps);if(def.outputs.length)for(let i=0;i<def.outputs.length;i++){const output=def.outputs[i],outputObservable=instance[output.propName];if(!isObservable(outputObservable))throw new Error(`@Output ${output.propName} not initialized in '${instance.constructor.name}'.`);{const subscription=outputObservable.subscribe(eventHandlerClosure(view,def.parent.nodeIndex,output.eventName));view.disposables[def.outputIndex+i]=subscription.unsubscribe.bind(subscription)}}return instance}function eventHandlerClosure(view,index,eventName){return event=>dispatchEvent(view,index,eventName,event)}function _createProviderInstance$1(view,def){const allowPrivateServices=(8192&def.flags)>0,providerDef=def.provider;switch(201347067&def.flags){case 512:return createClass(view,def.parent,allowPrivateServices,providerDef.value,providerDef.deps);case 1024:return function(view,elDef,allowPrivateServices,factory,deps){const len=deps.length;switch(len){case 0:return factory();case 1:return factory(resolveDep(view,elDef,allowPrivateServices,deps[0]));case 2:return factory(resolveDep(view,elDef,allowPrivateServices,deps[0]),resolveDep(view,elDef,allowPrivateServices,deps[1]));case 3:return factory(resolveDep(view,elDef,allowPrivateServices,deps[0]),resolveDep(view,elDef,allowPrivateServices,deps[1]),resolveDep(view,elDef,allowPrivateServices,deps[2]));default:const depValues=Array(len);for(let i=0;i<len;i++)depValues[i]=resolveDep(view,elDef,allowPrivateServices,deps[i]);return factory(...depValues)}}(view,def.parent,allowPrivateServices,providerDef.value,providerDef.deps);case 2048:return resolveDep(view,def.parent,allowPrivateServices,providerDef.deps[0]);case 256:return providerDef.value}}function createClass(view,elDef,allowPrivateServices,ctor,deps){const len=deps.length;switch(len){case 0:return new ctor;case 1:return new ctor(resolveDep(view,elDef,allowPrivateServices,deps[0]));case 2:return new ctor(resolveDep(view,elDef,allowPrivateServices,deps[0]),resolveDep(view,elDef,allowPrivateServices,deps[1]));case 3:return new ctor(resolveDep(view,elDef,allowPrivateServices,deps[0]),resolveDep(view,elDef,allowPrivateServices,deps[1]),resolveDep(view,elDef,allowPrivateServices,deps[2]));default:const depValues=new Array(len);for(let i=0;i<len;i++)depValues[i]=resolveDep(view,elDef,allowPrivateServices,deps[i]);return new ctor(...depValues)}}const NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR={};function resolveDep(view,elDef,allowPrivateServices,depDef,notFoundValue=Injector.THROW_IF_NOT_FOUND){if(8&depDef.flags)return depDef.token;const startView=view;2&depDef.flags&&(notFoundValue=null);const tokenKey=depDef.tokenKey;tokenKey===ChangeDetectorRefTokenKey&&(allowPrivateServices=!(!elDef||!elDef.element.componentView)),elDef&&1&depDef.flags&&(allowPrivateServices=!1,elDef=elDef.parent);let searchView=view;for(;searchView;){if(elDef)switch(tokenKey){case RendererV1TokenKey:return createRendererV1(findCompView(searchView,elDef,allowPrivateServices));case Renderer2TokenKey:return findCompView(searchView,elDef,allowPrivateServices).renderer;case ElementRefTokenKey:return new ElementRef(asElementData(searchView,elDef.nodeIndex).renderElement);case ViewContainerRefTokenKey:return asElementData(searchView,elDef.nodeIndex).viewContainer;case TemplateRefTokenKey:if(elDef.element.template)return asElementData(searchView,elDef.nodeIndex).template;break;case ChangeDetectorRefTokenKey:return createChangeDetectorRef(findCompView(searchView,elDef,allowPrivateServices));case InjectorRefTokenKey$1:case INJECTORRefTokenKey$1:return createInjector$1(searchView,elDef);default:const providerDef=(allowPrivateServices?elDef.element.allProviders:elDef.element.publicProviders)[tokenKey];if(providerDef){let providerData=asProviderData(searchView,providerDef.nodeIndex);return providerData||(providerData={instance:_createProviderInstance$1(searchView,providerDef)},searchView.nodes[providerDef.nodeIndex]=providerData),providerData.instance}}allowPrivateServices=isComponentView(searchView),elDef=viewParentEl(searchView),searchView=searchView.parent,4&depDef.flags&&(searchView=null)}const value=startView.root.injector.get(depDef.token,NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR);return value!==NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR||notFoundValue===NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR?value:startView.root.ngModule.injector.get(depDef.token,notFoundValue)}function findCompView(view,elDef,allowPrivateServices){let compView;if(allowPrivateServices)compView=asElementData(view,elDef.nodeIndex).componentView;else for(compView=view;compView.parent&&!isComponentView(compView);)compView=compView.parent;return compView}function updateProp(view,providerData,def,bindingIdx,value,changes){if(32768&def.flags){const compView=asElementData(view,def.parent.nodeIndex).componentView;2&compView.def.flags&&(compView.state|=8)}if(providerData.instance[def.bindings[bindingIdx].name]=value,524288&def.flags){changes=changes||{};const oldValue=WrappedValue.unwrap(view.oldValues[def.bindingIndex+bindingIdx]);changes[def.bindings[bindingIdx].nonMinifiedName]=new SimpleChange(oldValue,value,0!=(2&view.state))}return view.oldValues[def.bindingIndex+bindingIdx]=value,changes}function callLifecycleHooksChildrenFirst(view,lifecycles){if(!(view.def.nodeFlags&lifecycles))return;const nodes=view.def.nodes;let initIndex=0;for(let i=0;i<nodes.length;i++){const nodeDef=nodes[i];let parent=nodeDef.parent;for(!parent&&nodeDef.flags&lifecycles&&callProviderLifecycles(view,i,nodeDef.flags&lifecycles,initIndex++),0==(nodeDef.childFlags&lifecycles)&&(i+=nodeDef.childCount);parent&&1&parent.flags&&i===parent.nodeIndex+parent.childCount;)parent.directChildFlags&lifecycles&&(initIndex=callElementProvidersLifecycles(view,parent,lifecycles,initIndex)),parent=parent.parent}}function callElementProvidersLifecycles(view,elDef,lifecycles,initIndex){for(let i=elDef.nodeIndex+1;i<=elDef.nodeIndex+elDef.childCount;i++){const nodeDef=view.def.nodes[i];nodeDef.flags&lifecycles&&callProviderLifecycles(view,i,nodeDef.flags&lifecycles,initIndex++),i+=nodeDef.childCount}return initIndex}function callProviderLifecycles(view,index,lifecycles,initIndex){const providerData=asProviderData(view,index);if(!providerData)return;const provider=providerData.instance;provider&&(Services.setCurrentNode(view,index),1048576&lifecycles&&shouldCallLifecycleInitHook(view,512,initIndex)&&provider.ngAfterContentInit(),2097152&lifecycles&&provider.ngAfterContentChecked(),4194304&lifecycles&&shouldCallLifecycleInitHook(view,768,initIndex)&&provider.ngAfterViewInit(),8388608&lifecycles&&provider.ngAfterViewChecked(),131072&lifecycles&&provider.ngOnDestroy())}const SCHEDULER=new InjectionToken(\"SCHEDULER_TOKEN\",{providedIn:\"root\",factory:()=>defaultScheduler}),LOCALE_DATA={},LocaleDataIndex=function(){var LocaleDataIndex={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencySymbol:15,CurrencyName:16,Currencies:17,PluralCase:18,ExtraData:19};return LocaleDataIndex[LocaleDataIndex.LocaleId]=\"LocaleId\",LocaleDataIndex[LocaleDataIndex.DayPeriodsFormat]=\"DayPeriodsFormat\",LocaleDataIndex[LocaleDataIndex.DayPeriodsStandalone]=\"DayPeriodsStandalone\",LocaleDataIndex[LocaleDataIndex.DaysFormat]=\"DaysFormat\",LocaleDataIndex[LocaleDataIndex.DaysStandalone]=\"DaysStandalone\",LocaleDataIndex[LocaleDataIndex.MonthsFormat]=\"MonthsFormat\",LocaleDataIndex[LocaleDataIndex.MonthsStandalone]=\"MonthsStandalone\",LocaleDataIndex[LocaleDataIndex.Eras]=\"Eras\",LocaleDataIndex[LocaleDataIndex.FirstDayOfWeek]=\"FirstDayOfWeek\",LocaleDataIndex[LocaleDataIndex.WeekendRange]=\"WeekendRange\",LocaleDataIndex[LocaleDataIndex.DateFormat]=\"DateFormat\",LocaleDataIndex[LocaleDataIndex.TimeFormat]=\"TimeFormat\",LocaleDataIndex[LocaleDataIndex.DateTimeFormat]=\"DateTimeFormat\",LocaleDataIndex[LocaleDataIndex.NumberSymbols]=\"NumberSymbols\",LocaleDataIndex[LocaleDataIndex.NumberFormats]=\"NumberFormats\",LocaleDataIndex[LocaleDataIndex.CurrencySymbol]=\"CurrencySymbol\",LocaleDataIndex[LocaleDataIndex.CurrencyName]=\"CurrencyName\",LocaleDataIndex[LocaleDataIndex.Currencies]=\"Currencies\",LocaleDataIndex[LocaleDataIndex.PluralCase]=\"PluralCase\",LocaleDataIndex[LocaleDataIndex.ExtraData]=\"ExtraData\",LocaleDataIndex}(),u=void 0;var localeEn=[\"en\",[[\"a\",\"p\"],[\"AM\",\"PM\"],u],[[\"AM\",\"PM\"],u,u],[[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"],[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"],[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"]],u,[[\"J\",\"F\",\"M\",\"A\",\"M\",\"J\",\"J\",\"A\",\"S\",\"O\",\"N\",\"D\"],[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"]],u,[[\"B\",\"A\"],[\"BC\",\"AD\"],[\"Before Christ\",\"Anno Domini\"]],0,[6,0],[\"M/d/yy\",\"MMM d, y\",\"MMMM d, y\",\"EEEE, MMMM d, y\"],[\"h:mm a\",\"h:mm:ss a\",\"h:mm:ss a z\",\"h:mm:ss a zzzz\"],[\"{1}, {0}\",u,\"{1} 'at' {0}\",u],[\".\",\",\",\";\",\"%\",\"+\",\"-\",\"E\",\"\",\"\",\"\",\"NaN\",\":\"],[\"#,##0.###\",\"#,##0%\",\"#,##0.00\",\"#E0\"],\"$\",\"US Dollar\",{},function(n){let i=Math.floor(Math.abs(n)),v=n.toString().replace(/^[^.]*\\.?/,\"\").length;return 1===i&&0===v?1:5}];function findLocaleData(locale){const normalizedLocale=locale.toLowerCase().replace(/_/g,\"-\");let match=LOCALE_DATA[normalizedLocale];if(match)return match;const parentLocale=normalizedLocale.split(\"-\")[0];if(match=LOCALE_DATA[parentLocale],match)return match;if(\"en\"===parentLocale)return localeEn;throw new Error(`Missing locale data for the locale \"${locale}\".`)}class core_EventEmitter extends Subject_Subject{constructor(isAsync=!1){super(),this.__isAsync=isAsync}emit(value){super.next(value)}subscribe(generatorOrNext,error,complete){let schedulerFn,errorFn=err=>null,completeFn=()=>null;generatorOrNext&&\"object\"==typeof generatorOrNext?(schedulerFn=this.__isAsync?value=>{setTimeout(()=>generatorOrNext.next(value))}:value=>{generatorOrNext.next(value)},generatorOrNext.error&&(errorFn=this.__isAsync?err=>{setTimeout(()=>generatorOrNext.error(err))}:err=>{generatorOrNext.error(err)}),generatorOrNext.complete&&(completeFn=this.__isAsync?()=>{setTimeout(()=>generatorOrNext.complete())}:()=>{generatorOrNext.complete()})):(schedulerFn=this.__isAsync?value=>{setTimeout(()=>generatorOrNext(value))}:value=>{generatorOrNext(value)},error&&(errorFn=this.__isAsync?err=>{setTimeout(()=>error(err))}:err=>{error(err)}),complete&&(completeFn=this.__isAsync?()=>{setTimeout(()=>complete())}:()=>{complete()}));const sink=super.subscribe(schedulerFn,errorFn,completeFn);return generatorOrNext instanceof Subscription_Subscription&&generatorOrNext.add(sink),sink}}function symbolIterator(){return this._results[core_getSymbolIterator()]()}class QueryList{constructor(){this.dirty=!0,this._results=[],this.changes=new core_EventEmitter,this.length=0;const symbol=core_getSymbolIterator(),proto=QueryList.prototype;proto[symbol]||(proto[symbol]=symbolIterator)}map(fn){return this._results.map(fn)}filter(fn){return this._results.filter(fn)}find(fn){return this._results.find(fn)}reduce(fn,init){return this._results.reduce(fn,init)}forEach(fn){this._results.forEach(fn)}some(fn){return this._results.some(fn)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(resultsTree){this._results=function flatten(list,dst){void 0===dst&&(dst=list);for(let i=0;i<list.length;i++){let item=list[i];Array.isArray(item)?(dst===list&&(dst=list.slice(0,i)),flatten(item,dst)):dst!==list&&dst.push(item)}return dst}(resultsTree),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}const APP_INITIALIZER=new InjectionToken(\"Application Initializer\");class ApplicationInitStatus{constructor(appInits){this.appInits=appInits,this.initialized=!1,this.done=!1,this.donePromise=new Promise((res,rej)=>{this.resolve=res,this.reject=rej})}runInitializers(){if(this.initialized)return;const asyncInitPromises=[],complete=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const initResult=this.appInits[i]();core_isPromise(initResult)&&asyncInitPromises.push(initResult)}Promise.all(asyncInitPromises).then(()=>{complete()}).catch(e=>{this.reject(e)}),0===asyncInitPromises.length&&complete(),this.initialized=!0}}const APP_ID=new InjectionToken(\"AppId\");function _appIdRandomProviderFactory(){return`${_randomChar()}${_randomChar()}${_randomChar()}`}function _randomChar(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const PLATFORM_INITIALIZER=new InjectionToken(\"Platform Initializer\"),PLATFORM_ID=new InjectionToken(\"Platform ID\"),APP_BOOTSTRAP_LISTENER=new InjectionToken(\"appBootstrapListener\");class Console{log(message){console.log(message)}warn(message){console.warn(message)}}const LOCALE_ID$1=new InjectionToken(\"LocaleId\");function _throwError(){throw new Error(\"Runtime compiler is not loaded\")}const Compiler_compileModuleSync=_throwError,Compiler_compileModuleAsync=_throwError,Compiler_compileModuleAndAllComponentsSync=_throwError,Compiler_compileModuleAndAllComponentsAsync=_throwError;class Compiler{constructor(){this.compileModuleSync=Compiler_compileModuleSync,this.compileModuleAsync=Compiler_compileModuleAsync,this.compileModuleAndAllComponentsSync=Compiler_compileModuleAndAllComponentsSync,this.compileModuleAndAllComponentsAsync=Compiler_compileModuleAndAllComponentsAsync}clearCache(){}clearCacheFor(type){}getModuleId(moduleType){}}class CompilerFactory{}let trace,core_events;function detectWTF(){const wtf=_global.wtf;return!(!wtf||(trace=wtf.trace,!trace)||(core_events=trace.events,0))}const wtfEnabled=detectWTF();function noopScope(arg0,arg1){return null}const wtfCreateScope=wtfEnabled?function(signature,flags=null){return core_events.createScope(signature,flags)}:(signature,flags)=>noopScope,wtfLeave=wtfEnabled?function(scope,returnValue){return trace.leaveScope(scope,returnValue),returnValue}:(s,r)=>r,core_promise=(()=>Promise.resolve(0))();function scheduleMicroTask(fn){\"undefined\"==typeof Zone?core_promise.then(()=>{fn&&fn.apply(null,null)}):Zone.current.scheduleMicroTask(\"scheduleMicrotask\",fn)}class NgZone{constructor({enableLongStackTrace:enableLongStackTrace=!1}){if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new core_EventEmitter(!1),this.onMicrotaskEmpty=new core_EventEmitter(!1),this.onStable=new core_EventEmitter(!1),this.onError=new core_EventEmitter(!1),\"undefined\"==typeof Zone)throw new Error(\"In this configuration Angular requires Zone.js\");var zone;Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),enableLongStackTrace&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(zone=this)._inner=zone._inner.fork({name:\"angular\",properties:{isAngularZone:!0},onInvokeTask:(delegate,current,target,task,applyThis,applyArgs)=>{try{return onEnter(zone),delegate.invokeTask(target,task,applyThis,applyArgs)}finally{onLeave(zone)}},onInvoke:(delegate,current,target,callback,applyThis,applyArgs,source)=>{try{return onEnter(zone),delegate.invoke(target,callback,applyThis,applyArgs,source)}finally{onLeave(zone)}},onHasTask:(delegate,current,target,hasTaskState)=>{delegate.hasTask(target,hasTaskState),current===target&&(\"microTask\"==hasTaskState.change?(zone.hasPendingMicrotasks=hasTaskState.microTask,checkStable(zone)):\"macroTask\"==hasTaskState.change&&(zone.hasPendingMacrotasks=hasTaskState.macroTask))},onHandleError:(delegate,current,target,error)=>(delegate.handleError(target,error),zone.runOutsideAngular(()=>zone.onError.emit(error)),!1)})}static isInAngularZone(){return!0===Zone.current.get(\"isAngularZone\")}static assertInAngularZone(){if(!NgZone.isInAngularZone())throw new Error(\"Expected to be in Angular Zone, but it is not!\")}static assertNotInAngularZone(){if(NgZone.isInAngularZone())throw new Error(\"Expected to not be in Angular Zone, but it is!\")}run(fn,applyThis,applyArgs){return this._inner.run(fn,applyThis,applyArgs)}runTask(fn,applyThis,applyArgs,name){const zone=this._inner,task=zone.scheduleEventTask(\"NgZoneEvent: \"+name,fn,EMPTY_PAYLOAD,noop$1,noop$1);try{return zone.runTask(task,applyThis,applyArgs)}finally{zone.cancelTask(task)}}runGuarded(fn,applyThis,applyArgs){return this._inner.runGuarded(fn,applyThis,applyArgs)}runOutsideAngular(fn){return this._outer.run(fn)}}function noop$1(){}const EMPTY_PAYLOAD={};function checkStable(zone){if(0==zone._nesting&&!zone.hasPendingMicrotasks&&!zone.isStable)try{zone._nesting++,zone.onMicrotaskEmpty.emit(null)}finally{if(zone._nesting--,!zone.hasPendingMicrotasks)try{zone.runOutsideAngular(()=>zone.onStable.emit(null))}finally{zone.isStable=!0}}}function onEnter(zone){zone._nesting++,zone.isStable&&(zone.isStable=!1,zone.onUnstable.emit(null))}function onLeave(zone){zone._nesting--,checkStable(zone)}class NoopNgZone{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new core_EventEmitter,this.onMicrotaskEmpty=new core_EventEmitter,this.onStable=new core_EventEmitter,this.onError=new core_EventEmitter}run(fn){return fn()}runGuarded(fn){return fn()}runOutsideAngular(fn){return fn()}runTask(fn){return fn()}}class Testability{constructor(_ngZone){this._ngZone=_ngZone,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),_ngZone.run(()=>{this.taskTrackingZone=\"undefined\"==typeof Zone?null:Zone.current.get(\"TaskTrackingZone\")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{NgZone.assertNotInAngularZone(),scheduleMicroTask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error(\"pending async requests below zero\");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())scheduleMicroTask(()=>{for(;0!==this._callbacks.length;){let cb=this._callbacks.pop();clearTimeout(cb.timeoutId),cb.doneCb(this._didWork)}this._didWork=!1});else{let pending=this.getPendingTasks();this._callbacks=this._callbacks.filter(cb=>!cb.updateCb||!cb.updateCb(pending)||(clearTimeout(cb.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(cb,timeout,updateCb){let timeoutId=-1;timeout&&timeout>0&&(timeoutId=setTimeout(()=>{this._callbacks=this._callbacks.filter(cb=>cb.timeoutId!==timeoutId),cb(this._didWork,this.getPendingTasks())},timeout)),this._callbacks.push({doneCb:cb,timeoutId:timeoutId,updateCb:updateCb})}whenStable(doneCb,timeout,updateCb){if(updateCb&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is \"zone.js/dist/task-tracking.js\" loaded?');this.addCallback(doneCb,timeout,updateCb),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(using,provider,exactMatch){return[]}}class TestabilityRegistry{constructor(){this._applications=new Map,_testabilityGetter.addToWindow(this)}registerApplication(token,testability){this._applications.set(token,testability)}unregisterApplication(token){this._applications.delete(token)}unregisterAllApplications(){this._applications.clear()}getTestability(elem){return this._applications.get(elem)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(elem,findInAncestors=!0){return _testabilityGetter.findTestabilityInTree(this,elem,findInAncestors)}}class _NoopGetTestability{addToWindow(registry){}findTestabilityInTree(registry,elem,findInAncestors){return null}}let core_platform,_testabilityGetter=new _NoopGetTestability;const ALLOW_MULTIPLE_PLATFORMS=new InjectionToken(\"AllowMultipleToken\");class NgProbeToken{constructor(name,token){this.name=name,this.token=token}}function createPlatformFactory(parentPlatformFactory,name,providers=[]){const desc=\"Platform: \"+name,marker=new InjectionToken(desc);return(extraProviders=[])=>{let platform=getPlatform();if(!platform||platform.injector.get(ALLOW_MULTIPLE_PLATFORMS,!1))if(parentPlatformFactory)parentPlatformFactory(providers.concat(extraProviders).concat({provide:marker,useValue:!0}));else{const injectedProviders=providers.concat(extraProviders).concat({provide:marker,useValue:!0});!function(injector){if(core_platform&&!core_platform.destroyed&&!core_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS,!1))throw new Error(\"There can be only one platform. Destroy the previous one to create a new one.\");core_platform=injector.get(PlatformRef);const inits=injector.get(PLATFORM_INITIALIZER,null);inits&&inits.forEach(init=>init())}(Injector.create({providers:injectedProviders,name:desc}))}return function(requiredToken){const platform=getPlatform();if(!platform)throw new Error(\"No platform exists!\");if(!platform.injector.get(requiredToken,null))throw new Error(\"A platform with a different configuration has been created. Please destroy it first.\");return platform}(marker)}}function getPlatform(){return core_platform&&!core_platform.destroyed?core_platform:null}class PlatformRef{constructor(_injector){this._injector=_injector,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(moduleFactory,options){const ngZone=function(ngZoneOption){let ngZone;return ngZone=\"noop\"===ngZoneOption?new NoopNgZone:(\"zone.js\"===ngZoneOption?void 0:ngZoneOption)||new NgZone({enableLongStackTrace:isDevMode()}),ngZone}(options?options.ngZone:void 0),providers=[{provide:NgZone,useValue:ngZone}];return ngZone.run(()=>{const ngZoneInjector=Injector.create({providers:providers,parent:this.injector,name:moduleFactory.moduleType.name}),moduleRef=moduleFactory.create(ngZoneInjector),exceptionHandler=moduleRef.injector.get(ErrorHandler,null);if(!exceptionHandler)throw new Error(\"No ErrorHandler. Is platform module (BrowserModule) included?\");return moduleRef.onDestroy(()=>remove(this._modules,moduleRef)),ngZone.runOutsideAngular(()=>ngZone.onError.subscribe({next:error=>{exceptionHandler.handleError(error)}})),function(errorHandler,ngZone,callback){try{const result=callback();return core_isPromise(result)?result.catch(e=>{throw ngZone.runOutsideAngular(()=>errorHandler.handleError(e)),e}):result}catch(e){throw ngZone.runOutsideAngular(()=>errorHandler.handleError(e)),e}}(exceptionHandler,ngZone,()=>{const initStatus=moduleRef.injector.get(ApplicationInitStatus);return initStatus.runInitializers(),initStatus.donePromise.then(()=>(this._moduleDoBootstrap(moduleRef),moduleRef))})})}bootstrapModule(moduleType,compilerOptions=[]){const options=optionsReducer({},compilerOptions);return function(injector,options,moduleType){return injector.get(CompilerFactory).createCompiler([options]).compileModuleAsync(moduleType)}(this.injector,options,moduleType).then(moduleFactory=>this.bootstrapModuleFactory(moduleFactory,options))}_moduleDoBootstrap(moduleRef){const appRef=moduleRef.injector.get(core_ApplicationRef);if(moduleRef._bootstrapComponents.length>0)moduleRef._bootstrapComponents.forEach(f=>appRef.bootstrap(f));else{if(!moduleRef.instance.ngDoBootstrap)throw new Error(`The module ${stringify(moduleRef.instance.constructor)} was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. Please define one of these.`);moduleRef.instance.ngDoBootstrap(appRef)}this._modules.push(moduleRef)}onDestroy(callback){this._destroyListeners.push(callback)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error(\"The platform has already been destroyed!\");this._modules.slice().forEach(module=>module.destroy()),this._destroyListeners.forEach(listener=>listener()),this._destroyed=!0}get destroyed(){return this._destroyed}}function optionsReducer(dst,objs){return Array.isArray(objs)?objs.reduce(optionsReducer,dst):Object.assign({},dst,objs)}let core_ApplicationRef=(()=>{class ApplicationRef{constructor(_zone,_console,_injector,_exceptionHandler,_componentFactoryResolver,_initStatus){this._zone=_zone,this._console=_console,this._injector=_injector,this._exceptionHandler=_exceptionHandler,this._componentFactoryResolver=_componentFactoryResolver,this._initStatus=_initStatus,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=isDevMode(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const isCurrentlyStable=new Observable_Observable(observer=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{observer.next(this._stable),observer.complete()})}),isStable=new Observable_Observable(observer=>{let stableSub;this._zone.runOutsideAngular(()=>{stableSub=this._zone.onStable.subscribe(()=>{NgZone.assertNotInAngularZone(),scheduleMicroTask(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,observer.next(!0))})})});const unstableSub=this._zone.onUnstable.subscribe(()=>{NgZone.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{observer.next(!1)}))});return()=>{stableSub.unsubscribe(),unstableSub.unsubscribe()}});this.isStable=function(...observables){let concurrent=Number.POSITIVE_INFINITY,scheduler=null,last=observables[observables.length-1];return isScheduler(last)?(scheduler=observables.pop(),observables.length>1&&\"number\"==typeof observables[observables.length-1]&&(concurrent=observables.pop())):\"number\"==typeof last&&(concurrent=observables.pop()),null===scheduler&&1===observables.length&&observables[0]instanceof Observable_Observable?observables[0]:mergeAll(concurrent)(fromArray(observables,scheduler))}(isCurrentlyStable,isStable.pipe(source=>{return refCount()((subjectOrSubjectFactory=shareSubjectFactory,function(source){let subjectFactory;subjectFactory=\"function\"==typeof subjectOrSubjectFactory?subjectOrSubjectFactory:function(){return subjectOrSubjectFactory};const connectable=Object.create(source,connectableObservableDescriptor);return connectable.source=source,connectable.subjectFactory=subjectFactory,connectable})(source));var subjectOrSubjectFactory}))}bootstrap(componentOrFactory,rootSelectorOrNode){if(!this._initStatus.done)throw new Error(\"Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.\");let componentFactory;componentFactory=componentOrFactory instanceof ComponentFactory?componentOrFactory:this._componentFactoryResolver.resolveComponentFactory(componentOrFactory),this.componentTypes.push(componentFactory.componentType);const ngModule=componentFactory instanceof ComponentFactoryBoundToModule?null:this._injector.get(NgModuleRef),compRef=componentFactory.create(Injector.NULL,[],rootSelectorOrNode||componentFactory.selector,ngModule);compRef.onDestroy(()=>{this._unloadComponent(compRef)});const testability=compRef.injector.get(Testability,null);return testability&&compRef.injector.get(TestabilityRegistry).registerApplication(compRef.location.nativeElement,testability),this._loadComponent(compRef),isDevMode()&&this._console.log(\"Angular is running in the development mode. Call enableProdMode() to enable the production mode.\"),compRef}tick(){if(this._runningTick)throw new Error(\"ApplicationRef.tick is called recursively\");const scope=ApplicationRef._tickScope();try{this._runningTick=!0;for(let view of this._views)view.detectChanges();if(this._enforceNoNewChanges)for(let view of this._views)view.checkNoChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1,wtfLeave(scope)}}attachView(viewRef){const view=viewRef;this._views.push(view),view.attachToAppRef(this)}detachView(viewRef){const view=viewRef;remove(this._views,view),view.detachFromAppRef()}_loadComponent(componentRef){this.attachView(componentRef.hostView),this.tick(),this.components.push(componentRef),this._injector.get(APP_BOOTSTRAP_LISTENER,[]).concat(this._bootstrapListeners).forEach(listener=>listener(componentRef))}_unloadComponent(componentRef){this.detachView(componentRef.hostView),remove(this.components,componentRef)}ngOnDestroy(){this._views.slice().forEach(view=>view.destroy())}get viewCount(){return this._views.length}}return ApplicationRef._tickScope=wtfCreateScope(\"ApplicationRef#tick()\"),ApplicationRef})();function remove(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}class NgModuleFactoryLoader{}class SystemJsNgModuleLoaderConfig{}const DEFAULT_CONFIG={factoryPathPrefix:\"\",factoryPathSuffix:\".ngfactory\"};class SystemJsNgModuleLoader{constructor(_compiler,config){this._compiler=_compiler,this._config=config||DEFAULT_CONFIG}load(path){return this._compiler instanceof Compiler?this.loadFactory(path):this.loadAndCompile(path)}loadAndCompile(path){let[module,exportName]=path.split(\"#\");return void 0===exportName&&(exportName=\"default\"),__webpack_require__(\"zn8P\")(module).then(module=>module[exportName]).then(type=>checkNotEmpty(type,module,exportName)).then(type=>this._compiler.compileModuleAsync(type))}loadFactory(path){let[module,exportName]=path.split(\"#\"),factoryClassSuffix=\"NgFactory\";return void 0===exportName&&(exportName=\"default\",factoryClassSuffix=\"\"),__webpack_require__(\"zn8P\")(this._config.factoryPathPrefix+module+this._config.factoryPathSuffix).then(module=>module[exportName+factoryClassSuffix]).then(factory=>checkNotEmpty(factory,module,exportName))}}function checkNotEmpty(value,modulePath,exportName){if(!value)throw new Error(`Cannot find '${exportName}' in '${modulePath}'`);return value}class DebugEventListener{constructor(name,callback){this.name=name,this.callback=callback}}class DebugNode__PRE_R3__{constructor(nativeNode,parent,_debugContext){this.listeners=[],this.parent=null,this._debugContext=_debugContext,this.nativeNode=nativeNode,parent&&parent instanceof DebugElement__PRE_R3__&&parent.addChild(this)}get injector(){return this._debugContext.injector}get componentInstance(){return this._debugContext.component}get context(){return this._debugContext.context}get references(){return this._debugContext.references}get providerTokens(){return this._debugContext.providerTokens}}class DebugElement__PRE_R3__ extends DebugNode__PRE_R3__{constructor(nativeNode,parent,_debugContext){super(nativeNode,parent,_debugContext),this.properties={},this.attributes={},this.classes={},this.styles={},this.childNodes=[],this.nativeElement=nativeNode}addChild(child){child&&(this.childNodes.push(child),child.parent=this)}removeChild(child){const childIndex=this.childNodes.indexOf(child);-1!==childIndex&&(child.parent=null,this.childNodes.splice(childIndex,1))}insertChildrenAfter(child,newChildren){const siblingIndex=this.childNodes.indexOf(child);-1!==siblingIndex&&(this.childNodes.splice(siblingIndex+1,0,...newChildren),newChildren.forEach(c=>{c.parent&&c.parent.removeChild(c),child.parent=this}))}insertBefore(refChild,newChild){const refIndex=this.childNodes.indexOf(refChild);-1===refIndex?this.addChild(newChild):(newChild.parent&&newChild.parent.removeChild(newChild),newChild.parent=this,this.childNodes.splice(refIndex,0,newChild))}query(predicate){return this.queryAll(predicate)[0]||null}queryAll(predicate){const matches=[];return function _queryElementChildren(element,predicate,matches){element.childNodes.forEach(node=>{node instanceof DebugElement__PRE_R3__&&(predicate(node)&&matches.push(node),_queryElementChildren(node,predicate,matches))})}(this,predicate,matches),matches}queryAllNodes(predicate){const matches=[];return function _queryNodeChildren(parentNode,predicate,matches){parentNode instanceof DebugElement__PRE_R3__&&parentNode.childNodes.forEach(node=>{predicate(node)&&matches.push(node),node instanceof DebugElement__PRE_R3__&&_queryNodeChildren(node,predicate,matches)})}(this,predicate,matches),matches}get children(){return this.childNodes.filter(node=>node instanceof DebugElement__PRE_R3__)}triggerEventHandler(eventName,eventObj){this.listeners.forEach(listener=>{listener.name==eventName&&listener.callback(eventObj)})}}const _nativeNodeToDebugNode=new Map,getDebugNode=function(nativeNode){return _nativeNodeToDebugNode.get(nativeNode)||null};function indexDebugNode(node){_nativeNodeToDebugNode.set(node.nativeNode,node)}const platformCore=createPlatformFactory(null,\"core\",[{provide:PLATFORM_ID,useValue:\"unknown\"},{provide:PlatformRef,deps:[Injector]},{provide:TestabilityRegistry,deps:[]},{provide:Console,deps:[]}]);function _iterableDiffersFactory(){return defaultIterableDiffers}function _keyValueDiffersFactory(){return defaultKeyValueDiffers}function _localeFactory(locale){return locale||\"en-US\"}function zoneSchedulerFactory(ngZone){let queue=[];return ngZone.onStable.subscribe(()=>{for(;queue.length;)queue.pop()()}),function(fn){queue.push(fn)}}class ApplicationModule{constructor(appRef){}}function anchorDef(flags,matchedQueriesDsl,ngContentIndex,childCount,handleEvent,templateFactory){flags|=1;const{matchedQueries:matchedQueries,references:references,matchedQueryIds:matchedQueryIds}=splitMatchedQueriesDsl(matchedQueriesDsl);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:flags,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:matchedQueries,matchedQueryIds:matchedQueryIds,references:references,ngContentIndex:ngContentIndex,childCount:childCount,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:templateFactory?resolveDefinition(templateFactory):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:handleEvent||NOOP},provider:null,text:null,query:null,ngContent:null}}function elementDef(checkIndex,flags,matchedQueriesDsl,ngContentIndex,childCount,namespaceAndName,fixedAttrs=[],bindings,outputs,handleEvent,componentView,componentRendererType){handleEvent||(handleEvent=NOOP);const{matchedQueries:matchedQueries,references:references,matchedQueryIds:matchedQueryIds}=splitMatchedQueriesDsl(matchedQueriesDsl);let ns=null,name=null;namespaceAndName&&([ns,name]=splitNamespace(namespaceAndName)),bindings=bindings||[];const bindingDefs=new Array(bindings.length);for(let i=0;i<bindings.length;i++){const[bindingFlags,namespaceAndName,suffixOrSecurityContext]=bindings[i],[ns,name]=splitNamespace(namespaceAndName);let securityContext=void 0,suffix=void 0;switch(15&bindingFlags){case 4:suffix=suffixOrSecurityContext;break;case 1:case 8:securityContext=suffixOrSecurityContext}bindingDefs[i]={flags:bindingFlags,ns:ns,name:name,nonMinifiedName:name,securityContext:securityContext,suffix:suffix}}outputs=outputs||[];const outputDefs=new Array(outputs.length);for(let i=0;i<outputs.length;i++){const[target,eventName]=outputs[i];outputDefs[i]={type:0,target:target,eventName:eventName,propName:null}}const attrs=(fixedAttrs=fixedAttrs||[]).map(([namespaceAndName,value])=>{const[ns,name]=splitNamespace(namespaceAndName);return[ns,name,value]});return componentRendererType=function(type){if(type&&\"$$undefined\"===type.id){const isFilled=null!=type.encapsulation&&type.encapsulation!==ViewEncapsulation.None||type.styles.length||Object.keys(type.data).length;type.id=isFilled?\"c\"+_renderCompCount$1++:\"$$empty\"}return type&&\"$$empty\"===type.id&&(type=null),type||null}(componentRendererType),componentView&&(flags|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:checkIndex,flags:flags|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:matchedQueries,matchedQueryIds:matchedQueryIds,references:references,ngContentIndex:ngContentIndex,childCount:childCount,bindings:bindingDefs,bindingFlags:calcBindingFlags(bindingDefs),outputs:outputDefs,element:{ns:ns,name:name,attrs:attrs,template:null,componentProvider:null,componentView:componentView||null,componentRendererType:componentRendererType,publicProviders:null,allProviders:null,handleEvent:handleEvent||NOOP},provider:null,text:null,query:null,ngContent:null}}function createElement(view,renderHost,def){const elDef=def.element,rootSelectorOrNode=view.root.selectorOrNode,renderer=view.renderer;let el;if(view.parent||!rootSelectorOrNode){el=elDef.name?renderer.createElement(elDef.name,elDef.ns):renderer.createComment(\"\");const parentEl=getParentRenderElement(view,renderHost,def);parentEl&&renderer.appendChild(parentEl,el)}else el=renderer.selectRootElement(rootSelectorOrNode,!!elDef.componentRendererType&&elDef.componentRendererType.encapsulation===ViewEncapsulation.ShadowDom);if(elDef.attrs)for(let i=0;i<elDef.attrs.length;i++){const[ns,name,value]=elDef.attrs[i];renderer.setAttribute(el,name,value,ns)}return el}function listenToElementOutputs(view,compView,def,el){for(let i=0;i<def.outputs.length;i++){const output=def.outputs[i],handleEventClosure=renderEventHandlerClosure(view,def.nodeIndex,elementEventFullName(output.target,output.eventName));let listenTarget=output.target,listenerView=view;\"component\"===output.target&&(listenTarget=null,listenerView=compView);const disposable=listenerView.renderer.listen(listenTarget||el,output.eventName,handleEventClosure);view.disposables[def.outputIndex+i]=disposable}}function renderEventHandlerClosure(view,index,eventName){return event=>dispatchEvent(view,index,eventName,event)}function checkAndUpdateElementValue(view,def,bindingIdx,value){if(!checkAndUpdateBinding(view,def,bindingIdx,value))return!1;const binding=def.bindings[bindingIdx],elData=asElementData(view,def.nodeIndex),renderNode=elData.renderElement,name=binding.name;switch(15&binding.flags){case 1:!function(view,binding,renderNode,ns,name,value){const securityContext=binding.securityContext;let renderValue=securityContext?view.root.sanitizer.sanitize(securityContext,value):value;renderValue=null!=renderValue?renderValue.toString():null;const renderer=view.renderer;null!=value?renderer.setAttribute(renderNode,name,renderValue,ns):renderer.removeAttribute(renderNode,name,ns)}(view,binding,renderNode,binding.ns,name,value);break;case 2:!function(view,renderNode,name,value){const renderer=view.renderer;value?renderer.addClass(renderNode,name):renderer.removeClass(renderNode,name)}(view,renderNode,name,value);break;case 4:!function(view,binding,renderNode,name,value){let renderValue=view.root.sanitizer.sanitize(SecurityContext.STYLE,value);if(null!=renderValue){renderValue=renderValue.toString();const unit=binding.suffix;null!=unit&&(renderValue+=unit)}else renderValue=null;const renderer=view.renderer;null!=renderValue?renderer.setStyle(renderNode,name,renderValue):renderer.removeStyle(renderNode,name)}(view,binding,renderNode,name,value);break;case 8:!function(view,binding,renderNode,name,value){const securityContext=binding.securityContext;let renderValue=securityContext?view.root.sanitizer.sanitize(securityContext,value):value;view.renderer.setProperty(renderNode,name,renderValue)}(33554432&def.flags&&32&binding.flags?elData.componentView:view,binding,renderNode,name,value)}return!0}function dirtyParentQueries(view){const queryIds=view.def.nodeMatchedQueries;for(;view.parent&&isEmbeddedView(view);){let tplDef=view.parentNodeDef;view=view.parent;const end=tplDef.nodeIndex+tplDef.childCount;for(let i=0;i<=end;i++){const nodeDef=view.def.nodes[i];67108864&nodeDef.flags&&536870912&nodeDef.flags&&(nodeDef.query.filterId&queryIds)===nodeDef.query.filterId&&asQueryList(view,i).setDirty(),!(1&nodeDef.flags&&i+nodeDef.childCount<tplDef.nodeIndex)&&67108864&nodeDef.childFlags&&536870912&nodeDef.childFlags||(i+=nodeDef.childCount)}}if(134217728&view.def.nodeFlags)for(let i=0;i<view.def.nodes.length;i++){const nodeDef=view.def.nodes[i];134217728&nodeDef.flags&&536870912&nodeDef.flags&&asQueryList(view,i).setDirty(),i+=nodeDef.childCount}}function checkAndUpdateQuery(view,nodeDef){const queryList=asQueryList(view,nodeDef.nodeIndex);if(!queryList.dirty)return;let directiveInstance,newValues=void 0;if(67108864&nodeDef.flags){const elementDef=nodeDef.parent.parent;newValues=calcQueryValues(view,elementDef.nodeIndex,elementDef.nodeIndex+elementDef.childCount,nodeDef.query,[]),directiveInstance=asProviderData(view,nodeDef.parent.nodeIndex).instance}else 134217728&nodeDef.flags&&(newValues=calcQueryValues(view,0,view.def.nodes.length-1,nodeDef.query,[]),directiveInstance=view.component);queryList.reset(newValues);const bindings=nodeDef.query.bindings;let notify=!1;for(let i=0;i<bindings.length;i++){const binding=bindings[i];let boundValue;switch(binding.bindingType){case 0:boundValue=queryList.first;break;case 1:boundValue=queryList,notify=!0}directiveInstance[binding.propName]=boundValue}notify&&queryList.notifyOnChanges()}function calcQueryValues(view,startIndex,endIndex,queryDef,values){for(let i=startIndex;i<=endIndex;i++){const nodeDef=view.def.nodes[i],valueType=nodeDef.matchedQueries[queryDef.id];if(null!=valueType&&values.push(getQueryValue(view,nodeDef,valueType)),1&nodeDef.flags&&nodeDef.element.template&&(nodeDef.element.template.nodeMatchedQueries&queryDef.filterId)===queryDef.filterId){const elementData=asElementData(view,i);if((nodeDef.childMatchedQueries&queryDef.filterId)===queryDef.filterId&&(calcQueryValues(view,i+1,i+nodeDef.childCount,queryDef,values),i+=nodeDef.childCount),16777216&nodeDef.flags){const embeddedViews=elementData.viewContainer._embeddedViews;for(let k=0;k<embeddedViews.length;k++){const embeddedView=embeddedViews[k],dvc=declaredViewContainer(embeddedView);dvc&&dvc===elementData&&calcQueryValues(embeddedView,0,embeddedView.def.nodes.length-1,queryDef,values)}}const projectedViews=elementData.template._projectedViews;if(projectedViews)for(let k=0;k<projectedViews.length;k++){const projectedView=projectedViews[k];calcQueryValues(projectedView,0,projectedView.def.nodes.length-1,queryDef,values)}}(nodeDef.childMatchedQueries&queryDef.filterId)!==queryDef.filterId&&(i+=nodeDef.childCount)}return values}function getQueryValue(view,nodeDef,queryValueType){if(null!=queryValueType)switch(queryValueType){case 1:return asElementData(view,nodeDef.nodeIndex).renderElement;case 0:return new ElementRef(asElementData(view,nodeDef.nodeIndex).renderElement);case 2:return asElementData(view,nodeDef.nodeIndex).template;case 3:return asElementData(view,nodeDef.nodeIndex).viewContainer;case 4:return asProviderData(view,nodeDef.nodeIndex).instance}}function appendNgContent(view,renderHost,def){const parentEl=getParentRenderElement(view,renderHost,def);parentEl&&visitProjectedRenderNodes(view,def.ngContent.index,1,parentEl,null,void 0)}function purePipeDef(checkIndex,argCount){return _pureExpressionDef(128,checkIndex,new Array(argCount+1))}function pureArrayDef(checkIndex,argCount){return _pureExpressionDef(32,checkIndex,new Array(argCount))}function pureObjectDef(checkIndex,propToIndex){const keys=Object.keys(propToIndex),nbKeys=keys.length,propertyNames=new Array(nbKeys);for(let i=0;i<nbKeys;i++){const key=keys[i];propertyNames[propToIndex[key]]=key}return _pureExpressionDef(64,checkIndex,propertyNames)}function _pureExpressionDef(flags,checkIndex,propertyNames){const bindings=new Array(propertyNames.length);for(let i=0;i<propertyNames.length;i++){const prop=propertyNames[i];bindings[i]={flags:8,name:prop,ns:null,nonMinifiedName:prop,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:checkIndex,flags:flags,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:bindings,bindingFlags:calcBindingFlags(bindings),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function textDef(checkIndex,ngContentIndex,staticText){const bindings=new Array(staticText.length-1);for(let i=1;i<staticText.length;i++)bindings[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:staticText[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:checkIndex,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:ngContentIndex,childCount:0,bindings:bindings,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:staticText[0]},query:null,ngContent:null}}function createText(view,renderHost,def){let renderNode;const renderer=view.renderer;renderNode=renderer.createText(def.text.prefix);const parentEl=getParentRenderElement(view,renderHost,def);return parentEl&&renderer.appendChild(parentEl,renderNode),{renderText:renderNode}}function _addInterpolationPart(value,binding){return(null!=value?value.toString():\"\")+binding.suffix}function viewDef(flags,nodes,updateDirectives,updateRenderer){let viewBindingCount=0,viewDisposableCount=0,viewNodeFlags=0,viewRootNodeFlags=0,viewMatchedQueries=0,currentParent=null,currentRenderParent=null,currentElementHasPublicProviders=!1,currentElementHasPrivateProviders=!1,lastRenderRootNode=null;for(let i=0;i<nodes.length;i++){const node=nodes[i];if(node.nodeIndex=i,node.parent=currentParent,node.bindingIndex=viewBindingCount,node.outputIndex=viewDisposableCount,node.renderParent=currentRenderParent,viewNodeFlags|=node.flags,viewMatchedQueries|=node.matchedQueryIds,node.element){const elDef=node.element;elDef.publicProviders=currentParent?currentParent.element.publicProviders:Object.create(null),elDef.allProviders=elDef.publicProviders,currentElementHasPublicProviders=!1,currentElementHasPrivateProviders=!1,node.element.template&&(viewMatchedQueries|=node.element.template.nodeMatchedQueries)}if(validateNode(currentParent,node,nodes.length),viewBindingCount+=node.bindings.length,viewDisposableCount+=node.outputs.length,!currentRenderParent&&3&node.flags&&(lastRenderRootNode=node),20224&node.flags){currentElementHasPublicProviders||(currentElementHasPublicProviders=!0,currentParent.element.publicProviders=Object.create(currentParent.element.publicProviders),currentParent.element.allProviders=currentParent.element.publicProviders);const isComponent=0!=(32768&node.flags);0==(8192&node.flags)||isComponent?currentParent.element.publicProviders[tokenKey(node.provider.token)]=node:(currentElementHasPrivateProviders||(currentElementHasPrivateProviders=!0,currentParent.element.allProviders=Object.create(currentParent.element.publicProviders)),currentParent.element.allProviders[tokenKey(node.provider.token)]=node),isComponent&&(currentParent.element.componentProvider=node)}if(currentParent?(currentParent.childFlags|=node.flags,currentParent.directChildFlags|=node.flags,currentParent.childMatchedQueries|=node.matchedQueryIds,node.element&&node.element.template&&(currentParent.childMatchedQueries|=node.element.template.nodeMatchedQueries)):viewRootNodeFlags|=node.flags,node.childCount>0)currentParent=node,isNgContainer(node)||(currentRenderParent=node);else for(;currentParent&&i===currentParent.nodeIndex+currentParent.childCount;){const newParent=currentParent.parent;newParent&&(newParent.childFlags|=currentParent.childFlags,newParent.childMatchedQueries|=currentParent.childMatchedQueries),currentParent=newParent,currentRenderParent=currentParent&&isNgContainer(currentParent)?currentParent.renderParent:currentParent}}return{factory:null,nodeFlags:viewNodeFlags,rootNodeFlags:viewRootNodeFlags,nodeMatchedQueries:viewMatchedQueries,flags:flags,nodes:nodes,updateDirectives:updateDirectives||NOOP,updateRenderer:updateRenderer||NOOP,handleEvent:(view,nodeIndex,eventName,event)=>nodes[nodeIndex].element.handleEvent(view,eventName,event),bindingCount:viewBindingCount,outputCount:viewDisposableCount,lastRenderRootNode:lastRenderRootNode}}function isNgContainer(node){return 0!=(1&node.flags)&&null===node.element.name}function validateNode(parent,node,nodeCount){const template=node.element&&node.element.template;if(template){if(!template.lastRenderRootNode)throw new Error(\"Illegal State: Embedded templates without nodes are not allowed!\");if(template.lastRenderRootNode&&16777216&template.lastRenderRootNode.flags)throw new Error(`Illegal State: Last root node of a template can't have embedded views, at index ${node.nodeIndex}!`)}if(20224&node.flags&&0==(1&(parent?parent.flags:0)))throw new Error(`Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${node.nodeIndex}!`);if(node.query){if(67108864&node.flags&&(!parent||0==(16384&parent.flags)))throw new Error(`Illegal State: Content Query nodes need to be children of directives, at index ${node.nodeIndex}!`);if(134217728&node.flags&&parent)throw new Error(`Illegal State: View Query nodes have to be top level nodes, at index ${node.nodeIndex}!`)}if(node.childCount){const parentEnd=parent?parent.nodeIndex+parent.childCount:nodeCount-1;if(node.nodeIndex<=parentEnd&&node.nodeIndex+node.childCount>parentEnd)throw new Error(`Illegal State: childCount of node leads outside of parent, at index ${node.nodeIndex}!`)}}function createEmbeddedView(parent,anchorDef,viewDef,context){const view=createView(parent.root,parent.renderer,parent,anchorDef,viewDef);return initView(view,parent.component,context),createViewNodes(view),view}function createRootView(root,def,context){const view=createView(root,root.renderer,null,null,def);return initView(view,context,context),createViewNodes(view),view}function createComponentView(parentView,nodeDef,viewDef,hostElement){const rendererType=nodeDef.element.componentRendererType;let compRenderer;return compRenderer=rendererType?parentView.root.rendererFactory.createRenderer(hostElement,rendererType):parentView.root.renderer,createView(parentView.root,compRenderer,parentView,nodeDef.element.componentProvider,viewDef)}function createView(root,renderer,parent,parentNodeDef,def){const nodes=new Array(def.nodes.length),disposables=def.outputCount?new Array(def.outputCount):null;return{def:def,parent:parent,viewContainerParent:null,parentNodeDef:parentNodeDef,context:null,component:null,nodes:nodes,state:13,root:root,renderer:renderer,oldValues:new Array(def.bindingCount),disposables:disposables,initIndex:-1}}function initView(view,component,context){view.component=component,view.context=context}function createViewNodes(view){let renderHost;isComponentView(view)&&(renderHost=asElementData(view.parent,view.parentNodeDef.parent.nodeIndex).renderElement);const def=view.def,nodes=view.nodes;for(let i=0;i<def.nodes.length;i++){const nodeDef=def.nodes[i];let nodeData;switch(Services.setCurrentNode(view,i),201347067&nodeDef.flags){case 1:const el=createElement(view,renderHost,nodeDef);let componentView=void 0;if(33554432&nodeDef.flags){const compViewDef=resolveDefinition(nodeDef.element.componentView);componentView=Services.createComponentView(view,nodeDef,compViewDef,el)}listenToElementOutputs(view,componentView,nodeDef,el),nodeData={renderElement:el,componentView:componentView,viewContainer:null,template:nodeDef.element.template?createTemplateData(view,nodeDef):void 0},16777216&nodeDef.flags&&(nodeData.viewContainer=createViewContainerData(view,nodeDef,nodeData));break;case 2:nodeData=createText(view,renderHost,nodeDef);break;case 512:case 1024:case 2048:case 256:nodeData=nodes[i],nodeData||4096&nodeDef.flags||(nodeData={instance:createProviderInstance(view,nodeDef)});break;case 16:nodeData={instance:createPipeInstance(view,nodeDef)};break;case 16384:nodeData=nodes[i],nodeData||(nodeData={instance:createDirectiveInstance(view,nodeDef)}),32768&nodeDef.flags&&initView(asElementData(view,nodeDef.parent.nodeIndex).componentView,nodeData.instance,nodeData.instance);break;case 32:case 64:case 128:nodeData={value:void 0};break;case 67108864:case 134217728:nodeData=new QueryList;break;case 8:appendNgContent(view,renderHost,nodeDef),nodeData=void 0}nodes[i]=nodeData}execComponentViewsAction(view,ViewAction.CreateViewNodes),execQueriesAction(view,201326592,268435456,0)}function checkNoChangesView(view){markProjectedViewsForCheck(view),Services.updateDirectives(view,1),execEmbeddedViewsAction(view,ViewAction.CheckNoChanges),Services.updateRenderer(view,1),execComponentViewsAction(view,ViewAction.CheckNoChanges),view.state&=-97}function checkAndUpdateView(view){1&view.state?(view.state&=-2,view.state|=2):view.state&=-3,shiftInitState(view,0,256),markProjectedViewsForCheck(view),Services.updateDirectives(view,0),execEmbeddedViewsAction(view,ViewAction.CheckAndUpdate),execQueriesAction(view,67108864,536870912,0);let callInit=shiftInitState(view,256,512);callLifecycleHooksChildrenFirst(view,2097152|(callInit?1048576:0)),Services.updateRenderer(view,0),execComponentViewsAction(view,ViewAction.CheckAndUpdate),execQueriesAction(view,134217728,536870912,0),callInit=shiftInitState(view,512,768),callLifecycleHooksChildrenFirst(view,8388608|(callInit?4194304:0)),2&view.def.flags&&(view.state&=-9),view.state&=-97,shiftInitState(view,768,1024)}function checkAndUpdateNode(view,nodeDef,argStyle,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){return 0===argStyle?function(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){switch(201347067&nodeDef.flags){case 1:return function(view,def,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){const bindLen=def.bindings.length;let changed=!1;return bindLen>0&&checkAndUpdateElementValue(view,def,0,v0)&&(changed=!0),bindLen>1&&checkAndUpdateElementValue(view,def,1,v1)&&(changed=!0),bindLen>2&&checkAndUpdateElementValue(view,def,2,v2)&&(changed=!0),bindLen>3&&checkAndUpdateElementValue(view,def,3,v3)&&(changed=!0),bindLen>4&&checkAndUpdateElementValue(view,def,4,v4)&&(changed=!0),bindLen>5&&checkAndUpdateElementValue(view,def,5,v5)&&(changed=!0),bindLen>6&&checkAndUpdateElementValue(view,def,6,v6)&&(changed=!0),bindLen>7&&checkAndUpdateElementValue(view,def,7,v7)&&(changed=!0),bindLen>8&&checkAndUpdateElementValue(view,def,8,v8)&&(changed=!0),bindLen>9&&checkAndUpdateElementValue(view,def,9,v9)&&(changed=!0),changed}(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9);case 2:return function(view,def,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){let changed=!1;const bindings=def.bindings,bindLen=bindings.length;if(bindLen>0&&checkAndUpdateBinding(view,def,0,v0)&&(changed=!0),bindLen>1&&checkAndUpdateBinding(view,def,1,v1)&&(changed=!0),bindLen>2&&checkAndUpdateBinding(view,def,2,v2)&&(changed=!0),bindLen>3&&checkAndUpdateBinding(view,def,3,v3)&&(changed=!0),bindLen>4&&checkAndUpdateBinding(view,def,4,v4)&&(changed=!0),bindLen>5&&checkAndUpdateBinding(view,def,5,v5)&&(changed=!0),bindLen>6&&checkAndUpdateBinding(view,def,6,v6)&&(changed=!0),bindLen>7&&checkAndUpdateBinding(view,def,7,v7)&&(changed=!0),bindLen>8&&checkAndUpdateBinding(view,def,8,v8)&&(changed=!0),bindLen>9&&checkAndUpdateBinding(view,def,9,v9)&&(changed=!0),changed){let value=def.text.prefix;bindLen>0&&(value+=_addInterpolationPart(v0,bindings[0])),bindLen>1&&(value+=_addInterpolationPart(v1,bindings[1])),bindLen>2&&(value+=_addInterpolationPart(v2,bindings[2])),bindLen>3&&(value+=_addInterpolationPart(v3,bindings[3])),bindLen>4&&(value+=_addInterpolationPart(v4,bindings[4])),bindLen>5&&(value+=_addInterpolationPart(v5,bindings[5])),bindLen>6&&(value+=_addInterpolationPart(v6,bindings[6])),bindLen>7&&(value+=_addInterpolationPart(v7,bindings[7])),bindLen>8&&(value+=_addInterpolationPart(v8,bindings[8])),bindLen>9&&(value+=_addInterpolationPart(v9,bindings[9]));const renderNode=asTextData(view,def.nodeIndex).renderText;view.renderer.setValue(renderNode,value)}return changed}(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9);case 16384:return function(view,def,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){const providerData=asProviderData(view,def.nodeIndex),directive=providerData.instance;let changed=!1,changes=void 0;const bindLen=def.bindings.length;return bindLen>0&&checkBinding(view,def,0,v0)&&(changed=!0,changes=updateProp(view,providerData,def,0,v0,changes)),bindLen>1&&checkBinding(view,def,1,v1)&&(changed=!0,changes=updateProp(view,providerData,def,1,v1,changes)),bindLen>2&&checkBinding(view,def,2,v2)&&(changed=!0,changes=updateProp(view,providerData,def,2,v2,changes)),bindLen>3&&checkBinding(view,def,3,v3)&&(changed=!0,changes=updateProp(view,providerData,def,3,v3,changes)),bindLen>4&&checkBinding(view,def,4,v4)&&(changed=!0,changes=updateProp(view,providerData,def,4,v4,changes)),bindLen>5&&checkBinding(view,def,5,v5)&&(changed=!0,changes=updateProp(view,providerData,def,5,v5,changes)),bindLen>6&&checkBinding(view,def,6,v6)&&(changed=!0,changes=updateProp(view,providerData,def,6,v6,changes)),bindLen>7&&checkBinding(view,def,7,v7)&&(changed=!0,changes=updateProp(view,providerData,def,7,v7,changes)),bindLen>8&&checkBinding(view,def,8,v8)&&(changed=!0,changes=updateProp(view,providerData,def,8,v8,changes)),bindLen>9&&checkBinding(view,def,9,v9)&&(changed=!0,changes=updateProp(view,providerData,def,9,v9,changes)),changes&&directive.ngOnChanges(changes),65536&def.flags&&shouldCallLifecycleInitHook(view,256,def.nodeIndex)&&directive.ngOnInit(),262144&def.flags&&directive.ngDoCheck(),changed}(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9);case 32:case 64:case 128:return function(view,def,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){const bindings=def.bindings;let changed=!1;const bindLen=bindings.length;if(bindLen>0&&checkAndUpdateBinding(view,def,0,v0)&&(changed=!0),bindLen>1&&checkAndUpdateBinding(view,def,1,v1)&&(changed=!0),bindLen>2&&checkAndUpdateBinding(view,def,2,v2)&&(changed=!0),bindLen>3&&checkAndUpdateBinding(view,def,3,v3)&&(changed=!0),bindLen>4&&checkAndUpdateBinding(view,def,4,v4)&&(changed=!0),bindLen>5&&checkAndUpdateBinding(view,def,5,v5)&&(changed=!0),bindLen>6&&checkAndUpdateBinding(view,def,6,v6)&&(changed=!0),bindLen>7&&checkAndUpdateBinding(view,def,7,v7)&&(changed=!0),bindLen>8&&checkAndUpdateBinding(view,def,8,v8)&&(changed=!0),bindLen>9&&checkAndUpdateBinding(view,def,9,v9)&&(changed=!0),changed){const data=asPureExpressionData(view,def.nodeIndex);let value;switch(201347067&def.flags){case 32:value=new Array(bindings.length),bindLen>0&&(value[0]=v0),bindLen>1&&(value[1]=v1),bindLen>2&&(value[2]=v2),bindLen>3&&(value[3]=v3),bindLen>4&&(value[4]=v4),bindLen>5&&(value[5]=v5),bindLen>6&&(value[6]=v6),bindLen>7&&(value[7]=v7),bindLen>8&&(value[8]=v8),bindLen>9&&(value[9]=v9);break;case 64:value={},bindLen>0&&(value[bindings[0].name]=v0),bindLen>1&&(value[bindings[1].name]=v1),bindLen>2&&(value[bindings[2].name]=v2),bindLen>3&&(value[bindings[3].name]=v3),bindLen>4&&(value[bindings[4].name]=v4),bindLen>5&&(value[bindings[5].name]=v5),bindLen>6&&(value[bindings[6].name]=v6),bindLen>7&&(value[bindings[7].name]=v7),bindLen>8&&(value[bindings[8].name]=v8),bindLen>9&&(value[bindings[9].name]=v9);break;case 128:const pipe=v0;switch(bindLen){case 1:value=pipe.transform(v0);break;case 2:value=pipe.transform(v1);break;case 3:value=pipe.transform(v1,v2);break;case 4:value=pipe.transform(v1,v2,v3);break;case 5:value=pipe.transform(v1,v2,v3,v4);break;case 6:value=pipe.transform(v1,v2,v3,v4,v5);break;case 7:value=pipe.transform(v1,v2,v3,v4,v5,v6);break;case 8:value=pipe.transform(v1,v2,v3,v4,v5,v6,v7);break;case 9:value=pipe.transform(v1,v2,v3,v4,v5,v6,v7,v8);break;case 10:value=pipe.transform(v1,v2,v3,v4,v5,v6,v7,v8,v9)}}data.value=value}return changed}(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9);default:throw\"unreachable\"}}(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9):function(view,nodeDef,values){switch(201347067&nodeDef.flags){case 1:return function(view,def,values){let changed=!1;for(let i=0;i<values.length;i++)checkAndUpdateElementValue(view,def,i,values[i])&&(changed=!0);return changed}(view,nodeDef,values);case 2:return function(view,def,values){const bindings=def.bindings;let changed=!1;for(let i=0;i<values.length;i++)checkAndUpdateBinding(view,def,i,values[i])&&(changed=!0);if(changed){let value=\"\";for(let i=0;i<values.length;i++)value+=_addInterpolationPart(values[i],bindings[i]);value=def.text.prefix+value;const renderNode=asTextData(view,def.nodeIndex).renderText;view.renderer.setValue(renderNode,value)}return changed}(view,nodeDef,values);case 16384:return function(view,def,values){const providerData=asProviderData(view,def.nodeIndex),directive=providerData.instance;let changed=!1,changes=void 0;for(let i=0;i<values.length;i++)checkBinding(view,def,i,values[i])&&(changed=!0,changes=updateProp(view,providerData,def,i,values[i],changes));return changes&&directive.ngOnChanges(changes),65536&def.flags&&shouldCallLifecycleInitHook(view,256,def.nodeIndex)&&directive.ngOnInit(),262144&def.flags&&directive.ngDoCheck(),changed}(view,nodeDef,values);case 32:case 64:case 128:return function(view,def,values){const bindings=def.bindings;let changed=!1;for(let i=0;i<values.length;i++)checkAndUpdateBinding(view,def,i,values[i])&&(changed=!0);if(changed){const data=asPureExpressionData(view,def.nodeIndex);let value;switch(201347067&def.flags){case 32:value=values;break;case 64:value={};for(let i=0;i<values.length;i++)value[bindings[i].name]=values[i];break;case 128:const pipe=values[0],params=values.slice(1);value=pipe.transform(...params)}data.value=value}return changed}(view,nodeDef,values);default:throw\"unreachable\"}}(view,nodeDef,v0)}function markProjectedViewsForCheck(view){const def=view.def;if(4&def.nodeFlags)for(let i=0;i<def.nodes.length;i++){const nodeDef=def.nodes[i];if(4&nodeDef.flags){const projectedViews=asElementData(view,i).template._projectedViews;if(projectedViews)for(let i=0;i<projectedViews.length;i++){const projectedView=projectedViews[i];projectedView.state|=32,markParentViewsForCheckProjectedViews(projectedView,view)}}else 0==(4&nodeDef.childFlags)&&(i+=nodeDef.childCount)}}function checkNoChangesNode(view,nodeDef,argStyle,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){return 0===argStyle?function(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){const bindLen=nodeDef.bindings.length;bindLen>0&&checkBindingNoChanges(view,nodeDef,0,v0),bindLen>1&&checkBindingNoChanges(view,nodeDef,1,v1),bindLen>2&&checkBindingNoChanges(view,nodeDef,2,v2),bindLen>3&&checkBindingNoChanges(view,nodeDef,3,v3),bindLen>4&&checkBindingNoChanges(view,nodeDef,4,v4),bindLen>5&&checkBindingNoChanges(view,nodeDef,5,v5),bindLen>6&&checkBindingNoChanges(view,nodeDef,6,v6),bindLen>7&&checkBindingNoChanges(view,nodeDef,7,v7),bindLen>8&&checkBindingNoChanges(view,nodeDef,8,v8),bindLen>9&&checkBindingNoChanges(view,nodeDef,9,v9)}(view,nodeDef,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9):function(view,nodeDef,values){for(let i=0;i<values.length;i++)checkBindingNoChanges(view,nodeDef,i,values[i])}(view,nodeDef,v0),!1}function checkNoChangesQuery(view,nodeDef){if(asQueryList(view,nodeDef.nodeIndex).dirty)throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view,nodeDef.nodeIndex),`Query ${nodeDef.query.id} not dirty`,`Query ${nodeDef.query.id} dirty`,0!=(1&view.state))}function destroyView(view){if(!(128&view.state)){if(execEmbeddedViewsAction(view,ViewAction.Destroy),execComponentViewsAction(view,ViewAction.Destroy),callLifecycleHooksChildrenFirst(view,131072),view.disposables)for(let i=0;i<view.disposables.length;i++)view.disposables[i]();!function(view){if(!(16&view.state))return;const dvcElementData=declaredViewContainer(view);if(dvcElementData){const projectedViews=dvcElementData.template._projectedViews;projectedViews&&(removeFromArray(projectedViews,projectedViews.indexOf(view)),Services.dirtyParentQueries(view))}}(view),view.renderer.destroyNode&&function(view){const len=view.def.nodes.length;for(let i=0;i<len;i++){const def=view.def.nodes[i];1&def.flags?view.renderer.destroyNode(asElementData(view,i).renderElement):2&def.flags?view.renderer.destroyNode(asTextData(view,i).renderText):(67108864&def.flags||134217728&def.flags)&&asQueryList(view,i).destroy()}}(view),isComponentView(view)&&view.renderer.destroy(),view.state|=128}}const ViewAction=function(){var ViewAction={CreateViewNodes:0,CheckNoChanges:1,CheckNoChangesProjectedViews:2,CheckAndUpdate:3,CheckAndUpdateProjectedViews:4,Destroy:5};return ViewAction[ViewAction.CreateViewNodes]=\"CreateViewNodes\",ViewAction[ViewAction.CheckNoChanges]=\"CheckNoChanges\",ViewAction[ViewAction.CheckNoChangesProjectedViews]=\"CheckNoChangesProjectedViews\",ViewAction[ViewAction.CheckAndUpdate]=\"CheckAndUpdate\",ViewAction[ViewAction.CheckAndUpdateProjectedViews]=\"CheckAndUpdateProjectedViews\",ViewAction[ViewAction.Destroy]=\"Destroy\",ViewAction}();function execComponentViewsAction(view,action){const def=view.def;if(33554432&def.nodeFlags)for(let i=0;i<def.nodes.length;i++){const nodeDef=def.nodes[i];33554432&nodeDef.flags?callViewAction(asElementData(view,i).componentView,action):0==(33554432&nodeDef.childFlags)&&(i+=nodeDef.childCount)}}function execEmbeddedViewsAction(view,action){const def=view.def;if(16777216&def.nodeFlags)for(let i=0;i<def.nodes.length;i++){const nodeDef=def.nodes[i];if(16777216&nodeDef.flags){const embeddedViews=asElementData(view,i).viewContainer._embeddedViews;for(let k=0;k<embeddedViews.length;k++)callViewAction(embeddedViews[k],action)}else 0==(16777216&nodeDef.childFlags)&&(i+=nodeDef.childCount)}}function callViewAction(view,action){const viewState=view.state;switch(action){case ViewAction.CheckNoChanges:0==(128&viewState)&&(12==(12&viewState)?checkNoChangesView(view):64&viewState&&execProjectedViewsAction(view,ViewAction.CheckNoChangesProjectedViews));break;case ViewAction.CheckNoChangesProjectedViews:0==(128&viewState)&&(32&viewState?checkNoChangesView(view):64&viewState&&execProjectedViewsAction(view,action));break;case ViewAction.CheckAndUpdate:0==(128&viewState)&&(12==(12&viewState)?checkAndUpdateView(view):64&viewState&&execProjectedViewsAction(view,ViewAction.CheckAndUpdateProjectedViews));break;case ViewAction.CheckAndUpdateProjectedViews:0==(128&viewState)&&(32&viewState?checkAndUpdateView(view):64&viewState&&execProjectedViewsAction(view,action));break;case ViewAction.Destroy:destroyView(view);break;case ViewAction.CreateViewNodes:createViewNodes(view)}}function execProjectedViewsAction(view,action){execEmbeddedViewsAction(view,action),execComponentViewsAction(view,action)}function execQueriesAction(view,queryFlags,staticDynamicQueryFlag,checkType){if(!(view.def.nodeFlags&queryFlags&&view.def.nodeFlags&staticDynamicQueryFlag))return;const nodeCount=view.def.nodes.length;for(let i=0;i<nodeCount;i++){const nodeDef=view.def.nodes[i];if(nodeDef.flags&queryFlags&&nodeDef.flags&staticDynamicQueryFlag)switch(Services.setCurrentNode(view,nodeDef.nodeIndex),checkType){case 0:checkAndUpdateQuery(view,nodeDef);break;case 1:checkNoChangesQuery(view,nodeDef)}nodeDef.childFlags&queryFlags&&nodeDef.childFlags&staticDynamicQueryFlag||(i+=nodeDef.childCount)}}let initialized=!1;function createProdRootView(elInjector,projectableNodes,rootSelectorOrNode,def,ngModule,context){const rendererFactory=ngModule.injector.get(RendererFactory2);return createRootView(createRootData(elInjector,ngModule,rendererFactory,projectableNodes,rootSelectorOrNode),def,context)}function debugCreateRootView(elInjector,projectableNodes,rootSelectorOrNode,def,ngModule,context){const rendererFactory=ngModule.injector.get(RendererFactory2),root=createRootData(elInjector,ngModule,new DebugRendererFactory2(rendererFactory),projectableNodes,rootSelectorOrNode),defWithOverride=applyProviderOverridesToView(def);return callWithDebugContext(DebugAction.create,createRootView,null,[root,defWithOverride,context])}function createRootData(elInjector,ngModule,rendererFactory,projectableNodes,rootSelectorOrNode){const sanitizer=ngModule.injector.get(Sanitizer),errorHandler=ngModule.injector.get(ErrorHandler),renderer=rendererFactory.createRenderer(null,null);return{ngModule:ngModule,injector:elInjector,projectableNodes:projectableNodes,selectorOrNode:rootSelectorOrNode,sanitizer:sanitizer,rendererFactory:rendererFactory,renderer:renderer,errorHandler:errorHandler}}function debugCreateEmbeddedView(parentView,anchorDef,viewDef,context){const defWithOverride=applyProviderOverridesToView(viewDef);return callWithDebugContext(DebugAction.create,createEmbeddedView,null,[parentView,anchorDef,defWithOverride,context])}function debugCreateComponentView(parentView,nodeDef,viewDef,hostElement){return viewDef=viewDefOverrides.get(nodeDef.element.componentProvider.provider.token)||applyProviderOverridesToView(viewDef),callWithDebugContext(DebugAction.create,createComponentView,null,[parentView,nodeDef,viewDef,hostElement])}function debugCreateNgModuleRef(moduleType,parentInjector,bootstrapComponents,def){return createNgModuleRef(moduleType,parentInjector,bootstrapComponents,function(def){const{hasOverrides:hasOverrides,hasDeprecatedOverrides:hasDeprecatedOverrides}=function(def){let hasOverrides=!1,hasDeprecatedOverrides=!1;return 0===providerOverrides.size||(def.providers.forEach(node=>{const override=providerOverrides.get(node.token);3840&node.flags&&override&&(hasOverrides=!0,hasDeprecatedOverrides=hasDeprecatedOverrides||override.deprecatedBehavior)}),def.modules.forEach(module=>{providerOverridesWithScope.forEach((override,token)=>{getInjectableDef(token).providedIn===module&&(hasOverrides=!0,hasDeprecatedOverrides=hasDeprecatedOverrides||override.deprecatedBehavior)})})),{hasOverrides:hasOverrides,hasDeprecatedOverrides:hasDeprecatedOverrides}}(def);return hasOverrides?(function(def){for(let i=0;i<def.providers.length;i++){const provider=def.providers[i];hasDeprecatedOverrides&&(provider.flags|=4096);const override=providerOverrides.get(provider.token);override&&(provider.flags=-3841&provider.flags|override.flags,provider.deps=splitDepsDsl(override.deps),provider.value=override.value)}if(providerOverridesWithScope.size>0){let moduleSet=new Set(def.modules);providerOverridesWithScope.forEach((override,token)=>{if(moduleSet.has(getInjectableDef(token).providedIn)){let provider={token:token,flags:override.flags|(hasDeprecatedOverrides?4096:0),deps:splitDepsDsl(override.deps),value:override.value,index:def.providers.length};def.providers.push(provider),def.providersByKey[tokenKey(token)]=provider}})}}(def=def.factory(()=>NOOP)),def):def}(def))}const providerOverrides=new Map,providerOverridesWithScope=new Map,viewDefOverrides=new Map;function debugOverrideProvider(override){let injectableDef;providerOverrides.set(override.token,override),\"function\"==typeof override.token&&(injectableDef=getInjectableDef(override.token))&&\"function\"==typeof injectableDef.providedIn&&providerOverridesWithScope.set(override.token,override)}function debugOverrideComponentView(comp,compFactory){const hostViewDef=resolveDefinition(compFactory.viewDefFactory),compViewDef=resolveDefinition(hostViewDef.nodes[0].element.componentView);viewDefOverrides.set(comp,compViewDef)}function debugClearOverrides(){providerOverrides.clear(),providerOverridesWithScope.clear(),viewDefOverrides.clear()}function applyProviderOverridesToView(def){if(0===providerOverrides.size)return def;const elementIndicesWithOverwrittenProviders=function(def){const elIndicesWithOverwrittenProviders=[];let lastElementDef=null;for(let i=0;i<def.nodes.length;i++){const nodeDef=def.nodes[i];1&nodeDef.flags&&(lastElementDef=nodeDef),lastElementDef&&3840&nodeDef.flags&&providerOverrides.has(nodeDef.provider.token)&&(elIndicesWithOverwrittenProviders.push(lastElementDef.nodeIndex),lastElementDef=null)}return elIndicesWithOverwrittenProviders}(def);if(0===elementIndicesWithOverwrittenProviders.length)return def;def=def.factory(()=>NOOP);for(let i=0;i<elementIndicesWithOverwrittenProviders.length;i++)applyProviderOverridesToElement(def,elementIndicesWithOverwrittenProviders[i]);return def;function applyProviderOverridesToElement(viewDef,elIndex){for(let i=elIndex+1;i<viewDef.nodes.length;i++){const nodeDef=viewDef.nodes[i];if(1&nodeDef.flags)return;if(3840&nodeDef.flags){const provider=nodeDef.provider,override=providerOverrides.get(provider.token);override&&(nodeDef.flags=-3841&nodeDef.flags|override.flags,provider.deps=splitDepsDsl(override.deps),provider.value=override.value)}}}}function prodCheckAndUpdateNode(view,checkIndex,argStyle,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){const nodeDef=view.def.nodes[checkIndex];return checkAndUpdateNode(view,nodeDef,argStyle,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9),224&nodeDef.flags?asPureExpressionData(view,checkIndex).value:void 0}function prodCheckNoChangesNode(view,checkIndex,argStyle,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9){const nodeDef=view.def.nodes[checkIndex];return checkNoChangesNode(view,nodeDef,argStyle,v0,v1,v2,v3,v4,v5,v6,v7,v8,v9),224&nodeDef.flags?asPureExpressionData(view,checkIndex).value:void 0}function debugCheckAndUpdateView(view){return callWithDebugContext(DebugAction.detectChanges,checkAndUpdateView,null,[view])}function debugCheckNoChangesView(view){return callWithDebugContext(DebugAction.checkNoChanges,checkNoChangesView,null,[view])}function debugDestroyView(view){return callWithDebugContext(DebugAction.destroy,destroyView,null,[view])}const DebugAction=function(){var DebugAction={create:0,detectChanges:1,checkNoChanges:2,destroy:3,handleEvent:4};return DebugAction[DebugAction.create]=\"create\",DebugAction[DebugAction.detectChanges]=\"detectChanges\",DebugAction[DebugAction.checkNoChanges]=\"checkNoChanges\",DebugAction[DebugAction.destroy]=\"destroy\",DebugAction[DebugAction.handleEvent]=\"handleEvent\",DebugAction}();let _currentAction,_currentView,_currentNodeIndex;function debugSetCurrentNode(view,nodeIndex){_currentView=view,_currentNodeIndex=nodeIndex}function debugHandleEvent(view,nodeIndex,eventName,event){return debugSetCurrentNode(view,nodeIndex),callWithDebugContext(DebugAction.handleEvent,view.def.handleEvent,null,[view,nodeIndex,eventName,event])}function debugUpdateDirectives(view,checkType){if(128&view.state)throw viewDestroyedError(DebugAction[_currentAction]);return debugSetCurrentNode(view,nextDirectiveWithBinding(view,0)),view.def.updateDirectives((function(view,nodeIndex,argStyle,...values){const nodeDef=view.def.nodes[nodeIndex];return 0===checkType?debugCheckAndUpdateNode(view,nodeDef,argStyle,values):debugCheckNoChangesNode(view,nodeDef,argStyle,values),16384&nodeDef.flags&&debugSetCurrentNode(view,nextDirectiveWithBinding(view,nodeIndex)),224&nodeDef.flags?asPureExpressionData(view,nodeDef.nodeIndex).value:void 0}),view)}function debugUpdateRenderer(view,checkType){if(128&view.state)throw viewDestroyedError(DebugAction[_currentAction]);return debugSetCurrentNode(view,nextRenderNodeWithBinding(view,0)),view.def.updateRenderer((function(view,nodeIndex,argStyle,...values){const nodeDef=view.def.nodes[nodeIndex];return 0===checkType?debugCheckAndUpdateNode(view,nodeDef,argStyle,values):debugCheckNoChangesNode(view,nodeDef,argStyle,values),3&nodeDef.flags&&debugSetCurrentNode(view,nextRenderNodeWithBinding(view,nodeIndex)),224&nodeDef.flags?asPureExpressionData(view,nodeDef.nodeIndex).value:void 0}),view)}function debugCheckAndUpdateNode(view,nodeDef,argStyle,givenValues){if(checkAndUpdateNode(view,nodeDef,argStyle,...givenValues)){const values=1===argStyle?givenValues[0]:givenValues;if(16384&nodeDef.flags){const bindingValues={};for(let i=0;i<nodeDef.bindings.length;i++){const binding=nodeDef.bindings[i],value=values[i];8&binding.flags&&(bindingValues[normalizeDebugBindingName(binding.nonMinifiedName)]=normalizeDebugBindingValue(value))}const elDef=nodeDef.parent,el=asElementData(view,elDef.nodeIndex).renderElement;if(elDef.element.name)for(let attr in bindingValues){const value=bindingValues[attr];null!=value?view.renderer.setAttribute(el,attr,value):view.renderer.removeAttribute(el,attr)}else view.renderer.setValue(el,\"bindings=\"+JSON.stringify(bindingValues,null,2))}}}function debugCheckNoChangesNode(view,nodeDef,argStyle,values){checkNoChangesNode(view,nodeDef,argStyle,...values)}function nextDirectiveWithBinding(view,nodeIndex){for(let i=nodeIndex;i<view.def.nodes.length;i++){const nodeDef=view.def.nodes[i];if(16384&nodeDef.flags&&nodeDef.bindings&&nodeDef.bindings.length)return i}return null}function nextRenderNodeWithBinding(view,nodeIndex){for(let i=nodeIndex;i<view.def.nodes.length;i++){const nodeDef=view.def.nodes[i];if(3&nodeDef.flags&&nodeDef.bindings&&nodeDef.bindings.length)return i}return null}class DebugContext_{constructor(view,nodeIndex){this.view=view,this.nodeIndex=nodeIndex,null==nodeIndex&&(this.nodeIndex=nodeIndex=0),this.nodeDef=view.def.nodes[nodeIndex];let elDef=this.nodeDef,elView=view;for(;elDef&&0==(1&elDef.flags);)elDef=elDef.parent;if(!elDef)for(;!elDef&&elView;)elDef=viewParentEl(elView),elView=elView.parent;this.elDef=elDef,this.elView=elView}get elOrCompView(){return asElementData(this.elView,this.elDef.nodeIndex).componentView||this.view}get injector(){return createInjector$1(this.elView,this.elDef)}get component(){return this.elOrCompView.component}get context(){return this.elOrCompView.context}get providerTokens(){const tokens=[];if(this.elDef)for(let i=this.elDef.nodeIndex+1;i<=this.elDef.nodeIndex+this.elDef.childCount;i++){const childDef=this.elView.def.nodes[i];20224&childDef.flags&&tokens.push(childDef.provider.token),i+=childDef.childCount}return tokens}get references(){const references={};if(this.elDef){collectReferences(this.elView,this.elDef,references);for(let i=this.elDef.nodeIndex+1;i<=this.elDef.nodeIndex+this.elDef.childCount;i++){const childDef=this.elView.def.nodes[i];20224&childDef.flags&&collectReferences(this.elView,childDef,references),i+=childDef.childCount}}return references}get componentRenderElement(){const elData=function(view){for(;view&&!isComponentView(view);)view=view.parent;return view.parent?asElementData(view.parent,viewParentEl(view).nodeIndex):null}(this.elOrCompView);return elData?elData.renderElement:void 0}get renderNode(){return 2&this.nodeDef.flags?renderNode(this.view,this.nodeDef):renderNode(this.elView,this.elDef)}logError(console,...values){let logViewDef,logNodeIndex;2&this.nodeDef.flags?(logViewDef=this.view.def,logNodeIndex=this.nodeDef.nodeIndex):(logViewDef=this.elView.def,logNodeIndex=this.elDef.nodeIndex);const renderNodeIndex=function(viewDef,nodeIndex){let renderNodeIndex=-1;for(let i=0;i<=nodeIndex;i++)3&viewDef.nodes[i].flags&&renderNodeIndex++;return renderNodeIndex}(logViewDef,logNodeIndex);let currRenderNodeIndex=-1;logViewDef.factory(()=>(currRenderNodeIndex++,currRenderNodeIndex===renderNodeIndex?console.error.bind(console,...values):NOOP)),currRenderNodeIndex<renderNodeIndex&&(console.error(\"Illegal state: the ViewDefinitionFactory did not call the logger!\"),console.error(...values))}}function collectReferences(view,nodeDef,references){for(let refName in nodeDef.references)references[refName]=getQueryValue(view,nodeDef,nodeDef.references[refName])}function callWithDebugContext(action,fn,self,args){const oldAction=_currentAction,oldView=_currentView,oldNodeIndex=_currentNodeIndex;try{_currentAction=action;const result=fn.apply(self,args);return _currentView=oldView,_currentNodeIndex=oldNodeIndex,_currentAction=oldAction,result}catch(e){if(getDebugContext(e)||!_currentView)throw e;throw function(err,context){return err instanceof Error||(err=new Error(err.toString())),_addDebugContext(err,context),err}(e,getCurrentDebugContext())}}function getCurrentDebugContext(){return _currentView?new DebugContext_(_currentView,_currentNodeIndex):null}class DebugRendererFactory2{constructor(delegate){this.delegate=delegate}createRenderer(element,renderData){return new DebugRenderer2(this.delegate.createRenderer(element,renderData))}begin(){this.delegate.begin&&this.delegate.begin()}end(){this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)}}class DebugRenderer2{constructor(delegate){this.delegate=delegate,this.debugContextFactory=getCurrentDebugContext,this.data=this.delegate.data}createDebugContext(nativeElement){return this.debugContextFactory(nativeElement)}destroyNode(node){const debugNode=getDebugNode(node);!function(node){_nativeNodeToDebugNode.delete(node.nativeNode)}(debugNode),debugNode instanceof DebugNode__PRE_R3__&&(debugNode.listeners.length=0),this.delegate.destroyNode&&this.delegate.destroyNode(node)}destroy(){this.delegate.destroy()}createElement(name,namespace){const el=this.delegate.createElement(name,namespace),debugCtx=this.createDebugContext(el);if(debugCtx){const debugEl=new DebugElement__PRE_R3__(el,null,debugCtx);debugEl.name=name,indexDebugNode(debugEl)}return el}createComment(value){const comment=this.delegate.createComment(value),debugCtx=this.createDebugContext(comment);return debugCtx&&indexDebugNode(new DebugNode__PRE_R3__(comment,null,debugCtx)),comment}createText(value){const text=this.delegate.createText(value),debugCtx=this.createDebugContext(text);return debugCtx&&indexDebugNode(new DebugNode__PRE_R3__(text,null,debugCtx)),text}appendChild(parent,newChild){const debugEl=getDebugNode(parent),debugChildEl=getDebugNode(newChild);debugEl&&debugChildEl&&debugEl instanceof DebugElement__PRE_R3__&&debugEl.addChild(debugChildEl),this.delegate.appendChild(parent,newChild)}insertBefore(parent,newChild,refChild){const debugEl=getDebugNode(parent),debugChildEl=getDebugNode(newChild),debugRefEl=getDebugNode(refChild);debugEl&&debugChildEl&&debugEl instanceof DebugElement__PRE_R3__&&debugEl.insertBefore(debugRefEl,debugChildEl),this.delegate.insertBefore(parent,newChild,refChild)}removeChild(parent,oldChild){const debugEl=getDebugNode(parent),debugChildEl=getDebugNode(oldChild);debugEl&&debugChildEl&&debugEl instanceof DebugElement__PRE_R3__&&debugEl.removeChild(debugChildEl),this.delegate.removeChild(parent,oldChild)}selectRootElement(selectorOrNode,preserveContent){const el=this.delegate.selectRootElement(selectorOrNode,preserveContent),debugCtx=getCurrentDebugContext();return debugCtx&&indexDebugNode(new DebugElement__PRE_R3__(el,null,debugCtx)),el}setAttribute(el,name,value,namespace){const debugEl=getDebugNode(el);debugEl&&debugEl instanceof DebugElement__PRE_R3__&&(debugEl.attributes[namespace?namespace+\":\"+name:name]=value),this.delegate.setAttribute(el,name,value,namespace)}removeAttribute(el,name,namespace){const debugEl=getDebugNode(el);debugEl&&debugEl instanceof DebugElement__PRE_R3__&&(debugEl.attributes[namespace?namespace+\":\"+name:name]=null),this.delegate.removeAttribute(el,name,namespace)}addClass(el,name){const debugEl=getDebugNode(el);debugEl&&debugEl instanceof DebugElement__PRE_R3__&&(debugEl.classes[name]=!0),this.delegate.addClass(el,name)}removeClass(el,name){const debugEl=getDebugNode(el);debugEl&&debugEl instanceof DebugElement__PRE_R3__&&(debugEl.classes[name]=!1),this.delegate.removeClass(el,name)}setStyle(el,style,value,flags){const debugEl=getDebugNode(el);debugEl&&debugEl instanceof DebugElement__PRE_R3__&&(debugEl.styles[style]=value),this.delegate.setStyle(el,style,value,flags)}removeStyle(el,style,flags){const debugEl=getDebugNode(el);debugEl&&debugEl instanceof DebugElement__PRE_R3__&&(debugEl.styles[style]=null),this.delegate.removeStyle(el,style,flags)}setProperty(el,name,value){const debugEl=getDebugNode(el);debugEl&&debugEl instanceof DebugElement__PRE_R3__&&(debugEl.properties[name]=value),this.delegate.setProperty(el,name,value)}listen(target,eventName,callback){if(\"string\"!=typeof target){const debugEl=getDebugNode(target);debugEl&&debugEl.listeners.push(new DebugEventListener(eventName,callback))}return this.delegate.listen(target,eventName,callback)}parentNode(node){return this.delegate.parentNode(node)}nextSibling(node){return this.delegate.nextSibling(node)}setValue(node,value){return this.delegate.setValue(node,value)}}function createNgModuleFactory(ngModuleType,bootstrapComponents,defFactory){return new NgModuleFactory_(ngModuleType,bootstrapComponents,defFactory)}class NgModuleFactory_ extends NgModuleFactory{constructor(moduleType,_bootstrapComponents,_ngModuleDefFactory){super(),this.moduleType=moduleType,this._bootstrapComponents=_bootstrapComponents,this._ngModuleDefFactory=_ngModuleDefFactory}create(parentInjector){!function(){if(initialized)return;initialized=!0;const services=isDevMode()?{setCurrentNode:debugSetCurrentNode,createRootView:debugCreateRootView,createEmbeddedView:debugCreateEmbeddedView,createComponentView:debugCreateComponentView,createNgModuleRef:debugCreateNgModuleRef,overrideProvider:debugOverrideProvider,overrideComponentView:debugOverrideComponentView,clearOverrides:debugClearOverrides,checkAndUpdateView:debugCheckAndUpdateView,checkNoChangesView:debugCheckNoChangesView,destroyView:debugDestroyView,createDebugContext:(view,nodeIndex)=>new DebugContext_(view,nodeIndex),handleEvent:debugHandleEvent,updateDirectives:debugUpdateDirectives,updateRenderer:debugUpdateRenderer}:{setCurrentNode:()=>{},createRootView:createProdRootView,createEmbeddedView:createEmbeddedView,createComponentView:createComponentView,createNgModuleRef:createNgModuleRef,overrideProvider:NOOP,overrideComponentView:NOOP,clearOverrides:NOOP,checkAndUpdateView:checkAndUpdateView,checkNoChangesView:checkNoChangesView,destroyView:destroyView,createDebugContext:(view,nodeIndex)=>new DebugContext_(view,nodeIndex),handleEvent:(view,nodeIndex,eventName,event)=>view.def.handleEvent(view,nodeIndex,eventName,event),updateDirectives:(view,checkType)=>view.def.updateDirectives(0===checkType?prodCheckAndUpdateNode:prodCheckNoChangesNode,view),updateRenderer:(view,checkType)=>view.def.updateRenderer(0===checkType?prodCheckAndUpdateNode:prodCheckNoChangesNode,view)};Services.setCurrentNode=services.setCurrentNode,Services.createRootView=services.createRootView,Services.createEmbeddedView=services.createEmbeddedView,Services.createComponentView=services.createComponentView,Services.createNgModuleRef=services.createNgModuleRef,Services.overrideProvider=services.overrideProvider,Services.overrideComponentView=services.overrideComponentView,Services.clearOverrides=services.clearOverrides,Services.checkAndUpdateView=services.checkAndUpdateView,Services.checkNoChangesView=services.checkNoChangesView,Services.destroyView=services.destroyView,Services.resolveDep=resolveDep,Services.createDebugContext=services.createDebugContext,Services.handleEvent=services.handleEvent,Services.updateDirectives=services.updateDirectives,Services.updateRenderer=services.updateRenderer,Services.dirtyParentQueries=dirtyParentQueries}();const def=function(def){const providers=Array.from(def.providers),modules=Array.from(def.modules),providersByKey={};for(const key in def.providersByKey)providersByKey[key]=def.providersByKey[key];return{factory:def.factory,isRoot:def.isRoot,providers:providers,modules:modules,providersByKey:providersByKey}}(resolveDefinition(this._ngModuleDefFactory));return Services.createNgModuleRef(this.moduleType,parentInjector||Injector.NULL,this._bootstrapComponents,def)}}class AppModule{}class AppComponent{constructor(){this.title=\"my-blog-app\",this.showScrollToTop=!1}onWindowScroll(event){this.showScrollToTop=window.pageYOffset>500}scrollToTop(){window.scrollTo({top:0,behavior:\"smooth\"})}scrollToBottom(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:\"smooth\"})}}class PlatformLocation{}const LOCATION_INITIALIZED=new InjectionToken(\"Location Initialized\");class LocationStrategy{}const APP_BASE_HREF=new InjectionToken(\"appBaseHref\");class common_Location{constructor(platformStrategy,platformLocation){this._subject=new core_EventEmitter,this._urlChangeListeners=[],this._platformStrategy=platformStrategy;const browserBaseHref=this._platformStrategy.getBaseHref();this._platformLocation=platformLocation,this._baseHref=common_Location.stripTrailingSlash(_stripIndexHtml(browserBaseHref)),this._platformStrategy.onPopState(ev=>{this._subject.emit({url:this.path(!0),pop:!0,state:ev.state,type:ev.type})})}path(includeHash=!1){return this.normalize(this._platformStrategy.path(includeHash))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(path,query=\"\"){return this.path()==this.normalize(path+common_Location.normalizeQueryParams(query))}normalize(url){return common_Location.stripTrailingSlash(function(baseHref,url){return baseHref&&url.startsWith(baseHref)?url.substring(baseHref.length):url}(this._baseHref,_stripIndexHtml(url)))}prepareExternalUrl(url){return url&&\"/\"!==url[0]&&(url=\"/\"+url),this._platformStrategy.prepareExternalUrl(url)}go(path,query=\"\",state=null){this._platformStrategy.pushState(state,\"\",path,query),this._notifyUrlChangeListeners(this.prepareExternalUrl(path+common_Location.normalizeQueryParams(query)),state)}replaceState(path,query=\"\",state=null){this._platformStrategy.replaceState(state,\"\",path,query),this._notifyUrlChangeListeners(this.prepareExternalUrl(path+common_Location.normalizeQueryParams(query)),state)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(fn){this._urlChangeListeners.push(fn),this.subscribe(v=>{this._notifyUrlChangeListeners(v.url,v.state)})}_notifyUrlChangeListeners(url=\"\",state){this._urlChangeListeners.forEach(fn=>fn(url,state))}subscribe(onNext,onThrow,onReturn){return this._subject.subscribe({next:onNext,error:onThrow,complete:onReturn})}static normalizeQueryParams(params){return params&&\"?\"!==params[0]?\"?\"+params:params}static joinWithSlash(start,end){if(0==start.length)return end;if(0==end.length)return start;let slashes=0;return start.endsWith(\"/\")&&slashes++,end.startsWith(\"/\")&&slashes++,2==slashes?start+end.substring(1):1==slashes?start+end:start+\"/\"+end}static stripTrailingSlash(url){const match=url.match(/#|\\?|$/),pathEndIdx=match&&match.index||url.length;return url.slice(0,pathEndIdx-(\"/\"===url[pathEndIdx-1]?1:0))+url.slice(pathEndIdx)}}function _stripIndexHtml(url){return url.replace(/\\/index.html$/,\"\")}class HashLocationStrategy extends LocationStrategy{constructor(_platformLocation,_baseHref){super(),this._platformLocation=_platformLocation,this._baseHref=\"\",null!=_baseHref&&(this._baseHref=_baseHref)}onPopState(fn){this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn)}getBaseHref(){return this._baseHref}path(includeHash=!1){let path=this._platformLocation.hash;return null==path&&(path=\"#\"),path.length>0?path.substring(1):path}prepareExternalUrl(internal){const url=common_Location.joinWithSlash(this._baseHref,internal);return url.length>0?\"#\"+url:url}pushState(state,title,path,queryParams){let url=this.prepareExternalUrl(path+common_Location.normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.pushState(state,title,url)}replaceState(state,title,path,queryParams){let url=this.prepareExternalUrl(path+common_Location.normalizeQueryParams(queryParams));0==url.length&&(url=this._platformLocation.pathname),this._platformLocation.replaceState(state,title,url)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}class PathLocationStrategy extends LocationStrategy{constructor(_platformLocation,href){if(super(),this._platformLocation=_platformLocation,null==href&&(href=this._platformLocation.getBaseHrefFromDOM()),null==href)throw new Error(\"No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.\");this._baseHref=href}onPopState(fn){this._platformLocation.onPopState(fn),this._platformLocation.onHashChange(fn)}getBaseHref(){return this._baseHref}prepareExternalUrl(internal){return common_Location.joinWithSlash(this._baseHref,internal)}path(includeHash=!1){const pathname=this._platformLocation.pathname+common_Location.normalizeQueryParams(this._platformLocation.search),hash=this._platformLocation.hash;return hash&&includeHash?`${pathname}${hash}`:pathname}pushState(state,title,url,queryParams){const externalUrl=this.prepareExternalUrl(url+common_Location.normalizeQueryParams(queryParams));this._platformLocation.pushState(state,title,externalUrl)}replaceState(state,title,url,queryParams){const externalUrl=this.prepareExternalUrl(url+common_Location.normalizeQueryParams(queryParams));this._platformLocation.replaceState(state,title,externalUrl)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}const Plural=function(){var Plural={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return Plural[Plural.Zero]=\"Zero\",Plural[Plural.One]=\"One\",Plural[Plural.Two]=\"Two\",Plural[Plural.Few]=\"Few\",Plural[Plural.Many]=\"Many\",Plural[Plural.Other]=\"Other\",Plural}(),FormStyle=function(){var FormStyle={Format:0,Standalone:1};return FormStyle[FormStyle.Format]=\"Format\",FormStyle[FormStyle.Standalone]=\"Standalone\",FormStyle}(),TranslationWidth=function(){var TranslationWidth={Narrow:0,Abbreviated:1,Wide:2,Short:3};return TranslationWidth[TranslationWidth.Narrow]=\"Narrow\",TranslationWidth[TranslationWidth.Abbreviated]=\"Abbreviated\",TranslationWidth[TranslationWidth.Wide]=\"Wide\",TranslationWidth[TranslationWidth.Short]=\"Short\",TranslationWidth}(),FormatWidth=function(){var FormatWidth={Short:0,Medium:1,Long:2,Full:3};return FormatWidth[FormatWidth.Short]=\"Short\",FormatWidth[FormatWidth.Medium]=\"Medium\",FormatWidth[FormatWidth.Long]=\"Long\",FormatWidth[FormatWidth.Full]=\"Full\",FormatWidth}(),NumberSymbol=function(){var NumberSymbol={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};return NumberSymbol[NumberSymbol.Decimal]=\"Decimal\",NumberSymbol[NumberSymbol.Group]=\"Group\",NumberSymbol[NumberSymbol.List]=\"List\",NumberSymbol[NumberSymbol.PercentSign]=\"PercentSign\",NumberSymbol[NumberSymbol.PlusSign]=\"PlusSign\",NumberSymbol[NumberSymbol.MinusSign]=\"MinusSign\",NumberSymbol[NumberSymbol.Exponential]=\"Exponential\",NumberSymbol[NumberSymbol.SuperscriptingExponent]=\"SuperscriptingExponent\",NumberSymbol[NumberSymbol.PerMille]=\"PerMille\",NumberSymbol[NumberSymbol.Infinity]=\"Infinity\",NumberSymbol[NumberSymbol.NaN]=\"NaN\",NumberSymbol[NumberSymbol.TimeSeparator]=\"TimeSeparator\",NumberSymbol[NumberSymbol.CurrencyDecimal]=\"CurrencyDecimal\",NumberSymbol[NumberSymbol.CurrencyGroup]=\"CurrencyGroup\",NumberSymbol}();function getLocaleDateFormat(locale,width){return getLastDefinedValue(findLocaleData(locale)[LocaleDataIndex.DateFormat],width)}function getLocaleTimeFormat(locale,width){return getLastDefinedValue(findLocaleData(locale)[LocaleDataIndex.TimeFormat],width)}function getLocaleDateTimeFormat(locale,width){return getLastDefinedValue(findLocaleData(locale)[LocaleDataIndex.DateTimeFormat],width)}function getLocaleNumberSymbol(locale,symbol){const data=findLocaleData(locale),res=data[LocaleDataIndex.NumberSymbols][symbol];if(void 0===res){if(symbol===NumberSymbol.CurrencyDecimal)return data[LocaleDataIndex.NumberSymbols][NumberSymbol.Decimal];if(symbol===NumberSymbol.CurrencyGroup)return data[LocaleDataIndex.NumberSymbols][NumberSymbol.Group]}return res}function checkFullData(data){if(!data[LocaleDataIndex.ExtraData])throw new Error(`Missing extra locale data for the locale \"${data[LocaleDataIndex.LocaleId]}\". Use \"registerLocaleData\" to load new data. See the \"I18n guide\" on angular.io to know more.`)}function getLastDefinedValue(data,index){for(let i=index;i>-1;i--)if(void 0!==data[i])return data[i];throw new Error(\"Locale data API: locale data undefined\")}function extractTime(time){const[h,m]=time.split(\":\");return{hours:+h,minutes:+m}}const ISO8601_DATE_REGEX=/^(\\d{4})-?(\\d\\d)-?(\\d\\d)(?:T(\\d\\d)(?::?(\\d\\d)(?::?(\\d\\d)(?:\\.(\\d+))?)?)?(Z|([+-])(\\d\\d):?(\\d\\d))?)?$/,NAMED_FORMATS={},DATE_FORMATS_SPLIT=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\\s\\S]*)/,ZoneWidth=function(){var ZoneWidth={Short:0,ShortGMT:1,Long:2,Extended:3};return ZoneWidth[ZoneWidth.Short]=\"Short\",ZoneWidth[ZoneWidth.ShortGMT]=\"ShortGMT\",ZoneWidth[ZoneWidth.Long]=\"Long\",ZoneWidth[ZoneWidth.Extended]=\"Extended\",ZoneWidth}(),DateType=function(){var DateType={FullYear:0,Month:1,Date:2,Hours:3,Minutes:4,Seconds:5,FractionalSeconds:6,Day:7};return DateType[DateType.FullYear]=\"FullYear\",DateType[DateType.Month]=\"Month\",DateType[DateType.Date]=\"Date\",DateType[DateType.Hours]=\"Hours\",DateType[DateType.Minutes]=\"Minutes\",DateType[DateType.Seconds]=\"Seconds\",DateType[DateType.FractionalSeconds]=\"FractionalSeconds\",DateType[DateType.Day]=\"Day\",DateType}(),TranslationType=function(){var TranslationType={DayPeriods:0,Days:1,Months:2,Eras:3};return TranslationType[TranslationType.DayPeriods]=\"DayPeriods\",TranslationType[TranslationType.Days]=\"Days\",TranslationType[TranslationType.Months]=\"Months\",TranslationType[TranslationType.Eras]=\"Eras\",TranslationType}();function formatDateTime(str,opt_values){return opt_values&&(str=str.replace(/\\{([^}]+)}/g,(function(match,key){return null!=opt_values&&key in opt_values?opt_values[key]:match}))),str}function padNumber(num,digits,minusSign=\"-\",trim,negWrap){let neg=\"\";(num<0||negWrap&&num<=0)&&(negWrap?num=1-num:(num=-num,neg=minusSign));let strNum=String(num);for(;strNum.length<digits;)strNum=\"0\"+strNum;return trim&&(strNum=strNum.substr(strNum.length-digits)),neg+strNum}function dateGetter(name,size,offset=0,trim=!1,negWrap=!1){return function(date,locale){let part=function(part,date){switch(part){case DateType.FullYear:return date.getFullYear();case DateType.Month:return date.getMonth();case DateType.Date:return date.getDate();case DateType.Hours:return date.getHours();case DateType.Minutes:return date.getMinutes();case DateType.Seconds:return date.getSeconds();case DateType.FractionalSeconds:return date.getMilliseconds();case DateType.Day:return date.getDay();default:throw new Error(`Unknown DateType value \"${part}\".`)}}(name,date);if((offset>0||part>-offset)&&(part+=offset),name===DateType.Hours)0===part&&-12===offset&&(part=12);else if(name===DateType.FractionalSeconds)return digits=size,padNumber(part,3).substr(0,digits);var digits;const localeMinus=getLocaleNumberSymbol(locale,NumberSymbol.MinusSign);return padNumber(part,size,localeMinus,trim,negWrap)}}function dateStrGetter(name,width,form=FormStyle.Format,extended=!1){return function(date,locale){return function(date,locale,name,width,form,extended){switch(name){case TranslationType.Months:return function(locale,formStyle,width){const data=findLocaleData(locale),months=getLastDefinedValue([data[LocaleDataIndex.MonthsFormat],data[LocaleDataIndex.MonthsStandalone]],formStyle);return getLastDefinedValue(months,width)}(locale,form,width)[date.getMonth()];case TranslationType.Days:return function(locale,formStyle,width){const data=findLocaleData(locale),days=getLastDefinedValue([data[LocaleDataIndex.DaysFormat],data[LocaleDataIndex.DaysStandalone]],formStyle);return getLastDefinedValue(days,width)}(locale,form,width)[date.getDay()];case TranslationType.DayPeriods:const currentHours=date.getHours(),currentMinutes=date.getMinutes();if(extended){const rules=function(locale){const data=findLocaleData(locale);return checkFullData(data),(data[LocaleDataIndex.ExtraData][2]||[]).map(rule=>\"string\"==typeof rule?extractTime(rule):[extractTime(rule[0]),extractTime(rule[1])])}(locale),dayPeriods=function(locale,formStyle,width){const data=findLocaleData(locale);checkFullData(data);const dayPeriods=getLastDefinedValue([data[LocaleDataIndex.ExtraData][0],data[LocaleDataIndex.ExtraData][1]],formStyle)||[];return getLastDefinedValue(dayPeriods,width)||[]}(locale,form,width);let result;if(rules.forEach((rule,index)=>{if(Array.isArray(rule)){const{hours:hoursFrom,minutes:minutesFrom}=rule[0],{hours:hoursTo,minutes:minutesTo}=rule[1];currentHours>=hoursFrom&&currentMinutes>=minutesFrom&&(currentHours<hoursTo||currentHours===hoursTo&&currentMinutes<minutesTo)&&(result=dayPeriods[index])}else{const{hours:hours,minutes:minutes}=rule;hours===currentHours&&minutes===currentMinutes&&(result=dayPeriods[index])}}),result)return result}return function(locale,formStyle,width){const data=findLocaleData(locale),amPm=getLastDefinedValue([data[LocaleDataIndex.DayPeriodsFormat],data[LocaleDataIndex.DayPeriodsStandalone]],formStyle);return getLastDefinedValue(amPm,width)}(locale,form,width)[currentHours<12?0:1];case TranslationType.Eras:return function(locale,width){return getLastDefinedValue(findLocaleData(locale)[LocaleDataIndex.Eras],width)}(locale,width)[date.getFullYear()<=0?0:1];default:throw new Error(\"unexpected translation type \"+name)}}(date,locale,name,width,form,extended)}}function timeZoneGetter(width){return function(date,locale,offset){const zone=-1*offset,minusSign=getLocaleNumberSymbol(locale,NumberSymbol.MinusSign),hours=zone>0?Math.floor(zone/60):Math.ceil(zone/60);switch(width){case ZoneWidth.Short:return(zone>=0?\"+\":\"\")+padNumber(hours,2,minusSign)+padNumber(Math.abs(zone%60),2,minusSign);case ZoneWidth.ShortGMT:return\"GMT\"+(zone>=0?\"+\":\"\")+padNumber(hours,1,minusSign);case ZoneWidth.Long:return\"GMT\"+(zone>=0?\"+\":\"\")+padNumber(hours,2,minusSign)+\":\"+padNumber(Math.abs(zone%60),2,minusSign);case ZoneWidth.Extended:return 0===offset?\"Z\":(zone>=0?\"+\":\"\")+padNumber(hours,2,minusSign)+\":\"+padNumber(Math.abs(zone%60),2,minusSign);default:throw new Error(`Unknown zone width \"${width}\"`)}}}function weekGetter(size,monthBased=!1){return function(date,locale){let result;if(monthBased){const nbDaysBefore1stDayOfMonth=new Date(date.getFullYear(),date.getMonth(),1).getDay()-1,today=date.getDate();result=1+Math.floor((today+nbDaysBefore1stDayOfMonth)/7)}else{const firstThurs=function(year){const firstDayOfYear=new Date(year,0,1).getDay();return new Date(year,0,1+(firstDayOfYear<=4?4:11)-firstDayOfYear)}(date.getFullYear()),diff=(datetime=date,new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))).getTime()-firstThurs.getTime();result=1+Math.round(diff/6048e5)}var datetime;return padNumber(result,size,getLocaleNumberSymbol(locale,NumberSymbol.MinusSign))}}const DATE_FORMATS={};function timezoneToOffset(timezone,fallback){timezone=timezone.replace(/:/g,\"\");const requestedTimezoneOffset=Date.parse(\"Jan 01, 1970 00:00:00 \"+timezone)/6e4;return isNaN(requestedTimezoneOffset)?fallback:requestedTimezoneOffset}function isDate(value){return value instanceof Date&&!isNaN(value.valueOf())}const DEPRECATED_PLURAL_FN=new InjectionToken(\"UseV4Plurals\");class NgLocalization{}class NgLocaleLocalization extends NgLocalization{constructor(locale,deprecatedPluralFn){super(),this.locale=locale,this.deprecatedPluralFn=deprecatedPluralFn}getPluralCategory(value,locale){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(locale||this.locale,value):function(locale){return findLocaleData(locale)[LocaleDataIndex.PluralCase]}(locale||this.locale)(value)){case Plural.Zero:return\"zero\";case Plural.One:return\"one\";case Plural.Two:return\"two\";case Plural.Few:return\"few\";case Plural.Many:return\"many\";default:return\"other\"}}}class NgClassImpl{}class common_NgClassR2Impl{constructor(_iterableDiffers,_keyValueDiffers,_ngEl,_renderer){this._iterableDiffers=_iterableDiffers,this._keyValueDiffers=_keyValueDiffers,this._ngEl=_ngEl,this._renderer=_renderer,this._initialClasses=[]}getValue(){return null}setClass(value){this._removeClasses(this._initialClasses),this._initialClasses=\"string\"==typeof value?value.split(/\\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}setNgClass(value){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass=\"string\"==typeof value?value.split(/\\s+/):value,this._rawClass&&(isListLikeIterable$1(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}applyChanges(){if(this._iterableDiffer){const iterableChanges=this._iterableDiffer.diff(this._rawClass);iterableChanges&&this._applyIterableChanges(iterableChanges)}else if(this._keyValueDiffer){const keyValueChanges=this._keyValueDiffer.diff(this._rawClass);keyValueChanges&&this._applyKeyValueChanges(keyValueChanges)}}_applyKeyValueChanges(changes){changes.forEachAddedItem(record=>this._toggleClass(record.key,record.currentValue)),changes.forEachChangedItem(record=>this._toggleClass(record.key,record.currentValue)),changes.forEachRemovedItem(record=>{record.previousValue&&this._toggleClass(record.key,!1)})}_applyIterableChanges(changes){changes.forEachAddedItem(record=>{if(\"string\"!=typeof record.item)throw new Error(\"NgClass can only toggle CSS classes expressed as strings, got \"+stringify(record.item));this._toggleClass(record.item,!0)}),changes.forEachRemovedItem(record=>this._toggleClass(record.item,!1))}_applyClasses(rawClassVal){rawClassVal&&(Array.isArray(rawClassVal)||rawClassVal instanceof Set?rawClassVal.forEach(klass=>this._toggleClass(klass,!0)):Object.keys(rawClassVal).forEach(klass=>this._toggleClass(klass,!!rawClassVal[klass])))}_removeClasses(rawClassVal){rawClassVal&&(Array.isArray(rawClassVal)||rawClassVal instanceof Set?rawClassVal.forEach(klass=>this._toggleClass(klass,!1)):Object.keys(rawClassVal).forEach(klass=>this._toggleClass(klass,!1)))}_toggleClass(klass,enabled){(klass=klass.trim())&&klass.split(/\\s+/g).forEach(klass=>{enabled?this._renderer.addClass(this._ngEl.nativeElement,klass):this._renderer.removeClass(this._ngEl.nativeElement,klass)})}}let NgClassBase=(()=>{class NgClassBase{constructor(_delegate){this._delegate=_delegate}getValue(){return this._delegate.getValue()}}return NgClassBase.ngDirectiveDef=void 0,NgClassBase})();class NgClass extends NgClassBase{constructor(delegate){super(delegate)}set klass(value){this._delegate.setClass(value)}set ngClass(value){this._delegate.setNgClass(value)}ngDoCheck(){this._delegate.applyChanges()}}class NgForOfContext{constructor($implicit,ngForOf,index,count){this.$implicit=$implicit,this.ngForOf=ngForOf,this.index=index,this.count=count}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}class common_NgForOf{constructor(_viewContainer,_template,_differs){this._viewContainer=_viewContainer,this._template=_template,this._differs=_differs,this._ngForOfDirty=!0,this._differ=null}set ngForOf(ngForOf){this._ngForOf=ngForOf,this._ngForOfDirty=!0}set ngForTrackBy(fn){isDevMode()&&null!=fn&&\"function\"!=typeof fn&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(fn)}. See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information.`),this._trackByFn=fn}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(value){value&&(this._template=value)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const value=this._ngForOf;if(!this._differ&&value)try{this._differ=this._differs.find(value).create(this.ngForTrackBy)}catch(_a){throw new Error(`Cannot find a differ supporting object '${value}' of type '${type=value,type.name||typeof type}'. NgFor only supports binding to Iterables such as Arrays.`)}}var type;if(this._differ){const changes=this._differ.diff(this._ngForOf);changes&&this._applyChanges(changes)}}_applyChanges(changes){const insertTuples=[];changes.forEachOperation((item,adjustedPreviousIndex,currentIndex)=>{if(null==item.previousIndex){const view=this._viewContainer.createEmbeddedView(this._template,new NgForOfContext(null,this._ngForOf,-1,-1),null===currentIndex?void 0:currentIndex),tuple=new RecordViewTuple(item,view);insertTuples.push(tuple)}else if(null==currentIndex)this._viewContainer.remove(null===adjustedPreviousIndex?void 0:adjustedPreviousIndex);else if(null!==adjustedPreviousIndex){const view=this._viewContainer.get(adjustedPreviousIndex);this._viewContainer.move(view,currentIndex);const tuple=new RecordViewTuple(item,view);insertTuples.push(tuple)}});for(let i=0;i<insertTuples.length;i++)this._perViewChange(insertTuples[i].view,insertTuples[i].record);for(let i=0,ilen=this._viewContainer.length;i<ilen;i++){const viewRef=this._viewContainer.get(i);viewRef.context.index=i,viewRef.context.count=ilen,viewRef.context.ngForOf=this._ngForOf}changes.forEachIdentityChange(record=>{this._viewContainer.get(record.currentIndex).context.$implicit=record.item})}_perViewChange(view,record){view.context.$implicit=record.item}static ngTemplateContextGuard(dir,ctx){return!0}}class RecordViewTuple{constructor(record,view){this.record=record,this.view=view}}class NgIf{constructor(_viewContainer,templateRef){this._viewContainer=_viewContainer,this._context=new NgIfContext,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=templateRef}set ngIf(condition){this._context.$implicit=this._context.ngIf=condition,this._updateView()}set ngIfThen(templateRef){assertTemplate(\"ngIfThen\",templateRef),this._thenTemplateRef=templateRef,this._thenViewRef=null,this._updateView()}set ngIfElse(templateRef){assertTemplate(\"ngIfElse\",templateRef),this._elseTemplateRef=templateRef,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}class NgIfContext{constructor(){this.$implicit=null,this.ngIf=null}}function assertTemplate(property,templateRef){if(templateRef&&!templateRef.createEmbeddedView)throw new Error(`${property} must be a TemplateRef, but received '${stringify(templateRef)}'.`)}class DatePipe{constructor(locale){this.locale=locale}transform(value,format=\"mediumDate\",timezone,locale){if(null==value||\"\"===value||value!=value)return null;try{return function(value,format,locale,timezone){let date=function(value){if(isDate(value))return value;if(\"number\"==typeof value&&!isNaN(value))return new Date(value);if(\"string\"==typeof value){value=value.trim();const parsedNb=parseFloat(value);if(!isNaN(value-parsedNb))return new Date(parsedNb);if(/^(\\d{4}-\\d{1,2}-\\d{1,2})$/.test(value)){const[y,m,d]=value.split(\"-\").map(val=>+val);return new Date(y,m-1,d)}let match;if(match=value.match(ISO8601_DATE_REGEX))return function(match){const date=new Date(0);let tzHour=0,tzMin=0;const dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=Number(match[9]+match[10]),tzMin=Number(match[9]+match[11])),dateSetter.call(date,Number(match[1]),Number(match[2])-1,Number(match[3]));const h=Number(match[4]||0)-tzHour,m=Number(match[5]||0)-tzMin,s=Number(match[6]||0),ms=Math.round(1e3*parseFloat(\"0.\"+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}(match)}const date=new Date(value);if(!isDate(date))throw new Error(`Unable to convert \"${value}\" into a date`);return date}(value);format=function getNamedFormat(locale,format){const localeId=function(locale){return findLocaleData(locale)[LocaleDataIndex.LocaleId]}(locale);if(NAMED_FORMATS[localeId]=NAMED_FORMATS[localeId]||{},NAMED_FORMATS[localeId][format])return NAMED_FORMATS[localeId][format];let formatValue=\"\";switch(format){case\"shortDate\":formatValue=getLocaleDateFormat(locale,FormatWidth.Short);break;case\"mediumDate\":formatValue=getLocaleDateFormat(locale,FormatWidth.Medium);break;case\"longDate\":formatValue=getLocaleDateFormat(locale,FormatWidth.Long);break;case\"fullDate\":formatValue=getLocaleDateFormat(locale,FormatWidth.Full);break;case\"shortTime\":formatValue=getLocaleTimeFormat(locale,FormatWidth.Short);break;case\"mediumTime\":formatValue=getLocaleTimeFormat(locale,FormatWidth.Medium);break;case\"longTime\":formatValue=getLocaleTimeFormat(locale,FormatWidth.Long);break;case\"fullTime\":formatValue=getLocaleTimeFormat(locale,FormatWidth.Full);break;case\"short\":const shortTime=getNamedFormat(locale,\"shortTime\"),shortDate=getNamedFormat(locale,\"shortDate\");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Short),[shortTime,shortDate]);break;case\"medium\":const mediumTime=getNamedFormat(locale,\"mediumTime\"),mediumDate=getNamedFormat(locale,\"mediumDate\");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Medium),[mediumTime,mediumDate]);break;case\"long\":const longTime=getNamedFormat(locale,\"longTime\"),longDate=getNamedFormat(locale,\"longDate\");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Long),[longTime,longDate]);break;case\"full\":const fullTime=getNamedFormat(locale,\"fullTime\"),fullDate=getNamedFormat(locale,\"fullDate\");formatValue=formatDateTime(getLocaleDateTimeFormat(locale,FormatWidth.Full),[fullTime,fullDate])}return formatValue&&(NAMED_FORMATS[localeId][format]=formatValue),formatValue}(locale,format)||format;let match,parts=[];for(;format;){if(match=DATE_FORMATS_SPLIT.exec(format),!match){parts.push(format);break}{parts=parts.concat(match.slice(1));const part=parts.pop();if(!part)break;format=part}}let dateTimezoneOffset=date.getTimezoneOffset();timezone&&(dateTimezoneOffset=timezoneToOffset(timezone,dateTimezoneOffset),date=function(date,timezone,reverse){const dateTimezoneOffset=date.getTimezoneOffset();return function(date,minutes){return(date=new Date(date.getTime())).setMinutes(date.getMinutes()+minutes),date}(date,-1*(timezoneToOffset(timezone,dateTimezoneOffset)-dateTimezoneOffset))}(date,timezone));let text=\"\";return parts.forEach(value=>{const dateFormatter=function(format){if(DATE_FORMATS[format])return DATE_FORMATS[format];let formatter;switch(format){case\"G\":case\"GG\":case\"GGG\":formatter=dateStrGetter(TranslationType.Eras,TranslationWidth.Abbreviated);break;case\"GGGG\":formatter=dateStrGetter(TranslationType.Eras,TranslationWidth.Wide);break;case\"GGGGG\":formatter=dateStrGetter(TranslationType.Eras,TranslationWidth.Narrow);break;case\"y\":formatter=dateGetter(DateType.FullYear,1,0,!1,!0);break;case\"yy\":formatter=dateGetter(DateType.FullYear,2,0,!0,!0);break;case\"yyy\":formatter=dateGetter(DateType.FullYear,3,0,!1,!0);break;case\"yyyy\":formatter=dateGetter(DateType.FullYear,4,0,!1,!0);break;case\"M\":case\"L\":formatter=dateGetter(DateType.Month,1,1);break;case\"MM\":case\"LL\":formatter=dateGetter(DateType.Month,2,1);break;case\"MMM\":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Abbreviated);break;case\"MMMM\":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Wide);break;case\"MMMMM\":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Narrow);break;case\"LLL\":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Abbreviated,FormStyle.Standalone);break;case\"LLLL\":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Wide,FormStyle.Standalone);break;case\"LLLLL\":formatter=dateStrGetter(TranslationType.Months,TranslationWidth.Narrow,FormStyle.Standalone);break;case\"w\":formatter=weekGetter(1);break;case\"ww\":formatter=weekGetter(2);break;case\"W\":formatter=weekGetter(1,!0);break;case\"d\":formatter=dateGetter(DateType.Date,1);break;case\"dd\":formatter=dateGetter(DateType.Date,2);break;case\"E\":case\"EE\":case\"EEE\":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Abbreviated);break;case\"EEEE\":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Wide);break;case\"EEEEE\":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Narrow);break;case\"EEEEEE\":formatter=dateStrGetter(TranslationType.Days,TranslationWidth.Short);break;case\"a\":case\"aa\":case\"aaa\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Abbreviated);break;case\"aaaa\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Wide);break;case\"aaaaa\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Narrow);break;case\"b\":case\"bb\":case\"bbb\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Abbreviated,FormStyle.Standalone,!0);break;case\"bbbb\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Wide,FormStyle.Standalone,!0);break;case\"bbbbb\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Narrow,FormStyle.Standalone,!0);break;case\"B\":case\"BB\":case\"BBB\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Abbreviated,FormStyle.Format,!0);break;case\"BBBB\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Wide,FormStyle.Format,!0);break;case\"BBBBB\":formatter=dateStrGetter(TranslationType.DayPeriods,TranslationWidth.Narrow,FormStyle.Format,!0);break;case\"h\":formatter=dateGetter(DateType.Hours,1,-12);break;case\"hh\":formatter=dateGetter(DateType.Hours,2,-12);break;case\"H\":formatter=dateGetter(DateType.Hours,1);break;case\"HH\":formatter=dateGetter(DateType.Hours,2);break;case\"m\":formatter=dateGetter(DateType.Minutes,1);break;case\"mm\":formatter=dateGetter(DateType.Minutes,2);break;case\"s\":formatter=dateGetter(DateType.Seconds,1);break;case\"ss\":formatter=dateGetter(DateType.Seconds,2);break;case\"S\":formatter=dateGetter(DateType.FractionalSeconds,1);break;case\"SS\":formatter=dateGetter(DateType.FractionalSeconds,2);break;case\"SSS\":formatter=dateGetter(DateType.FractionalSeconds,3);break;case\"Z\":case\"ZZ\":case\"ZZZ\":formatter=timeZoneGetter(ZoneWidth.Short);break;case\"ZZZZZ\":formatter=timeZoneGetter(ZoneWidth.Extended);break;case\"O\":case\"OO\":case\"OOO\":case\"z\":case\"zz\":case\"zzz\":formatter=timeZoneGetter(ZoneWidth.ShortGMT);break;case\"OOOO\":case\"ZZZZ\":case\"zzzz\":formatter=timeZoneGetter(ZoneWidth.Long);break;default:return null}return DATE_FORMATS[format]=formatter,formatter}(value);text+=dateFormatter?dateFormatter(date,locale,dateTimezoneOffset):\"''\"===value?\"'\":value.replace(/(^'|'$)/g,\"\").replace(/''/g,\"'\")}),text}(value,format,locale||this.locale,timezone)}catch(error){throw function(type,value){return Error(`InvalidPipeArgument: '${value}' for pipe '${stringify(type)}'`)}(DatePipe,error.message)}}}class CommonModule{}const DOCUMENT=new InjectionToken(\"DocumentToken\");function isPlatformServer(platformId){return\"server\"===platformId}let common_ViewportScroller=(()=>{class ViewportScroller{}return ViewportScroller.ngInjectableDef=defineInjectable({token:ViewportScroller,providedIn:\"root\",factory:()=>new BrowserViewportScroller(inject(DOCUMENT),window,inject(ErrorHandler))}),ViewportScroller})();class BrowserViewportScroller{constructor(document,window,errorHandler){this.document=document,this.window=window,this.errorHandler=errorHandler,this.offset=()=>[0,0]}setOffset(offset){this.offset=Array.isArray(offset)?()=>offset:offset}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(position){this.supportScrollRestoration()&&this.window.scrollTo(position[0],position[1])}scrollToAnchor(anchor){if(this.supportScrollRestoration()){anchor=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(anchor):anchor.replace(/(\\\"|\\'\\ |:|\\.|\\[|\\]|,|=)/g,\"\\\\$1\");try{const elSelectedById=this.document.querySelector(\"#\"+anchor);if(elSelectedById)return void this.scrollToElement(elSelectedById);const elSelectedByName=this.document.querySelector(`[name='${anchor}']`);if(elSelectedByName)return void this.scrollToElement(elSelectedByName)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(scrollRestoration){if(this.supportScrollRestoration()){const history=this.window.history;history&&history.scrollRestoration&&(history.scrollRestoration=scrollRestoration)}}scrollToElement(el){const rect=el.getBoundingClientRect(),left=rect.left+this.window.pageXOffset,top=rect.top+this.window.pageYOffset,offset=this.offset();this.window.scrollTo(left-offset[0],top-offset[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(_a){return!1}}}const empty_EMPTY=new Observable_Observable(subscriber=>subscriber.complete());function empty_empty(scheduler){return scheduler?function(scheduler){return new Observable_Observable(subscriber=>scheduler.schedule(()=>subscriber.complete()))}(scheduler):empty_EMPTY}function scalar(value){const result=new Observable_Observable(subscriber=>{subscriber.next(value),subscriber.complete()});return result._isScalar=!0,result.value=value,result}function of(...args){let scheduler=args[args.length-1];switch(isScheduler(scheduler)?args.pop():scheduler=void 0,args.length){case 0:return empty_empty(scheduler);case 1:return scheduler?fromArray(args,scheduler):scalar(args[0]);default:return fromArray(args,scheduler)}}class BehaviorSubject_BehaviorSubject extends Subject_Subject{constructor(_value){super(),this._value=_value}get value(){return this.getValue()}_subscribe(subscriber){const subscription=super._subscribe(subscriber);return subscription&&!subscription.closed&&subscriber.next(this._value),subscription}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ObjectUnsubscribedError;return this._value}next(value){super.next(this._value=value)}}function EmptyErrorImpl(){return Error.call(this),this.message=\"no elements in sequence\",this.name=\"EmptyError\",this}EmptyErrorImpl.prototype=Object.create(Error.prototype);const EmptyError=EmptyErrorImpl,NONE={};class CombineLatestOperator{constructor(resultSelector){this.resultSelector=resultSelector}call(subscriber,source){return source.subscribe(new combineLatest_CombineLatestSubscriber(subscriber,this.resultSelector))}}class combineLatest_CombineLatestSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,resultSelector){super(destination),this.resultSelector=resultSelector,this.active=0,this.values=[],this.observables=[]}_next(observable){this.values.push(NONE),this.observables.push(observable)}_complete(){const observables=this.observables,len=observables.length;if(0===len)this.destination.complete();else{this.active=len,this.toRespond=len;for(let i=0;i<len;i++){const observable=observables[i];this.add(subscribeToResult(this,observable,observable,i))}}}notifyComplete(unused){0==(this.active-=1)&&this.destination.complete()}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){const values=this.values,toRespond=this.toRespond?values[outerIndex]===NONE?--this.toRespond:this.toRespond:0;values[outerIndex]=innerValue,0===toRespond&&(this.resultSelector?this._tryResultSelector(values):this.destination.next(values.slice()))}_tryResultSelector(values){let result;try{result=this.resultSelector.apply(this,values)}catch(err){return void this.destination.error(err)}this.destination.next(result)}}function defer(observableFactory){return new Observable_Observable(subscriber=>{let input;try{input=observableFactory()}catch(err){return void subscriber.error(err)}return(input?from(input):empty_empty()).subscribe(subscriber)})}function concatAll(){return mergeAll(1)}function filter(predicate,thisArg){return function(source){return source.lift(new FilterOperator(predicate,thisArg))}}class FilterOperator{constructor(predicate,thisArg){this.predicate=predicate,this.thisArg=thisArg}call(subscriber,source){return source.subscribe(new filter_FilterSubscriber(subscriber,this.predicate,this.thisArg))}}class filter_FilterSubscriber extends Subscriber_Subscriber{constructor(destination,predicate,thisArg){super(destination),this.predicate=predicate,this.thisArg=thisArg,this.count=0}_next(value){let result;try{result=this.predicate.call(this.thisArg,value,this.count++)}catch(err){return void this.destination.error(err)}result&&this.destination.next(value)}}function ArgumentOutOfRangeErrorImpl(){return Error.call(this),this.message=\"argument out of range\",this.name=\"ArgumentOutOfRangeError\",this}ArgumentOutOfRangeErrorImpl.prototype=Object.create(Error.prototype);const ArgumentOutOfRangeError=ArgumentOutOfRangeErrorImpl;function takeLast(count){return function(source){return 0===count?empty_empty():source.lift(new takeLast_TakeLastOperator(count))}}class takeLast_TakeLastOperator{constructor(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError}call(subscriber,source){return source.subscribe(new takeLast_TakeLastSubscriber(subscriber,this.total))}}class takeLast_TakeLastSubscriber extends Subscriber_Subscriber{constructor(destination,total){super(destination),this.total=total,this.ring=new Array,this.count=0}_next(value){const ring=this.ring,total=this.total,count=this.count++;ring.length<total?ring.push(value):ring[count%total]=value}_complete(){const destination=this.destination;let count=this.count;if(count>0){const total=this.count>=this.total?this.total:this.count,ring=this.ring;for(let i=0;i<total;i++){const idx=count++%total;destination.next(ring[idx])}}destination.complete()}}function tap(nextOrObserver,error,complete){return function(source){return source.lift(new DoOperator(nextOrObserver,error,complete))}}class DoOperator{constructor(nextOrObserver,error,complete){this.nextOrObserver=nextOrObserver,this.error=error,this.complete=complete}call(subscriber,source){return source.subscribe(new tap_TapSubscriber(subscriber,this.nextOrObserver,this.error,this.complete))}}class tap_TapSubscriber extends Subscriber_Subscriber{constructor(destination,observerOrNext,error,complete){super(destination),this._tapNext=noop,this._tapError=noop,this._tapComplete=noop,this._tapError=error||noop,this._tapComplete=complete||noop,isFunction(observerOrNext)?(this._context=this,this._tapNext=observerOrNext):observerOrNext&&(this._context=observerOrNext,this._tapNext=observerOrNext.next||noop,this._tapError=observerOrNext.error||noop,this._tapComplete=observerOrNext.complete||noop)}_next(value){try{this._tapNext.call(this._context,value)}catch(err){return void this.destination.error(err)}this.destination.next(value)}_error(err){try{this._tapError.call(this._context,err)}catch(err){return void this.destination.error(err)}this.destination.error(err)}_complete(){try{this._tapComplete.call(this._context)}catch(err){return void this.destination.error(err)}return this.destination.complete()}}const throwIfEmpty=(errorFactory=defaultErrorFactory)=>tap({hasValue:!1,next(){this.hasValue=!0},complete(){if(!this.hasValue)throw errorFactory()}});function defaultErrorFactory(){return new EmptyError}function defaultIfEmpty(defaultValue=null){return source=>source.lift(new DefaultIfEmptyOperator(defaultValue))}class DefaultIfEmptyOperator{constructor(defaultValue){this.defaultValue=defaultValue}call(subscriber,source){return source.subscribe(new defaultIfEmpty_DefaultIfEmptySubscriber(subscriber,this.defaultValue))}}class defaultIfEmpty_DefaultIfEmptySubscriber extends Subscriber_Subscriber{constructor(destination,defaultValue){super(destination),this.defaultValue=defaultValue,this.isEmpty=!0}_next(value){this.isEmpty=!1,this.destination.next(value)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function last_last(predicate,defaultValue){const hasDefaultValue=arguments.length>=2;return source=>source.pipe(predicate?filter((v,i)=>predicate(v,i,source)):identity,takeLast(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty(()=>new EmptyError))}function catchError(selector){return function(source){const operator=new CatchOperator(selector),caught=source.lift(operator);return operator.caught=caught}}class CatchOperator{constructor(selector){this.selector=selector}call(subscriber,source){return source.subscribe(new catchError_CatchSubscriber(subscriber,this.selector,this.caught))}}class catchError_CatchSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,selector,caught){super(destination),this.selector=selector,this.caught=caught}error(err){if(!this.isStopped){let result;try{result=this.selector(err,this.caught)}catch(err2){return void super.error(err2)}this._unsubscribeAndRecycle();const innerSubscriber=new InnerSubscriber_InnerSubscriber(this,void 0,void 0);this.add(innerSubscriber),subscribeToResult(this,result,void 0,void 0,innerSubscriber)}}}function take(count){return source=>0===count?empty_empty():source.lift(new take_TakeOperator(count))}class take_TakeOperator{constructor(total){if(this.total=total,this.total<0)throw new ArgumentOutOfRangeError}call(subscriber,source){return source.subscribe(new take_TakeSubscriber(subscriber,this.total))}}class take_TakeSubscriber extends Subscriber_Subscriber{constructor(destination,total){super(destination),this.total=total,this.count=0}_next(value){const total=this.total,count=++this.count;count<=total&&(this.destination.next(value),count===total&&(this.destination.complete(),this.unsubscribe()))}}function first_first(predicate,defaultValue){const hasDefaultValue=arguments.length>=2;return source=>source.pipe(predicate?filter((v,i)=>predicate(v,i,source)):identity,take(1),hasDefaultValue?defaultIfEmpty(defaultValue):throwIfEmpty(()=>new EmptyError))}class EveryOperator{constructor(predicate,thisArg,source){this.predicate=predicate,this.thisArg=thisArg,this.source=source}call(observer,source){return source.subscribe(new every_EverySubscriber(observer,this.predicate,this.thisArg,this.source))}}class every_EverySubscriber extends Subscriber_Subscriber{constructor(destination,predicate,thisArg,source){super(destination),this.predicate=predicate,this.thisArg=thisArg,this.source=source,this.index=0,this.thisArg=thisArg||this}notifyComplete(everyValueMatch){this.destination.next(everyValueMatch),this.destination.complete()}_next(value){let result=!1;try{result=this.predicate.call(this.thisArg,value,this.index++,this.source)}catch(err){return void this.destination.error(err)}result||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function switchMap(project,resultSelector){return\"function\"==typeof resultSelector?source=>source.pipe(switchMap((a,i)=>from(project(a,i)).pipe(map((b,ii)=>resultSelector(a,b,i,ii))))):source=>source.lift(new SwitchMapOperator(project))}class SwitchMapOperator{constructor(project){this.project=project}call(subscriber,source){return source.subscribe(new switchMap_SwitchMapSubscriber(subscriber,this.project))}}class switchMap_SwitchMapSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,project){super(destination),this.project=project,this.index=0}_next(value){let result;const index=this.index++;try{result=this.project(value,index)}catch(error){return void this.destination.error(error)}this._innerSub(result,value,index)}_innerSub(result,value,index){const innerSubscription=this.innerSubscription;innerSubscription&&innerSubscription.unsubscribe();const innerSubscriber=new InnerSubscriber_InnerSubscriber(this,void 0,void 0);this.destination.add(innerSubscriber),this.innerSubscription=subscribeToResult(this,result,value,index,innerSubscriber)}_complete(){const{innerSubscription:innerSubscription}=this;innerSubscription&&!innerSubscription.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(innerSub){this.destination.remove(innerSub),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.destination.next(innerValue)}}function scan(accumulator,seed){let hasSeed=!1;return arguments.length>=2&&(hasSeed=!0),function(source){return source.lift(new ScanOperator(accumulator,seed,hasSeed))}}class ScanOperator{constructor(accumulator,seed,hasSeed=!1){this.accumulator=accumulator,this.seed=seed,this.hasSeed=hasSeed}call(subscriber,source){return source.subscribe(new scan_ScanSubscriber(subscriber,this.accumulator,this.seed,this.hasSeed))}}class scan_ScanSubscriber extends Subscriber_Subscriber{constructor(destination,accumulator,_seed,hasSeed){super(destination),this.accumulator=accumulator,this._seed=_seed,this.hasSeed=hasSeed,this.index=0}get seed(){return this._seed}set seed(value){this.hasSeed=!0,this._seed=value}_next(value){if(this.hasSeed)return this._tryNext(value);this.seed=value,this.destination.next(value)}_tryNext(value){const index=this.index++;let result;try{result=this.accumulator(this.seed,value,index)}catch(err){this.destination.error(err)}this.seed=result,this.destination.next(result)}}function concatMap(project,resultSelector){return mergeMap(project,resultSelector,1)}class FinallyOperator{constructor(callback){this.callback=callback}call(subscriber,source){return source.subscribe(new finalize_FinallySubscriber(subscriber,this.callback))}}class finalize_FinallySubscriber extends Subscriber_Subscriber{constructor(destination,callback){super(destination),this.add(new Subscription_Subscription(callback))}}let _DOM=null;function getDOM(){return _DOM}const _attrToPropMap={class:\"className\",innerHtml:\"innerHTML\",readonly:\"readOnly\",tabindex:\"tabIndex\"},_keyMap={\"\\b\":\"Backspace\",\"\\t\":\"Tab\",\"\":\"Delete\",\"\u001b\":\"Escape\",Del:\"Delete\",Esc:\"Escape\",Left:\"ArrowLeft\",Right:\"ArrowRight\",Up:\"ArrowUp\",Down:\"ArrowDown\",Menu:\"ContextMenu\",Scroll:\"ScrollLock\",Win:\"OS\"},_chromeNumKeyPadMap={A:\"1\",B:\"2\",C:\"3\",D:\"4\",E:\"5\",F:\"6\",G:\"7\",H:\"8\",I:\"9\",J:\"*\",K:\"+\",M:\"-\",N:\".\",O:\"/\",\"`\":\"0\",\"\":\"NumLock\"},nodeContains=(()=>{if(_global.Node)return _global.Node.prototype.contains||function(node){return!!(16&this.compareDocumentPosition(node))}})();class platform_browser_BrowserDomAdapter extends class extends class{constructor(){this.resourceLoaderType=null}get attrToPropMap(){return this._attrToPropMap}set attrToPropMap(value){this._attrToPropMap=value}}{constructor(){super(),this._animationPrefix=null,this._transitionEnd=null;try{const element=this.createElement(\"div\",document);if(null!=this.getStyle(element,\"animationName\"))this._animationPrefix=\"\";else{const domPrefixes=[\"Webkit\",\"Moz\",\"O\",\"ms\"];for(let i=0;i<domPrefixes.length;i++)if(null!=this.getStyle(element,domPrefixes[i]+\"AnimationName\")){this._animationPrefix=\"-\"+domPrefixes[i].toLowerCase()+\"-\";break}}const transEndEventNames={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};Object.keys(transEndEventNames).forEach(key=>{null!=this.getStyle(element,key)&&(this._transitionEnd=transEndEventNames[key])})}catch(_a){this._animationPrefix=null,this._transitionEnd=null}}getDistributedNodes(el){return el.getDistributedNodes()}resolveAndSetHref(el,baseUrl,href){el.href=null==href?baseUrl:baseUrl+\"/../\"+href}supportsDOMEvents(){return!0}supportsNativeShadowDOM(){return\"function\"==typeof document.body.createShadowRoot}getAnimationPrefix(){return this._animationPrefix?this._animationPrefix:\"\"}getTransitionEnd(){return this._transitionEnd?this._transitionEnd:\"\"}supportsAnimation(){return null!=this._animationPrefix&&null!=this._transitionEnd}}{parse(templateHtml){throw new Error(\"parse not implemented\")}static makeCurrent(){var adapter;adapter=new platform_browser_BrowserDomAdapter,_DOM||(_DOM=adapter)}hasProperty(element,name){return name in element}setProperty(el,name,value){el[name]=value}getProperty(el,name){return el[name]}invoke(el,methodName,args){el[methodName](...args)}logError(error){window.console&&(console.error?console.error(error):console.log(error))}log(error){window.console&&window.console.log&&window.console.log(error)}logGroup(error){window.console&&window.console.group&&window.console.group(error)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}get attrToPropMap(){return _attrToPropMap}contains(nodeA,nodeB){return nodeContains.call(nodeA,nodeB)}querySelector(el,selector){return el.querySelector(selector)}querySelectorAll(el,selector){return el.querySelectorAll(selector)}on(el,evt,listener){el.addEventListener(evt,listener,!1)}onAndCancel(el,evt,listener){return el.addEventListener(evt,listener,!1),()=>{el.removeEventListener(evt,listener,!1)}}dispatchEvent(el,evt){el.dispatchEvent(evt)}createMouseEvent(eventType){const evt=this.getDefaultDocument().createEvent(\"MouseEvent\");return evt.initEvent(eventType,!0,!0),evt}createEvent(eventType){const evt=this.getDefaultDocument().createEvent(\"Event\");return evt.initEvent(eventType,!0,!0),evt}preventDefault(evt){evt.preventDefault(),evt.returnValue=!1}isPrevented(evt){return evt.defaultPrevented||null!=evt.returnValue&&!evt.returnValue}getInnerHTML(el){return el.innerHTML}getTemplateContent(el){return\"content\"in el&&this.isTemplateElement(el)?el.content:null}getOuterHTML(el){return el.outerHTML}nodeName(node){return node.nodeName}nodeValue(node){return node.nodeValue}type(node){return node.type}content(node){return this.hasProperty(node,\"content\")?node.content:node}firstChild(el){return el.firstChild}nextSibling(el){return el.nextSibling}parentElement(el){return el.parentNode}childNodes(el){return el.childNodes}childNodesAsList(el){const childNodes=el.childNodes,res=new Array(childNodes.length);for(let i=0;i<childNodes.length;i++)res[i]=childNodes[i];return res}clearNodes(el){for(;el.firstChild;)el.removeChild(el.firstChild)}appendChild(el,node){el.appendChild(node)}removeChild(el,node){el.removeChild(node)}replaceChild(el,newChild,oldChild){el.replaceChild(newChild,oldChild)}remove(node){return node.parentNode&&node.parentNode.removeChild(node),node}insertBefore(parent,ref,node){parent.insertBefore(node,ref)}insertAllBefore(parent,ref,nodes){nodes.forEach(n=>parent.insertBefore(n,ref))}insertAfter(parent,ref,node){parent.insertBefore(node,ref.nextSibling)}setInnerHTML(el,value){el.innerHTML=value}getText(el){return el.textContent}setText(el,value){el.textContent=value}getValue(el){return el.value}setValue(el,value){el.value=value}getChecked(el){return el.checked}setChecked(el,value){el.checked=value}createComment(text){return this.getDefaultDocument().createComment(text)}createTemplate(html){const t=this.getDefaultDocument().createElement(\"template\");return t.innerHTML=html,t}createElement(tagName,doc){return(doc=doc||this.getDefaultDocument()).createElement(tagName)}createElementNS(ns,tagName,doc){return(doc=doc||this.getDefaultDocument()).createElementNS(ns,tagName)}createTextNode(text,doc){return(doc=doc||this.getDefaultDocument()).createTextNode(text)}createScriptTag(attrName,attrValue,doc){const el=(doc=doc||this.getDefaultDocument()).createElement(\"SCRIPT\");return el.setAttribute(attrName,attrValue),el}createStyleElement(css,doc){const style=(doc=doc||this.getDefaultDocument()).createElement(\"style\");return this.appendChild(style,this.createTextNode(css,doc)),style}createShadowRoot(el){return el.createShadowRoot()}getShadowRoot(el){return el.shadowRoot}getHost(el){return el.host}clone(node){return node.cloneNode(!0)}getElementsByClassName(element,name){return element.getElementsByClassName(name)}getElementsByTagName(element,name){return element.getElementsByTagName(name)}classList(element){return Array.prototype.slice.call(element.classList,0)}addClass(element,className){element.classList.add(className)}removeClass(element,className){element.classList.remove(className)}hasClass(element,className){return element.classList.contains(className)}setStyle(element,styleName,styleValue){element.style[styleName]=styleValue}removeStyle(element,stylename){element.style[stylename]=\"\"}getStyle(element,stylename){return element.style[stylename]}hasStyle(element,styleName,styleValue){const value=this.getStyle(element,styleName)||\"\";return styleValue?value==styleValue:value.length>0}tagName(element){return element.tagName}attributeMap(element){const res=new Map,elAttrs=element.attributes;for(let i=0;i<elAttrs.length;i++){const attrib=elAttrs.item(i);res.set(attrib.name,attrib.value)}return res}hasAttribute(element,attribute){return element.hasAttribute(attribute)}hasAttributeNS(element,ns,attribute){return element.hasAttributeNS(ns,attribute)}getAttribute(element,attribute){return element.getAttribute(attribute)}getAttributeNS(element,ns,name){return element.getAttributeNS(ns,name)}setAttribute(element,name,value){element.setAttribute(name,value)}setAttributeNS(element,ns,name,value){element.setAttributeNS(ns,name,value)}removeAttribute(element,attribute){element.removeAttribute(attribute)}removeAttributeNS(element,ns,name){element.removeAttributeNS(ns,name)}templateAwareRoot(el){return this.isTemplateElement(el)?this.content(el):el}createHtmlDocument(){return document.implementation.createHTMLDocument(\"fakeTitle\")}getDefaultDocument(){return document}getBoundingClientRect(el){try{return el.getBoundingClientRect()}catch(_a){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}}getTitle(doc){return doc.title}setTitle(doc,newTitle){doc.title=newTitle||\"\"}elementMatches(n,selector){return!!this.isElementNode(n)&&(n.matches&&n.matches(selector)||n.msMatchesSelector&&n.msMatchesSelector(selector)||n.webkitMatchesSelector&&n.webkitMatchesSelector(selector))}isTemplateElement(el){return this.isElementNode(el)&&\"TEMPLATE\"===el.nodeName}isTextNode(node){return node.nodeType===Node.TEXT_NODE}isCommentNode(node){return node.nodeType===Node.COMMENT_NODE}isElementNode(node){return node.nodeType===Node.ELEMENT_NODE}hasShadowRoot(node){return null!=node.shadowRoot&&node instanceof HTMLElement}isShadowRoot(node){return node instanceof DocumentFragment}importIntoDoc(node){return document.importNode(this.templateAwareRoot(node),!0)}adoptNode(node){return document.adoptNode(node)}getHref(el){return el.getAttribute(\"href\")}getEventKey(event){let key=event.key;if(null==key){if(key=event.keyIdentifier,null==key)return\"Unidentified\";key.startsWith(\"U+\")&&(key=String.fromCharCode(parseInt(key.substring(2),16)),3===event.location&&_chromeNumKeyPadMap.hasOwnProperty(key)&&(key=_chromeNumKeyPadMap[key]))}return _keyMap[key]||key}getGlobalEventTarget(doc,target){return\"window\"===target?window:\"document\"===target?doc:\"body\"===target?doc.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(doc){const href=baseElement||(baseElement=document.querySelector(\"base\"),baseElement)?baseElement.getAttribute(\"href\"):null;return null==href?null:(url=href,urlParsingNode||(urlParsingNode=document.createElement(\"a\")),urlParsingNode.setAttribute(\"href\",url),\"/\"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:\"/\"+urlParsingNode.pathname);var url}resetBaseElement(){baseElement=null}getUserAgent(){return window.navigator.userAgent}setData(element,name,value){this.setAttribute(element,\"data-\"+name,value)}getData(element,name){return this.getAttribute(element,\"data-\"+name)}getComputedStyle(element){return getComputedStyle(element)}supportsWebAnimation(){return\"function\"==typeof Element.prototype.animate}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(name){return function(cookieStr,name){name=encodeURIComponent(name);for(const cookie of cookieStr.split(\";\")){const eqIndex=cookie.indexOf(\"=\"),[cookieName,cookieValue]=-1==eqIndex?[cookie,\"\"]:[cookie.slice(0,eqIndex),cookie.slice(eqIndex+1)];if(cookieName.trim()===name)return decodeURIComponent(cookieValue)}return null}(document.cookie,name)}setCookie(name,value){document.cookie=encodeURIComponent(name)+\"=\"+encodeURIComponent(value)}}let urlParsingNode,baseElement=null;function supportsState(){return!!window.history.pushState}const TRANSITION_ID=new InjectionToken(\"TRANSITION_ID\"),SERVER_TRANSITION_PROVIDERS=[{provide:APP_INITIALIZER,useFactory:function(transitionId,document,injector){return()=>{injector.get(ApplicationInitStatus).donePromise.then(()=>{const dom=getDOM();Array.prototype.slice.apply(dom.querySelectorAll(document,\"style[ng-transition]\")).filter(el=>dom.getAttribute(el,\"ng-transition\")===transitionId).forEach(el=>dom.remove(el))})}},deps:[TRANSITION_ID,DOCUMENT,Injector],multi:!0}];class platform_browser_BrowserGetTestability{static init(){var getter;getter=new platform_browser_BrowserGetTestability,_testabilityGetter=getter}addToWindow(registry){_global.getAngularTestability=(elem,findInAncestors=!0)=>{const testability=registry.findTestabilityInTree(elem,findInAncestors);if(null==testability)throw new Error(\"Could not find testability for element.\");return testability},_global.getAllAngularTestabilities=()=>registry.getAllTestabilities(),_global.getAllAngularRootElements=()=>registry.getAllRootElements(),_global.frameworkStabilizers||(_global.frameworkStabilizers=[]),_global.frameworkStabilizers.push(callback=>{const testabilities=_global.getAllAngularTestabilities();let count=testabilities.length,didWork=!1;const decrement=function(didWork_){didWork=didWork||didWork_,count--,0==count&&callback(didWork)};testabilities.forEach((function(testability){testability.whenStable(decrement)}))})}findTestabilityInTree(registry,elem,findInAncestors){if(null==elem)return null;const t=registry.getTestability(elem);return null!=t?t:findInAncestors?getDOM().isShadowRoot(elem)?this.findTestabilityInTree(registry,getDOM().getHost(elem),!0):this.findTestabilityInTree(registry,getDOM().parentElement(elem),!0):null}}function exportNgVar(name,value){\"undefined\"!=typeof COMPILED&&COMPILED||((_global.ng=_global.ng||{})[name]=value)}const CORE_TOKENS=(()=>({ApplicationRef:core_ApplicationRef,NgZone:NgZone}))();function inspectNativeElement(element){return getDebugNode(element)}const EVENT_MANAGER_PLUGINS=new InjectionToken(\"EventManagerPlugins\");class EventManager{constructor(plugins,_zone){this._zone=_zone,this._eventNameToPlugin=new Map,plugins.forEach(p=>p.manager=this),this._plugins=plugins.slice().reverse()}addEventListener(element,eventName,handler){return this._findPluginFor(eventName).addEventListener(element,eventName,handler)}addGlobalEventListener(target,eventName,handler){return this._findPluginFor(eventName).addGlobalEventListener(target,eventName,handler)}getZone(){return this._zone}_findPluginFor(eventName){const plugin=this._eventNameToPlugin.get(eventName);if(plugin)return plugin;const plugins=this._plugins;for(let i=0;i<plugins.length;i++){const plugin=plugins[i];if(plugin.supports(eventName))return this._eventNameToPlugin.set(eventName,plugin),plugin}throw new Error(\"No event manager plugin found for event \"+eventName)}}class EventManagerPlugin{constructor(_doc){this._doc=_doc}addGlobalEventListener(element,eventName,handler){const target=getDOM().getGlobalEventTarget(this._doc,element);if(!target)throw new Error(`Unsupported event target ${target} for event ${eventName}`);return this.addEventListener(target,eventName,handler)}}class SharedStylesHost{constructor(){this._stylesSet=new Set}addStyles(styles){const additions=new Set;styles.forEach(style=>{this._stylesSet.has(style)||(this._stylesSet.add(style),additions.add(style))}),this.onStylesAdded(additions)}onStylesAdded(additions){}getAllStyles(){return Array.from(this._stylesSet)}}class DomSharedStylesHost extends SharedStylesHost{constructor(_doc){super(),this._doc=_doc,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(_doc.head)}_addStylesToHost(styles,host){styles.forEach(style=>{const styleEl=this._doc.createElement(\"style\");styleEl.textContent=style,this._styleNodes.add(host.appendChild(styleEl))})}addHost(hostNode){this._addStylesToHost(this._stylesSet,hostNode),this._hostNodes.add(hostNode)}removeHost(hostNode){this._hostNodes.delete(hostNode)}onStylesAdded(additions){this._hostNodes.forEach(hostNode=>this._addStylesToHost(additions,hostNode))}ngOnDestroy(){this._styleNodes.forEach(styleNode=>getDOM().remove(styleNode))}}const NAMESPACE_URIS={svg:\"http://www.w3.org/2000/svg\",xhtml:\"http://www.w3.org/1999/xhtml\",xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\",xmlns:\"http://www.w3.org/2000/xmlns/\"},COMPONENT_REGEX=/%COMP%/g;function flattenStyles(compId,styles,target){for(let i=0;i<styles.length;i++){let style=styles[i];Array.isArray(style)?flattenStyles(compId,style,target):(style=style.replace(COMPONENT_REGEX,compId),target.push(style))}return target}function decoratePreventDefault(eventHandler){return event=>{!1===eventHandler(event)&&(event.preventDefault(),event.returnValue=!1)}}class platform_browser_DomRendererFactory2{constructor(eventManager,sharedStylesHost,appId){this.eventManager=eventManager,this.sharedStylesHost=sharedStylesHost,this.appId=appId,this.rendererByCompId=new Map,this.defaultRenderer=new platform_browser_DefaultDomRenderer2(eventManager)}createRenderer(element,type){if(!element||!type)return this.defaultRenderer;switch(type.encapsulation){case ViewEncapsulation.Emulated:{let renderer=this.rendererByCompId.get(type.id);return renderer||(renderer=new EmulatedEncapsulationDomRenderer2(this.eventManager,this.sharedStylesHost,type,this.appId),this.rendererByCompId.set(type.id,renderer)),renderer.applyToHost(element),renderer}case ViewEncapsulation.Native:case ViewEncapsulation.ShadowDom:return new platform_browser_ShadowDomRenderer(this.eventManager,this.sharedStylesHost,element,type);default:if(!this.rendererByCompId.has(type.id)){const styles=flattenStyles(type.id,type.styles,[]);this.sharedStylesHost.addStyles(styles),this.rendererByCompId.set(type.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}class platform_browser_DefaultDomRenderer2{constructor(eventManager){this.eventManager=eventManager,this.data=Object.create(null)}destroy(){}createElement(name,namespace){return namespace?document.createElementNS(NAMESPACE_URIS[namespace]||namespace,name):document.createElement(name)}createComment(value){return document.createComment(value)}createText(value){return document.createTextNode(value)}appendChild(parent,newChild){parent.appendChild(newChild)}insertBefore(parent,newChild,refChild){parent&&parent.insertBefore(newChild,refChild)}removeChild(parent,oldChild){parent&&parent.removeChild(oldChild)}selectRootElement(selectorOrNode,preserveContent){let el=\"string\"==typeof selectorOrNode?document.querySelector(selectorOrNode):selectorOrNode;if(!el)throw new Error(`The selector \"${selectorOrNode}\" did not match any elements`);return preserveContent||(el.textContent=\"\"),el}parentNode(node){return node.parentNode}nextSibling(node){return node.nextSibling}setAttribute(el,name,value,namespace){if(namespace){name=namespace+\":\"+name;const namespaceUri=NAMESPACE_URIS[namespace];namespaceUri?el.setAttributeNS(namespaceUri,name,value):el.setAttribute(name,value)}else el.setAttribute(name,value)}removeAttribute(el,name,namespace){if(namespace){const namespaceUri=NAMESPACE_URIS[namespace];namespaceUri?el.removeAttributeNS(namespaceUri,name):el.removeAttribute(`${namespace}:${name}`)}else el.removeAttribute(name)}addClass(el,name){el.classList.add(name)}removeClass(el,name){el.classList.remove(name)}setStyle(el,style,value,flags){flags&RendererStyleFlags2.DashCase?el.style.setProperty(style,value,flags&RendererStyleFlags2.Important?\"important\":\"\"):el.style[style]=value}removeStyle(el,style,flags){flags&RendererStyleFlags2.DashCase?el.style.removeProperty(style):el.style[style]=\"\"}setProperty(el,name,value){checkNoSyntheticProp(name,\"property\"),el[name]=value}setValue(node,value){node.nodeValue=value}listen(target,event,callback){return checkNoSyntheticProp(event,\"listener\"),\"string\"==typeof target?this.eventManager.addGlobalEventListener(target,event,decoratePreventDefault(callback)):this.eventManager.addEventListener(target,event,decoratePreventDefault(callback))}}const AT_CHARCODE=(()=>\"@\".charCodeAt(0))();function checkNoSyntheticProp(name,nameKind){if(name.charCodeAt(0)===AT_CHARCODE)throw new Error(`Found the synthetic ${nameKind} ${name}. Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.`)}class EmulatedEncapsulationDomRenderer2 extends platform_browser_DefaultDomRenderer2{constructor(eventManager,sharedStylesHost,component,appId){super(eventManager),this.component=component;const styles=flattenStyles(appId+\"-\"+component.id,component.styles,[]);sharedStylesHost.addStyles(styles),this.contentAttr=\"_ngcontent-%COMP%\".replace(COMPONENT_REGEX,appId+\"-\"+component.id),this.hostAttr=function(componentShortId){return\"_nghost-%COMP%\".replace(COMPONENT_REGEX,componentShortId)}(appId+\"-\"+component.id)}applyToHost(element){super.setAttribute(element,this.hostAttr,\"\")}createElement(parent,name){const el=super.createElement(parent,name);return super.setAttribute(el,this.contentAttr,\"\"),el}}class platform_browser_ShadowDomRenderer extends platform_browser_DefaultDomRenderer2{constructor(eventManager,sharedStylesHost,hostEl,component){super(eventManager),this.sharedStylesHost=sharedStylesHost,this.hostEl=hostEl,this.component=component,this.shadowRoot=component.encapsulation===ViewEncapsulation.ShadowDom?hostEl.attachShadow({mode:\"open\"}):hostEl.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const styles=flattenStyles(component.id,component.styles,[]);for(let i=0;i<styles.length;i++){const styleEl=document.createElement(\"style\");styleEl.textContent=styles[i],this.shadowRoot.appendChild(styleEl)}}nodeOrShadowRoot(node){return node===this.hostEl?this.shadowRoot:node}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(parent,newChild){return super.appendChild(this.nodeOrShadowRoot(parent),newChild)}insertBefore(parent,newChild,refChild){return super.insertBefore(this.nodeOrShadowRoot(parent),newChild,refChild)}removeChild(parent,oldChild){return super.removeChild(this.nodeOrShadowRoot(parent),oldChild)}parentNode(node){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(node)))}}const __symbol__=(()=>\"undefined\"!=typeof Zone&&Zone.__symbol__||function(v){return\"__zone_symbol__\"+v})(),ADD_EVENT_LISTENER=__symbol__(\"addEventListener\"),REMOVE_EVENT_LISTENER=__symbol__(\"removeEventListener\"),symbolNames={},stopSymbol=\"__zone_symbol__propagationStopped\",blackListedMap=(()=>{const blackListedEvents=\"undefined\"!=typeof Zone&&Zone[__symbol__(\"BLACK_LISTED_EVENTS\")];if(blackListedEvents){const res={};return blackListedEvents.forEach(eventName=>{res[eventName]=eventName}),res}})(),isBlackListedEvent=function(eventName){return!!blackListedMap&&blackListedMap.hasOwnProperty(eventName)},globalListener=function(event){const symbolName=symbolNames[event.type];if(!symbolName)return;const taskDatas=this[symbolName];if(!taskDatas)return;const args=[event];if(1===taskDatas.length){const taskData=taskDatas[0];return taskData.zone!==Zone.current?taskData.zone.run(taskData.handler,this,args):taskData.handler.apply(this,args)}{const copiedTasks=taskDatas.slice();for(let i=0;i<copiedTasks.length&&!0!==event[stopSymbol];i++){const taskData=copiedTasks[i];taskData.zone!==Zone.current?taskData.zone.run(taskData.handler,this,args):taskData.handler.apply(this,args)}}};class platform_browser_DomEventsPlugin extends EventManagerPlugin{constructor(doc,ngZone,platformId){super(doc),this.ngZone=ngZone,platformId&&isPlatformServer(platformId)||this.patchEvent()}patchEvent(){if(\"undefined\"==typeof Event||!Event||!Event.prototype)return;if(Event.prototype.__zone_symbol__stopImmediatePropagation)return;const delegate=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[stopSymbol]=!0),delegate&&delegate.apply(this,arguments)}}supports(eventName){return!0}addEventListener(element,eventName,handler){let callback=handler;if(!element[ADD_EVENT_LISTENER]||NgZone.isInAngularZone()&&!isBlackListedEvent(eventName))element.addEventListener(eventName,callback,!1);else{let symbolName=symbolNames[eventName];symbolName||(symbolName=symbolNames[eventName]=__symbol__(\"ANGULAR\"+eventName+\"FALSE\"));let taskDatas=element[symbolName];const globalListenerRegistered=taskDatas&&taskDatas.length>0;taskDatas||(taskDatas=element[symbolName]=[]);const zone=isBlackListedEvent(eventName)?Zone.root:Zone.current;if(0===taskDatas.length)taskDatas.push({zone:zone,handler:callback});else{let callbackRegistered=!1;for(let i=0;i<taskDatas.length;i++)if(taskDatas[i].handler===callback){callbackRegistered=!0;break}callbackRegistered||taskDatas.push({zone:zone,handler:callback})}globalListenerRegistered||element[ADD_EVENT_LISTENER](eventName,globalListener,!1)}return()=>this.removeEventListener(element,eventName,callback)}removeEventListener(target,eventName,callback){let underlyingRemove=target[REMOVE_EVENT_LISTENER];if(!underlyingRemove)return target.removeEventListener.apply(target,[eventName,callback,!1]);let symbolName=symbolNames[eventName],taskDatas=symbolName&&target[symbolName];if(!taskDatas)return target.removeEventListener.apply(target,[eventName,callback,!1]);let found=!1;for(let i=0;i<taskDatas.length;i++)if(taskDatas[i].handler===callback){found=!0,taskDatas.splice(i,1);break}found?0===taskDatas.length&&underlyingRemove.apply(target,[eventName,globalListener,!1]):target.removeEventListener.apply(target,[eventName,callback,!1])}}const EVENT_NAMES={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},HAMMER_GESTURE_CONFIG=new InjectionToken(\"HammerGestureConfig\"),HAMMER_LOADER=new InjectionToken(\"HammerLoader\");class HammerGesturesPlugin extends EventManagerPlugin{constructor(doc,_config,console,loader){super(doc),this._config=_config,this.console=console,this.loader=loader}supports(eventName){return!(!EVENT_NAMES.hasOwnProperty(eventName.toLowerCase())&&!this.isCustomEvent(eventName)||!window.Hammer&&!this.loader&&(this.console.warn(`The \"${eventName}\" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.`),1))}addEventListener(element,eventName,handler){const zone=this.manager.getZone();if(eventName=eventName.toLowerCase(),!window.Hammer&&this.loader){let cancelRegistration=!1,deregister=()=>{cancelRegistration=!0};return this.loader().then(()=>{if(!window.Hammer)return this.console.warn(\"The custom HAMMER_LOADER completed, but Hammer.JS is not present.\"),void(deregister=()=>{});cancelRegistration||(deregister=this.addEventListener(element,eventName,handler))}).catch(()=>{this.console.warn(`The \"${eventName}\" event cannot be bound because the custom Hammer.JS loader failed.`),deregister=()=>{}}),()=>{deregister()}}return zone.runOutsideAngular(()=>{const mc=this._config.buildHammer(element),callback=function(eventObj){zone.runGuarded((function(){handler(eventObj)}))};return mc.on(eventName,callback),()=>{mc.off(eventName,callback),\"function\"==typeof mc.destroy&&mc.destroy()}})}isCustomEvent(eventName){return this._config.events.indexOf(eventName)>-1}}const MODIFIER_KEYS=[\"alt\",\"control\",\"meta\",\"shift\"],MODIFIER_KEY_GETTERS={alt:event=>event.altKey,control:event=>event.ctrlKey,meta:event=>event.metaKey,shift:event=>event.shiftKey};class KeyEventsPlugin extends EventManagerPlugin{constructor(doc){super(doc)}supports(eventName){return null!=KeyEventsPlugin.parseEventName(eventName)}addEventListener(element,eventName,handler){const parsedEvent=KeyEventsPlugin.parseEventName(eventName),outsideHandler=KeyEventsPlugin.eventCallback(parsedEvent.fullKey,handler,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>getDOM().onAndCancel(element,parsedEvent.domEventName,outsideHandler))}static parseEventName(eventName){const parts=eventName.toLowerCase().split(\".\"),domEventName=parts.shift();if(0===parts.length||\"keydown\"!==domEventName&&\"keyup\"!==domEventName)return null;const key=KeyEventsPlugin._normalizeKey(parts.pop());let fullKey=\"\";if(MODIFIER_KEYS.forEach(modifierName=>{const index=parts.indexOf(modifierName);index>-1&&(parts.splice(index,1),fullKey+=modifierName+\".\")}),fullKey+=key,0!=parts.length||0===key.length)return null;const result={};return result.domEventName=domEventName,result.fullKey=fullKey,result}static getEventFullKey(event){let fullKey=\"\",key=getDOM().getEventKey(event);return key=key.toLowerCase(),\" \"===key?key=\"space\":\".\"===key&&(key=\"dot\"),MODIFIER_KEYS.forEach(modifierName=>{modifierName!=key&&(0,MODIFIER_KEY_GETTERS[modifierName])(event)&&(fullKey+=modifierName+\".\")}),fullKey+=key,fullKey}static eventCallback(fullKey,handler,zone){return event=>{KeyEventsPlugin.getEventFullKey(event)===fullKey&&zone.runGuarded(()=>handler(event))}}static _normalizeKey(keyName){switch(keyName){case\"esc\":return\"escape\";default:return keyName}}}class DomSanitizer{}class platform_browser_DomSanitizerImpl extends DomSanitizer{constructor(_doc){super(),this._doc=_doc}sanitize(ctx,value){if(null==value)return null;switch(ctx){case SecurityContext.NONE:return value;case SecurityContext.HTML:return value instanceof SafeHtmlImpl?value.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(value,\"HTML\"),function(defaultDoc,unsafeHtmlInput){let inertBodyElement=null;try{inertBodyHelper=inertBodyHelper||new InertBodyHelper(defaultDoc);let unsafeHtml=unsafeHtmlInput?String(unsafeHtmlInput):\"\";inertBodyElement=inertBodyHelper.getInertBodyElement(unsafeHtml);let mXSSAttempts=5,parsedHtml=unsafeHtml;do{if(0===mXSSAttempts)throw new Error(\"Failed to sanitize html because the input is unstable\");mXSSAttempts--,unsafeHtml=parsedHtml,parsedHtml=inertBodyElement.innerHTML,inertBodyElement=inertBodyHelper.getInertBodyElement(unsafeHtml)}while(unsafeHtml!==parsedHtml);const sanitizer=new SanitizingHtmlSerializer,safeHtml=sanitizer.sanitizeChildren(getTemplateContent(inertBodyElement)||inertBodyElement);return isDevMode()&&sanitizer.sanitizedSomething&&console.warn(\"WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss\"),safeHtml}finally{if(inertBodyElement){const parent=getTemplateContent(inertBodyElement)||inertBodyElement;for(;parent.firstChild;)parent.removeChild(parent.firstChild)}}}(this._doc,String(value)));case SecurityContext.STYLE:return value instanceof SafeStyleImpl?value.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(value,\"Style\"),function(value){if(!(value=String(value).trim()))return\"\";const urlMatch=value.match(URL_RE);return urlMatch&&_sanitizeUrl(urlMatch[1])===urlMatch[1]||value.match(SAFE_STYLE_VALUE)&&function(value){let outsideSingle=!0,outsideDouble=!0;for(let i=0;i<value.length;i++){const c=value.charAt(i);\"'\"===c&&outsideDouble?outsideSingle=!outsideSingle:'\"'===c&&outsideSingle&&(outsideDouble=!outsideDouble)}return outsideSingle&&outsideDouble}(value)?value:(isDevMode()&&console.warn(`WARNING: sanitizing unsafe style value ${value} (see http://g.co/ng/security#xss).`),\"unsafe\")}(value));case SecurityContext.SCRIPT:if(value instanceof SafeScriptImpl)return value.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(value,\"Script\"),new Error(\"unsafe value used in a script context\");case SecurityContext.URL:return value instanceof SafeResourceUrlImpl||value instanceof SafeUrlImpl?value.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(value,\"URL\"),_sanitizeUrl(String(value)));case SecurityContext.RESOURCE_URL:if(value instanceof SafeResourceUrlImpl)return value.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(value,\"ResourceURL\"),new Error(\"unsafe value used in a resource URL context (see http://g.co/ng/security#xss)\");default:throw new Error(`Unexpected SecurityContext ${ctx} (see http://g.co/ng/security#xss)`)}}checkNotSafeValue(value,expectedType){if(value instanceof SafeValueImpl)throw new Error(`Required a safe ${expectedType}, got a ${value.getTypeName()} (see http://g.co/ng/security#xss)`)}bypassSecurityTrustHtml(value){return new SafeHtmlImpl(value)}bypassSecurityTrustStyle(value){return new SafeStyleImpl(value)}bypassSecurityTrustScript(value){return new SafeScriptImpl(value)}bypassSecurityTrustUrl(value){return new SafeUrlImpl(value)}bypassSecurityTrustResourceUrl(value){return new SafeResourceUrlImpl(value)}}class SafeValueImpl{constructor(changingThisBreaksApplicationSecurity){this.changingThisBreaksApplicationSecurity=changingThisBreaksApplicationSecurity}toString(){return\"SafeValue must use [property]=binding: \"+this.changingThisBreaksApplicationSecurity+\" (see http://g.co/ng/security#xss)\"}}class SafeHtmlImpl extends SafeValueImpl{getTypeName(){return\"HTML\"}}class SafeStyleImpl extends SafeValueImpl{getTypeName(){return\"Style\"}}class SafeScriptImpl extends SafeValueImpl{getTypeName(){return\"Script\"}}class SafeUrlImpl extends SafeValueImpl{getTypeName(){return\"URL\"}}class SafeResourceUrlImpl extends SafeValueImpl{getTypeName(){return\"ResourceURL\"}}const platformBrowser=createPlatformFactory(platformCore,\"browser\",[{provide:PLATFORM_ID,useValue:\"browser\"},{provide:PLATFORM_INITIALIZER,useValue:function(){platform_browser_BrowserDomAdapter.makeCurrent(),platform_browser_BrowserGetTestability.init()},multi:!0},{provide:PlatformLocation,useClass:class extends PlatformLocation{constructor(_doc){super(),this._doc=_doc,this._init()}_init(){this.location=getDOM().getLocation(),this._history=getDOM().getHistory()}getBaseHrefFromDOM(){return getDOM().getBaseHref(this._doc)}onPopState(fn){getDOM().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"popstate\",fn,!1)}onHashChange(fn){getDOM().getGlobalEventTarget(this._doc,\"window\").addEventListener(\"hashchange\",fn,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(newPath){this.location.pathname=newPath}pushState(state,title,url){supportsState()?this._history.pushState(state,title,url):this.location.hash=url}replaceState(state,title,url){supportsState()?this._history.replaceState(state,title,url):this.location.hash=url}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}},deps:[DOCUMENT]},{provide:DOCUMENT,useFactory:function(){return document},deps:[]}]);function errorHandler(){return new ErrorHandler}class platform_browser_BrowserModule{constructor(parentModule){if(parentModule)throw new Error(\"BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.\")}static withServerTransition(params){return{ngModule:platform_browser_BrowserModule,providers:[{provide:APP_ID,useValue:params.appId},{provide:TRANSITION_ID,useExisting:APP_ID},SERVER_TRANSITION_PROVIDERS]}}}\"undefined\"!=typeof window&&window;class RouterEvent{constructor(id,url){this.id=id,this.url=url}}class NavigationStart extends RouterEvent{constructor(id,url,navigationTrigger=\"imperative\",restoredState=null){super(id,url),this.navigationTrigger=navigationTrigger,this.restoredState=restoredState}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class NavigationEnd extends RouterEvent{constructor(id,url,urlAfterRedirects){super(id,url),this.urlAfterRedirects=urlAfterRedirects}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class NavigationCancel extends RouterEvent{constructor(id,url,reason){super(id,url),this.reason=reason}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class NavigationError extends RouterEvent{constructor(id,url,error){super(id,url),this.error=error}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class RoutesRecognized extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GuardsCheckStart extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GuardsCheckEnd extends RouterEvent{constructor(id,url,urlAfterRedirects,state,shouldActivate){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state,this.shouldActivate=shouldActivate}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ResolveStart extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ResolveEnd extends RouterEvent{constructor(id,url,urlAfterRedirects,state){super(id,url),this.urlAfterRedirects=urlAfterRedirects,this.state=state}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RouteConfigLoadStart{constructor(route){this.route=route}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class RouteConfigLoadEnd{constructor(route){this.route=route}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class ChildActivationStart{constructor(snapshot){this.snapshot=snapshot}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class ChildActivationEnd{constructor(snapshot){this.snapshot=snapshot}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class ActivationStart{constructor(snapshot){this.snapshot=snapshot}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class ActivationEnd{constructor(snapshot){this.snapshot=snapshot}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||\"\"}')`}}class Scroll{constructor(routerEvent,position,anchor){this.routerEvent=routerEvent,this.position=position,this.anchor=anchor}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class EmptyOutletComponent{}class ParamsAsMap{constructor(params){this.params=params||{}}has(name){return this.params.hasOwnProperty(name)}get(name){if(this.has(name)){const v=this.params[name];return Array.isArray(v)?v[0]:v}return null}getAll(name){if(this.has(name)){const v=this.params[name];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function convertToParamMap(params){return new ParamsAsMap(params)}function navigationCancelingError(message){const error=Error(\"NavigationCancelingError: \"+message);return error.ngNavigationCancelingError=!0,error}function defaultUrlMatcher(segments,segmentGroup,route){const parts=route.path.split(\"/\");if(parts.length>segments.length)return null;if(\"full\"===route.pathMatch&&(segmentGroup.hasChildren()||parts.length<segments.length))return null;const posParams={};for(let index=0;index<parts.length;index++){const part=parts[index],segment=segments[index];if(part.startsWith(\":\"))posParams[part.substring(1)]=segment;else if(part!==segment.path)return null}return{consumed:segments.slice(0,parts.length),posParams:posParams}}class LoadedRouterConfig{constructor(routes,module){this.routes=routes,this.module=module}}function validateConfig(config,parentPath=\"\"){for(let i=0;i<config.length;i++){const route=config[i];router_validateNode(route,getFullPath(parentPath,route))}}function router_validateNode(route,fullPath){if(!route)throw new Error(`\\n      Invalid configuration of route '${fullPath}': Encountered undefined route.\\n      The reason might be an extra comma.\\n\\n      Example:\\n      const routes: Routes = [\\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\\n        { path: 'detail/:id', component: HeroDetailComponent }\\n      ];\\n    `);if(Array.isArray(route))throw new Error(`Invalid configuration of route '${fullPath}': Array cannot be specified`);if(!route.component&&!route.children&&!route.loadChildren&&route.outlet&&\"primary\"!==route.outlet)throw new Error(`Invalid configuration of route '${fullPath}': a componentless route without children or loadChildren cannot have a named outlet set`);if(route.redirectTo&&route.children)throw new Error(`Invalid configuration of route '${fullPath}': redirectTo and children cannot be used together`);if(route.redirectTo&&route.loadChildren)throw new Error(`Invalid configuration of route '${fullPath}': redirectTo and loadChildren cannot be used together`);if(route.children&&route.loadChildren)throw new Error(`Invalid configuration of route '${fullPath}': children and loadChildren cannot be used together`);if(route.redirectTo&&route.component)throw new Error(`Invalid configuration of route '${fullPath}': redirectTo and component cannot be used together`);if(route.path&&route.matcher)throw new Error(`Invalid configuration of route '${fullPath}': path and matcher cannot be used together`);if(void 0===route.redirectTo&&!route.component&&!route.children&&!route.loadChildren)throw new Error(`Invalid configuration of route '${fullPath}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===route.path&&void 0===route.matcher)throw new Error(`Invalid configuration of route '${fullPath}': routes must have either a path or a matcher specified`);if(\"string\"==typeof route.path&&\"/\"===route.path.charAt(0))throw new Error(`Invalid configuration of route '${fullPath}': path cannot start with a slash`);if(\"\"===route.path&&void 0!==route.redirectTo&&void 0===route.pathMatch)throw new Error(`Invalid configuration of route '{path: \"${fullPath}\", redirectTo: \"${route.redirectTo}\"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==route.pathMatch&&\"full\"!==route.pathMatch&&\"prefix\"!==route.pathMatch)throw new Error(`Invalid configuration of route '${fullPath}': pathMatch can only be set to 'prefix' or 'full'`);route.children&&validateConfig(route.children,fullPath)}function getFullPath(parentPath,currentRoute){return currentRoute?parentPath||currentRoute.path?parentPath&&!currentRoute.path?parentPath+\"/\":!parentPath&&currentRoute.path?currentRoute.path:`${parentPath}/${currentRoute.path}`:\"\":parentPath}function standardizeConfig(r){const children=r.children&&r.children.map(standardizeConfig),c=children?Object.assign({},r,{children:children}):Object.assign({},r);return!c.component&&(children||c.loadChildren)&&c.outlet&&\"primary\"!==c.outlet&&(c.component=EmptyOutletComponent),c}function shallowEqual(a,b){const k1=Object.keys(a),k2=Object.keys(b);if(!k1||!k2||k1.length!=k2.length)return!1;let key;for(let i=0;i<k1.length;i++)if(key=k1[i],a[key]!==b[key])return!1;return!0}function router_flatten(arr){return Array.prototype.concat.apply([],arr)}function router_last(a){return a.length>0?a[a.length-1]:null}function forEach(map,callback){for(const prop in map)map.hasOwnProperty(prop)&&callback(map[prop],prop)}function wrapIntoObservable(value){return isObservable(value)?value:core_isPromise(value)?from(Promise.resolve(value)):of(value)}function containsTree(container,containee,exact){return exact?function(container,containee){return shallowEqual(container,containee)}(container.queryParams,containee.queryParams)&&function equalSegmentGroups(container,containee){if(!equalPath(container.segments,containee.segments))return!1;if(container.numberOfChildren!==containee.numberOfChildren)return!1;for(const c in containee.children){if(!container.children[c])return!1;if(!equalSegmentGroups(container.children[c],containee.children[c]))return!1}return!0}(container.root,containee.root):function(container,containee){return Object.keys(containee).length<=Object.keys(container).length&&Object.keys(containee).every(key=>containee[key]===container[key])}(container.queryParams,containee.queryParams)&&function containsSegmentGroup(container,containee){return function containsSegmentGroupHelper(container,containee,containeePaths){if(container.segments.length>containeePaths.length)return!!equalPath(container.segments.slice(0,containeePaths.length),containeePaths)&&!containee.hasChildren();if(container.segments.length===containeePaths.length){if(!equalPath(container.segments,containeePaths))return!1;for(const c in containee.children){if(!container.children[c])return!1;if(!containsSegmentGroup(container.children[c],containee.children[c]))return!1}return!0}{const current=containeePaths.slice(0,container.segments.length),next=containeePaths.slice(container.segments.length);return!!equalPath(container.segments,current)&&!!container.children.primary&&containsSegmentGroupHelper(container.children.primary,containee,next)}}(container,containee,containee.segments)}(container.root,containee.root)}class UrlTree{constructor(root,queryParams,fragment){this.root=root,this.queryParams=queryParams,this.fragment=fragment}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=convertToParamMap(this.queryParams)),this._queryParamMap}toString(){return DEFAULT_SERIALIZER.serialize(this)}}class UrlSegmentGroup{constructor(segments,children){this.segments=segments,this.children=children,this.parent=null,forEach(children,(v,k)=>v.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return serializePaths(this)}}class UrlSegment{constructor(path,parameters){this.path=path,this.parameters=parameters}get parameterMap(){return this._parameterMap||(this._parameterMap=convertToParamMap(this.parameters)),this._parameterMap}toString(){return serializePath(this)}}function equalPath(as,bs){return as.length===bs.length&&as.every((a,i)=>a.path===bs[i].path)}function mapChildrenIntoArray(segment,fn){let res=[];return forEach(segment.children,(child,childOutlet)=>{\"primary\"===childOutlet&&(res=res.concat(fn(child,childOutlet)))}),forEach(segment.children,(child,childOutlet)=>{\"primary\"!==childOutlet&&(res=res.concat(fn(child,childOutlet)))}),res}class UrlSerializer{}class DefaultUrlSerializer{parse(url){const p=new UrlParser(url);return new UrlTree(p.parseRootSegment(),p.parseQueryParams(),p.parseFragment())}serialize(tree){return`${\"/\"+function serializeSegment(segment,root){if(!segment.hasChildren())return serializePaths(segment);if(root){const primary=segment.children.primary?serializeSegment(segment.children.primary,!1):\"\",children=[];return forEach(segment.children,(v,k)=>{\"primary\"!==k&&children.push(`${k}:${serializeSegment(v,!1)}`)}),children.length>0?`${primary}(${children.join(\"//\")})`:primary}{const children=mapChildrenIntoArray(segment,(v,k)=>\"primary\"===k?[serializeSegment(segment.children.primary,!1)]:[`${k}:${serializeSegment(v,!1)}`]);return`${serializePaths(segment)}/(${children.join(\"//\")})`}}(tree.root,!0)}${function(params){const strParams=Object.keys(params).map(name=>{const value=params[name];return Array.isArray(value)?value.map(v=>`${encodeUriQuery(name)}=${encodeUriQuery(v)}`).join(\"&\"):`${encodeUriQuery(name)}=${encodeUriQuery(value)}`});return strParams.length?\"?\"+strParams.join(\"&\"):\"\"}(tree.queryParams)}${\"string\"==typeof tree.fragment?\"#\"+encodeURI(tree.fragment):\"\"}`}}const DEFAULT_SERIALIZER=new DefaultUrlSerializer;function serializePaths(segment){return segment.segments.map(p=>serializePath(p)).join(\"/\")}function encodeUriString(s){return encodeURIComponent(s).replace(/%40/g,\"@\").replace(/%3A/gi,\":\").replace(/%24/g,\"$\").replace(/%2C/gi,\",\")}function encodeUriQuery(s){return encodeUriString(s).replace(/%3B/gi,\";\")}function encodeUriSegment(s){return encodeUriString(s).replace(/\\(/g,\"%28\").replace(/\\)/g,\"%29\").replace(/%26/gi,\"&\")}function decode(s){return decodeURIComponent(s)}function decodeQuery(s){return decode(s.replace(/\\+/g,\"%20\"))}function serializePath(path){return`${encodeUriSegment(path.path)}${params=path.parameters,Object.keys(params).map(key=>`;${encodeUriSegment(key)}=${encodeUriSegment(params[key])}`).join(\"\")}`;var params}const SEGMENT_RE=/^[^\\/()?;=#]+/;function matchSegments(str){const match=str.match(SEGMENT_RE);return match?match[0]:\"\"}const QUERY_PARAM_RE=/^[^=?&#]+/,QUERY_PARAM_VALUE_RE=/^[^?&#]+/;class UrlParser{constructor(url){this.url=url,this.remaining=url}parseRootSegment(){return this.consumeOptional(\"/\"),\"\"===this.remaining||this.peekStartsWith(\"?\")||this.peekStartsWith(\"#\")?new UrlSegmentGroup([],{}):new UrlSegmentGroup([],this.parseChildren())}parseQueryParams(){const params={};if(this.consumeOptional(\"?\"))do{this.parseQueryParam(params)}while(this.consumeOptional(\"&\"));return params}parseFragment(){return this.consumeOptional(\"#\")?decodeURIComponent(this.remaining):null}parseChildren(){if(\"\"===this.remaining)return{};this.consumeOptional(\"/\");const segments=[];for(this.peekStartsWith(\"(\")||segments.push(this.parseSegment());this.peekStartsWith(\"/\")&&!this.peekStartsWith(\"//\")&&!this.peekStartsWith(\"/(\");)this.capture(\"/\"),segments.push(this.parseSegment());let children={};this.peekStartsWith(\"/(\")&&(this.capture(\"/\"),children=this.parseParens(!0));let res={};return this.peekStartsWith(\"(\")&&(res=this.parseParens(!1)),(segments.length>0||Object.keys(children).length>0)&&(res.primary=new UrlSegmentGroup(segments,children)),res}parseSegment(){const path=matchSegments(this.remaining);if(\"\"===path&&this.peekStartsWith(\";\"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(path),new UrlSegment(decode(path),this.parseMatrixParams())}parseMatrixParams(){const params={};for(;this.consumeOptional(\";\");)this.parseParam(params);return params}parseParam(params){const key=matchSegments(this.remaining);if(!key)return;this.capture(key);let value=\"\";if(this.consumeOptional(\"=\")){const valueMatch=matchSegments(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}params[decode(key)]=decode(value)}parseQueryParam(params){const key=function(str){const match=str.match(QUERY_PARAM_RE);return match?match[0]:\"\"}(this.remaining);if(!key)return;this.capture(key);let value=\"\";if(this.consumeOptional(\"=\")){const valueMatch=function(str){const match=str.match(QUERY_PARAM_VALUE_RE);return match?match[0]:\"\"}(this.remaining);valueMatch&&(value=valueMatch,this.capture(value))}const decodedKey=decodeQuery(key),decodedVal=decodeQuery(value);if(params.hasOwnProperty(decodedKey)){let currentVal=params[decodedKey];Array.isArray(currentVal)||(currentVal=[currentVal],params[decodedKey]=currentVal),currentVal.push(decodedVal)}else params[decodedKey]=decodedVal}parseParens(allowPrimary){const segments={};for(this.capture(\"(\");!this.consumeOptional(\")\")&&this.remaining.length>0;){const path=matchSegments(this.remaining),next=this.remaining[path.length];if(\"/\"!==next&&\")\"!==next&&\";\"!==next)throw new Error(`Cannot parse url '${this.url}'`);let outletName=void 0;path.indexOf(\":\")>-1?(outletName=path.substr(0,path.indexOf(\":\")),this.capture(outletName),this.capture(\":\")):allowPrimary&&(outletName=\"primary\");const children=this.parseChildren();segments[outletName]=1===Object.keys(children).length?children.primary:new UrlSegmentGroup([],children),this.consumeOptional(\"//\")}return segments}peekStartsWith(str){return this.remaining.startsWith(str)}consumeOptional(str){return!!this.peekStartsWith(str)&&(this.remaining=this.remaining.substring(str.length),!0)}capture(str){if(!this.consumeOptional(str))throw new Error(`Expected \"${str}\".`)}}class Tree{constructor(root){this._root=root}get root(){return this._root.value}parent(t){const p=this.pathFromRoot(t);return p.length>1?p[p.length-2]:null}children(t){const n=findNode(t,this._root);return n?n.children.map(t=>t.value):[]}firstChild(t){const n=findNode(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const p=findPath(t,this._root);return p.length<2?[]:p[p.length-2].children.map(c=>c.value).filter(cc=>cc!==t)}pathFromRoot(t){return findPath(t,this._root).map(s=>s.value)}}function findNode(value,node){if(value===node.value)return node;for(const child of node.children){const node=findNode(value,child);if(node)return node}return null}function findPath(value,node){if(value===node.value)return[node];for(const child of node.children){const path=findPath(value,child);if(path.length)return path.unshift(node),path}return[]}class TreeNode{constructor(value,children){this.value=value,this.children=children}toString(){return`TreeNode(${this.value})`}}function nodeChildrenAsMap(node){const map={};return node&&node.children.forEach(child=>map[child.value.outlet]=child),map}class RouterState extends Tree{constructor(root,snapshot){super(root),this.snapshot=snapshot,setRouterState(this,root)}toString(){return this.snapshot.toString()}}function createEmptyState(urlTree,rootComponent){const snapshot=function(urlTree,rootComponent){const activated=new ActivatedRouteSnapshot([],{},{},\"\",{},\"primary\",rootComponent,null,urlTree.root,-1,{});return new RouterStateSnapshot(\"\",new TreeNode(activated,[]))}(urlTree,rootComponent),emptyUrl=new BehaviorSubject_BehaviorSubject([new UrlSegment(\"\",{})]),emptyParams=new BehaviorSubject_BehaviorSubject({}),emptyData=new BehaviorSubject_BehaviorSubject({}),emptyQueryParams=new BehaviorSubject_BehaviorSubject({}),fragment=new BehaviorSubject_BehaviorSubject(\"\"),activated=new router_ActivatedRoute(emptyUrl,emptyParams,emptyQueryParams,fragment,emptyData,\"primary\",rootComponent,snapshot.root);return activated.snapshot=snapshot.root,new RouterState(new TreeNode(activated,[]),snapshot)}class router_ActivatedRoute{constructor(url,params,queryParams,fragment,data,outlet,component,futureSnapshot){this.url=url,this.params=params,this.queryParams=queryParams,this.fragment=fragment,this.data=data,this.outlet=outlet,this.component=component,this._futureSnapshot=futureSnapshot}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(map(p=>convertToParamMap(p)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(map(p=>convertToParamMap(p)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function inheritedParamsDataResolve(route,paramsInheritanceStrategy=\"emptyOnly\"){const pathFromRoot=route.pathFromRoot;let inheritingStartingFrom=0;if(\"always\"!==paramsInheritanceStrategy)for(inheritingStartingFrom=pathFromRoot.length-1;inheritingStartingFrom>=1;){const current=pathFromRoot[inheritingStartingFrom],parent=pathFromRoot[inheritingStartingFrom-1];if(current.routeConfig&&\"\"===current.routeConfig.path)inheritingStartingFrom--;else{if(parent.component)break;inheritingStartingFrom--}}return function(pathFromRoot){return pathFromRoot.reduce((res,curr)=>({params:Object.assign({},res.params,curr.params),data:Object.assign({},res.data,curr.data),resolve:Object.assign({},res.resolve,curr._resolvedData)}),{params:{},data:{},resolve:{}})}(pathFromRoot.slice(inheritingStartingFrom))}class ActivatedRouteSnapshot{constructor(url,params,queryParams,fragment,data,outlet,component,routeConfig,urlSegment,lastPathIndex,resolve){this.url=url,this.params=params,this.queryParams=queryParams,this.fragment=fragment,this.data=data,this.outlet=outlet,this.component=component,this.routeConfig=routeConfig,this._urlSegment=urlSegment,this._lastPathIndex=lastPathIndex,this._resolve=resolve}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=convertToParamMap(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=convertToParamMap(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(segment=>segment.toString()).join(\"/\")}', path:'${this.routeConfig?this.routeConfig.path:\"\"}')`}}class RouterStateSnapshot extends Tree{constructor(url,root){super(root),this.url=url,setRouterState(this,root)}toString(){return serializeNode(this._root)}}function setRouterState(state,node){node.value._routerState=state,node.children.forEach(c=>setRouterState(state,c))}function serializeNode(node){const c=node.children.length>0?` { ${node.children.map(serializeNode).join(\", \")} } `:\"\";return`${node.value}${c}`}function advanceActivatedRoute(route){if(route.snapshot){const currentSnapshot=route.snapshot,nextSnapshot=route._futureSnapshot;route.snapshot=nextSnapshot,shallowEqual(currentSnapshot.queryParams,nextSnapshot.queryParams)||route.queryParams.next(nextSnapshot.queryParams),currentSnapshot.fragment!==nextSnapshot.fragment&&route.fragment.next(nextSnapshot.fragment),shallowEqual(currentSnapshot.params,nextSnapshot.params)||route.params.next(nextSnapshot.params),function(a,b){if(a.length!==b.length)return!1;for(let i=0;i<a.length;++i)if(!shallowEqual(a[i],b[i]))return!1;return!0}(currentSnapshot.url,nextSnapshot.url)||route.url.next(nextSnapshot.url),shallowEqual(currentSnapshot.data,nextSnapshot.data)||route.data.next(nextSnapshot.data)}else route.snapshot=route._futureSnapshot,route.data.next(route._futureSnapshot.data)}function equalParamsAndUrlSegments(a,b){var as,bs;return shallowEqual(a.params,b.params)&&equalPath(as=a.url,bs=b.url)&&as.every((a,i)=>shallowEqual(a.parameters,bs[i].parameters))&&!(!a.parent!=!b.parent)&&(!a.parent||equalParamsAndUrlSegments(a.parent,b.parent))}function isMatrixParams(command){return\"object\"==typeof command&&null!=command&&!command.outlets&&!command.segmentPath}function router_tree(oldSegmentGroup,newSegmentGroup,urlTree,queryParams,fragment){let qp={};return queryParams&&forEach(queryParams,(value,name)=>{qp[name]=Array.isArray(value)?value.map(v=>\"\"+v):\"\"+value}),new UrlTree(urlTree.root===oldSegmentGroup?newSegmentGroup:function replaceSegment(current,oldSegment,newSegment){const children={};return forEach(current.children,(c,outletName)=>{children[outletName]=c===oldSegment?newSegment:replaceSegment(c,oldSegment,newSegment)}),new UrlSegmentGroup(current.segments,children)}(urlTree.root,oldSegmentGroup,newSegmentGroup),qp,fragment)}class Navigation{constructor(isAbsolute,numberOfDoubleDots,commands){if(this.isAbsolute=isAbsolute,this.numberOfDoubleDots=numberOfDoubleDots,this.commands=commands,isAbsolute&&commands.length>0&&isMatrixParams(commands[0]))throw new Error(\"Root segment cannot have matrix parameters\");const cmdWithOutlet=commands.find(c=>\"object\"==typeof c&&null!=c&&c.outlets);if(cmdWithOutlet&&cmdWithOutlet!==router_last(commands))throw new Error(\"{outlets:{}} has to be the last command\")}toRoot(){return this.isAbsolute&&1===this.commands.length&&\"/\"==this.commands[0]}}class Position{constructor(segmentGroup,processChildren,index){this.segmentGroup=segmentGroup,this.processChildren=processChildren,this.index=index}}function getPath(command){return\"object\"==typeof command&&null!=command&&command.outlets?command.outlets.primary:\"\"+command}function updateSegmentGroup(segmentGroup,startIndex,commands){if(segmentGroup||(segmentGroup=new UrlSegmentGroup([],{})),0===segmentGroup.segments.length&&segmentGroup.hasChildren())return updateSegmentGroupChildren(segmentGroup,startIndex,commands);const m=function(segmentGroup,startIndex,commands){let currentCommandIndex=0,currentPathIndex=startIndex;const noMatch={match:!1,pathIndex:0,commandIndex:0};for(;currentPathIndex<segmentGroup.segments.length;){if(currentCommandIndex>=commands.length)return noMatch;const path=segmentGroup.segments[currentPathIndex],curr=getPath(commands[currentCommandIndex]),next=currentCommandIndex<commands.length-1?commands[currentCommandIndex+1]:null;if(currentPathIndex>0&&void 0===curr)break;if(curr&&next&&\"object\"==typeof next&&void 0===next.outlets){if(!compare(curr,next,path))return noMatch;currentCommandIndex+=2}else{if(!compare(curr,{},path))return noMatch;currentCommandIndex++}currentPathIndex++}return{match:!0,pathIndex:currentPathIndex,commandIndex:currentCommandIndex}}(segmentGroup,startIndex,commands),slicedCommands=commands.slice(m.commandIndex);if(m.match&&m.pathIndex<segmentGroup.segments.length){const g=new UrlSegmentGroup(segmentGroup.segments.slice(0,m.pathIndex),{});return g.children.primary=new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex),segmentGroup.children),updateSegmentGroupChildren(g,0,slicedCommands)}return m.match&&0===slicedCommands.length?new UrlSegmentGroup(segmentGroup.segments,{}):m.match&&!segmentGroup.hasChildren()?createNewSegmentGroup(segmentGroup,startIndex,commands):m.match?updateSegmentGroupChildren(segmentGroup,0,slicedCommands):createNewSegmentGroup(segmentGroup,startIndex,commands)}function updateSegmentGroupChildren(segmentGroup,startIndex,commands){if(0===commands.length)return new UrlSegmentGroup(segmentGroup.segments,{});{const outlets=function(commands){return\"object\"!=typeof commands[0]||void 0===commands[0].outlets?{primary:commands}:commands[0].outlets}(commands),children={};return forEach(outlets,(commands,outlet)=>{null!==commands&&(children[outlet]=updateSegmentGroup(segmentGroup.children[outlet],startIndex,commands))}),forEach(segmentGroup.children,(child,childOutlet)=>{void 0===outlets[childOutlet]&&(children[childOutlet]=child)}),new UrlSegmentGroup(segmentGroup.segments,children)}}function createNewSegmentGroup(segmentGroup,startIndex,commands){const paths=segmentGroup.segments.slice(0,startIndex);let i=0;for(;i<commands.length;){if(\"object\"==typeof commands[i]&&void 0!==commands[i].outlets){const children=createNewSegmentChildren(commands[i].outlets);return new UrlSegmentGroup(paths,children)}if(0===i&&isMatrixParams(commands[0])){paths.push(new UrlSegment(segmentGroup.segments[startIndex].path,commands[0])),i++;continue}const curr=getPath(commands[i]),next=i<commands.length-1?commands[i+1]:null;curr&&next&&isMatrixParams(next)?(paths.push(new UrlSegment(curr,router_stringify(next))),i+=2):(paths.push(new UrlSegment(curr,{})),i++)}return new UrlSegmentGroup(paths,{})}function createNewSegmentChildren(outlets){const children={};return forEach(outlets,(commands,outlet)=>{null!==commands&&(children[outlet]=createNewSegmentGroup(new UrlSegmentGroup([],{}),0,commands))}),children}function router_stringify(params){const res={};return forEach(params,(v,k)=>res[k]=\"\"+v),res}function compare(path,params,segment){return path==segment.path&&shallowEqual(params,segment.parameters)}class ActivateRoutes{constructor(routeReuseStrategy,futureState,currState,forwardEvent){this.routeReuseStrategy=routeReuseStrategy,this.futureState=futureState,this.currState=currState,this.forwardEvent=forwardEvent}activate(parentContexts){const futureRoot=this.futureState._root,currRoot=this.currState?this.currState._root:null;this.deactivateChildRoutes(futureRoot,currRoot,parentContexts),advanceActivatedRoute(this.futureState.root),this.activateChildRoutes(futureRoot,currRoot,parentContexts)}deactivateChildRoutes(futureNode,currNode,contexts){const children=nodeChildrenAsMap(currNode);futureNode.children.forEach(futureChild=>{const childOutletName=futureChild.value.outlet;this.deactivateRoutes(futureChild,children[childOutletName],contexts),delete children[childOutletName]}),forEach(children,(v,childName)=>{this.deactivateRouteAndItsChildren(v,contexts)})}deactivateRoutes(futureNode,currNode,parentContext){const future=futureNode.value,curr=currNode?currNode.value:null;if(future===curr)if(future.component){const context=parentContext.getContext(future.outlet);context&&this.deactivateChildRoutes(futureNode,currNode,context.children)}else this.deactivateChildRoutes(futureNode,currNode,parentContext);else curr&&this.deactivateRouteAndItsChildren(currNode,parentContext)}deactivateRouteAndItsChildren(route,parentContexts){this.routeReuseStrategy.shouldDetach(route.value.snapshot)?this.detachAndStoreRouteSubtree(route,parentContexts):this.deactivateRouteAndOutlet(route,parentContexts)}detachAndStoreRouteSubtree(route,parentContexts){const context=parentContexts.getContext(route.value.outlet);if(context&&context.outlet){const componentRef=context.outlet.detach(),contexts=context.children.onOutletDeactivated();this.routeReuseStrategy.store(route.value.snapshot,{componentRef:componentRef,route:route,contexts:contexts})}}deactivateRouteAndOutlet(route,parentContexts){const context=parentContexts.getContext(route.value.outlet);if(context){const children=nodeChildrenAsMap(route),contexts=route.value.component?context.children:parentContexts;forEach(children,(v,k)=>this.deactivateRouteAndItsChildren(v,contexts)),context.outlet&&(context.outlet.deactivate(),context.children.onOutletDeactivated())}}activateChildRoutes(futureNode,currNode,contexts){const children=nodeChildrenAsMap(currNode);futureNode.children.forEach(c=>{this.activateRoutes(c,children[c.value.outlet],contexts),this.forwardEvent(new ActivationEnd(c.value.snapshot))}),futureNode.children.length&&this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot))}activateRoutes(futureNode,currNode,parentContexts){const future=futureNode.value,curr=currNode?currNode.value:null;if(advanceActivatedRoute(future),future===curr)if(future.component){const context=parentContexts.getOrCreateContext(future.outlet);this.activateChildRoutes(futureNode,currNode,context.children)}else this.activateChildRoutes(futureNode,currNode,parentContexts);else if(future.component){const context=parentContexts.getOrCreateContext(future.outlet);if(this.routeReuseStrategy.shouldAttach(future.snapshot)){const stored=this.routeReuseStrategy.retrieve(future.snapshot);this.routeReuseStrategy.store(future.snapshot,null),context.children.onOutletReAttached(stored.contexts),context.attachRef=stored.componentRef,context.route=stored.route.value,context.outlet&&context.outlet.attach(stored.componentRef,stored.route.value),advanceActivatedRouteNodeAndItsChildren(stored.route)}else{const config=function(snapshot){for(let s=snapshot.parent;s;s=s.parent){const route=s.routeConfig;if(route&&route._loadedConfig)return route._loadedConfig;if(route&&route.component)return null}return null}(future.snapshot),cmpFactoryResolver=config?config.module.componentFactoryResolver:null;context.attachRef=null,context.route=future,context.resolver=cmpFactoryResolver,context.outlet&&context.outlet.activateWith(future,cmpFactoryResolver),this.activateChildRoutes(futureNode,null,context.children)}}else this.activateChildRoutes(futureNode,null,parentContexts)}}function advanceActivatedRouteNodeAndItsChildren(node){advanceActivatedRoute(node.value),node.children.forEach(advanceActivatedRouteNodeAndItsChildren)}function router_isFunction(v){return\"function\"==typeof v}function isUrlTree(v){return v instanceof UrlTree}class NoMatch{constructor(segmentGroup){this.segmentGroup=segmentGroup||null}}class AbsoluteRedirect{constructor(urlTree){this.urlTree=urlTree}}function noMatch(segmentGroup){return new Observable_Observable(obs=>obs.error(new NoMatch(segmentGroup)))}function absoluteRedirect(newTree){return new Observable_Observable(obs=>obs.error(new AbsoluteRedirect(newTree)))}function namedOutletsRedirect(redirectTo){return new Observable_Observable(obs=>obs.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${redirectTo}'`)))}class router_ApplyRedirects{constructor(moduleInjector,configLoader,urlSerializer,urlTree,config){this.configLoader=configLoader,this.urlSerializer=urlSerializer,this.urlTree=urlTree,this.config=config,this.allowRedirects=!0,this.ngModule=moduleInjector.get(NgModuleRef)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,\"primary\").pipe(map(rootSegmentGroup=>this.createUrlTree(rootSegmentGroup,this.urlTree.queryParams,this.urlTree.fragment))).pipe(catchError(e=>{if(e instanceof AbsoluteRedirect)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof NoMatch)throw this.noMatchError(e);throw e}))}match(tree){return this.expandSegmentGroup(this.ngModule,this.config,tree.root,\"primary\").pipe(map(rootSegmentGroup=>this.createUrlTree(rootSegmentGroup,tree.queryParams,tree.fragment))).pipe(catchError(e=>{if(e instanceof NoMatch)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(rootCandidate,queryParams,fragment){const root=rootCandidate.segments.length>0?new UrlSegmentGroup([],{primary:rootCandidate}):rootCandidate;return new UrlTree(root,queryParams,fragment)}expandSegmentGroup(ngModule,routes,segmentGroup,outlet){return 0===segmentGroup.segments.length&&segmentGroup.hasChildren()?this.expandChildren(ngModule,routes,segmentGroup).pipe(map(children=>new UrlSegmentGroup([],children))):this.expandSegment(ngModule,segmentGroup,routes,segmentGroup.segments,outlet,!0)}expandChildren(ngModule,routes,segmentGroup){return function(obj,fn){if(0===Object.keys(obj).length)return of({});const waitHead=[],waitTail=[],res={};return forEach(obj,(a,k)=>{const mapped=fn(k,a).pipe(map(r=>res[k]=r));\"primary\"===k?waitHead.push(mapped):waitTail.push(mapped)}),of.apply(null,waitHead.concat(waitTail)).pipe(concatAll(),last_last(),map(()=>res))}(segmentGroup.children,(childOutlet,child)=>this.expandSegmentGroup(ngModule,routes,child,childOutlet))}expandSegment(ngModule,segmentGroup,routes,segments,outlet,allowRedirects){return of(...routes).pipe(map(r=>this.expandSegmentAgainstRoute(ngModule,segmentGroup,routes,r,segments,outlet,allowRedirects).pipe(catchError(e=>{if(e instanceof NoMatch)return of(null);throw e}))),concatAll(),first_first(s=>!!s),catchError((e,_)=>{if(e instanceof EmptyError||\"EmptyError\"===e.name){if(this.noLeftoversInUrl(segmentGroup,segments,outlet))return of(new UrlSegmentGroup([],{}));throw new NoMatch(segmentGroup)}throw e}))}noLeftoversInUrl(segmentGroup,segments,outlet){return 0===segments.length&&!segmentGroup.children[outlet]}expandSegmentAgainstRoute(ngModule,segmentGroup,routes,route,paths,outlet,allowRedirects){return getOutlet(route)!==outlet?noMatch(segmentGroup):void 0===route.redirectTo?this.matchSegmentAgainstRoute(ngModule,segmentGroup,route,paths):allowRedirects&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,paths,outlet):noMatch(segmentGroup)}expandSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,segments,outlet){return\"**\"===route.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule,routes,route,outlet):this.expandRegularSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,segments,outlet)}expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule,routes,route,outlet){const newTree=this.applyRedirectCommands([],route.redirectTo,{});return route.redirectTo.startsWith(\"/\")?absoluteRedirect(newTree):this.lineralizeSegments(route,newTree).pipe(mergeMap(newSegments=>{const group=new UrlSegmentGroup(newSegments,{});return this.expandSegment(ngModule,group,routes,newSegments,outlet,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(ngModule,segmentGroup,routes,route,segments,outlet){const{matched:matched,consumedSegments:consumedSegments,lastChild:lastChild,positionalParamSegments:positionalParamSegments}=match(segmentGroup,route,segments);if(!matched)return noMatch(segmentGroup);const newTree=this.applyRedirectCommands(consumedSegments,route.redirectTo,positionalParamSegments);return route.redirectTo.startsWith(\"/\")?absoluteRedirect(newTree):this.lineralizeSegments(route,newTree).pipe(mergeMap(newSegments=>this.expandSegment(ngModule,segmentGroup,routes,newSegments.concat(segments.slice(lastChild)),outlet,!1)))}matchSegmentAgainstRoute(ngModule,rawSegmentGroup,route,segments){if(\"**\"===route.path)return route.loadChildren?this.configLoader.load(ngModule.injector,route).pipe(map(cfg=>(route._loadedConfig=cfg,new UrlSegmentGroup(segments,{})))):of(new UrlSegmentGroup(segments,{}));const{matched:matched,consumedSegments:consumedSegments,lastChild:lastChild}=match(rawSegmentGroup,route,segments);if(!matched)return noMatch(rawSegmentGroup);const rawSlicedSegments=segments.slice(lastChild);return this.getChildConfig(ngModule,route,segments).pipe(mergeMap(routerConfig=>{const childModule=routerConfig.module,childConfig=routerConfig.routes,{segmentGroup:segmentGroup,slicedSegments:slicedSegments}=function(segmentGroup,consumedSegments,slicedSegments,config){return slicedSegments.length>0&&function(segmentGroup,segments,routes){return routes.some(r=>isEmptyPathRedirect(segmentGroup,segments,r)&&\"primary\"!==getOutlet(r))}(segmentGroup,slicedSegments,config)?{segmentGroup:mergeTrivialChildren(new UrlSegmentGroup(consumedSegments,function(routes,primarySegmentGroup){const res={};res.primary=primarySegmentGroup;for(const r of routes)\"\"===r.path&&\"primary\"!==getOutlet(r)&&(res[getOutlet(r)]=new UrlSegmentGroup([],{}));return res}(config,new UrlSegmentGroup(slicedSegments,segmentGroup.children)))),slicedSegments:[]}:0===slicedSegments.length&&function(segmentGroup,segments,routes){return routes.some(r=>isEmptyPathRedirect(segmentGroup,segments,r))}(segmentGroup,slicedSegments,config)?{segmentGroup:mergeTrivialChildren(new UrlSegmentGroup(segmentGroup.segments,function(segmentGroup,slicedSegments,routes,children){const res={};for(const r of routes)isEmptyPathRedirect(segmentGroup,slicedSegments,r)&&!children[getOutlet(r)]&&(res[getOutlet(r)]=new UrlSegmentGroup([],{}));return Object.assign({},children,res)}(segmentGroup,slicedSegments,config,segmentGroup.children))),slicedSegments:slicedSegments}:{segmentGroup:segmentGroup,slicedSegments:slicedSegments}}(rawSegmentGroup,consumedSegments,rawSlicedSegments,childConfig);return 0===slicedSegments.length&&segmentGroup.hasChildren()?this.expandChildren(childModule,childConfig,segmentGroup).pipe(map(children=>new UrlSegmentGroup(consumedSegments,children))):0===childConfig.length&&0===slicedSegments.length?of(new UrlSegmentGroup(consumedSegments,{})):this.expandSegment(childModule,segmentGroup,childConfig,slicedSegments,\"primary\",!0).pipe(map(cs=>new UrlSegmentGroup(consumedSegments.concat(cs.segments),cs.children)))}))}getChildConfig(ngModule,route,segments){return route.children?of(new LoadedRouterConfig(route.children,ngModule)):route.loadChildren?void 0!==route._loadedConfig?of(route._loadedConfig):function(moduleInjector,route,segments){const canLoad=route.canLoad;return canLoad&&0!==canLoad.length?from(canLoad).pipe(map(injectionToken=>{const guard=moduleInjector.get(injectionToken);let guardVal;if(function(guard){return guard&&router_isFunction(guard.canLoad)}(guard))guardVal=guard.canLoad(route,segments);else{if(!router_isFunction(guard))throw new Error(\"Invalid CanLoad guard\");guardVal=guard(route,segments)}return wrapIntoObservable(guardVal)})).pipe(concatAll(),(predicate=result=>!0===result,source=>source.lift(new EveryOperator(predicate,void 0,source)))):of(!0);var predicate}(ngModule.injector,route,segments).pipe(mergeMap(shouldLoad=>shouldLoad?this.configLoader.load(ngModule.injector,route).pipe(map(cfg=>(route._loadedConfig=cfg,cfg))):function(route){return new Observable_Observable(obs=>obs.error(navigationCancelingError(`Cannot load children because the guard of the route \"path: '${route.path}'\" returned false`)))}(route))):of(new LoadedRouterConfig([],ngModule))}lineralizeSegments(route,urlTree){let res=[],c=urlTree.root;for(;;){if(res=res.concat(c.segments),0===c.numberOfChildren)return of(res);if(c.numberOfChildren>1||!c.children.primary)return namedOutletsRedirect(route.redirectTo);c=c.children.primary}}applyRedirectCommands(segments,redirectTo,posParams){return this.applyRedirectCreatreUrlTree(redirectTo,this.urlSerializer.parse(redirectTo),segments,posParams)}applyRedirectCreatreUrlTree(redirectTo,urlTree,segments,posParams){const newRoot=this.createSegmentGroup(redirectTo,urlTree.root,segments,posParams);return new UrlTree(newRoot,this.createQueryParams(urlTree.queryParams,this.urlTree.queryParams),urlTree.fragment)}createQueryParams(redirectToParams,actualParams){const res={};return forEach(redirectToParams,(v,k)=>{if(\"string\"==typeof v&&v.startsWith(\":\")){const sourceName=v.substring(1);res[k]=actualParams[sourceName]}else res[k]=v}),res}createSegmentGroup(redirectTo,group,segments,posParams){const updatedSegments=this.createSegments(redirectTo,group.segments,segments,posParams);let children={};return forEach(group.children,(child,name)=>{children[name]=this.createSegmentGroup(redirectTo,child,segments,posParams)}),new UrlSegmentGroup(updatedSegments,children)}createSegments(redirectTo,redirectToSegments,actualSegments,posParams){return redirectToSegments.map(s=>s.path.startsWith(\":\")?this.findPosParam(redirectTo,s,posParams):this.findOrReturn(s,actualSegments))}findPosParam(redirectTo,redirectToUrlSegment,posParams){const pos=posParams[redirectToUrlSegment.path.substring(1)];if(!pos)throw new Error(`Cannot redirect to '${redirectTo}'. Cannot find '${redirectToUrlSegment.path}'.`);return pos}findOrReturn(redirectToUrlSegment,actualSegments){let idx=0;for(const s of actualSegments){if(s.path===redirectToUrlSegment.path)return actualSegments.splice(idx),s;idx++}return redirectToUrlSegment}}function match(segmentGroup,route,segments){if(\"\"===route.path)return\"full\"===route.pathMatch&&(segmentGroup.hasChildren()||segments.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const res=(route.matcher||defaultUrlMatcher)(segments,segmentGroup,route);return res?{matched:!0,consumedSegments:res.consumed,lastChild:res.consumed.length,positionalParamSegments:res.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function mergeTrivialChildren(s){if(1===s.numberOfChildren&&s.children.primary){const c=s.children.primary;return new UrlSegmentGroup(s.segments.concat(c.segments),c.children)}return s}function isEmptyPathRedirect(segmentGroup,segments,r){return(!(segmentGroup.hasChildren()||segments.length>0)||\"full\"!==r.pathMatch)&&\"\"===r.path&&void 0!==r.redirectTo}function getOutlet(route){return route.outlet||\"primary\"}class CanActivate{constructor(path){this.path=path,this.route=this.path[this.path.length-1]}}class CanDeactivate{constructor(component,route){this.component=component,this.route=route}}function getAllRouteGuards(future,curr,parentContexts){const futureRoot=future._root;return function getChildRouteGuards(futureNode,currNode,contexts,futurePath,checks={canDeactivateChecks:[],canActivateChecks:[]}){const prevChildren=nodeChildrenAsMap(currNode);return futureNode.children.forEach(c=>{!function(futureNode,currNode,parentContexts,futurePath,checks={canDeactivateChecks:[],canActivateChecks:[]}){const future=futureNode.value,curr=currNode?currNode.value:null,context=parentContexts?parentContexts.getContext(futureNode.value.outlet):null;if(curr&&future.routeConfig===curr.routeConfig){const shouldRun=function(curr,future,mode){if(\"function\"==typeof mode)return mode(curr,future);switch(mode){case\"pathParamsChange\":return!equalPath(curr.url,future.url);case\"pathParamsOrQueryParamsChange\":return!equalPath(curr.url,future.url)||!shallowEqual(curr.queryParams,future.queryParams);case\"always\":return!0;case\"paramsOrQueryParamsChange\":return!equalParamsAndUrlSegments(curr,future)||!shallowEqual(curr.queryParams,future.queryParams);case\"paramsChange\":default:return!equalParamsAndUrlSegments(curr,future)}}(curr,future,future.routeConfig.runGuardsAndResolvers);shouldRun?checks.canActivateChecks.push(new CanActivate(futurePath)):(future.data=curr.data,future._resolvedData=curr._resolvedData),getChildRouteGuards(futureNode,currNode,future.component?context?context.children:null:parentContexts,futurePath,checks),shouldRun&&checks.canDeactivateChecks.push(new CanDeactivate(context&&context.outlet&&context.outlet.component||null,curr))}else curr&&deactivateRouteAndItsChildren(currNode,context,checks),checks.canActivateChecks.push(new CanActivate(futurePath)),getChildRouteGuards(futureNode,null,future.component?context?context.children:null:parentContexts,futurePath,checks)}(c,prevChildren[c.value.outlet],contexts,futurePath.concat([c.value]),checks),delete prevChildren[c.value.outlet]}),forEach(prevChildren,(v,k)=>deactivateRouteAndItsChildren(v,contexts.getContext(k),checks)),checks}(futureRoot,curr?curr._root:null,parentContexts,[futureRoot.value])}function getToken(token,snapshot,moduleInjector){const config=function(snapshot){if(!snapshot)return null;for(let s=snapshot.parent;s;s=s.parent){const route=s.routeConfig;if(route&&route._loadedConfig)return route._loadedConfig}return null}(snapshot);return(config?config.module.injector:moduleInjector).get(token)}function deactivateRouteAndItsChildren(route,context,checks){const children=nodeChildrenAsMap(route),r=route.value;forEach(children,(node,childName)=>{deactivateRouteAndItsChildren(node,r.component?context?context.children.getContext(childName):null:context,checks)}),checks.canDeactivateChecks.push(new CanDeactivate(r.component&&context&&context.outlet&&context.outlet.isActivated?context.outlet.component:null,r))}const INITIAL_VALUE=Symbol(\"INITIAL_VALUE\");function prioritizedGuardValue(){return switchMap(obs=>function(...observables){let resultSelector=null,scheduler=null;return isScheduler(observables[observables.length-1])&&(scheduler=observables.pop()),\"function\"==typeof observables[observables.length-1]&&(resultSelector=observables.pop()),1===observables.length&&isArray(observables[0])&&(observables=observables[0]),fromArray(observables,scheduler).lift(new CombineLatestOperator(resultSelector))}(...obs.map(o=>o.pipe(take(1),function(...array){return source=>{let scheduler=array[array.length-1];isScheduler(scheduler)?array.pop():scheduler=null;const len=array.length;return function(...observables){return concatAll()(of(...observables))}(1!==len||scheduler?len>0?fromArray(array,scheduler):empty_empty(scheduler):scalar(array[0]),source)}}(INITIAL_VALUE)))).pipe(scan((acc,list)=>{let isPending=!1;return list.reduce((innerAcc,val,i)=>{if(innerAcc!==INITIAL_VALUE)return innerAcc;if(val===INITIAL_VALUE&&(isPending=!0),!isPending){if(!1===val)return val;if(i===list.length-1||isUrlTree(val))return val}return innerAcc},acc)},INITIAL_VALUE),filter(item=>item!==INITIAL_VALUE),map(item=>isUrlTree(item)?item:!0===item),take(1)))}function fireActivationStart(snapshot,forwardEvent){return null!==snapshot&&forwardEvent&&forwardEvent(new ActivationStart(snapshot)),of(!0)}function fireChildActivationStart(snapshot,forwardEvent){return null!==snapshot&&forwardEvent&&forwardEvent(new ChildActivationStart(snapshot)),of(!0)}function runCanActivate(futureRSS,futureARS,moduleInjector){const canActivate=futureARS.routeConfig?futureARS.routeConfig.canActivate:null;return canActivate&&0!==canActivate.length?of(canActivate.map(c=>defer(()=>{const guard=getToken(c,futureARS,moduleInjector);let observable;if(function(guard){return guard&&router_isFunction(guard.canActivate)}(guard))observable=wrapIntoObservable(guard.canActivate(futureARS,futureRSS));else{if(!router_isFunction(guard))throw new Error(\"Invalid CanActivate guard\");observable=wrapIntoObservable(guard(futureARS,futureRSS))}return observable.pipe(first_first())}))).pipe(prioritizedGuardValue()):of(!0)}function runCanActivateChild(futureRSS,path,moduleInjector){const futureARS=path[path.length-1],canActivateChildGuardsMapped=path.slice(0,path.length-1).reverse().map(p=>function(p){const canActivateChild=p.routeConfig?p.routeConfig.canActivateChild:null;return canActivateChild&&0!==canActivateChild.length?{node:p,guards:canActivateChild}:null}(p)).filter(_=>null!==_).map(d=>defer(()=>of(d.guards.map(c=>{const guard=getToken(c,d.node,moduleInjector);let observable;if(function(guard){return guard&&router_isFunction(guard.canActivateChild)}(guard))observable=wrapIntoObservable(guard.canActivateChild(futureARS,futureRSS));else{if(!router_isFunction(guard))throw new Error(\"Invalid CanActivateChild guard\");observable=wrapIntoObservable(guard(futureARS,futureRSS))}return observable.pipe(first_first())})).pipe(prioritizedGuardValue())));return of(canActivateChildGuardsMapped).pipe(prioritizedGuardValue())}class NoMatch$1{}class router_Recognizer{constructor(rootComponentType,config,urlTree,url,paramsInheritanceStrategy,relativeLinkResolution){this.rootComponentType=rootComponentType,this.config=config,this.urlTree=urlTree,this.url=url,this.paramsInheritanceStrategy=paramsInheritanceStrategy,this.relativeLinkResolution=relativeLinkResolution}recognize(){try{const rootSegmentGroup=split$1(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,children=this.processSegmentGroup(this.config,rootSegmentGroup,\"primary\"),root=new ActivatedRouteSnapshot([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},\"primary\",this.rootComponentType,null,this.urlTree.root,-1,{}),rootNode=new TreeNode(root,children),routeState=new RouterStateSnapshot(this.url,rootNode);return this.inheritParamsAndData(routeState._root),of(routeState)}catch(e){return new Observable_Observable(obs=>obs.error(e))}}inheritParamsAndData(routeNode){const route=routeNode.value,i=inheritedParamsDataResolve(route,this.paramsInheritanceStrategy);route.params=Object.freeze(i.params),route.data=Object.freeze(i.data),routeNode.children.forEach(n=>this.inheritParamsAndData(n))}processSegmentGroup(config,segmentGroup,outlet){return 0===segmentGroup.segments.length&&segmentGroup.hasChildren()?this.processChildren(config,segmentGroup):this.processSegment(config,segmentGroup,segmentGroup.segments,outlet)}processChildren(config,segmentGroup){const children=mapChildrenIntoArray(segmentGroup,(child,childOutlet)=>this.processSegmentGroup(config,child,childOutlet));return function(nodes){const names={};nodes.forEach(n=>{const routeWithSameOutletName=names[n.value.outlet];if(routeWithSameOutletName){const p=routeWithSameOutletName.url.map(s=>s.toString()).join(\"/\"),c=n.value.url.map(s=>s.toString()).join(\"/\");throw new Error(`Two segments cannot have the same outlet name: '${p}' and '${c}'.`)}names[n.value.outlet]=n.value})}(children),children.sort((a,b)=>\"primary\"===a.value.outlet?-1:\"primary\"===b.value.outlet?1:a.value.outlet.localeCompare(b.value.outlet)),children}processSegment(config,segmentGroup,segments,outlet){for(const r of config)try{return this.processSegmentAgainstRoute(r,segmentGroup,segments,outlet)}catch(e){if(!(e instanceof NoMatch$1))throw e}if(this.noLeftoversInUrl(segmentGroup,segments,outlet))return[];throw new NoMatch$1}noLeftoversInUrl(segmentGroup,segments,outlet){return 0===segments.length&&!segmentGroup.children[outlet]}processSegmentAgainstRoute(route,rawSegment,segments,outlet){if(route.redirectTo)throw new NoMatch$1;if((route.outlet||\"primary\")!==outlet)throw new NoMatch$1;let snapshot,consumedSegments=[],rawSlicedSegments=[];if(\"**\"===route.path){const params=segments.length>0?router_last(segments).parameters:{};snapshot=new ActivatedRouteSnapshot(segments,params,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,getData(route),outlet,route.component,route,getSourceSegmentGroup(rawSegment),getPathIndexShift(rawSegment)+segments.length,getResolve(route))}else{const result=function(segmentGroup,route,segments){if(\"\"===route.path){if(\"full\"===route.pathMatch&&(segmentGroup.hasChildren()||segments.length>0))throw new NoMatch$1;return{consumedSegments:[],lastChild:0,parameters:{}}}const res=(route.matcher||defaultUrlMatcher)(segments,segmentGroup,route);if(!res)throw new NoMatch$1;const posParams={};forEach(res.posParams,(v,k)=>{posParams[k]=v.path});const parameters=res.consumed.length>0?Object.assign({},posParams,res.consumed[res.consumed.length-1].parameters):posParams;return{consumedSegments:res.consumed,lastChild:res.consumed.length,parameters:parameters}}(rawSegment,route,segments);consumedSegments=result.consumedSegments,rawSlicedSegments=segments.slice(result.lastChild),snapshot=new ActivatedRouteSnapshot(consumedSegments,result.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,getData(route),outlet,route.component,route,getSourceSegmentGroup(rawSegment),getPathIndexShift(rawSegment)+consumedSegments.length,getResolve(route))}const childConfig=function(route){return route.children?route.children:route.loadChildren?route._loadedConfig.routes:[]}(route),{segmentGroup:segmentGroup,slicedSegments:slicedSegments}=split$1(rawSegment,consumedSegments,rawSlicedSegments,childConfig,this.relativeLinkResolution);if(0===slicedSegments.length&&segmentGroup.hasChildren()){const children=this.processChildren(childConfig,segmentGroup);return[new TreeNode(snapshot,children)]}if(0===childConfig.length&&0===slicedSegments.length)return[new TreeNode(snapshot,[])];const children=this.processSegment(childConfig,segmentGroup,slicedSegments,\"primary\");return[new TreeNode(snapshot,children)]}}function getSourceSegmentGroup(segmentGroup){let s=segmentGroup;for(;s._sourceSegment;)s=s._sourceSegment;return s}function getPathIndexShift(segmentGroup){let s=segmentGroup,res=s._segmentIndexShift?s._segmentIndexShift:0;for(;s._sourceSegment;)s=s._sourceSegment,res+=s._segmentIndexShift?s._segmentIndexShift:0;return res-1}function split$1(segmentGroup,consumedSegments,slicedSegments,config,relativeLinkResolution){if(slicedSegments.length>0&&function(segmentGroup,slicedSegments,routes){return routes.some(r=>emptyPathMatch(segmentGroup,slicedSegments,r)&&\"primary\"!==getOutlet$1(r))}(segmentGroup,slicedSegments,config)){const s=new UrlSegmentGroup(consumedSegments,function(segmentGroup,consumedSegments,routes,primarySegment){const res={};res.primary=primarySegment,primarySegment._sourceSegment=segmentGroup,primarySegment._segmentIndexShift=consumedSegments.length;for(const r of routes)if(\"\"===r.path&&\"primary\"!==getOutlet$1(r)){const s=new UrlSegmentGroup([],{});s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,res[getOutlet$1(r)]=s}return res}(segmentGroup,consumedSegments,config,new UrlSegmentGroup(slicedSegments,segmentGroup.children)));return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:[]}}if(0===slicedSegments.length&&function(segmentGroup,slicedSegments,routes){return routes.some(r=>emptyPathMatch(segmentGroup,slicedSegments,r))}(segmentGroup,slicedSegments,config)){const s=new UrlSegmentGroup(segmentGroup.segments,function(segmentGroup,consumedSegments,slicedSegments,routes,children,relativeLinkResolution){const res={};for(const r of routes)if(emptyPathMatch(segmentGroup,slicedSegments,r)&&!children[getOutlet$1(r)]){const s=new UrlSegmentGroup([],{});s._sourceSegment=segmentGroup,s._segmentIndexShift=\"legacy\"===relativeLinkResolution?segmentGroup.segments.length:consumedSegments.length,res[getOutlet$1(r)]=s}return Object.assign({},children,res)}(segmentGroup,consumedSegments,slicedSegments,config,segmentGroup.children,relativeLinkResolution));return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:slicedSegments}}const s=new UrlSegmentGroup(segmentGroup.segments,segmentGroup.children);return s._sourceSegment=segmentGroup,s._segmentIndexShift=consumedSegments.length,{segmentGroup:s,slicedSegments:slicedSegments}}function emptyPathMatch(segmentGroup,slicedSegments,r){return(!(segmentGroup.hasChildren()||slicedSegments.length>0)||\"full\"!==r.pathMatch)&&\"\"===r.path&&void 0===r.redirectTo}function getOutlet$1(route){return route.outlet||\"primary\"}function getData(route){return route.data||{}}function getResolve(route){return route.resolve||{}}function getResolver(injectionToken,futureARS,futureRSS,moduleInjector){const resolver=getToken(injectionToken,futureARS,moduleInjector);return wrapIntoObservable(resolver.resolve?resolver.resolve(futureARS,futureRSS):resolver(futureARS,futureRSS))}function switchTap(next){return function(source){return source.pipe(switchMap(v=>{const nextResult=next(v);return nextResult?from(nextResult).pipe(map(()=>v)):from([v])}))}}class RouteReuseStrategy{}class DefaultRouteReuseStrategy{shouldDetach(route){return!1}store(route,detachedTree){}shouldAttach(route){return!1}retrieve(route){return null}shouldReuseRoute(future,curr){return future.routeConfig===curr.routeConfig}}const ROUTES=new InjectionToken(\"ROUTES\");class router_RouterConfigLoader{constructor(loader,compiler,onLoadStartListener,onLoadEndListener){this.loader=loader,this.compiler=compiler,this.onLoadStartListener=onLoadStartListener,this.onLoadEndListener=onLoadEndListener}load(parentInjector,route){return this.onLoadStartListener&&this.onLoadStartListener(route),this.loadModuleFactory(route.loadChildren).pipe(map(factory=>{this.onLoadEndListener&&this.onLoadEndListener(route);const module=factory.create(parentInjector);return new LoadedRouterConfig(router_flatten(module.injector.get(ROUTES)).map(standardizeConfig),module)}))}loadModuleFactory(loadChildren){return\"string\"==typeof loadChildren?from(this.loader.load(loadChildren)):wrapIntoObservable(loadChildren()).pipe(mergeMap(t=>t instanceof NgModuleFactory?of(t):from(this.compiler.compileModuleAsync(t))))}}class UrlHandlingStrategy{}class DefaultUrlHandlingStrategy{shouldProcessUrl(url){return!0}extract(url){return url}merge(newUrlPart,wholeUrl){return newUrlPart}}function defaultErrorHandler(error){throw error}function defaultMalformedUriErrorHandler(error,urlSerializer,url){return urlSerializer.parse(\"/\")}function defaultRouterHook(snapshot,runExtras){return of(null)}class router_Router{constructor(rootComponentType,urlSerializer,rootContexts,location,injector,loader,compiler,config){this.rootComponentType=rootComponentType,this.urlSerializer=urlSerializer,this.rootContexts=rootContexts,this.location=location,this.config=config,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new Subject_Subject,this.errorHandler=defaultErrorHandler,this.malformedUriErrorHandler=defaultMalformedUriErrorHandler,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:defaultRouterHook,afterPreactivation:defaultRouterHook},this.urlHandlingStrategy=new DefaultUrlHandlingStrategy,this.routeReuseStrategy=new DefaultRouteReuseStrategy,this.onSameUrlNavigation=\"ignore\",this.paramsInheritanceStrategy=\"emptyOnly\",this.urlUpdateStrategy=\"deferred\",this.relativeLinkResolution=\"legacy\",this.ngModule=injector.get(NgModuleRef),this.console=injector.get(Console);const ngZone=injector.get(NgZone);this.isNgZoneEnabled=ngZone instanceof NgZone,this.resetConfig(config),this.currentUrlTree=new UrlTree(new UrlSegmentGroup([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new router_RouterConfigLoader(loader,compiler,r=>this.triggerEvent(new RouteConfigLoadStart(r)),r=>this.triggerEvent(new RouteConfigLoadEnd(r))),this.routerState=createEmptyState(this.currentUrlTree,this.rootComponentType),this.transitions=new BehaviorSubject_BehaviorSubject({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:\"imperative\",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(transitions){const eventsSubject=this.events;return transitions.pipe(filter(t=>0!==t.id),map(t=>Object.assign({},t,{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),switchMap(t=>{let completed=!1,errored=!1;return of(t).pipe(tap(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign({},this.lastSuccessfulNavigation,{previousNavigation:null}):null}}),switchMap(t=>{const urlTransition=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if((\"reload\"===this.onSameUrlNavigation||urlTransition)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return of(t).pipe(switchMap(t=>{const transition=this.transitions.getValue();return eventsSubject.next(new NavigationStart(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),transition!==this.transitions.getValue()?empty_EMPTY:[t]}),switchMap(t=>Promise.resolve(t)),(moduleInjector=this.ngModule.injector,configLoader=this.configLoader,urlSerializer=this.urlSerializer,config=this.config,function(source){return source.pipe(switchMap(t=>function(moduleInjector,configLoader,urlSerializer,urlTree,config){return new router_ApplyRedirects(moduleInjector,configLoader,urlSerializer,urlTree,config).apply()}(moduleInjector,configLoader,urlSerializer,t.extractedUrl,config).pipe(map(urlAfterRedirects=>Object.assign({},t,{urlAfterRedirects:urlAfterRedirects})))))}),tap(t=>{this.currentNavigation=Object.assign({},this.currentNavigation,{finalUrl:t.urlAfterRedirects})}),function(rootComponentType,config,serializer,paramsInheritanceStrategy,relativeLinkResolution){return function(source){return source.pipe(mergeMap(t=>function(rootComponentType,config,urlTree,url,paramsInheritanceStrategy=\"emptyOnly\",relativeLinkResolution=\"legacy\"){return new router_Recognizer(rootComponentType,config,urlTree,url,paramsInheritanceStrategy,relativeLinkResolution).recognize()}(rootComponentType,config,t.urlAfterRedirects,serializer(t.urlAfterRedirects),paramsInheritanceStrategy,relativeLinkResolution).pipe(map(targetSnapshot=>Object.assign({},t,{targetSnapshot:targetSnapshot})))))}}(this.rootComponentType,this.config,url=>this.serializeUrl(url),this.paramsInheritanceStrategy,this.relativeLinkResolution),tap(t=>{\"eager\"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),tap(t=>{const routesRecognized=new RoutesRecognized(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);eventsSubject.next(routesRecognized)}));var moduleInjector,configLoader,urlSerializer,config;if(urlTransition&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:id,extractedUrl:extractedUrl,source:source,restoredState:restoredState,extras:extras}=t,navStart=new NavigationStart(id,this.serializeUrl(extractedUrl),source,restoredState);eventsSubject.next(navStart);const targetSnapshot=createEmptyState(extractedUrl,this.rootComponentType).snapshot;return of(Object.assign({},t,{targetSnapshot:targetSnapshot,urlAfterRedirects:extractedUrl,extras:Object.assign({},extras,{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),empty_EMPTY}),switchTap(t=>{const{targetSnapshot:targetSnapshot,id:navigationId,extractedUrl:appliedUrlTree,rawUrl:rawUrlTree,extras:{skipLocationChange:skipLocationChange,replaceUrl:replaceUrl}}=t;return this.hooks.beforePreactivation(targetSnapshot,{navigationId:navigationId,appliedUrlTree:appliedUrlTree,rawUrlTree:rawUrlTree,skipLocationChange:!!skipLocationChange,replaceUrl:!!replaceUrl})}),tap(t=>{const guardsStart=new GuardsCheckStart(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(guardsStart)}),map(t=>Object.assign({},t,{guards:getAllRouteGuards(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(moduleInjector,forwardEvent){return function(source){return source.pipe(mergeMap(t=>{const{targetSnapshot:targetSnapshot,currentSnapshot:currentSnapshot,guards:{canActivateChecks:canActivateChecks,canDeactivateChecks:canDeactivateChecks}}=t;return 0===canDeactivateChecks.length&&0===canActivateChecks.length?of(Object.assign({},t,{guardsResult:!0})):function(checks,futureRSS,currRSS,moduleInjector){return from(checks).pipe(mergeMap(check=>function(component,currARS,currRSS,futureRSS,moduleInjector){const canDeactivate=currARS&&currARS.routeConfig?currARS.routeConfig.canDeactivate:null;return canDeactivate&&0!==canDeactivate.length?of(canDeactivate.map(c=>{const guard=getToken(c,currARS,moduleInjector);let observable;if(function(guard){return guard&&router_isFunction(guard.canDeactivate)}(guard))observable=wrapIntoObservable(guard.canDeactivate(component,currARS,currRSS,futureRSS));else{if(!router_isFunction(guard))throw new Error(\"Invalid CanDeactivate guard\");observable=wrapIntoObservable(guard(component,currARS,currRSS,futureRSS))}return observable.pipe(first_first())})).pipe(prioritizedGuardValue()):of(!0)}(check.component,check.route,currRSS,futureRSS,moduleInjector)),first_first(result=>!0!==result,!0))}(canDeactivateChecks,targetSnapshot,currentSnapshot,moduleInjector).pipe(mergeMap(canDeactivate=>canDeactivate&&\"boolean\"==typeof canDeactivate?function(futureSnapshot,checks,moduleInjector,forwardEvent){return from(checks).pipe(concatMap(check=>from([fireChildActivationStart(check.route.parent,forwardEvent),fireActivationStart(check.route,forwardEvent),runCanActivateChild(futureSnapshot,check.path,moduleInjector),runCanActivate(futureSnapshot,check.route,moduleInjector)]).pipe(concatAll(),first_first(result=>!0!==result,!0))),first_first(result=>!0!==result,!0))}(targetSnapshot,canActivateChecks,moduleInjector,forwardEvent):of(canDeactivate)),map(guardsResult=>Object.assign({},t,{guardsResult:guardsResult})))}))}}(this.ngModule.injector,evt=>this.triggerEvent(evt)),tap(t=>{if(isUrlTree(t.guardsResult)){const error=navigationCancelingError(`Redirecting to \"${this.serializeUrl(t.guardsResult)}\"`);throw error.url=t.guardsResult,error}}),tap(t=>{const guardsEnd=new GuardsCheckEnd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(guardsEnd)}),filter(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const navCancel=new NavigationCancel(t.id,this.serializeUrl(t.extractedUrl),\"\");return eventsSubject.next(navCancel),t.resolve(!1),!1}return!0}),switchTap(t=>{if(t.guards.canActivateChecks.length)return of(t).pipe(tap(t=>{const resolveStart=new ResolveStart(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(resolveStart)}),(paramsInheritanceStrategy=this.paramsInheritanceStrategy,moduleInjector=this.ngModule.injector,function(source){return source.pipe(mergeMap(t=>{const{targetSnapshot:targetSnapshot,guards:{canActivateChecks:canActivateChecks}}=t;return canActivateChecks.length?from(canActivateChecks).pipe(concatMap(check=>function(futureARS,futureRSS,paramsInheritanceStrategy,moduleInjector){return function(resolve,futureARS,futureRSS,moduleInjector){const keys=Object.keys(resolve);if(0===keys.length)return of({});if(1===keys.length){const key=keys[0];return getResolver(resolve[key],futureARS,futureRSS,moduleInjector).pipe(map(value=>({[key]:value})))}const data={};return from(keys).pipe(mergeMap(key=>getResolver(resolve[key],futureARS,futureRSS,moduleInjector).pipe(map(value=>(data[key]=value,value))))).pipe(last_last(),map(()=>data))}(futureARS._resolve,futureARS,futureRSS,moduleInjector).pipe(map(resolvedData=>(futureARS._resolvedData=resolvedData,futureARS.data=Object.assign({},futureARS.data,inheritedParamsDataResolve(futureARS,paramsInheritanceStrategy).resolve),null)))}(check.route,targetSnapshot,paramsInheritanceStrategy,moduleInjector)),function(accumulator,seed){return arguments.length>=2?function(source){return pipe(scan(accumulator,seed),takeLast(1),defaultIfEmpty(seed))(source)}:function(source){return pipe(scan((acc,value,index)=>accumulator(acc,value,index+1)),takeLast(1))(source)}}((_,__)=>_),map(_=>t)):of(t)}))}),tap(t=>{const resolveEnd=new ResolveEnd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(resolveEnd)}));var paramsInheritanceStrategy,moduleInjector}),switchTap(t=>{const{targetSnapshot:targetSnapshot,id:navigationId,extractedUrl:appliedUrlTree,rawUrl:rawUrlTree,extras:{skipLocationChange:skipLocationChange,replaceUrl:replaceUrl}}=t;return this.hooks.afterPreactivation(targetSnapshot,{navigationId:navigationId,appliedUrlTree:appliedUrlTree,rawUrlTree:rawUrlTree,skipLocationChange:!!skipLocationChange,replaceUrl:!!replaceUrl})}),map(t=>{const targetRouterState=function(routeReuseStrategy,curr,prevState){const root=function createNode(routeReuseStrategy,curr,prevState){if(prevState&&routeReuseStrategy.shouldReuseRoute(curr.value,prevState.value.snapshot)){const value=prevState.value;value._futureSnapshot=curr.value;const children=function(routeReuseStrategy,curr,prevState){return curr.children.map(child=>{for(const p of prevState.children)if(routeReuseStrategy.shouldReuseRoute(p.value.snapshot,child.value))return createNode(routeReuseStrategy,child,p);return createNode(routeReuseStrategy,child)})}(routeReuseStrategy,curr,prevState);return new TreeNode(value,children)}{const detachedRouteHandle=routeReuseStrategy.retrieve(curr.value);if(detachedRouteHandle){const tree=detachedRouteHandle.route;return function setFutureSnapshotsOfActivatedRoutes(curr,result){if(curr.value.routeConfig!==result.value.routeConfig)throw new Error(\"Cannot reattach ActivatedRouteSnapshot created from a different route\");if(curr.children.length!==result.children.length)throw new Error(\"Cannot reattach ActivatedRouteSnapshot with a different number of children\");result.value._futureSnapshot=curr.value;for(let i=0;i<curr.children.length;++i)setFutureSnapshotsOfActivatedRoutes(curr.children[i],result.children[i])}(curr,tree),tree}{const value=new router_ActivatedRoute(new BehaviorSubject_BehaviorSubject((c=curr.value).url),new BehaviorSubject_BehaviorSubject(c.params),new BehaviorSubject_BehaviorSubject(c.queryParams),new BehaviorSubject_BehaviorSubject(c.fragment),new BehaviorSubject_BehaviorSubject(c.data),c.outlet,c.component,c),children=curr.children.map(c=>createNode(routeReuseStrategy,c));return new TreeNode(value,children)}}var c}(routeReuseStrategy,curr._root,prevState?prevState._root:void 0);return new RouterState(root,curr)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign({},t,{targetRouterState:targetRouterState})}),tap(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,\"deferred\"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(rootContexts=this.rootContexts,routeReuseStrategy=this.routeReuseStrategy,forwardEvent=evt=>this.triggerEvent(evt),map(t=>(new ActivateRoutes(routeReuseStrategy,t.targetRouterState,t.currentRouterState,forwardEvent).activate(rootContexts),t))),tap({next(){completed=!0},complete(){completed=!0}}),(callback=()=>{if(!completed&&!errored){this.resetUrlToCurrentUrlTree();const navCancel=new NavigationCancel(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);eventsSubject.next(navCancel),t.resolve(!1)}this.currentNavigation=null},source=>source.lift(new FinallyOperator(callback))),catchError(e=>{if(errored=!0,(error=e)&&error.ngNavigationCancelingError){const redirecting=isUrlTree(e.url);redirecting||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const navCancel=new NavigationCancel(t.id,this.serializeUrl(t.extractedUrl),e.message);eventsSubject.next(navCancel),t.resolve(!1),redirecting&&this.navigateByUrl(e.url)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const navError=new NavigationError(t.id,this.serializeUrl(t.extractedUrl),e);eventsSubject.next(navError);try{t.resolve(this.errorHandler(e))}catch(ee){t.reject(ee)}}var error;return empty_EMPTY}));var callback,rootContexts,routeReuseStrategy,forwardEvent}))}resetRootComponentType(rootComponentType){this.rootComponentType=rootComponentType,this.routerState.root.component=this.rootComponentType}getTransition(){const transition=this.transitions.value;return transition.urlAfterRedirects=this.browserUrlTree,transition}setTransition(t){this.transitions.next(Object.assign({},this.getTransition(),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(change=>{let rawUrlTree=this.parseUrl(change.url);const source=\"popstate\"===change.type?\"popstate\":\"hashchange\",state=change.state&&change.state.navigationId?change.state:null;setTimeout(()=>{this.scheduleNavigation(rawUrlTree,source,state,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(event){this.events.next(event)}resetConfig(config){validateConfig(config),this.config=config.map(standardizeConfig),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(commands,navigationExtras={}){const{relativeTo:relativeTo,queryParams:queryParams,fragment:fragment,preserveQueryParams:preserveQueryParams,queryParamsHandling:queryParamsHandling,preserveFragment:preserveFragment}=navigationExtras;isDevMode()&&preserveQueryParams&&console&&console.warn&&console.warn(\"preserveQueryParams is deprecated, use queryParamsHandling instead.\");const a=relativeTo||this.routerState.root,f=preserveFragment?this.currentUrlTree.fragment:fragment;let q=null;if(queryParamsHandling)switch(queryParamsHandling){case\"merge\":q=Object.assign({},this.currentUrlTree.queryParams,queryParams);break;case\"preserve\":q=this.currentUrlTree.queryParams;break;default:q=queryParams||null}else q=preserveQueryParams?this.currentUrlTree.queryParams:queryParams||null;return null!==q&&(q=this.removeEmptyProps(q)),function(route,urlTree,commands,queryParams,fragment){if(0===commands.length)return router_tree(urlTree.root,urlTree.root,urlTree,queryParams,fragment);const nav=function(commands){if(\"string\"==typeof commands[0]&&1===commands.length&&\"/\"===commands[0])return new Navigation(!0,0,commands);let numberOfDoubleDots=0,isAbsolute=!1;const res=commands.reduce((res,cmd,cmdIdx)=>{if(\"object\"==typeof cmd&&null!=cmd){if(cmd.outlets){const outlets={};return forEach(cmd.outlets,(commands,name)=>{outlets[name]=\"string\"==typeof commands?commands.split(\"/\"):commands}),[...res,{outlets:outlets}]}if(cmd.segmentPath)return[...res,cmd.segmentPath]}return\"string\"!=typeof cmd?[...res,cmd]:0===cmdIdx?(cmd.split(\"/\").forEach((urlPart,partIndex)=>{0==partIndex&&\".\"===urlPart||(0==partIndex&&\"\"===urlPart?isAbsolute=!0:\"..\"===urlPart?numberOfDoubleDots++:\"\"!=urlPart&&res.push(urlPart))}),res):[...res,cmd]},[]);return new Navigation(isAbsolute,numberOfDoubleDots,res)}(commands);if(nav.toRoot())return router_tree(urlTree.root,new UrlSegmentGroup([],{}),urlTree,queryParams,fragment);const startingPosition=function(nav,tree,route){if(nav.isAbsolute)return new Position(tree.root,!0,0);if(-1===route.snapshot._lastPathIndex)return new Position(route.snapshot._urlSegment,!0,0);const modifier=isMatrixParams(nav.commands[0])?0:1;return function(group,index,numberOfDoubleDots){let g=group,ci=index,dd=numberOfDoubleDots;for(;dd>ci;){if(dd-=ci,g=g.parent,!g)throw new Error(\"Invalid number of '../'\");ci=g.segments.length}return new Position(g,!1,ci-dd)}(route.snapshot._urlSegment,route.snapshot._lastPathIndex+modifier,nav.numberOfDoubleDots)}(nav,urlTree,route),segmentGroup=startingPosition.processChildren?updateSegmentGroupChildren(startingPosition.segmentGroup,startingPosition.index,nav.commands):updateSegmentGroup(startingPosition.segmentGroup,startingPosition.index,nav.commands);return router_tree(startingPosition.segmentGroup,segmentGroup,urlTree,queryParams,fragment)}(a,this.currentUrlTree,commands,q,f)}navigateByUrl(url,extras={skipLocationChange:!1}){isDevMode()&&this.isNgZoneEnabled&&!NgZone.isInAngularZone()&&this.console.warn(\"Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?\");const urlTree=isUrlTree(url)?url:this.parseUrl(url),mergedTree=this.urlHandlingStrategy.merge(urlTree,this.rawUrlTree);return this.scheduleNavigation(mergedTree,\"imperative\",null,extras)}navigate(commands,extras={skipLocationChange:!1}){return function(commands){for(let i=0;i<commands.length;i++){const cmd=commands[i];if(null==cmd)throw new Error(`The requested path contains ${cmd} segment at index ${i}`)}}(commands),this.navigateByUrl(this.createUrlTree(commands,extras),extras)}serializeUrl(url){return this.urlSerializer.serialize(url)}parseUrl(url){let urlTree;try{urlTree=this.urlSerializer.parse(url)}catch(e){urlTree=this.malformedUriErrorHandler(e,this.urlSerializer,url)}return urlTree}isActive(url,exact){if(isUrlTree(url))return containsTree(this.currentUrlTree,url,exact);const urlTree=this.parseUrl(url);return containsTree(this.currentUrlTree,urlTree,exact)}removeEmptyProps(params){return Object.keys(params).reduce((result,key)=>{const value=params[key];return null!=value&&(result[key]=value),result},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new NavigationEnd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},e=>{this.console.warn(\"Unhandled Navigation Error: \")})}scheduleNavigation(rawUrl,source,restoredState,extras){const lastNavigation=this.getTransition();if(lastNavigation&&\"imperative\"!==source&&\"imperative\"===lastNavigation.source&&lastNavigation.rawUrl.toString()===rawUrl.toString())return Promise.resolve(!0);if(lastNavigation&&\"hashchange\"==source&&\"popstate\"===lastNavigation.source&&lastNavigation.rawUrl.toString()===rawUrl.toString())return Promise.resolve(!0);if(lastNavigation&&\"popstate\"==source&&\"hashchange\"===lastNavigation.source&&lastNavigation.rawUrl.toString()===rawUrl.toString())return Promise.resolve(!0);let resolve=null,reject=null;const promise=new Promise((res,rej)=>{resolve=res,reject=rej}),id=++this.navigationId;return this.setTransition({id:id,source:source,restoredState:restoredState,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:rawUrl,extras:extras,resolve:resolve,reject:reject,promise:promise,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),promise.catch(e=>Promise.reject(e))}setBrowserUrl(url,replaceUrl,id,state){const path=this.urlSerializer.serialize(url);state=state||{},this.location.isCurrentPathEqualTo(path)||replaceUrl?this.location.replaceState(path,\"\",Object.assign({},state,{navigationId:id})):this.location.go(path,\"\",Object.assign({},state,{navigationId:id}))}resetStateAndUrl(storedState,storedUrl,rawUrl){this.routerState=storedState,this.currentUrlTree=storedUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,rawUrl),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),\"\",{navigationId:this.lastSuccessfulId})}}class router_RouterLink{constructor(router,route,tabIndex,renderer,el){this.router=router,this.route=route,this.commands=[],null==tabIndex&&renderer.setAttribute(el.nativeElement,\"tabindex\",\"0\")}set routerLink(commands){this.commands=null!=commands?Array.isArray(commands)?commands:[commands]:[]}set preserveQueryParams(value){isDevMode()&&console&&console.warn&&console.warn(\"preserveQueryParams is deprecated!, use queryParamsHandling instead.\"),this.preserve=value}onClick(){const extras={skipLocationChange:attrBoolValue(this.skipLocationChange),replaceUrl:attrBoolValue(this.replaceUrl)};return this.router.navigateByUrl(this.urlTree,extras),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:attrBoolValue(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:attrBoolValue(this.preserveFragment)})}}class router_RouterLinkWithHref{constructor(router,route,locationStrategy){this.router=router,this.route=route,this.locationStrategy=locationStrategy,this.commands=[],this.subscription=router.events.subscribe(s=>{s instanceof NavigationEnd&&this.updateTargetUrlAndHref()})}set routerLink(commands){this.commands=null!=commands?Array.isArray(commands)?commands:[commands]:[]}set preserveQueryParams(value){isDevMode()&&console&&console.warn&&console.warn(\"preserveQueryParams is deprecated, use queryParamsHandling instead.\"),this.preserve=value}ngOnChanges(changes){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(button,ctrlKey,metaKey,shiftKey){if(0!==button||ctrlKey||metaKey||shiftKey)return!0;if(\"string\"==typeof this.target&&\"_self\"!=this.target)return!0;const extras={skipLocationChange:attrBoolValue(this.skipLocationChange),replaceUrl:attrBoolValue(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,extras),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:attrBoolValue(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:attrBoolValue(this.preserveFragment)})}}function attrBoolValue(s){return\"\"===s||!!s}class OutletContext{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ChildrenOutletContexts,this.attachRef=null}}class ChildrenOutletContexts{constructor(){this.contexts=new Map}onChildOutletCreated(childName,outlet){const context=this.getOrCreateContext(childName);context.outlet=outlet,this.contexts.set(childName,context)}onChildOutletDestroyed(childName){const context=this.getContext(childName);context&&(context.outlet=null)}onOutletDeactivated(){const contexts=this.contexts;return this.contexts=new Map,contexts}onOutletReAttached(contexts){this.contexts=contexts}getOrCreateContext(childName){let context=this.getContext(childName);return context||(context=new OutletContext,this.contexts.set(childName,context)),context}getContext(childName){return this.contexts.get(childName)||null}}class router_RouterOutlet{constructor(parentContexts,location,resolver,name,changeDetector){this.parentContexts=parentContexts,this.location=location,this.resolver=resolver,this.changeDetector=changeDetector,this.activated=null,this._activatedRoute=null,this.activateEvents=new core_EventEmitter,this.deactivateEvents=new core_EventEmitter,this.name=name||\"primary\",parentContexts.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const context=this.parentContexts.getContext(this.name);context&&context.route&&(context.attachRef?this.attach(context.attachRef,context.route):this.activateWith(context.route,context.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error(\"Outlet is not activated\");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error(\"Outlet is not activated\");this.location.detach();const cmp=this.activated;return this.activated=null,this._activatedRoute=null,cmp}attach(ref,activatedRoute){this.activated=ref,this._activatedRoute=activatedRoute,this.location.insert(ref.hostView)}deactivate(){if(this.activated){const c=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(c)}}activateWith(activatedRoute,resolver){if(this.isActivated)throw new Error(\"Cannot activate an already activated outlet\");this._activatedRoute=activatedRoute;const factory=(resolver=resolver||this.resolver).resolveComponentFactory(activatedRoute._futureSnapshot.routeConfig.component),childContexts=this.parentContexts.getOrCreateContext(this.name).children,injector=new OutletInjector(activatedRoute,childContexts,this.location.injector);this.activated=this.location.createComponent(factory,this.location.length,injector),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}class OutletInjector{constructor(route,childContexts,parent){this.route=route,this.childContexts=childContexts,this.parent=parent}get(token,notFoundValue){return token===router_ActivatedRoute?this.route:token===ChildrenOutletContexts?this.childContexts:this.parent.get(token,notFoundValue)}}class PreloadingStrategy{}class router_PreloadAllModules{preload(route,fn){return fn().pipe(catchError(()=>of(null)))}}class router_NoPreloading{preload(route,fn){return of(null)}}class router_RouterPreloader{constructor(router,moduleLoader,compiler,injector,preloadingStrategy){this.router=router,this.injector=injector,this.preloadingStrategy=preloadingStrategy,this.loader=new router_RouterConfigLoader(moduleLoader,compiler,r=>router.triggerEvent(new RouteConfigLoadStart(r)),r=>router.triggerEvent(new RouteConfigLoadEnd(r)))}setUpPreloading(){this.subscription=this.router.events.pipe(filter(e=>e instanceof NavigationEnd),concatMap(()=>this.preload())).subscribe(()=>{})}preload(){const ngModule=this.injector.get(NgModuleRef);return this.processRoutes(ngModule,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(ngModule,routes){const res=[];for(const route of routes)if(route.loadChildren&&!route.canLoad&&route._loadedConfig){const childConfig=route._loadedConfig;res.push(this.processRoutes(childConfig.module,childConfig.routes))}else route.loadChildren&&!route.canLoad?res.push(this.preloadConfig(ngModule,route)):route.children&&res.push(this.processRoutes(ngModule,route.children));return from(res).pipe(mergeAll(),map(_=>{}))}preloadConfig(ngModule,route){return this.preloadingStrategy.preload(route,()=>this.loader.load(ngModule.injector,route).pipe(mergeMap(config=>(route._loadedConfig=config,this.processRoutes(config.module,config.routes)))))}}class RouterScroller{constructor(router,viewportScroller,options={}){this.router=router,this.viewportScroller=viewportScroller,this.options=options,this.lastId=0,this.lastSource=\"imperative\",this.restoredId=0,this.store={},options.scrollPositionRestoration=options.scrollPositionRestoration||\"disabled\",options.anchorScrolling=options.anchorScrolling||\"disabled\"}init(){\"disabled\"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration(\"manual\"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof NavigationStart?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof NavigationEnd&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Scroll&&(e.position?\"top\"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):\"enabled\"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&\"enabled\"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):\"disabled\"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(routerEvent,anchor){this.router.triggerEvent(new Scroll(routerEvent,\"popstate\"===this.lastSource?this.store[this.restoredId]:null,anchor))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}const ROUTER_CONFIGURATION=new InjectionToken(\"ROUTER_CONFIGURATION\"),ROUTER_FORROOT_GUARD=new InjectionToken(\"ROUTER_FORROOT_GUARD\"),ROUTER_PROVIDERS=[common_Location,{provide:UrlSerializer,useClass:DefaultUrlSerializer},{provide:router_Router,useFactory:setupRouter,deps:[core_ApplicationRef,UrlSerializer,ChildrenOutletContexts,common_Location,Injector,NgModuleFactoryLoader,Compiler,ROUTES,ROUTER_CONFIGURATION,[UrlHandlingStrategy,new Optional],[RouteReuseStrategy,new Optional]]},ChildrenOutletContexts,{provide:router_ActivatedRoute,useFactory:rootRoute,deps:[router_Router]},{provide:NgModuleFactoryLoader,useClass:SystemJsNgModuleLoader},router_RouterPreloader,router_NoPreloading,router_PreloadAllModules,{provide:ROUTER_CONFIGURATION,useValue:{enableTracing:!1}}];function routerNgProbeToken(){return new NgProbeToken(\"Router\",router_Router)}class router_RouterModule{constructor(guard,router){}static forRoot(routes,config){return{ngModule:router_RouterModule,providers:[ROUTER_PROVIDERS,provideRoutes(routes),{provide:ROUTER_FORROOT_GUARD,useFactory:provideForRootGuard,deps:[[router_Router,new Optional,new SkipSelf]]},{provide:ROUTER_CONFIGURATION,useValue:config||{}},{provide:LocationStrategy,useFactory:provideLocationStrategy,deps:[PlatformLocation,[new Inject(APP_BASE_HREF),new Optional],ROUTER_CONFIGURATION]},{provide:RouterScroller,useFactory:createRouterScroller,deps:[router_Router,common_ViewportScroller,ROUTER_CONFIGURATION]},{provide:PreloadingStrategy,useExisting:config&&config.preloadingStrategy?config.preloadingStrategy:router_NoPreloading},{provide:NgProbeToken,multi:!0,useFactory:routerNgProbeToken},[router_RouterInitializer,{provide:APP_INITIALIZER,multi:!0,useFactory:getAppInitializer,deps:[router_RouterInitializer]},{provide:ROUTER_INITIALIZER,useFactory:getBootstrapListener,deps:[router_RouterInitializer]},{provide:APP_BOOTSTRAP_LISTENER,multi:!0,useExisting:ROUTER_INITIALIZER}]]}}static forChild(routes){return{ngModule:router_RouterModule,providers:[provideRoutes(routes)]}}}function createRouterScroller(router,viewportScroller,config){return config.scrollOffset&&viewportScroller.setOffset(config.scrollOffset),new RouterScroller(router,viewportScroller,config)}function provideLocationStrategy(platformLocationStrategy,baseHref,options={}){return options.useHash?new HashLocationStrategy(platformLocationStrategy,baseHref):new PathLocationStrategy(platformLocationStrategy,baseHref)}function provideForRootGuard(router){if(router)throw new Error(\"RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.\");return\"guarded\"}function provideRoutes(routes){return[{provide:ANALYZE_FOR_ENTRY_COMPONENTS,multi:!0,useValue:routes},{provide:ROUTES,multi:!0,useValue:routes}]}function setupRouter(ref,urlSerializer,contexts,location,injector,loader,compiler,config,opts={},urlHandlingStrategy,routeReuseStrategy){const router=new router_Router(null,urlSerializer,contexts,location,injector,loader,compiler,router_flatten(config));if(urlHandlingStrategy&&(router.urlHandlingStrategy=urlHandlingStrategy),routeReuseStrategy&&(router.routeReuseStrategy=routeReuseStrategy),opts.errorHandler&&(router.errorHandler=opts.errorHandler),opts.malformedUriErrorHandler&&(router.malformedUriErrorHandler=opts.malformedUriErrorHandler),opts.enableTracing){const dom=getDOM();router.events.subscribe(e=>{dom.logGroup(\"Router Event: \"+e.constructor.name),dom.log(e.toString()),dom.log(e),dom.logGroupEnd()})}return opts.onSameUrlNavigation&&(router.onSameUrlNavigation=opts.onSameUrlNavigation),opts.paramsInheritanceStrategy&&(router.paramsInheritanceStrategy=opts.paramsInheritanceStrategy),opts.urlUpdateStrategy&&(router.urlUpdateStrategy=opts.urlUpdateStrategy),opts.relativeLinkResolution&&(router.relativeLinkResolution=opts.relativeLinkResolution),router}function rootRoute(router){return router.routerState.root}class router_RouterInitializer{constructor(injector){this.injector=injector,this.initNavigation=!1,this.resultOfPreactivationDone=new Subject_Subject}appInitializer(){return this.injector.get(LOCATION_INITIALIZED,Promise.resolve(null)).then(()=>{let resolve=null;const res=new Promise(r=>resolve=r),router=this.injector.get(router_Router),opts=this.injector.get(ROUTER_CONFIGURATION);if(this.isLegacyDisabled(opts)||this.isLegacyEnabled(opts))resolve(!0);else if(\"disabled\"===opts.initialNavigation)router.setUpLocationChangeListener(),resolve(!0);else{if(\"enabled\"!==opts.initialNavigation)throw new Error(`Invalid initialNavigation options: '${opts.initialNavigation}'`);router.hooks.afterPreactivation=()=>this.initNavigation?of(null):(this.initNavigation=!0,resolve(!0),this.resultOfPreactivationDone),router.initialNavigation()}return res})}bootstrapListener(bootstrappedComponentRef){const opts=this.injector.get(ROUTER_CONFIGURATION),preloader=this.injector.get(router_RouterPreloader),routerScroller=this.injector.get(RouterScroller),router=this.injector.get(router_Router),ref=this.injector.get(core_ApplicationRef);bootstrappedComponentRef===ref.components[0]&&(this.isLegacyEnabled(opts)?router.initialNavigation():this.isLegacyDisabled(opts)&&router.setUpLocationChangeListener(),preloader.setUpPreloading(),routerScroller.init(),router.resetRootComponentType(ref.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(opts){return\"legacy_enabled\"===opts.initialNavigation||!0===opts.initialNavigation||void 0===opts.initialNavigation}isLegacyDisabled(opts){return\"legacy_disabled\"===opts.initialNavigation||!1===opts.initialNavigation}}function getAppInitializer(r){return r.appInitializer.bind(r)}function getBootstrapListener(r){return r.bootstrapListener.bind(r)}const ROUTER_INITIALIZER=new InjectionToken(\"Router Initializer\");var RenderType_angular_packages_router_router_l=createRendererType2({encapsulation:2,styles:[],data:{}});function View_angular_packages_router_router_l_0(_l){return viewDef(0,[(_l()(),elementDef(0,16777216,null,null,1,\"router-outlet\",[],null,null,null,null,null)),directiveDef(1,212992,null,0,router_RouterOutlet,[ChildrenOutletContexts,ViewContainerRef,ComponentFactoryResolver,[8,null],ChangeDetectorRef],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}function View_angular_packages_router_router_l_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"ng-component\",[],null,null,null,View_angular_packages_router_router_l_0,RenderType_angular_packages_router_router_l)),directiveDef(1,49152,null,0,EmptyOutletComponent,[],null,null)],null,null)}var angular_packages_router_router_lNgFactory=createComponentFactory(\"ng-component\",EmptyOutletComponent,View_angular_packages_router_router_l_Host_0,{},{},[]);class PostCardComponent{constructor(){}ngOnInit(){console.log(this.postData)}}var RenderType_PostCardComponent=createRendererType2({encapsulation:0,styles:[[\".card[_ngcontent-%COMP%]{max-width:400px;min-height:500px}\"]],data:{}});function View_PostCardComponent_2(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"small\",[[\"class\",\"bg-light text-danger text-center ml-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Featured\"]))],null,null)}function View_PostCardComponent_1(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,17,\"div\",[[\"class\",\"card shadow-effect\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==nodeValue(_v,1).onClick()&&ad),ad}),null,null)),directiveDef(1,16384,null,0,router_RouterLink,[router_Router,router_ActivatedRoute,[8,null],Renderer2,ElementRef],{routerLink:[0,\"routerLink\"]},null),pureArrayDef(2,2),(_l()(),elementDef(3,0,null,null,0,\"img\",[[\"alt\",\"post-image\"],[\"class\",\"card-img-top\"]],[[8,\"src\",4]],null,null,null,null)),(_l()(),elementDef(4,0,null,null,13,\"div\",[[\"class\",\"card-body\"]],null,null,null,null,null)),(_l()(),elementDef(5,0,null,null,1,\"small\",[[\"class\",\"bg-light text-danger text-center\"]],null,null,null,null,null)),(_l()(),textDef(6,null,[\"\",\"\"])),(_l()(),anchorDef(16777216,null,null,1,null,View_PostCardComponent_2)),directiveDef(8,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null),(_l()(),elementDef(9,0,null,null,1,\"small\",[[\"class\",\"bg-light text-danger text-center ml-3\"]],null,null,null,null,null)),(_l()(),textDef(10,null,[\"Views-\",\"\"])),(_l()(),elementDef(11,0,null,null,1,\"h5\",[[\"class\",\" bg-light text-info mt-1\"]],null,null,null,null,null)),(_l()(),textDef(12,null,[\"\",\"\"])),(_l()(),elementDef(13,0,null,null,1,\"p\",[[\"class\",\"bg-light text-info\"]],null,null,null,null,null)),(_l()(),textDef(14,null,[\"\",\"\"])),(_l()(),elementDef(15,0,null,null,2,\"small\",[[\"class\",\"bg-light text-warning text-center ml-3\"]],null,null,null,null,null)),(_l()(),textDef(16,null,[\"LAST UPDATED -\",\"\"])),purePipeDef(17,1)],(function(_ck,_v){var _co=_v.component,currVal_0=_ck(_v,2,0,\"/post\",_co.postData.id);_ck(_v,1,0,currVal_0),_ck(_v,8,0,_co.postData.data.isFeatured)}),(function(_ck,_v){var _co=_v.component;_ck(_v,3,0,inlineInterpolate(1,\"\",_co.postData.data.postImgPath,\"\")),_ck(_v,6,0,_co.postData.data.category.category),_ck(_v,10,0,_co.postData.data.views),_ck(_v,12,0,_co.postData.data.title),_ck(_v,14,0,_co.postData.data.excerpt);var currVal_7=unwrapValue(_v,16,0,_ck(_v,17,0,nodeValue(_v.parent,0),_co.postData.data.createdAt.toMillis()));_ck(_v,16,0,currVal_7)}))}function View_PostCardComponent_0(_l){return viewDef(0,[pipeDef(0,DatePipe,[LOCALE_ID$1]),(_l()(),anchorDef(16777216,null,null,1,null,View_PostCardComponent_1)),directiveDef(2,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null)],(function(_ck,_v){_ck(_v,2,0,_v.component.postData)}),null)}function View_PostCardComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-post-card\",[],null,null,null,View_PostCardComponent_0,RenderType_PostCardComponent)),directiveDef(1,114688,null,0,PostCardComponent,[],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var PostCardComponentNgFactory=createComponentFactory(\"app-post-card\",PostCardComponent,View_PostCardComponent_Host_0,{postData:\"postData\"},{},[]);class HomeComponent{constructor(postService){this.postService=postService,this.featuredPostsArray=[],this.latestPostsArray=[]}ngOnInit(){this.postService.loadFeatured().subscribe(val=>{this.featuredPostsArray=val}),this.postService.loadLatest().subscribe(val=>{this.latestPostsArray=val})}}var index_cjs=__webpack_require__(\"iqUP\");class Action_Action extends Subscription_Subscription{constructor(scheduler,work){super()}schedule(state,delay=0){return this}}class AsyncAction_AsyncAction extends Action_Action{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work,this.pending=!1}schedule(state,delay=0){if(this.closed)return this;this.state=state;const id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=this.id||this.requestAsyncId(scheduler,this.id,delay),this}requestAsyncId(scheduler,id,delay=0){return setInterval(scheduler.flush.bind(scheduler,this),delay)}recycleAsyncId(scheduler,id,delay=0){if(null!==delay&&this.delay===delay&&!1===this.pending)return id;clearInterval(id)}execute(state,delay){if(this.closed)return new Error(\"executing a cancelled action\");this.pending=!1;const error=this._execute(state,delay);if(error)return error;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(state,delay){let errored=!1,errorValue=void 0;try{this.work(state)}catch(e){errored=!0,errorValue=!!e&&e||new Error(e)}if(errored)return this.unsubscribe(),errorValue}_unsubscribe(){const id=this.id,scheduler=this.scheduler,actions=scheduler.actions,index=actions.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==index&&actions.splice(index,1),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null}}let Scheduler=(()=>{class Scheduler{constructor(SchedulerAction,now=Scheduler.now){this.SchedulerAction=SchedulerAction,this.now=now}schedule(work,delay=0,state){return new this.SchedulerAction(this,work).schedule(state,delay)}}return Scheduler.now=()=>Date.now(),Scheduler})();class AsyncScheduler_AsyncScheduler extends Scheduler{constructor(SchedulerAction,now=Scheduler.now){super(SchedulerAction,()=>AsyncScheduler_AsyncScheduler.delegate&&AsyncScheduler_AsyncScheduler.delegate!==this?AsyncScheduler_AsyncScheduler.delegate.now():now()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(work,delay=0,state){return AsyncScheduler_AsyncScheduler.delegate&&AsyncScheduler_AsyncScheduler.delegate!==this?AsyncScheduler_AsyncScheduler.delegate.schedule(work,delay,state):super.schedule(work,delay,state)}flush(action){const{actions:actions}=this;if(this.active)return void actions.push(action);let error;this.active=!0;do{if(error=action.execute(action.state,action.delay))break}while(action=actions.shift());if(this.active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}}}const async_async=new AsyncScheduler_AsyncScheduler(AsyncAction_AsyncAction);function fromRef(ref,scheduler){return function(ref,scheduler=async_async){return new Observable_Observable(subscriber=>{let unsubscribe;return null!=scheduler?scheduler.schedule(()=>{unsubscribe=ref.onSnapshot(subscriber)}):unsubscribe=ref.onSnapshot(subscriber),function(){null!=unsubscribe&&unsubscribe()}})}(ref,scheduler)}function fromCollectionRef(ref,scheduler){return fromRef(ref,scheduler).pipe(map(payload=>({payload:payload,type:\"query\"})))}let Notification_Notification=(()=>{class Notification{constructor(kind,value,error){this.kind=kind,this.value=value,this.error=error,this.hasValue=\"N\"===kind}observe(observer){switch(this.kind){case\"N\":return observer.next&&observer.next(this.value);case\"E\":return observer.error&&observer.error(this.error);case\"C\":return observer.complete&&observer.complete()}}do(next,error,complete){switch(this.kind){case\"N\":return next&&next(this.value);case\"E\":return error&&error(this.error);case\"C\":return complete&&complete()}}accept(nextOrObserver,error,complete){return nextOrObserver&&\"function\"==typeof nextOrObserver.next?this.observe(nextOrObserver):this.do(nextOrObserver,error,complete)}toObservable(){switch(this.kind){case\"N\":return of(this.value);case\"E\":return error=this.error,new Observable_Observable(subscriber=>subscriber.error(error));case\"C\":return empty_empty()}var error;throw new Error(\"unexpected notification kind value\")}static createNext(value){return void 0!==value?new Notification(\"N\",value):Notification.undefinedValueNotification}static createError(err){return new Notification(\"E\",void 0,err)}static createComplete(){return Notification.completeNotification}}return Notification.completeNotification=new Notification(\"C\"),Notification.undefinedValueNotification=new Notification(\"N\",void 0),Notification})();function observeOn(scheduler,delay=0){return function(source){return source.lift(new ObserveOnOperator(scheduler,delay))}}class ObserveOnOperator{constructor(scheduler,delay=0){this.scheduler=scheduler,this.delay=delay}call(subscriber,source){return source.subscribe(new observeOn_ObserveOnSubscriber(subscriber,this.scheduler,this.delay))}}class observeOn_ObserveOnSubscriber extends Subscriber_Subscriber{constructor(destination,scheduler,delay=0){super(destination),this.scheduler=scheduler,this.delay=delay}static dispatch(arg){const{notification:notification,destination:destination}=arg;notification.observe(destination),this.unsubscribe()}scheduleMessage(notification){this.destination.add(this.scheduler.schedule(observeOn_ObserveOnSubscriber.dispatch,this.delay,new ObserveOnMessage(notification,this.destination)))}_next(value){this.scheduleMessage(Notification_Notification.createNext(value))}_error(err){this.scheduleMessage(Notification_Notification.createError(err)),this.unsubscribe()}_complete(){this.scheduleMessage(Notification_Notification.createComplete()),this.unsubscribe()}}class ObserveOnMessage{constructor(notification,destination){this.notification=notification,this.destination=destination}}function docChanges(query,scheduler){return fromCollectionRef(query,scheduler).pipe(map(action=>action.payload.docChanges().map(change=>({type:change.type,payload:change}))))}function sortedChanges(query,events,scheduler){return fromCollectionRef(query,scheduler).pipe(map(changes=>changes.payload.docChanges()),scan((current,changes)=>function(current,changes,events){return changes.forEach(change=>{events.indexOf(change.type)>-1&&(current=function(combined,change){switch(change.type){case\"added\":combined[change.newIndex]&&combined[change.newIndex].doc.ref.isEqual(change.doc.ref)||combined.splice(change.newIndex,0,change);break;case\"modified\":(null==combined[change.oldIndex]||combined[change.oldIndex].doc.ref.isEqual(change.doc.ref))&&(change.oldIndex!==change.newIndex?(combined.splice(change.oldIndex,1),combined.splice(change.newIndex,0,change)):combined.splice(change.newIndex,1,change));break;case\"removed\":combined[change.oldIndex]&&combined[change.oldIndex].doc.ref.isEqual(change.doc.ref)&&combined.splice(change.oldIndex,1)}return combined}(current,change))}),current}(current,changes,events),[]),map(changes=>changes.map(c=>({type:c.type,payload:c}))))}function validateEventsArray(events){return events&&0!==events.length||(events=[\"added\",\"removed\",\"modified\"]),events}class collection_AngularFirestoreCollection{constructor(ref,query,afs){this.ref=ref,this.query=query,this.afs=afs}stateChanges(events){return events&&0!==events.length?docChanges(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,map(actions=>actions.filter(change=>events.indexOf(change.type)>-1)),filter(changes=>changes.length>0)):docChanges(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(events){return this.stateChanges(events).pipe(scan((current,action)=>[...current,...action],[]))}snapshotChanges(events){const validatedEvents=validateEventsArray(events);return sortedChanges(this.query,validatedEvents,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(options={}){return fromCollectionRef(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,map(actions=>actions.payload.docs.map(a=>options.idField?Object.assign({},a.data(),{[options.idField]:a.id}):a.data())))}get(options){return from(this.query.get(options)).pipe(observeOn(this.afs.schedulers.insideAngular))}add(data){return this.ref.add(data)}doc(path){return new document_AngularFirestoreDocument(this.ref.doc(path),this.afs)}}class document_AngularFirestoreDocument{constructor(ref,afs){this.ref=ref,this.afs=afs}set(data,options){return this.ref.set(data,options)}update(data){return this.ref.update(data)}delete(){return this.ref.delete()}collection(path,queryFn){const collectionRef=this.ref.collection(path),{ref:ref,query:query}=associateQuery(collectionRef,queryFn);return new collection_AngularFirestoreCollection(ref,query,this.afs)}snapshotChanges(){return fromRef(this.ref,this.afs.schedulers.outsideAngular).pipe(map(payload=>({payload:payload,type:\"value\"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(map(action=>action.payload.data()))}get(options){return from(this.ref.get(options)).pipe(observeOn(this.afs.schedulers.insideAngular))}}class collection_group_AngularFirestoreCollectionGroup{constructor(query,afs){this.query=query,this.afs=afs}stateChanges(events){return events&&0!==events.length?docChanges(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,map(actions=>actions.filter(change=>events.indexOf(change.type)>-1)),filter(changes=>changes.length>0)):docChanges(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(events){return this.stateChanges(events).pipe(scan((current,action)=>[...current,...action],[]))}snapshotChanges(events){const validatedEvents=validateEventsArray(events);return sortedChanges(this.query,validatedEvents,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return fromCollectionRef(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,map(actions=>actions.payload.docs.map(a=>a.data())))}get(options){return from(this.query.get(options)).pipe(observeOn(this.afs.schedulers.insideAngular))}}class QueueAction_QueueAction extends AsyncAction_AsyncAction{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work}schedule(state,delay=0){return delay>0?super.schedule(state,delay):(this.delay=delay,this.state=state,this.scheduler.flush(this),this)}execute(state,delay){return delay>0||this.closed?super.execute(state,delay):this._execute(state,delay)}requestAsyncId(scheduler,id,delay=0){return null!==delay&&delay>0||null===delay&&this.delay>0?super.requestAsyncId(scheduler,id,delay):scheduler.flush(this)}}class QueueScheduler_QueueScheduler extends AsyncScheduler_AsyncScheduler{}const queue=new QueueScheduler_QueueScheduler(QueueAction_QueueAction);let nextHandle=1;const tasksByHandle={},Immediate={setImmediate(cb){const handle=nextHandle++;return tasksByHandle[handle]=cb,Promise.resolve().then(()=>function(handle){const cb=tasksByHandle[handle];cb&&cb()}(handle)),handle},clearImmediate(handle){delete tasksByHandle[handle]}};class AsapAction_AsapAction extends AsyncAction_AsyncAction{constructor(scheduler,work){super(scheduler,work),this.scheduler=scheduler,this.work=work}requestAsyncId(scheduler,id,delay=0){return null!==delay&&delay>0?super.requestAsyncId(scheduler,id,delay):(scheduler.actions.push(this),scheduler.scheduled||(scheduler.scheduled=Immediate.setImmediate(scheduler.flush.bind(scheduler,null))))}recycleAsyncId(scheduler,id,delay=0){if(null!==delay&&delay>0||null===delay&&this.delay>0)return super.recycleAsyncId(scheduler,id,delay);0===scheduler.actions.length&&(Immediate.clearImmediate(id),scheduler.scheduled=void 0)}}class AsapScheduler_AsapScheduler extends AsyncScheduler_AsyncScheduler{flush(action){this.active=!0,this.scheduled=void 0;const{actions:actions}=this;let error,index=-1,count=actions.length;action=action||actions.shift();do{if(error=action.execute(action.state,action.delay))break}while(++index<count&&(action=actions.shift()));if(this.active=!1,error){for(;++index<count&&(action=actions.shift());)action.unsubscribe();throw error}}}const asap=new AsapScheduler_AsapScheduler(AsapAction_AsapAction);class SubscribeOnObservable_SubscribeOnObservable extends Observable_Observable{constructor(source,delayTime=0,scheduler=asap){var val;super(),this.source=source,this.delayTime=delayTime,this.scheduler=scheduler,(isArray(val=delayTime)||!(val-parseFloat(val)+1>=0)||delayTime<0)&&(this.delayTime=0),scheduler&&\"function\"==typeof scheduler.schedule||(this.scheduler=asap)}static create(source,delay=0,scheduler=asap){return new SubscribeOnObservable_SubscribeOnObservable(source,delay,scheduler)}static dispatch(arg){const{source:source,subscriber:subscriber}=arg;return this.add(source.subscribe(subscriber))}_subscribe(subscriber){return this.scheduler.schedule(SubscribeOnObservable_SubscribeOnObservable.dispatch,this.delayTime,{source:this.source,subscriber:subscriber})}}class subscribeOn_SubscribeOnOperator{constructor(scheduler,delay){this.scheduler=scheduler,this.delay=delay}call(subscriber,source){return new SubscribeOnObservable_SubscribeOnObservable(source,this.delay,this.scheduler).subscribe(subscriber)}}function angularfire2_noop(){}class angularfire2_ZoneScheduler{constructor(zone,delegate=queue){this.zone=zone,this.delegate=delegate}now(){return this.delegate.now()}schedule(work,delay,state){const targetZone=this.zone;return this.delegate.schedule((function(state){targetZone.runGuarded(()=>{work.apply(this,[state])})}),delay,state)}}class angularfire2_BlockUntilFirstOperator{constructor(zone){this.zone=zone,this.task=null}call(subscriber,source){const unscheduleTask=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask(\"firebaseZoneBlock\",angularfire2_noop,{},angularfire2_noop,angularfire2_noop)),source.pipe(tap(unscheduleTask,unscheduleTask,unscheduleTask)).subscribe(subscriber).add(unscheduleTask)}unscheduleTask(){null!=this.task&&\"scheduled\"===this.task.state&&(this.task.invoke(),this.task=null)}}class angularfire2_AngularFireSchedulers{constructor(ngZone){this.ngZone=ngZone,this.outsideAngular=ngZone.runOutsideAngular(()=>new angularfire2_ZoneScheduler(Zone.current)),this.insideAngular=ngZone.run(()=>new angularfire2_ZoneScheduler(Zone.current,async_async))}}var AngularFireModule_1,dist_index_cjs=__webpack_require__(\"Wcq6\"),dist_index_cjs_default=__webpack_require__.n(dist_index_cjs);const FirebaseOptionsToken=new InjectionToken(\"angularfire2.app.options\"),FirebaseNameOrConfigToken=new InjectionToken(\"angularfire2.app.nameOrConfig\"),FIREBASE_OPTIONS=FirebaseOptionsToken,FIREBASE_APP_NAME=FirebaseNameOrConfigToken;class FirebaseApp{}const firebase_app_module_VERSION=new Version(\"5.4.2\");function _firebaseAppFactory(options,zone,nameOrConfig){const config=\"object\"==typeof nameOrConfig&&nameOrConfig||{};return config.name=config.name||\"string\"==typeof nameOrConfig&&nameOrConfig||\"[DEFAULT]\",dist_index_cjs_default.a.apps.filter(app=>app&&app.name===config.name)[0]||zone.runOutsideAngular(()=>dist_index_cjs_default.a.initializeApp(options,config))}let firebase_app_module_AngularFireModule=AngularFireModule_1=class{constructor(platformId){dist_index_cjs_default.a.registerVersion&&(dist_index_cjs_default.a.registerVersion(\"angularfire\",firebase_app_module_VERSION.full,platformId.toString()),dist_index_cjs_default.a.registerVersion(\"angular\",VERSION.full))}static initializeApp(options,nameOrConfig){return{ngModule:AngularFireModule_1,providers:[{provide:FIREBASE_OPTIONS,useValue:options},{provide:FIREBASE_APP_NAME,useValue:nameOrConfig}]}}};const EnablePersistenceToken=new InjectionToken(\"angularfire2.enableFirestorePersistence\"),PersistenceSettingsToken=new InjectionToken(\"angularfire2.firestore.persistenceSettings\"),FirestoreSettingsToken=new InjectionToken(\"angularfire2.firestore.settings\"),major=parseInt(dist_index_cjs_default.a.SDK_VERSION.split(\".\")[0]),DefaultFirestoreSettings=major<5||5==major&&parseInt(dist_index_cjs_default.a.SDK_VERSION.split(\".\")[1])<8?{timestampsInSnapshots:!0}:{};function associateQuery(collectionRef,queryFn=(ref=>ref)){return{query:queryFn(collectionRef),ref:collectionRef}}let firestore_AngularFirestore=class{constructor(options,nameOrConfig,shouldEnablePersistence,settings,platformId,zone,persistenceSettings){this.schedulers=new angularfire2_AngularFireSchedulers(zone),this.keepUnstableUntilFirst=function(schedulers,platformId){return function(obs$){return isPlatformServer(platformId)&&(obs$=obs$.lift(new angularfire2_BlockUntilFirstOperator(schedulers.ngZone))),obs$.pipe(function(scheduler,delay=0){return function(source){return source.lift(new subscribeOn_SubscribeOnOperator(scheduler,delay))}}(schedulers.outsideAngular),observeOn(schedulers.insideAngular))}}(this.schedulers,platformId),this.firestore=zone.runOutsideAngular(()=>{const firestore=_firebaseAppFactory(options,zone,nameOrConfig).firestore();return firestore.settings(settings||DefaultFirestoreSettings),firestore}),this.persistenceEnabled$=shouldEnablePersistence&&!isPlatformServer(platformId)?zone.runOutsideAngular(()=>{try{return from(this.firestore.enablePersistence(persistenceSettings||void 0).then(()=>!0,()=>!1))}catch(e){return of(!1)}}):of(!1)}collection(pathOrRef,queryFn){let collectionRef;collectionRef=\"string\"==typeof pathOrRef?this.firestore.collection(pathOrRef):pathOrRef;const{ref:ref,query:query}=associateQuery(collectionRef,queryFn);return new collection_AngularFirestoreCollection(ref,query,this)}collectionGroup(collectionId,queryGroupFn){if(major<6)throw\"collection group queries require Firebase JS SDK >= 6.0\";const queryFn=queryGroupFn||(ref=>ref),collectionGroup=this.firestore.collectionGroup(collectionId);return new collection_group_AngularFirestoreCollectionGroup(queryFn(collectionGroup),this)}doc(pathOrRef){let ref;return ref=\"string\"==typeof pathOrRef?this.firestore.doc(pathOrRef):pathOrRef,new document_AngularFirestoreDocument(ref,this)}createId(){return this.firestore.collection(\"_\").doc().id}},post_service_PostService=(()=>{class PostService{constructor(afs){this.afs=afs}loadFeatured(){return this.afs.collection(\"posts\",ref=>ref.where(\"isFeatured\",\"==\",!0).limit(4)).snapshotChanges().pipe(map(actions=>actions.map(a=>{const data=a.payload.doc.data();return{id:a.payload.doc.id,data:data}})))}loadLatest(){return this.afs.collection(\"posts\",ref=>ref.orderBy(\"createdAt\")).snapshotChanges().pipe(map(actions=>actions.map(a=>{const data=a.payload.doc.data();return{id:a.payload.doc.id,data:data}})))}loadCetegoryPosts(categoryId){return this.afs.collection(\"posts\",ref=>ref.where(\"category.categoryId\",\"==\",categoryId).limit(4)).snapshotChanges().pipe(map(actions=>actions.map(a=>{const data=a.payload.doc.data();return{id:a.payload.doc.id,data:data}})))}loadOnePost(postId){return this.afs.doc(\"posts/\"+postId).valueChanges()}loadSimilar(catId){return this.afs.collection(\"posts\",ref=>ref.where(\"category.categoryId\",\"==\",catId).limit(4)).snapshotChanges().pipe(map(actions=>actions.map(a=>{const data=a.payload.doc.data();return{id:a.payload.doc.id,data:data}})))}countViews(postId){const viewCount={views:index_cjs.firestore.FieldValue.increment(1)};this.afs.doc(\"posts/\"+postId).update(viewCount).then(()=>{console.log(\"views Count Updated\")})}}return PostService.ngInjectableDef=defineInjectable({factory:function(){return new PostService(inject(firestore_AngularFirestore))},token:PostService,providedIn:\"root\"}),PostService})();var RenderType_HomeComponent=createRendererType2({encapsulation:0,styles:[[\".featured-section[_ngcontent-%COMP%]{padding-left:40px;padding-right:40px;padding-bottom:40px;background-color:var(--primary-color);margin:auto auto 8px;border-radius:10px;box-shadow:0 0 20px rgba(0,0,0,.1)}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}\"]],data:{}});function View_HomeComponent_1(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,2,\"div\",[[\"class\",\"col-lg-3 col-md-4\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,1,\"app-post-card\",[],null,null,null,View_PostCardComponent_0,RenderType_PostCardComponent)),directiveDef(2,114688,null,0,PostCardComponent,[],{postData:[0,\"postData\"]},null)],(function(_ck,_v){_ck(_v,2,0,_v.context.$implicit)}),null)}function View_HomeComponent_2(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,2,\"div\",[[\"class\",\"col-md-4 mt-3\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,1,\"app-post-card\",[],null,null,null,View_PostCardComponent_0,RenderType_PostCardComponent)),directiveDef(2,114688,null,0,PostCardComponent,[],{postData:[0,\"postData\"]},null)],(function(_ck,_v){_ck(_v,2,0,_v.context.$implicit)}),null)}function View_HomeComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,10,\"section\",[[\"class\",\"featured-section\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,9,\"div\",[[\"class\",\"container mt-5\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,5,\"div\",[[\"class\",\"row\"]],null,null,null,null,null)),(_l()(),elementDef(3,0,null,null,4,\"div\",[[\"class\",\"col-md-12 text-center\"]],null,null,null,null,null)),(_l()(),elementDef(4,0,null,null,1,\"h2\",[[\"class\",\"text-white\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Featured Post\"])),(_l()(),elementDef(6,0,null,null,1,\"p\",[[\"class\",\"text-white\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Vijay Saroay Home Page\"])),(_l()(),elementDef(8,0,null,null,2,\"div\",[[\"class\",\"row cursor-pointer\"]],null,null,null,null,null)),(_l()(),anchorDef(16777216,null,null,1,null,View_HomeComponent_1)),directiveDef(10,278528,null,0,common_NgForOf,[ViewContainerRef,TemplateRef,IterableDiffers],{ngForOf:[0,\"ngForOf\"]},null),(_l()(),elementDef(11,0,null,null,8,\"section\",[[\"class\",\"continer mt-5\"]],null,null,null,null,null)),(_l()(),elementDef(12,0,null,null,4,\"div\",[[\"class\",\"col-md-12 text-center\"]],null,null,null,null,null)),(_l()(),elementDef(13,0,null,null,1,\"h2\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Latest Posts\"])),(_l()(),elementDef(15,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Vijay Saroay latest post\"])),(_l()(),elementDef(17,0,null,null,2,\"div\",[[\"class\",\"row cursor-pointer\"]],null,null,null,null,null)),(_l()(),anchorDef(16777216,null,null,1,null,View_HomeComponent_2)),directiveDef(19,278528,null,0,common_NgForOf,[ViewContainerRef,TemplateRef,IterableDiffers],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,10,0,_co.featuredPostsArray),_ck(_v,19,0,_co.latestPostsArray)}),null)}function View_HomeComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-home\",[],null,null,null,View_HomeComponent_0,RenderType_HomeComponent)),directiveDef(1,114688,null,0,HomeComponent,[post_service_PostService],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var HomeComponentNgFactory=createComponentFactory(\"app-home\",HomeComponent,View_HomeComponent_Host_0,{},{},[]);class DarkModeComponent{constructor(){this.isDarkMode=!1}ngOnInit(){}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,document.querySelector(\"body\").classList.toggle(\"dark-mode\",this.isDarkMode)}}var RenderType_DarkModeComponent=createRendererType2({encapsulation:0,styles:[[\"dark-mode[_ngcontent-%COMP%]{background-color:#23af16;color:#705454}\"]],data:{}});function View_DarkModeComponent_0(_l){return viewDef(0,[],null,null)}function View_DarkModeComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-dark-mode\",[],null,null,null,View_DarkModeComponent_0,RenderType_DarkModeComponent)),directiveDef(1,114688,null,0,DarkModeComponent,[],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var DarkModeComponentNgFactory=createComponentFactory(\"app-dark-mode\",DarkModeComponent,View_DarkModeComponent_Host_0,{},{},[]);class SingleCategoryComponent{constructor(route,postService){this.route=route,this.postService=postService,this.postsArray=[]}ngOnInit(){this.route.params.subscribe(val=>{console.log(val),this.categoryObj=val,this.postService.loadCetegoryPosts(val.id).subscribe(post=>{this.postsArray=post})})}}var RenderType_SingleCategoryComponent=createRendererType2({encapsulation:0,styles:[[\"\"]],data:{}});function View_SingleCategoryComponent_1(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,2,\"div\",[[\"class\",\"col-md-4 mb-3\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,1,\"app-post-card\",[],null,null,null,View_PostCardComponent_0,RenderType_PostCardComponent)),directiveDef(2,114688,null,0,PostCardComponent,[],{postData:[0,\"postData\"]},null)],(function(_ck,_v){_ck(_v,2,0,_v.context.$implicit)}),null)}function View_SingleCategoryComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,5,\"div\",[[\"class\",\"bg-theme\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,4,\"div\",[[\"class\",\"container\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,1,\"h1\",[[\"class\",\"text-white\"]],null,null,null,null,null)),(_l()(),textDef(3,null,[\"\",\"\"])),(_l()(),elementDef(4,0,null,null,1,\"p\",[[\"class\",\"text-white\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Vijay Saroay Blog Website Premium Content\"])),(_l()(),elementDef(6,0,null,null,3,\"div\",[[\"class\",\"container mt-5 mb-5\"]],null,null,null,null,null)),(_l()(),elementDef(7,0,null,null,2,\"div\",[[\"class\",\"row\"]],null,null,null,null,null)),(_l()(),anchorDef(16777216,null,null,1,null,View_SingleCategoryComponent_1)),directiveDef(9,278528,null,0,common_NgForOf,[ViewContainerRef,TemplateRef,IterableDiffers],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){_ck(_v,9,0,_v.component.postsArray)}),(function(_ck,_v){_ck(_v,3,0,_v.component.categoryObj.category)}))}function View_SingleCategoryComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-single-category\",[],null,null,null,View_SingleCategoryComponent_0,RenderType_SingleCategoryComponent)),directiveDef(1,114688,null,0,SingleCategoryComponent,[router_ActivatedRoute,post_service_PostService],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var SingleCategoryComponentNgFactory=createComponentFactory(\"app-single-category\",SingleCategoryComponent,View_SingleCategoryComponent_Host_0,{},{},[]);class forkJoin_ForkJoinSubscriber extends OuterSubscriber_OuterSubscriber{constructor(destination,sources){super(destination),this.sources=sources,this.completed=0,this.haveValues=0;const len=sources.length;this.values=new Array(len);for(let i=0;i<len;i++){const innerSubscription=subscribeToResult(this,sources[i],null,i);innerSubscription&&this.add(innerSubscription)}}notifyNext(outerValue,innerValue,outerIndex,innerIndex,innerSub){this.values[outerIndex]=innerValue,innerSub._hasValue||(innerSub._hasValue=!0,this.haveValues++)}notifyComplete(innerSub){const{destination:destination,haveValues:haveValues,values:values}=this,len=values.length;innerSub._hasValue?(this.completed++,this.completed===len&&(haveValues===len&&destination.next(values),destination.complete())):destination.complete()}}const NG_VALUE_ACCESSOR=new InjectionToken(\"NgValueAccessor\"),COMPOSITION_BUFFER_MODE=new InjectionToken(\"CompositionEventMode\");class DefaultValueAccessor{constructor(_renderer,_elementRef,_compositionMode){this._renderer=_renderer,this._elementRef=_elementRef,this._compositionMode=_compositionMode,this.onChange=_=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const userAgent=getDOM()?getDOM().getUserAgent():\"\";return/android (\\d+)/.test(userAgent.toLowerCase())}())}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,\"value\",null==value?\"\":value)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,\"disabled\",isDisabled)}_handleInput(value){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(value)}_compositionStart(){this._composing=!0}_compositionEnd(value){this._composing=!1,this._compositionMode&&this.onChange(value)}}class AbstractControlDirective{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(value){this.control&&this.control.reset(value)}hasError(errorCode,path){return!!this.control&&this.control.hasError(errorCode,path)}getError(errorCode,path){return this.control?this.control.getError(errorCode,path):null}}class ControlContainer extends AbstractControlDirective{get formDirective(){return null}get path(){return null}}function unimplemented(){throw new Error(\"unimplemented\")}class NgControl extends AbstractControlDirective{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return unimplemented()}get asyncValidator(){return unimplemented()}}class AbstractControlStatus{constructor(cd){this._cd=cd}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}class NgControlStatus extends AbstractControlStatus{constructor(cd){super(cd)}}class NgControlStatusGroup extends AbstractControlStatus{constructor(cd){super(cd)}}function isEmptyInputValue(value){return null==value||0===value.length}const NG_VALIDATORS=new InjectionToken(\"NgValidators\"),EMAIL_REGEXP=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class forms_Validators{static min(min){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(min))return null;const value=parseFloat(control.value);return!isNaN(value)&&value<min?{min:{min:min,actual:control.value}}:null}}static max(max){return control=>{if(isEmptyInputValue(control.value)||isEmptyInputValue(max))return null;const value=parseFloat(control.value);return!isNaN(value)&&value>max?{max:{max:max,actual:control.value}}:null}}static required(control){return isEmptyInputValue(control.value)?{required:!0}:null}static requiredTrue(control){return!0===control.value?null:{required:!0}}static email(control){return isEmptyInputValue(control.value)||EMAIL_REGEXP.test(control.value)?null:{email:!0}}static minLength(minLength){return control=>{if(isEmptyInputValue(control.value))return null;const length=control.value?control.value.length:0;return length<minLength?{minlength:{requiredLength:minLength,actualLength:length}}:null}}static maxLength(maxLength){return control=>{const length=control.value?control.value.length:0;return length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:length}}:null}}static pattern(pattern){if(!pattern)return forms_Validators.nullValidator;let regex,regexStr;return\"string\"==typeof pattern?(regexStr=\"\",\"^\"!==pattern.charAt(0)&&(regexStr+=\"^\"),regexStr+=pattern,\"$\"!==pattern.charAt(pattern.length-1)&&(regexStr+=\"$\"),regex=new RegExp(regexStr)):(regexStr=pattern.toString(),regex=pattern),control=>{if(isEmptyInputValue(control.value))return null;const value=control.value;return regex.test(value)?null:{pattern:{requiredPattern:regexStr,actualValue:value}}}}static nullValidator(control){return null}static compose(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){return _mergeErrors(function(control,validators){return validators.map(v=>v(control))}(control,presentValidators))}}static composeAsync(validators){if(!validators)return null;const presentValidators=validators.filter(isPresent);return 0==presentValidators.length?null:function(control){return function forkJoin(...sources){let resultSelector;return\"function\"==typeof sources[sources.length-1]&&(resultSelector=sources.pop()),1===sources.length&&isArray(sources[0])&&(sources=sources[0]),0===sources.length?empty_EMPTY:resultSelector?forkJoin(sources).pipe(map(args=>resultSelector(...args))):new Observable_Observable(subscriber=>new forkJoin_ForkJoinSubscriber(subscriber,sources))}(function(control,validators){return validators.map(v=>v(control))}(control,presentValidators).map(toObservable)).pipe(map(_mergeErrors))}}}function isPresent(o){return null!=o}function toObservable(r){const obs=core_isPromise(r)?from(r):r;if(!isObservable(obs))throw new Error(\"Expected validator to return Promise or Observable.\");return obs}function _mergeErrors(arrayOfErrors){const res=arrayOfErrors.reduce((res,errors)=>null!=errors?Object.assign({},res,errors):res,{});return 0===Object.keys(res).length?null:res}function normalizeValidator(validator){return validator.validate?c=>validator.validate(c):validator}function normalizeAsyncValidator(validator){return validator.validate?c=>validator.validate(c):validator}class RadioControlRegistry{constructor(){this._accessors=[]}add(control,accessor){this._accessors.push([control,accessor])}remove(accessor){for(let i=this._accessors.length-1;i>=0;--i)if(this._accessors[i][1]===accessor)return void this._accessors.splice(i,1)}select(accessor){this._accessors.forEach(c=>{this._isSameGroup(c,accessor)&&c[1]!==accessor&&c[1].fireUncheck(accessor.value)})}_isSameGroup(controlPair,accessor){return!!controlPair[0].control&&controlPair[0]._parent===accessor._control._parent&&controlPair[1].name===accessor.name}}const FormErrorExamples_formGroupName='\\n    <div [formGroup]=\"myGroup\">\\n       <div formGroupName=\"person\">\\n          <input formControlName=\"firstName\">\\n       </div>\\n    </div>\\n\\n    In your class:\\n\\n    this.myGroup = new FormGroup({\\n       person: new FormGroup({ firstName: new FormControl() })\\n    });',FormErrorExamples_ngModelGroup='\\n    <form>\\n       <div ngModelGroup=\"person\">\\n          <input [(ngModel)]=\"person.name\" name=\"firstName\">\\n       </div>\\n    </form>';function controlPath(name,parent){return[...parent.path,name]}function setUpControl(control,dir){control||forms_throwError(dir,\"Cannot find control with\"),dir.valueAccessor||forms_throwError(dir,\"No value accessor for form control with\"),control.validator=forms_Validators.compose([control.validator,dir.validator]),control.asyncValidator=forms_Validators.composeAsync([control.asyncValidator,dir.asyncValidator]),dir.valueAccessor.writeValue(control.value),function(control,dir){dir.valueAccessor.registerOnChange(newValue=>{control._pendingValue=newValue,control._pendingChange=!0,control._pendingDirty=!0,\"change\"===control.updateOn&&updateControl(control,dir)})}(control,dir),function(control,dir){control.registerOnChange((newValue,emitModelEvent)=>{dir.valueAccessor.writeValue(newValue),emitModelEvent&&dir.viewToModelUpdate(newValue)})}(control,dir),function(control,dir){dir.valueAccessor.registerOnTouched(()=>{control._pendingTouched=!0,\"blur\"===control.updateOn&&control._pendingChange&&updateControl(control,dir),\"submit\"!==control.updateOn&&control.markAsTouched()})}(control,dir),dir.valueAccessor.setDisabledState&&control.registerOnDisabledChange(isDisabled=>{dir.valueAccessor.setDisabledState(isDisabled)}),dir._rawValidators.forEach(validator=>{validator.registerOnValidatorChange&&validator.registerOnValidatorChange(()=>control.updateValueAndValidity())}),dir._rawAsyncValidators.forEach(validator=>{validator.registerOnValidatorChange&&validator.registerOnValidatorChange(()=>control.updateValueAndValidity())})}function updateControl(control,dir){control._pendingDirty&&control.markAsDirty(),control.setValue(control._pendingValue,{emitModelToViewChange:!1}),dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1}function forms_throwError(dir,message){let messageEnd;throw messageEnd=dir.path.length>1?`path: '${dir.path.join(\" -> \")}'`:dir.path[0]?`name: '${dir.path}'`:\"unspecified name attribute\",new Error(`${message} ${messageEnd}`)}function composeValidators(validators){return null!=validators?forms_Validators.compose(validators.map(normalizeValidator)):null}function composeAsyncValidators(validators){return null!=validators?forms_Validators.composeAsync(validators.map(normalizeAsyncValidator)):null}const BUILTIN_ACCESSORS=[class{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,\"checked\",value)}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,\"disabled\",isDisabled)}},class{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,\"value\",parseFloat(value))}registerOnChange(fn){this.onChange=value=>{fn(\"\"==value?null:parseFloat(value))}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,\"disabled\",isDisabled)}},class{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this.onChange=_=>{},this.onTouched=()=>{}}writeValue(value){this._renderer.setProperty(this._elementRef.nativeElement,\"value\",null==value?\"\":value)}registerOnChange(fn){this.onChange=value=>{fn(\"\"==value?null:parseFloat(value))}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,\"disabled\",isDisabled)}},class{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this._optionMap=new Map,this._idCounter=0,this.onChange=_=>{},this.onTouched=()=>{},this._compareWith=looseIdentical}set compareWith(fn){if(\"function\"!=typeof fn)throw new Error(\"compareWith must be a function, but received \"+JSON.stringify(fn));this._compareWith=fn}writeValue(value){this.value=value;const id=this._getOptionId(value);null==id&&this._renderer.setProperty(this._elementRef.nativeElement,\"selectedIndex\",-1);const valueString=function(id,value){return null==id?\"\"+value:(value&&\"object\"==typeof value&&(value=\"Object\"),`${id}: ${value}`.slice(0,50))}(id,value);this._renderer.setProperty(this._elementRef.nativeElement,\"value\",valueString)}registerOnChange(fn){this.onChange=valueString=>{this.value=this._getOptionValue(valueString),fn(this.value)}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,\"disabled\",isDisabled)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(value){for(const id of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(id),value))return id;return null}_getOptionValue(valueString){const id=function(valueString){return valueString.split(\":\")[0]}(valueString);return this._optionMap.has(id)?this._optionMap.get(id):valueString}},class{constructor(_renderer,_elementRef){this._renderer=_renderer,this._elementRef=_elementRef,this._optionMap=new Map,this._idCounter=0,this.onChange=_=>{},this.onTouched=()=>{},this._compareWith=looseIdentical}set compareWith(fn){if(\"function\"!=typeof fn)throw new Error(\"compareWith must be a function, but received \"+JSON.stringify(fn));this._compareWith=fn}writeValue(value){let optionSelectedStateSetter;if(this.value=value,Array.isArray(value)){const ids=value.map(v=>this._getOptionId(v));optionSelectedStateSetter=(opt,o)=>{opt._setSelected(ids.indexOf(o.toString())>-1)}}else optionSelectedStateSetter=(opt,o)=>{opt._setSelected(!1)};this._optionMap.forEach(optionSelectedStateSetter)}registerOnChange(fn){this.onChange=_=>{const selected=[];if(_.hasOwnProperty(\"selectedOptions\")){const options=_.selectedOptions;for(let i=0;i<options.length;i++){const opt=options.item(i),val=this._getOptionValue(opt.value);selected.push(val)}}else{const options=_.options;for(let i=0;i<options.length;i++){const opt=options.item(i);if(opt.selected){const val=this._getOptionValue(opt.value);selected.push(val)}}}this.value=selected,fn(selected)}}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,\"disabled\",isDisabled)}_registerOption(value){const id=(this._idCounter++).toString();return this._optionMap.set(id,value),id}_getOptionId(value){for(const id of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(id)._value,value))return id;return null}_getOptionValue(valueString){const id=function(valueString){return valueString.split(\":\")[0]}(valueString);return this._optionMap.has(id)?this._optionMap.get(id)._value:valueString}},class{constructor(_renderer,_elementRef,_registry,_injector){this._renderer=_renderer,this._elementRef=_elementRef,this._registry=_registry,this._injector=_injector,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(NgControl),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(value){this._state=value===this.value,this._renderer.setProperty(this._elementRef.nativeElement,\"checked\",this._state)}registerOnChange(fn){this._fn=fn,this.onChange=()=>{fn(this.value),this._registry.select(this)}}fireUncheck(value){this.writeValue(value)}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this._renderer.setProperty(this._elementRef.nativeElement,\"disabled\",isDisabled)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\\n      If you define both a name and a formControlName attribute on your radio button, their values\\n      must match. Ex: <input type=\"radio\" formControlName=\"food\" name=\"food\">\\n    ')}}];function coerceToValidator(validatorOrOpts){const validator=isOptionsObj(validatorOrOpts)?validatorOrOpts.validators:validatorOrOpts;return Array.isArray(validator)?composeValidators(validator):validator||null}function coerceToAsyncValidator(asyncValidator,validatorOrOpts){const origAsyncValidator=isOptionsObj(validatorOrOpts)?validatorOrOpts.asyncValidators:asyncValidator;return Array.isArray(origAsyncValidator)?composeAsyncValidators(origAsyncValidator):origAsyncValidator||null}function isOptionsObj(validatorOrOpts){return null!=validatorOrOpts&&!Array.isArray(validatorOrOpts)&&\"object\"==typeof validatorOrOpts}class forms_AbstractControl{constructor(validator,asyncValidator){this.validator=validator,this.asyncValidator=asyncValidator,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return\"VALID\"===this.status}get invalid(){return\"INVALID\"===this.status}get pending(){return\"PENDING\"==this.status}get disabled(){return\"DISABLED\"===this.status}get enabled(){return\"DISABLED\"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:\"change\"}setValidators(newValidator){this.validator=coerceToValidator(newValidator)}setAsyncValidators(newValidator){this.asyncValidator=coerceToAsyncValidator(newValidator)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(opts={}){this.touched=!0,this._parent&&!opts.onlySelf&&this._parent.markAsTouched(opts)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(control=>control.markAllAsTouched())}markAsUntouched(opts={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(control=>{control.markAsUntouched({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}markAsDirty(opts={}){this.pristine=!1,this._parent&&!opts.onlySelf&&this._parent.markAsDirty(opts)}markAsPristine(opts={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(control=>{control.markAsPristine({onlySelf:!0})}),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}markAsPending(opts={}){this.status=\"PENDING\",!1!==opts.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!opts.onlySelf&&this._parent.markAsPending(opts)}disable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status=\"DISABLED\",this.errors=null,this._forEachChild(control=>{control.disable(Object.assign({},opts,{onlySelf:!0}))}),this._updateValue(),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign({},opts,{skipPristineCheck:skipPristineCheck})),this._onDisabledChange.forEach(changeFn=>changeFn(!0))}enable(opts={}){const skipPristineCheck=this._parentMarkedDirty(opts.onlySelf);this.status=\"VALID\",this._forEachChild(control=>{control.enable(Object.assign({},opts,{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent}),this._updateAncestors(Object.assign({},opts,{skipPristineCheck:skipPristineCheck})),this._onDisabledChange.forEach(changeFn=>changeFn(!1))}_updateAncestors(opts){this._parent&&!opts.onlySelf&&(this._parent.updateValueAndValidity(opts),opts.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(parent){this._parent=parent}updateValueAndValidity(opts={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),\"VALID\"!==this.status&&\"PENDING\"!==this.status||this._runAsyncValidator(opts.emitEvent)),!1!==opts.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!opts.onlySelf&&this._parent.updateValueAndValidity(opts)}_updateTreeValidity(opts={emitEvent:!0}){this._forEachChild(ctrl=>ctrl._updateTreeValidity(opts)),this.updateValueAndValidity({onlySelf:!0,emitEvent:opts.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?\"DISABLED\":\"VALID\"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(emitEvent){if(this.asyncValidator){this.status=\"PENDING\";const obs=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=obs.subscribe(errors=>this.setErrors(errors,{emitEvent:emitEvent}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(errors,opts={}){this.errors=errors,this._updateControlsErrors(!1!==opts.emitEvent)}get(path){return function(control,path,delimiter){return null==path?null:(path instanceof Array||(path=path.split(\".\")),path instanceof Array&&0===path.length?null:path.reduce((v,name)=>v instanceof FormGroup?v.controls.hasOwnProperty(name)?v.controls[name]:null:v instanceof FormArray&&v.at(name)||null,control))}(this,path)}getError(errorCode,path){const control=path?this.get(path):this;return control&&control.errors?control.errors[errorCode]:null}hasError(errorCode,path){return!!this.getError(errorCode,path)}get root(){let x=this;for(;x._parent;)x=x._parent;return x}_updateControlsErrors(emitEvent){this.status=this._calculateStatus(),emitEvent&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(emitEvent)}_initObservables(){this.valueChanges=new core_EventEmitter,this.statusChanges=new core_EventEmitter}_calculateStatus(){return this._allControlsDisabled()?\"DISABLED\":this.errors?\"INVALID\":this._anyControlsHaveStatus(\"PENDING\")?\"PENDING\":this._anyControlsHaveStatus(\"INVALID\")?\"INVALID\":\"VALID\"}_anyControlsHaveStatus(status){return this._anyControls(control=>control.status===status)}_anyControlsDirty(){return this._anyControls(control=>control.dirty)}_anyControlsTouched(){return this._anyControls(control=>control.touched)}_updatePristine(opts={}){this.pristine=!this._anyControlsDirty(),this._parent&&!opts.onlySelf&&this._parent._updatePristine(opts)}_updateTouched(opts={}){this.touched=this._anyControlsTouched(),this._parent&&!opts.onlySelf&&this._parent._updateTouched(opts)}_isBoxedValue(formState){return\"object\"==typeof formState&&null!==formState&&2===Object.keys(formState).length&&\"value\"in formState&&\"disabled\"in formState}_registerOnCollectionChange(fn){this._onCollectionChange=fn}_setUpdateStrategy(opts){isOptionsObj(opts)&&null!=opts.updateOn&&(this._updateOn=opts.updateOn)}_parentMarkedDirty(onlySelf){return!onlySelf&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class FormControl extends forms_AbstractControl{constructor(formState=null,validatorOrOpts,asyncValidator){super(coerceToValidator(validatorOrOpts),coerceToAsyncValidator(asyncValidator,validatorOrOpts)),this._onChange=[],this._applyFormState(formState),this._setUpdateStrategy(validatorOrOpts),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(value,options={}){this.value=this._pendingValue=value,this._onChange.length&&!1!==options.emitModelToViewChange&&this._onChange.forEach(changeFn=>changeFn(this.value,!1!==options.emitViewToModelChange)),this.updateValueAndValidity(options)}patchValue(value,options={}){this.setValue(value,options)}reset(formState=null,options={}){this._applyFormState(formState),this.markAsPristine(options),this.markAsUntouched(options),this.setValue(this.value,options),this._pendingChange=!1}_updateValue(){}_anyControls(condition){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(fn){this._onChange.push(fn)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(fn){this._onDisabledChange.push(fn)}_forEachChild(cb){}_syncPendingControls(){return!(\"submit\"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(formState){this._isBoxedValue(formState)?(this.value=this._pendingValue=formState.value,formState.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=formState}}class FormGroup extends forms_AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(coerceToValidator(validatorOrOpts),coerceToAsyncValidator(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(name,control){return this.controls[name]?this.controls[name]:(this.controls[name]=control,control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange),control)}addControl(name,control){this.registerControl(name,control),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(name){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],this.updateValueAndValidity(),this._onCollectionChange()}setControl(name,control){this.controls[name]&&this.controls[name]._registerOnCollectionChange(()=>{}),delete this.controls[name],control&&this.registerControl(name,control),this.updateValueAndValidity(),this._onCollectionChange()}contains(controlName){return this.controls.hasOwnProperty(controlName)&&this.controls[controlName].enabled}setValue(value,options={}){this._checkAllValuesPresent(value),Object.keys(value).forEach(name=>{this._throwIfControlMissing(name),this.controls[name].setValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){Object.keys(value).forEach(name=>{this.controls[name]&&this.controls[name].patchValue(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}reset(value={},options={}){this._forEachChild((control,name)=>{control.reset(value[name],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this._reduceChildren({},(acc,control,name)=>(acc[name]=control instanceof FormControl?control.value:control.getRawValue(),acc))}_syncPendingControls(){let subtreeUpdated=this._reduceChildren(!1,(updated,child)=>!!child._syncPendingControls()||updated);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_throwIfControlMissing(name){if(!Object.keys(this.controls).length)throw new Error(\"\\n        There are no form controls registered with this group yet.  If you're using ngModel,\\n        you may want to check next tick (e.g. use setTimeout).\\n      \");if(!this.controls[name])throw new Error(`Cannot find form control with name: ${name}.`)}_forEachChild(cb){Object.keys(this.controls).forEach(k=>cb(this.controls[k],k))}_setUpControls(){this._forEachChild(control=>{control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(condition){let res=!1;return this._forEachChild((control,name)=>{res=res||this.contains(name)&&condition(control)}),res}_reduceValue(){return this._reduceChildren({},(acc,control,name)=>((control.enabled||this.disabled)&&(acc[name]=control.value),acc))}_reduceChildren(initValue,fn){let res=initValue;return this._forEachChild((control,name)=>{res=fn(res,control,name)}),res}_allControlsDisabled(){for(const controlName of Object.keys(this.controls))if(this.controls[controlName].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(value){this._forEachChild((control,name)=>{if(void 0===value[name])throw new Error(`Must supply a value for form control with name: '${name}'.`)})}}class FormArray extends forms_AbstractControl{constructor(controls,validatorOrOpts,asyncValidator){super(coerceToValidator(validatorOrOpts),coerceToAsyncValidator(asyncValidator,validatorOrOpts)),this.controls=controls,this._initObservables(),this._setUpdateStrategy(validatorOrOpts),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(index){return this.controls[index]}push(control){this.controls.push(control),this._registerControl(control),this.updateValueAndValidity(),this._onCollectionChange()}insert(index,control){this.controls.splice(index,0,control),this._registerControl(control),this.updateValueAndValidity()}removeAt(index){this.controls[index]&&this.controls[index]._registerOnCollectionChange(()=>{}),this.controls.splice(index,1),this.updateValueAndValidity()}setControl(index,control){this.controls[index]&&this.controls[index]._registerOnCollectionChange(()=>{}),this.controls.splice(index,1),control&&(this.controls.splice(index,0,control),this._registerControl(control)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(value,options={}){this._checkAllValuesPresent(value),value.forEach((newValue,index)=>{this._throwIfControlMissing(index),this.at(index).setValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}patchValue(value,options={}){value.forEach((newValue,index)=>{this.at(index)&&this.at(index).patchValue(newValue,{onlySelf:!0,emitEvent:options.emitEvent})}),this.updateValueAndValidity(options)}reset(value=[],options={}){this._forEachChild((control,index)=>{control.reset(value[index],{onlySelf:!0,emitEvent:options.emitEvent})}),this._updatePristine(options),this._updateTouched(options),this.updateValueAndValidity(options)}getRawValue(){return this.controls.map(control=>control instanceof FormControl?control.value:control.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(control=>control._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let subtreeUpdated=this.controls.reduce((updated,child)=>!!child._syncPendingControls()||updated,!1);return subtreeUpdated&&this.updateValueAndValidity({onlySelf:!0}),subtreeUpdated}_throwIfControlMissing(index){if(!this.controls.length)throw new Error(\"\\n        There are no form controls registered with this array yet.  If you're using ngModel,\\n        you may want to check next tick (e.g. use setTimeout).\\n      \");if(!this.at(index))throw new Error(\"Cannot find form control at index \"+index)}_forEachChild(cb){this.controls.forEach((control,index)=>{cb(control,index)})}_updateValue(){this.value=this.controls.filter(control=>control.enabled||this.disabled).map(control=>control.value)}_anyControls(condition){return this.controls.some(control=>control.enabled&&condition(control))}_setUpControls(){this._forEachChild(control=>this._registerControl(control))}_checkAllValuesPresent(value){this._forEachChild((control,i)=>{if(void 0===value[i])throw new Error(`Must supply a value for form control at index: ${i}.`)})}_allControlsDisabled(){for(const control of this.controls)if(control.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(control){control.setParent(this),control._registerOnCollectionChange(this._onCollectionChange)}}const resolvedPromise=(()=>Promise.resolve(null))();class forms_NgForm extends ControlContainer{constructor(validators,asyncValidators){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new core_EventEmitter,this.form=new FormGroup({},composeValidators(validators),composeAsyncValidators(asyncValidators))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(dir){resolvedPromise.then(()=>{const container=this._findContainer(dir.path);dir.control=container.registerControl(dir.name,dir.control),setUpControl(dir.control,dir),dir.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(dir)})}getControl(dir){return this.form.get(dir.path)}removeControl(dir){resolvedPromise.then(()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name),function(list,el){const index=list.indexOf(el);index>-1&&list.splice(index,1)}(this._directives,dir)})}addFormGroup(dir){resolvedPromise.then(()=>{const container=this._findContainer(dir.path),group=new FormGroup({});(function(control,dir){null==control&&forms_throwError(dir,\"Cannot find control with\"),control.validator=forms_Validators.compose([control.validator,dir.validator]),control.asyncValidator=forms_Validators.composeAsync([control.asyncValidator,dir.asyncValidator])})(group,dir),container.registerControl(dir.name,group),group.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(dir){resolvedPromise.then(()=>{const container=this._findContainer(dir.path);container&&container.removeControl(dir.name)})}getFormGroup(dir){return this.form.get(dir.path)}updateModel(dir,value){resolvedPromise.then(()=>{this.form.get(dir.path).setValue(value)})}setValue(value){this.control.setValue(value)}onSubmit($event){return this.submitted=!0,directives=this._directives,this.form._syncPendingControls(),directives.forEach(dir=>{const control=dir.control;\"submit\"===control.updateOn&&control._pendingChange&&(dir.viewToModelUpdate(control._pendingValue),control._pendingChange=!1)}),this.ngSubmit.emit($event),!1;var directives}onReset(){this.resetForm()}resetForm(value){this.form.reset(value),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(path){return path.pop(),path.length?this.form.get(path):this.form}}class TemplateDrivenErrors{static modelParentException(){throw new Error('\\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\\n      formGroup\\'s partner directive \"formControlName\" instead.  Example:\\n\\n      \\n    <div [formGroup]=\"myGroup\">\\n      <input formControlName=\"firstName\">\\n    </div>\\n\\n    In your class:\\n\\n    this.myGroup = new FormGroup({\\n       firstName: new FormControl()\\n    });\\n\\n      Or, if you\\'d like to avoid registering this form control, indicate that it\\'s standalone in ngModelOptions:\\n\\n      Example:\\n\\n      \\n    <div [formGroup]=\"myGroup\">\\n       <input formControlName=\"firstName\">\\n       <input [(ngModel)]=\"showMoreControls\" [ngModelOptions]=\"{standalone: true}\">\\n    </div>\\n  ')}static formGroupNameException(){throw new Error(`\\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\\n\\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\\n\\n      ${FormErrorExamples_formGroupName}\\n\\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\\n\\n      ${FormErrorExamples_ngModelGroup}`)}static missingNameException(){throw new Error('If ngModel is used within a form tag, either the name attribute must be set or the form\\n      control must be defined as \\'standalone\\' in ngModelOptions.\\n\\n      Example 1: <input [(ngModel)]=\"person.firstName\" name=\"first\">\\n      Example 2: <input [(ngModel)]=\"person.firstName\" [ngModelOptions]=\"{standalone: true}\">')}static modelGroupParentException(){throw new Error(`\\n      ngModelGroup cannot be used with a parent formGroup directive.\\n\\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\\n\\n      ${FormErrorExamples_formGroupName}\\n\\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\\n\\n      ${FormErrorExamples_ngModelGroup}`)}static ngFormWarning(){console.warn(\"\\n    It looks like you're using 'ngForm'.\\n\\n    Support for using the 'ngForm' element selector has been deprecated in Angular v6 and will be removed\\n    in Angular v9.\\n\\n    Use 'ng-form' instead.\\n\\n    Before:\\n    <ngForm #myForm=\\\"ngForm\\\">\\n\\n    After:\\n    <ng-form #myForm=\\\"ngForm\\\">\\n    \")}}const NG_FORM_SELECTOR_WARNING=new InjectionToken(\"NgFormSelectorWarning\");class AbstractFormGroupDirective extends ControlContainer{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return controlPath(this.name,this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return composeValidators(this._validators)}get asyncValidator(){return composeAsyncValidators(this._asyncValidators)}_checkParentType(){}}class NgModelGroup extends AbstractFormGroupDirective{constructor(parent,validators,asyncValidators){super(),this._parent=parent,this._validators=validators,this._asyncValidators=asyncValidators}_checkParentType(){this._parent instanceof NgModelGroup||this._parent instanceof forms_NgForm||TemplateDrivenErrors.modelGroupParentException()}}const resolvedPromise$1=(()=>Promise.resolve(null))();class forms_NgModel extends NgControl{constructor(parent,validators,asyncValidators,valueAccessors){super(),this.control=new FormControl,this._registered=!1,this.update=new core_EventEmitter,this._parent=parent,this._rawValidators=validators||[],this._rawAsyncValidators=asyncValidators||[],this.valueAccessor=function(dir,valueAccessors){if(!valueAccessors)return null;Array.isArray(valueAccessors)||forms_throwError(dir,\"Value accessor was not provided as an array for form control with\");let defaultAccessor=void 0,builtinAccessor=void 0,customAccessor=void 0;return valueAccessors.forEach(v=>{var valueAccessor;v.constructor===DefaultValueAccessor?defaultAccessor=v:(valueAccessor=v,BUILTIN_ACCESSORS.some(a=>valueAccessor.constructor===a)?(builtinAccessor&&forms_throwError(dir,\"More than one built-in value accessor matches form control with\"),builtinAccessor=v):(customAccessor&&forms_throwError(dir,\"More than one custom value accessor matches form control with\"),customAccessor=v))}),customAccessor||builtinAccessor||defaultAccessor||(forms_throwError(dir,\"No valid value accessor for form control with\"),null)}(this,valueAccessors)}ngOnChanges(changes){this._checkForErrors(),this._registered||this._setUpControl(),\"isDisabled\"in changes&&this._updateDisabled(changes),function(changes,viewModel){if(!changes.hasOwnProperty(\"model\"))return!1;const change=changes.model;return!!change.isFirstChange()||!looseIdentical(viewModel,change.currentValue)}(changes,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?controlPath(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return composeValidators(this._rawValidators)}get asyncValidator(){return composeAsyncValidators(this._rawAsyncValidators)}viewToModelUpdate(newValue){this.viewModel=newValue,this.update.emit(newValue)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){setUpControl(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){!(this._parent instanceof NgModelGroup)&&this._parent instanceof AbstractFormGroupDirective?TemplateDrivenErrors.formGroupNameException():this._parent instanceof NgModelGroup||this._parent instanceof forms_NgForm||TemplateDrivenErrors.modelParentException()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||TemplateDrivenErrors.missingNameException()}_updateValue(value){resolvedPromise$1.then(()=>{this.control.setValue(value,{emitViewToModelChange:!1})})}_updateDisabled(changes){const disabledValue=changes.isDisabled.currentValue,isDisabled=\"\"===disabledValue||disabledValue&&\"false\"!==disabledValue;resolvedPromise$1.then(()=>{isDisabled&&!this.control.disabled?this.control.disable():!isDisabled&&this.control.disabled&&this.control.enable()})}}class NgNoValidate{}class RequiredValidator{get required(){return this._required}set required(value){this._required=null!=value&&!1!==value&&\"\"+value!=\"false\",this._onChange&&this._onChange()}validate(control){return this.required?forms_Validators.required(control):null}registerOnValidatorChange(fn){this._onChange=fn}}class EmailValidator{set email(value){this._enabled=\"\"===value||!0===value||\"true\"===value,this._onChange&&this._onChange()}validate(control){return this._enabled?forms_Validators.email(control):null}registerOnValidatorChange(fn){this._onChange=fn}}class InternalFormsSharedModule{}class FormsModule{static withConfig(opts){return{ngModule:FormsModule,providers:[{provide:NG_FORM_SELECTOR_WARNING,useValue:opts.warnOnDeprecatedNgFormSelector}]}}}class CommentFormComponent{constructor(){}ngOnInit(){}}var RenderType_CommentFormComponent=createRendererType2({encapsulation:0,styles:[[\"\"]],data:{}});function View_CommentFormComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,20,\"div\",[[\"class\",\"card mt-5 shadow-effect\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,19,\"div\",[[\"class\",\"card-body\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,1,\"h4\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Leave a Comment\"])),(_l()(),elementDef(4,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"You can leave a comment using this comment form\"])),(_l()(),elementDef(6,0,null,null,14,\"form\",[[\"novalidate\",\"\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"submit\"],[null,\"reset\"]],(function(_v,en,$event){var ad=!0;return\"submit\"===en&&(ad=!1!==nodeValue(_v,8).onSubmit($event)&&ad),\"reset\"===en&&(ad=!1!==nodeValue(_v,8).onReset()&&ad),ad}),null,null)),directiveDef(7,16384,null,0,NgNoValidate,[],null,null),directiveDef(8,4210688,null,0,forms_NgForm,[[8,null],[8,null]],null,null),providerDef(2048,null,ControlContainer,null,[forms_NgForm]),directiveDef(10,16384,null,0,NgControlStatusGroup,[[4,ControlContainer]],null,null),(_l()(),elementDef(11,0,null,null,3,\"div\",[[\"class\",\"form-group\"]],null,null,null,null,null)),(_l()(),elementDef(12,0,null,null,1,\"label\",[[\"for\",\"\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Name\"])),(_l()(),elementDef(14,0,null,null,0,\"input\",[[\"class\",\"form-control shadow-effect\"],[\"placeholder\",\"Enter Your Name\"],[\"type\",\"text\"]],null,null,null,null,null)),(_l()(),elementDef(15,0,null,null,3,\"div\",[[\"class\",\"form-group\"]],null,null,null,null,null)),(_l()(),elementDef(16,0,null,null,1,\"label\",[[\"for\",\"\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Comment\"])),(_l()(),elementDef(18,0,null,null,0,\"textarea\",[[\"class\",\"form-control shadow-effect\"],[\"cols\",\"30\"],[\"placeholder\",\"Add Your Comment Here\"],[\"rows\",\"10\"]],null,null,null,null,null)),(_l()(),elementDef(19,0,null,null,1,\"button\",[[\"class\",\"btn btn-info btn-theme\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Add a Comment\"]))],null,(function(_ck,_v){_ck(_v,6,0,nodeValue(_v,10).ngClassUntouched,nodeValue(_v,10).ngClassTouched,nodeValue(_v,10).ngClassPristine,nodeValue(_v,10).ngClassDirty,nodeValue(_v,10).ngClassValid,nodeValue(_v,10).ngClassInvalid,nodeValue(_v,10).ngClassPending)}))}class CommentListComponent{constructor(){}ngOnInit(){}}var RenderType_CommentListComponent=createRendererType2({encapsulation:0,styles:[[\".comment-box[_ngcontent-%COMP%]{padding:15px 35px;background-color:#f0f0f0}\"]],data:{}});function View_CommentListComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,48,\"div\",[[\"class\",\"card mb-5 mt-5 pb-5 shadow-effect\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,47,\"div\",[[\"class\",\"card-body\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,1,\"h4\",[[\"class\",\"mt-3 mb-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Comments(15,256)\"])),(_l()(),elementDef(4,0,null,null,44,\"div\",[[\"class\",\"comment-box mt-3\"]],null,null,null,null,null)),(_l()(),elementDef(5,0,null,null,1,\"h6\",[[\"class\",\"mb-0\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Kartik Patel\"])),(_l()(),elementDef(7,0,null,null,1,\"small\",[[\"class\",\"text-danger\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Last Updated -Sep 20,2021\"])),(_l()(),elementDef(9,0,null,null,1,\"div\",[[\"class\",\"mt-3 mb-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\" Kartik is good Full Stack Developer and he did well in previous java backend development \"])),(_l()(),elementDef(11,0,null,null,1,\"a\",[[\"class\",\"mt-1\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Reply\"])),(_l()(),elementDef(13,0,null,null,1,\"a\",[[\"class\",\"mt-1 ml-3\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"View-Reply\"])),(_l()(),elementDef(15,0,null,null,0,\"hr\",[],null,null,null,null,null)),(_l()(),elementDef(16,0,null,null,1,\"h6\",[[\"class\",\"mb-0\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Kartik Patel\"])),(_l()(),elementDef(18,0,null,null,1,\"small\",[[\"class\",\"text-danger\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Last Updated -Sep 20,2021\"])),(_l()(),elementDef(20,0,null,null,1,\"div\",[[\"class\",\"mt-3 mb-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\" Kartik is good Full Stack Developer and he did well in previous java backend development \"])),(_l()(),elementDef(22,0,null,null,1,\"a\",[[\"class\",\"mt-1\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Reply\"])),(_l()(),elementDef(24,0,null,null,1,\"a\",[[\"class\",\"mt-1 ml-3\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"View-Reply\"])),(_l()(),elementDef(26,0,null,null,0,\"hr\",[],null,null,null,null,null)),(_l()(),elementDef(27,0,null,null,1,\"h6\",[[\"class\",\"mb-0\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Kartik Patel\"])),(_l()(),elementDef(29,0,null,null,1,\"small\",[[\"class\",\"text-danger\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Last Updated -Sep 20,2021\"])),(_l()(),elementDef(31,0,null,null,1,\"div\",[[\"class\",\"mt-3 mb-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\" Kartik is good Full Stack Developer and he did well in previous java backend development \"])),(_l()(),elementDef(33,0,null,null,1,\"a\",[[\"class\",\"mt-1\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Reply\"])),(_l()(),elementDef(35,0,null,null,1,\"a\",[[\"class\",\"mt-1 ml-3\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"View-Reply\"])),(_l()(),elementDef(37,0,null,null,0,\"hr\",[],null,null,null,null,null)),(_l()(),elementDef(38,0,null,null,1,\"h6\",[[\"class\",\"mb-0\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Kartik Patel\"])),(_l()(),elementDef(40,0,null,null,1,\"small\",[[\"class\",\"text-danger\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Last Updated -Sep 20,2021\"])),(_l()(),elementDef(42,0,null,null,1,\"div\",[[\"class\",\"mt-3 mb-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\" Kartik is good Full Stack Developer and he did well in previous java backend development \"])),(_l()(),elementDef(44,0,null,null,1,\"a\",[[\"class\",\"mt-1\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Reply\"])),(_l()(),elementDef(46,0,null,null,1,\"a\",[[\"class\",\"mt-1 ml-3\"],[\"href\",\"#\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"View-Reply\"])),(_l()(),elementDef(48,0,null,null,0,\"hr\",[],null,null,null,null,null))],null,null)}class SinglPostsComponent{constructor(postService,route){this.postService=postService,this.route=route,this.similarPostArray=[],this.showScrollToTop=!1}ngOnInit(){this.route.params.subscribe(val=>{this.postService.countViews(val.id),this.postService.loadOnePost(val.id).subscribe(post=>{this.postData=post,this.loadSimilarPost(this.postData.category.categoryId)})})}loadSimilarPost(catId){this.postService.loadSimilar(catId).subscribe(val=>{this.similarPostArray=val})}onWindowScroll(event){this.showScrollToTop=window.pageYOffset>500}scrollToTop(){window.scrollTo({top:0,behavior:\"smooth\"})}scrollToBottom(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:\"smooth\"})}}var RenderType_SinglPostsComponent=createRendererType2({encapsulation:0,styles:[[\"\"]],data:{}});function View_SinglPostsComponent_2(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,2,\"div\",[],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,1,\"app-post-card\",[],null,null,null,View_PostCardComponent_0,RenderType_PostCardComponent)),directiveDef(2,114688,null,0,PostCardComponent,[],{postData:[0,\"postData\"]},null)],(function(_ck,_v){_ck(_v,2,0,_v.context.$implicit)}),null)}function View_SinglPostsComponent_1(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,24,\"div\",[[\"class\",\"container\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,23,\"div\",[[\"class\",\"row\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,19,\"div\",[[\"class\",\"col-md-9\"]],null,null,null,null,null)),(_l()(),elementDef(3,0,null,null,14,\"div\",[[\"class\",\"card shadow-effect\"]],null,null,null,null,null)),(_l()(),elementDef(4,0,null,null,0,\"img\",[[\"alt\",\"\"],[\"class\",\"card-img-top img-fluid\"]],[[8,\"src\",4]],null,null,null,null)),(_l()(),elementDef(5,0,null,null,12,\"div\",[[\"class\",\"card-body\"]],null,null,null,null,null)),(_l()(),elementDef(6,0,null,null,1,\"small\",[[\"class\",\"bg-light text-danger text-center\"]],null,null,null,null,null)),(_l()(),textDef(7,null,[\"\",\"\"])),(_l()(),elementDef(8,0,null,null,1,\"small\",[[\"class\",\"bg-light text-info text-center ml-2\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Featured\"])),(_l()(),elementDef(10,0,null,null,1,\"small\",[[\"class\",\"bg-light text-info text-center ml-2\"]],null,null,null,null,null)),(_l()(),textDef(11,null,[\"Views-\",\"\"])),(_l()(),elementDef(12,0,null,null,2,\"small\",[[\"class\",\"bg-light text-warning text-center ml-2\"]],null,null,null,null,null)),(_l()(),textDef(13,null,[\"Last Updates - \",\"\"])),purePipeDef(14,1),(_l()(),elementDef(15,0,null,null,1,\"h1\",[[\"class\",\"mt-3 mb-3 text-info\"]],null,null,null,null,null)),(_l()(),textDef(16,null,[\"\",\"\"])),(_l()(),elementDef(17,0,null,null,0,\"h6\",[[\"class\",\"bg-light text-info\"]],[[8,\"innerHTML\",1]],null,null,null,null)),(_l()(),elementDef(18,0,null,null,1,\"app-comment-form\",[],null,null,null,View_CommentFormComponent_0,RenderType_CommentFormComponent)),directiveDef(19,114688,null,0,CommentFormComponent,[],null,null),(_l()(),elementDef(20,0,null,null,1,\"app-comment-list\",[],null,null,null,View_CommentListComponent_0,RenderType_CommentListComponent)),directiveDef(21,114688,null,0,CommentListComponent,[],null,null),(_l()(),elementDef(22,0,null,null,2,\"div\",[[\"class\",\"col-md-3\"]],null,null,null,null,null)),(_l()(),anchorDef(16777216,null,null,1,null,View_SinglPostsComponent_2)),directiveDef(24,278528,null,0,common_NgForOf,[ViewContainerRef,TemplateRef,IterableDiffers],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,19,0),_ck(_v,21,0),_ck(_v,24,0,_co.similarPostArray)}),(function(_ck,_v){var _co=_v.component;_ck(_v,4,0,inlineInterpolate(1,\"\",_co.postData.postImgPath,\"\")),_ck(_v,7,0,_co.postData.category.category),_ck(_v,11,0,_co.postData.views);var currVal_3=unwrapValue(_v,13,0,_ck(_v,14,0,nodeValue(_v.parent,0),_co.postData.createdAt.toMillis()));_ck(_v,13,0,currVal_3),_ck(_v,16,0,_co.postData.title),_ck(_v,17,0,_co.postData.content)}))}function View_SinglPostsComponent_0(_l){return viewDef(0,[pipeDef(0,DatePipe,[LOCALE_ID$1]),(_l()(),elementDef(1,0,null,null,3,\"button\",[[\"class\",\"btn btn-secondary rounded-circle scroll-to-bottom\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.scrollToBottom()&&ad),ad}),null,null)),(_l()(),elementDef(2,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"down\"])),(_l()(),elementDef(4,0,null,null,0,\"i\",[[\"class\",\"fas fa-angle-down\"]],null,null,null,null,null)),(_l()(),anchorDef(16777216,null,null,1,null,View_SinglPostsComponent_1)),directiveDef(6,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null),(_l()(),elementDef(7,0,null,null,3,\"button\",[[\"class\",\"btn btn-secondary rounded-circle scroll-to-top\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.scrollToTop()&&ad),ad}),null,null)),(_l()(),elementDef(8,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"up\"])),(_l()(),elementDef(10,0,null,null,0,\"i\",[[\"class\",\"fas fa-angle-up\"]],null,null,null,null,null))],(function(_ck,_v){_ck(_v,6,0,_v.component.postData)}),null)}function View_SinglPostsComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-singl-posts\",[],null,[[\"window\",\"scroll\"]],(function(_v,en,$event){var ad=!0;return\"window:scroll\"===en&&(ad=!1!==nodeValue(_v,1).onWindowScroll($event)&&ad),ad}),View_SinglPostsComponent_0,RenderType_SinglPostsComponent)),directiveDef(1,114688,null,0,SinglPostsComponent,[post_service_PostService,router_ActivatedRoute],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var SinglPostsComponentNgFactory=createComponentFactory(\"app-singl-posts\",SinglPostsComponent,View_SinglPostsComponent_Host_0,{},{},[]);class TermsAndConditionsComponent{constructor(){}ngOnInit(){}}var RenderType_TermsAndConditionsComponent=createRendererType2({encapsulation:0,styles:[[\"\"]],data:{}});function View_TermsAndConditionsComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,13,\"section\",[[\"class\",\"mt-5\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,12,\"div\",[[\"class\",\"container mt-5 mb-5 p-5 bg-theme\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,1,\"h1\",[[\"class\",\"text-white text-center\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Terms&Conditions\"])),(_l()(),elementDef(4,0,null,null,9,\"div\",[[\"class\",\"p-5 mt-4 bg-secondary-theme text-theme-primary\"]],null,null,null,null,null)),(_l()(),elementDef(5,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Kartik is Good Full Stact Developer He is Persuing Btech from Svvv Indore\"])),(_l()(),elementDef(7,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Kartik is Good Full Stact Developer He is Persuing Btech from Svvv Indore\"])),(_l()(),elementDef(9,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Kartik is Good Full Stact Developer He is Persuing Btech from Svvv Indore\"])),(_l()(),elementDef(11,0,null,null,2,\"div\",[[\"class\",\"text-center\"]],null,null,null,null,null)),(_l()(),elementDef(12,0,null,null,1,\"button\",[[\"class\",\"btn btn-info btn-sm mt-4 btn-theme\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Back To Home \"]))],null,null)}function View_TermsAndConditionsComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-terms-and-conditions\",[],null,null,null,View_TermsAndConditionsComponent_0,RenderType_TermsAndConditionsComponent)),directiveDef(1,114688,null,0,TermsAndConditionsComponent,[],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var TermsAndConditionsComponentNgFactory=createComponentFactory(\"app-terms-and-conditions\",TermsAndConditionsComponent,View_TermsAndConditionsComponent_Host_0,{},{},[]);class ContactUsComponent{constructor(){}ngOnInit(){}}var RenderType_ContactUsComponent=createRendererType2({encapsulation:0,styles:[[\"\"]],data:{}});function View_ContactUsComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"contact-us works!\"]))],null,null)}function View_ContactUsComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-contact-us\",[],null,null,null,View_ContactUsComponent_0,RenderType_ContactUsComponent)),directiveDef(1,114688,null,0,ContactUsComponent,[],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var ContactUsComponentNgFactory=createComponentFactory(\"app-contact-us\",ContactUsComponent,View_ContactUsComponent_Host_0,{},{},[]);class AboutUsComponent{constructor(){}ngOnInit(){}}var RenderType_AboutUsComponent=createRendererType2({encapsulation:0,styles:[[\"\"]],data:{}});function View_AboutUsComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,13,\"section\",[[\"class\",\"mt-5\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,12,\"div\",[[\"class\",\"container mt-5 mb-5 p-5 bg-theme\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,1,\"h1\",[[\"class\",\"text-white text-center\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"About Us\"])),(_l()(),elementDef(4,0,null,null,9,\"div\",[[\"class\",\"p-5 mt-4 bg-secondary-theme text-theme-primary\"]],null,null,null,null,null)),(_l()(),elementDef(5,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"vijay is Good Full Stact Developer He is Persuing Masters\"])),(_l()(),elementDef(7,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Vijay is Good Full Stact Developer He is Persuing Masters\"])),(_l()(),elementDef(9,0,null,null,1,\"p\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Vijay is Good Full Stact Developer He is Persuing Masters\"])),(_l()(),elementDef(11,0,null,null,2,\"div\",[[\"class\",\"text-center\"]],null,null,null,null,null)),(_l()(),elementDef(12,0,null,null,1,\"button\",[[\"class\",\"btn btn-info btn-sm mt-4 btn-theme\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Back To Home \"]))],null,null)}function View_AboutUsComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-about-us\",[],null,null,null,View_AboutUsComponent_0,RenderType_AboutUsComponent)),directiveDef(1,114688,null,0,AboutUsComponent,[],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var AboutUsComponentNgFactory=createComponentFactory(\"app-about-us\",AboutUsComponent,View_AboutUsComponent_Host_0,{},{},[]);class CategoryNavbarComponent{constructor(categoryService){this.categoryService=categoryService,this.categoryArrays=[],this.isCollapsed=!1,this.isDarkMode=!1}toggleNavbar(){this.isCollapsed=!this.isCollapsed}ngOnInit(){this.categoryService.loadDatas().subscribe(val=>{this.categoryArrays=val})}toggleDarkMode(){this.isDarkMode=!this.isDarkMode,document.querySelector(\"body\").classList.toggle(\"dark-mode\",this.isDarkMode)}}let categories_service_CategoriesService=(()=>{class CategoriesService{constructor(afs){this.afs=afs}loadDatas(){return this.afs.collection(\"categories\").snapshotChanges().pipe(map(actions=>actions.map(a=>{const data=a.payload.doc.data();return{id:a.payload.doc.id,data:data}})))}}return CategoriesService.ngInjectableDef=defineInjectable({factory:function(){return new CategoriesService(inject(firestore_AngularFirestore))},token:CategoriesService,providedIn:\"root\"}),CategoriesService})();var RenderType_CategoryNavbarComponent=createRendererType2({encapsulation:0,styles:[[\"nav[_ngcontent-%COMP%]{margin-top:50px;height:auto;background-color:var(--navbor-footer-color);padding:20px}li[_ngcontent-%COMP%]{margin:auto}.nav-link[_ngcontent-%COMP%]{text-transform:uppercase}p[_ngcontent-%COMP%]{font-family:Lato}.custom-control-label[_ngcontent-%COMP%]::before{background-color:#fff}.custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]::before, .custom-control-label[_ngcontent-%COMP%]::after{background-color:#343a40}.custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]::after{background-color:#fff}dark-mode[_ngcontent-%COMP%]{background-color:#091109;color:#fff}\"]],data:{}});function View_CategoryNavbarComponent_1(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,6,\"ul\",[[\"class\",\"navbar-nav mr-auto\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,5,\"h6\",[],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,4,\"li\",[[\"class\",\"nav-item ml-1\"]],null,null,null,null,null)),(_l()(),elementDef(3,0,null,null,3,\"a\",[[\"class\",\"nav-link\"]],[[1,\"target\",0],[8,\"href\",4]],[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==nodeValue(_v,4).onClick($event.button,$event.ctrlKey,$event.metaKey,$event.shiftKey)&&ad),ad}),null,null)),directiveDef(4,671744,null,0,router_RouterLinkWithHref,[router_Router,router_ActivatedRoute,LocationStrategy],{routerLink:[0,\"routerLink\"]},null),pureArrayDef(5,3),(_l()(),textDef(6,null,[\" \",\" \"]))],(function(_ck,_v){var currVal_2=_ck(_v,5,0,\"/category\",_v.context.$implicit.data.category,_v.context.$implicit.id);_ck(_v,4,0,currVal_2)}),(function(_ck,_v){_ck(_v,3,0,nodeValue(_v,4).target,nodeValue(_v,4).href),_ck(_v,6,0,_v.context.$implicit.data.category)}))}function View_CategoryNavbarComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,13,\"nav\",[[\"class\",\"navbar navbar-expand-sm navbar-dark bg-dark  mb-1 fixed-top\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,0,\"a\",[[\"class\",\"navbar-brand\"],[\"href\",\"/\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,3,\"div\",[[\"class\",\"custom-control custom-switch  col-md-1\"]],null,null,null,null,null)),(_l()(),elementDef(3,0,null,null,0,\"input\",[[\"class\",\"custom-control-input\"],[\"id\",\"customSwitch1\"],[\"type\",\"checkbox\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.toggleDarkMode()&&ad),ad}),null,null)),(_l()(),elementDef(4,0,null,null,1,\"label\",[[\"class\",\"custom-control-label\"],[\"for\",\"customSwitch1\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"dark mode\"])),(_l()(),elementDef(6,0,null,null,1,\"button\",[[\"aria-controls\",\"navbarSupportedContent\"],[\"aria-expanded\",\"false\"],[\"aria-label\",\"Toggle navigation\"],[\"class\",\"navbar-toggler\"],[\"data-target\",\"#navbarSupportedContent\"],[\"data-toggle\",\"collapse\"],[\"type\",\"button\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.toggleNavbar()&&ad),ad}),null,null)),(_l()(),elementDef(7,0,null,null,0,\"span\",[[\"class\",\"navbar-toggler-icon\"]],null,null,null,null,null)),(_l()(),elementDef(8,0,null,null,5,\"div\",[[\"class\",\"collapse navbar-collapse\"],[\"id\",\"navbarSupportedContent\"]],null,null,null,null,null)),providerDef(512,null,NgClassImpl,common_NgClassR2Impl,[IterableDiffers,KeyValueDiffers,ElementRef,Renderer2]),directiveDef(10,278528,null,0,NgClass,[NgClassImpl],{klass:[0,\"klass\"],ngClass:[1,\"ngClass\"]},null),pureObjectDef(11,{show:0}),(_l()(),anchorDef(16777216,null,null,1,null,View_CategoryNavbarComponent_1)),directiveDef(13,278528,null,0,common_NgForOf,[ViewContainerRef,TemplateRef,IterableDiffers],{ngForOf:[0,\"ngForOf\"]},null)],(function(_ck,_v){var _co=_v.component,currVal_1=_ck(_v,11,0,_co.isCollapsed);_ck(_v,10,0,\"collapse navbar-collapse\",currVal_1),_ck(_v,13,0,_co.categoryArrays)}),null)}function View_CategoryNavbarComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-category-navbar\",[],null,null,null,View_CategoryNavbarComponent_0,RenderType_CategoryNavbarComponent)),directiveDef(1,114688,null,0,CategoryNavbarComponent,[categories_service_CategoriesService],null,null)],(function(_ck,_v){_ck(_v,1,0)}),null)}var CategoryNavbarComponentNgFactory=createComponentFactory(\"app-category-navbar\",CategoryNavbarComponent,View_CategoryNavbarComponent_Host_0,{},{},[]);class HeadersComponent{constructor(categoryService){this.categoryService=categoryService,this.categoryArrays=[]}ngOnInit(){this.categoryService.loadDatas().subscribe(val=>{this.categoryArrays=val})}}var RenderType_HeadersComponent=createRendererType2({encapsulation:0,styles:[[\"header[_ngcontent-%COMP%]{height:70px}.site-logo[_ngcontent-%COMP%]{font-size:1.5em}\"]],data:{}});function View_HeadersComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,4,\"header\",[[\"class\",\"navbar navbar-expand-lg fixed-top bg-white\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,3,\"div\",[[\"class\",\"container justify-content-center\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,2,\"a\",[[\"class\",\"site-logo\"],[\"routerLink\",\"/\"]],[[1,\"target\",0],[8,\"href\",4]],[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==nodeValue(_v,3).onClick($event.button,$event.ctrlKey,$event.metaKey,$event.shiftKey)&&ad),ad}),null,null)),directiveDef(3,671744,null,0,router_RouterLinkWithHref,[router_Router,router_ActivatedRoute,LocationStrategy],{routerLink:[0,\"routerLink\"]},null),(_l()(),textDef(-1,null,[\"My-Blog\"]))],(function(_ck,_v){_ck(_v,3,0,\"/\")}),(function(_ck,_v){_ck(_v,2,0,nodeValue(_v,3).target,nodeValue(_v,3).href)}))}class SubscriptionFormComponent{constructor(subService){this.subService=subService,this.isEmailError=!1,this.isSubscribed=!1}ngOnInit(){}onSubmit(formVal){const subData={name:formVal.name,email:formVal.email};this.subService.checkSubs(subData.email).subscribe(val=>{console.log(val),val.empty?(this.subService.addSubs(subData),this.isSubscribed=!0):(this.isEmailError=!0,console.log(\"email is already in use\"))})}}let subscribers_SubscribersService=(()=>{class SubscribersService{constructor(afs){this.afs=afs}addSubs(subData){this.afs.collection(\"subscribers\").add(subData).then(()=>{console.log(\"Subscriber Saved Successfully\")})}checkSubs(subEmail){return this.afs.collection(\"subsribers\",ref=>ref.where(\"email\",\"==\",subEmail)).get()}}return SubscribersService.ngInjectableDef=defineInjectable({factory:function(){return new SubscribersService(inject(firestore_AngularFirestore))},token:SubscribersService,providedIn:\"root\"}),SubscribersService})();var RenderType_SubscriptionFormComponent=createRendererType2({encapsulation:0,styles:[[\".card[_ngcontent-%COMP%]{background-color:var(--secondary-color);width:800px;margin:auto}input[type=email][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{width:30%}.sub-text[_ngcontent-%COMP%]{width:900px}.login-form[_ngcontent-%COMP%]{max-width:400px;margin:auto;padding:20px;background-color:#f7f7f7;border-radius:10px;box-shadow:0 0 20px rgba(0,0,0,.1)}.login-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.login-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;background-color:#f7f7f7;margin-bottom:8px}.login-form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;box-sizing:border-box;border:none;border-radius:4px;background-color:#f0f0f0}.login-form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer;width:100%}@media screen and (max-width:480px){.login-form[_ngcontent-%COMP%]{max-width:100%}}\"]],data:{}});function View_SubscriptionFormComponent_1(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"div\",[[\"class\",\"alert alert-danger mt-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\" Email is Aleardy in use \"]))],null,null)}function View_SubscriptionFormComponent_2(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"div\",[[\"class\",\"alert alert-danger mt-3\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\" Thank You for subscribing to our news letter service.Stay tuned for Awesome blog posts...! \"]))],null,null)}function View_SubscriptionFormComponent_5(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"div\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Name is Required\"]))],null,null)}function View_SubscriptionFormComponent_4(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,2,\"div\",[[\"class\",\"text-danger\"]],null,null,null,null,null)),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_5)),directiveDef(2,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null)],(function(_ck,_v){_ck(_v,2,0,null==nodeValue(_v.parent,16).errors?null:nodeValue(_v.parent,16).errors.required)}),null)}function View_SubscriptionFormComponent_7(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"div\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Email is Required\"]))],null,null)}function View_SubscriptionFormComponent_8(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"div\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Please Enter A Valid Email Address\"]))],null,null)}function View_SubscriptionFormComponent_6(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,4,\"div\",[[\"class\",\"text-danger\"]],null,null,null,null,null)),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_7)),directiveDef(2,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_8)),directiveDef(4,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null)],(function(_ck,_v){_ck(_v,2,0,null==nodeValue(_v.parent,33).errors?null:nodeValue(_v.parent,33).errors.required),_ck(_v,4,0,null==nodeValue(_v.parent,33).errors?null:nodeValue(_v.parent,33).errors.email)}),null)}function View_SubscriptionFormComponent_3(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,40,\"form\",[[\"class\",\"form-inline mb-5 mt-5 \"],[\"novalidate\",\"\"]],[[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"ngSubmit\"],[null,\"submit\"],[null,\"reset\"]],(function(_v,en,$event){var ad=!0,_co=_v.component;return\"submit\"===en&&(ad=!1!==nodeValue(_v,2).onSubmit($event)&&ad),\"reset\"===en&&(ad=!1!==nodeValue(_v,2).onReset()&&ad),\"ngSubmit\"===en&&(ad=!1!==_co.onSubmit(nodeValue(_v,2).value)&&ad),ad}),null,null)),directiveDef(1,16384,null,0,NgNoValidate,[],null,null),directiveDef(2,4210688,[[\"subForm\",4]],0,forms_NgForm,[[8,null],[8,null]],null,{ngSubmit:\"ngSubmit\"}),providerDef(2048,null,ControlContainer,null,[forms_NgForm]),directiveDef(4,16384,null,0,NgControlStatusGroup,[[4,ControlContainer]],null,null),(_l()(),elementDef(5,0,null,null,15,\"div\",[[\"class\",\"form-group  col-md-5\"]],null,null,null,null,null)),(_l()(),elementDef(6,0,null,null,1,\"label\",[[\"for\",\"username\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Username:\"])),(_l()(),elementDef(8,0,null,null,10,\"input\",[[\"class\",\"from-control \"],[\"name\",\"name\"],[\"ngModel\",\"\"],[\"placeholder\",\"Your name\"],[\"required\",\"\"],[\"type\",\"text\"]],[[1,\"required\",0],[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"input\"],[null,\"blur\"],[null,\"compositionstart\"],[null,\"compositionend\"]],(function(_v,en,$event){var ad=!0;return\"input\"===en&&(ad=!1!==nodeValue(_v,12)._handleInput($event.target.value)&&ad),\"blur\"===en&&(ad=!1!==nodeValue(_v,12).onTouched()&&ad),\"compositionstart\"===en&&(ad=!1!==nodeValue(_v,12)._compositionStart()&&ad),\"compositionend\"===en&&(ad=!1!==nodeValue(_v,12)._compositionEnd($event.target.value)&&ad),ad}),null,null)),providerDef(512,null,NgClassImpl,common_NgClassR2Impl,[IterableDiffers,KeyValueDiffers,ElementRef,Renderer2]),directiveDef(10,278528,null,0,NgClass,[NgClassImpl],{klass:[0,\"klass\"],ngClass:[1,\"ngClass\"]},null),pureObjectDef(11,{\"is-invalid\":0}),directiveDef(12,16384,null,0,DefaultValueAccessor,[Renderer2,ElementRef,[2,COMPOSITION_BUFFER_MODE]],null,null),directiveDef(13,16384,null,0,RequiredValidator,[],{required:[0,\"required\"]},null),providerDef(1024,null,NG_VALIDATORS,(function(p0_0){return[p0_0]}),[RequiredValidator]),providerDef(1024,null,NG_VALUE_ACCESSOR,(function(p0_0){return[p0_0]}),[DefaultValueAccessor]),directiveDef(16,671744,[[\"Name\",4]],0,forms_NgModel,[[2,ControlContainer],[6,NG_VALIDATORS],[8,null],[6,NG_VALUE_ACCESSOR]],{name:[0,\"name\"],model:[1,\"model\"]},null),providerDef(2048,null,NgControl,null,[forms_NgModel]),directiveDef(18,16384,null,0,NgControlStatus,[[4,NgControl]],null,null),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_4)),directiveDef(20,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null),(_l()(),elementDef(21,0,null,null,16,\"div\",[[\"class\",\"form-group col-md-5 \"]],null,null,null,null,null)),(_l()(),elementDef(22,0,null,null,1,\"label\",[[\"for\",\"username\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Useremail:\"])),(_l()(),elementDef(24,0,null,null,11,\"input\",[[\"class\",\"from-control \"],[\"email\",\"\"],[\"name\",\"email\"],[\"ngModel\",\"\"],[\"placeholder\",\"Your email\"],[\"required\",\"\"],[\"type\",\"email\"]],[[1,\"required\",0],[2,\"ng-untouched\",null],[2,\"ng-touched\",null],[2,\"ng-pristine\",null],[2,\"ng-dirty\",null],[2,\"ng-valid\",null],[2,\"ng-invalid\",null],[2,\"ng-pending\",null]],[[null,\"input\"],[null,\"blur\"],[null,\"compositionstart\"],[null,\"compositionend\"]],(function(_v,en,$event){var ad=!0;return\"input\"===en&&(ad=!1!==nodeValue(_v,28)._handleInput($event.target.value)&&ad),\"blur\"===en&&(ad=!1!==nodeValue(_v,28).onTouched()&&ad),\"compositionstart\"===en&&(ad=!1!==nodeValue(_v,28)._compositionStart()&&ad),\"compositionend\"===en&&(ad=!1!==nodeValue(_v,28)._compositionEnd($event.target.value)&&ad),ad}),null,null)),providerDef(512,null,NgClassImpl,common_NgClassR2Impl,[IterableDiffers,KeyValueDiffers,ElementRef,Renderer2]),directiveDef(26,278528,null,0,NgClass,[NgClassImpl],{klass:[0,\"klass\"],ngClass:[1,\"ngClass\"]},null),pureObjectDef(27,{\"is-invalid\":0}),directiveDef(28,16384,null,0,DefaultValueAccessor,[Renderer2,ElementRef,[2,COMPOSITION_BUFFER_MODE]],null,null),directiveDef(29,16384,null,0,RequiredValidator,[],{required:[0,\"required\"]},null),directiveDef(30,16384,null,0,EmailValidator,[],{email:[0,\"email\"]},null),providerDef(1024,null,NG_VALIDATORS,(function(p0_0,p1_0){return[p0_0,p1_0]}),[RequiredValidator,EmailValidator]),providerDef(1024,null,NG_VALUE_ACCESSOR,(function(p0_0){return[p0_0]}),[DefaultValueAccessor]),directiveDef(33,671744,[[\"Email\",4]],0,forms_NgModel,[[2,ControlContainer],[6,NG_VALIDATORS],[8,null],[6,NG_VALUE_ACCESSOR]],{name:[0,\"name\"],model:[1,\"model\"]},null),providerDef(2048,null,NgControl,null,[forms_NgModel]),directiveDef(35,16384,null,0,NgControlStatus,[[4,NgControl]],null,null),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_6)),directiveDef(37,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null),(_l()(),elementDef(38,0,null,null,2,\"div\",[[\"class\",\"col-md-2\"]],null,null,null,null,null)),(_l()(),elementDef(39,0,null,null,1,\"button\",[[\"class\",\"btn btn-info btn-block btn-theme\"]],[[8,\"disabled\",0]],null,null,null,null)),(_l()(),textDef(-1,null,[\"SUBSCRIBE\"]))],(function(_ck,_v){var currVal_16=_ck(_v,11,0,nodeValue(_v,16).touched&&nodeValue(_v,16).invalid);_ck(_v,10,0,\"from-control \",currVal_16),_ck(_v,13,0,\"\"),_ck(_v,16,0,\"name\",\"\"),_ck(_v,20,0,nodeValue(_v,16).touched&&nodeValue(_v,16).invalid);var currVal_30=_ck(_v,27,0,nodeValue(_v,33).touched&&nodeValue(_v,33).invalid);_ck(_v,26,0,\"from-control \",currVal_30),_ck(_v,29,0,\"\"),_ck(_v,30,0,\"\"),_ck(_v,33,0,\"email\",\"\"),_ck(_v,37,0,nodeValue(_v,33).touched&&nodeValue(_v,33).invalid)}),(function(_ck,_v){_ck(_v,0,0,nodeValue(_v,4).ngClassUntouched,nodeValue(_v,4).ngClassTouched,nodeValue(_v,4).ngClassPristine,nodeValue(_v,4).ngClassDirty,nodeValue(_v,4).ngClassValid,nodeValue(_v,4).ngClassInvalid,nodeValue(_v,4).ngClassPending),_ck(_v,8,0,nodeValue(_v,13).required?\"\":null,nodeValue(_v,18).ngClassUntouched,nodeValue(_v,18).ngClassTouched,nodeValue(_v,18).ngClassPristine,nodeValue(_v,18).ngClassDirty,nodeValue(_v,18).ngClassValid,nodeValue(_v,18).ngClassInvalid,nodeValue(_v,18).ngClassPending),_ck(_v,24,0,nodeValue(_v,29).required?\"\":null,nodeValue(_v,35).ngClassUntouched,nodeValue(_v,35).ngClassTouched,nodeValue(_v,35).ngClassPristine,nodeValue(_v,35).ngClassDirty,nodeValue(_v,35).ngClassValid,nodeValue(_v,35).ngClassInvalid,nodeValue(_v,35).ngClassPending),_ck(_v,39,0,nodeValue(_v,2).invalid)}))}function View_SubscriptionFormComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,12,\"div\",[[\"class\",\"card shadow-effect\"]],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,11,\"div\",[[\"class\",\"card shadow-effect\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,10,\"div\",[[\"class\",\"text-center mt-3 mb-5\"]],null,null,null,null,null)),(_l()(),elementDef(3,0,null,null,1,\"h3\",[],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"SUBSCRIPTION FORM\"])),(_l()(),elementDef(5,0,null,null,1,\"p\",[[\"class\",\"m-auto subs-text\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\" Learn from Vijay Saroay\"])),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_1)),directiveDef(8,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_2)),directiveDef(10,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null),(_l()(),anchorDef(16777216,null,null,1,null,View_SubscriptionFormComponent_3)),directiveDef(12,16384,null,0,NgIf,[ViewContainerRef,TemplateRef],{ngIf:[0,\"ngIf\"]},null)],(function(_ck,_v){var _co=_v.component;_ck(_v,8,0,_co.isEmailError),_ck(_v,10,0,_co.isSubscribed),_ck(_v,12,0,!_co.isSubscribed)}),null)}class FootersComponent{constructor(){}ngOnInit(){}}var RenderType_FootersComponent=createRendererType2({encapsulation:0,styles:[[\"footer[_ngcontent-%COMP%]{height:130px;padding:15px;background-color:var(--navbor-footer-color)}.site-logo[_ngcontent-%COMP%]{font-size:1.2em}\"]],data:{}});function View_FootersComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,21,\"footer\",[],null,null,null,null,null)),(_l()(),elementDef(1,0,null,null,20,\"div\",[[\"class\",\"container\"]],null,null,null,null,null)),(_l()(),elementDef(2,0,null,null,19,\"div\",[[\"class\",\"row\"]],null,null,null,null,null)),(_l()(),elementDef(3,0,null,null,18,\"div\",[[\"class\",\"col-md-12 text-center\"]],null,null,null,null,null)),(_l()(),elementDef(4,0,null,null,1,\"div\",[[\"class\",\"site-logo\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"My-Blog\"])),(_l()(),elementDef(6,0,null,null,13,\"div\",[],null,null,null,null,null)),(_l()(),elementDef(7,0,null,null,12,\"ul\",[[\"class\",\"nav justify-content-center\"]],null,null,null,null,null)),(_l()(),elementDef(8,0,null,null,2,\"li\",[[\"class\",\"nav-item\"]],null,null,null,null,null)),(_l()(),elementDef(9,0,null,null,1,\"a\",[[\"class\",\"nav-link\"],[\"href\",\"\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Home\"])),(_l()(),elementDef(11,0,null,null,2,\"li\",[[\"class\",\"nav-item\"]],null,null,null,null,null)),(_l()(),elementDef(12,0,null,null,1,\"a\",[[\"class\",\"nav-link\"],[\"href\",\"\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"About-Us\"])),(_l()(),elementDef(14,0,null,null,2,\"li\",[[\"class\",\"nav-item\"]],null,null,null,null,null)),(_l()(),elementDef(15,0,null,null,1,\"a\",[[\"class\",\"nav-link\"],[\"href\",\"\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Term&Conditions\"])),(_l()(),elementDef(17,0,null,null,2,\"li\",[[\"class\",\"nav-item\"]],null,null,null,null,null)),(_l()(),elementDef(18,0,null,null,1,\"a\",[[\"class\",\"nav-link\"],[\"href\",\"\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Contact-Us\"])),(_l()(),elementDef(20,0,null,null,1,\"p\",[[\"class\",\"mb-2 mt-2\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Copyright  2023 Vijay Saroay Blogsite\"]))],null,null)}var RenderType_AppComponent=createRendererType2({encapsulation:0,styles:[[\".app-body[_ngcontent-%COMP%]{margin-top:140px;min-height:55vh}\"]],data:{}});function View_AppComponent_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"h1\",[[\"class\",\"text-primary\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Angular blog website\"])),(_l()(),elementDef(2,0,null,null,1,\"app-headers\",[],null,null,null,View_HeadersComponent_0,RenderType_HeadersComponent)),directiveDef(3,114688,null,0,HeadersComponent,[categories_service_CategoriesService],null,null),(_l()(),elementDef(4,0,null,null,1,\"app-category-navbar\",[],null,null,null,View_CategoryNavbarComponent_0,RenderType_CategoryNavbarComponent)),directiveDef(5,114688,null,0,CategoryNavbarComponent,[categories_service_CategoriesService],null,null),(_l()(),elementDef(6,0,null,null,4,\"div\",[[\"class\",\"app-body\"]],null,null,null,null,null)),(_l()(),elementDef(7,16777216,null,null,1,\"router-outlet\",[],null,null,null,null,null)),directiveDef(8,212992,null,0,router_RouterOutlet,[ChildrenOutletContexts,ViewContainerRef,ComponentFactoryResolver,[8,null],ChangeDetectorRef],null,null),(_l()(),elementDef(9,0,null,null,1,\"app-dark-mode\",[],null,null,null,View_DarkModeComponent_0,RenderType_DarkModeComponent)),directiveDef(10,114688,null,0,DarkModeComponent,[],null,null),(_l()(),elementDef(11,0,null,null,7,\"div\",[[\"class\",\"container mt-5 mb-5\"]],null,null,null,null,null)),(_l()(),elementDef(12,0,null,null,6,\"div\",[[\"class\",\"row justify-content-center\"]],null,null,null,null,null)),(_l()(),elementDef(13,0,null,null,1,\"app-subscription-form\",[],null,null,null,View_SubscriptionFormComponent_0,RenderType_SubscriptionFormComponent)),directiveDef(14,114688,null,0,SubscriptionFormComponent,[subscribers_SubscribersService],null,null),(_l()(),elementDef(15,0,null,null,3,\"button\",[[\"class\",\"btn btn-secondary rounded-circle scroll-to-top\"]],null,[[null,\"click\"]],(function(_v,en,$event){var ad=!0;return\"click\"===en&&(ad=!1!==_v.component.scrollToTop()&&ad),ad}),null,null)),(_l()(),elementDef(16,0,null,null,1,\"h4\",[[\"text-color\",\"red\"]],null,null,null,null,null)),(_l()(),textDef(-1,null,[\"Top\"])),(_l()(),elementDef(18,0,null,null,0,\"i\",[[\"class\",\"fas fa-angle-up\"]],null,null,null,null,null)),(_l()(),elementDef(19,0,null,null,1,\"app-footers\",[],null,null,null,View_FootersComponent_0,RenderType_FootersComponent)),directiveDef(20,114688,null,0,FootersComponent,[],null,null)],(function(_ck,_v){_ck(_v,3,0),_ck(_v,5,0),_ck(_v,8,0),_ck(_v,10,0),_ck(_v,14,0),_ck(_v,20,0)}),null)}function View_AppComponent_Host_0(_l){return viewDef(0,[(_l()(),elementDef(0,0,null,null,1,\"app-root\",[],null,[[\"window\",\"scroll\"]],(function(_v,en,$event){var ad=!0;return\"window:scroll\"===en&&(ad=!1!==nodeValue(_v,1).onWindowScroll($event)&&ad),ad}),View_AppComponent_0,RenderType_AppComponent)),directiveDef(1,49152,null,0,AppComponent,[],null,null)],null,null)}var AppComponentNgFactory=createComponentFactory(\"app-root\",AppComponent,View_AppComponent_Host_0,{},{},[]);let hasV8BreakIterator;try{hasV8BreakIterator=\"undefined\"!=typeof Intl&&Intl.v8BreakIterator}catch(_a){hasV8BreakIterator=!1}class PlatformModule{}const MATERIAL_SANITY_CHECKS=new InjectionToken(\"mat-sanity-checks\",{providedIn:\"root\",factory:function(){return!0}});class core_MatCommonModule{constructor(_sanityChecksEnabled,_hammerLoader){this._sanityChecksEnabled=_sanityChecksEnabled,this._hammerLoader=_hammerLoader,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document=\"object\"==typeof document&&document?document:null,this._window=\"object\"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}_areChecksEnabled(){return this._sanityChecksEnabled&&isDevMode()&&!this._isTestEnv()}_isTestEnv(){const window=this._window;return window&&(window.__karma__||window.jasmine)}_checkDoctypeIsDefined(){this._document&&!this._document.doctype&&console.warn(\"Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.\")}_checkThemeIsPresent(){if(!this._document||!this._document.body||\"function\"!=typeof getComputedStyle)return;const testElement=this._document.createElement(\"div\");testElement.classList.add(\"mat-theme-loaded-marker\"),this._document.body.appendChild(testElement);const computedStyle=getComputedStyle(testElement);computedStyle&&\"none\"!==computedStyle.display&&console.warn(\"Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming\"),this._document.body.removeChild(testElement)}_checkHammerIsAvailable(){!this._hasCheckedHammer&&this._window&&(!this._areChecksEnabled()||this._window.Hammer||this._hammerLoader||console.warn(\"Could not find HammerJS. Certain Angular Material components may not work correctly.\"),this._hasCheckedHammer=!0)}}let SUPPORTS_INTL_API;try{SUPPORTS_INTL_API=\"undefined\"!=typeof Intl}catch(_a){SUPPORTS_INTL_API=!1}const MAT_HAMMER_OPTIONS=new InjectionToken(\"MAT_HAMMER_OPTIONS\"),ANGULAR_MATERIAL_SUPPORTED_HAMMER_GESTURES=[\"longpress\",\"slide\",\"slidestart\",\"slideend\",\"slideright\",\"slideleft\"],noopHammerInstance={on:()=>{},off:()=>{}};class core_GestureConfig extends class{constructor(){this.events=[],this.overrides={}}buildHammer(element){const mc=new Hammer(element,this.options);mc.get(\"pinch\").set({enable:!0}),mc.get(\"rotate\").set({enable:!0});for(const eventName in this.overrides)mc.get(eventName).set(this.overrides[eventName]);return mc}}{constructor(_hammerOptions,commonModule){super(),this._hammerOptions=_hammerOptions,this.events=ANGULAR_MATERIAL_SUPPORTED_HAMMER_GESTURES,commonModule&&commonModule._checkHammerIsAvailable()}buildHammer(element){const hammer=\"undefined\"!=typeof window?window.Hammer:null;if(!hammer)return noopHammerInstance;const mc=new hammer(element,this._hammerOptions||void 0),pan=new hammer.Pan,swipe=new hammer.Swipe,press=new hammer.Press,slide=this._createRecognizer(pan,{event:\"slide\",threshold:0},swipe),longpress=this._createRecognizer(press,{event:\"longpress\",time:500});return pan.recognizeWith(swipe),longpress.recognizeWith(slide),mc.add([swipe,press,pan,slide,longpress]),mc}_createRecognizer(base,options,...inheritances){let recognizer=new base.constructor(options);return inheritances.push(base),inheritances.forEach(item=>recognizer.recognizeWith(item)),recognizer}}class MatRippleModule{}var AngularFirestoreModule_1;__webpack_require__(\"6Joi\");let firestore_module_AngularFirestoreModule=AngularFirestoreModule_1=class{static enablePersistence(persistenceSettings){return{ngModule:AngularFirestoreModule_1,providers:[{provide:EnablePersistenceToken,useValue:!0},{provide:PersistenceSettingsToken,useValue:persistenceSettings}]}}},observers_MutationObserverFactory=(()=>{class MutationObserverFactory{create(callback){return\"undefined\"==typeof MutationObserver?null:new MutationObserver(callback)}}return MutationObserverFactory.ngInjectableDef=defineInjectable({factory:function(){return new MutationObserverFactory},token:MutationObserverFactory,providedIn:\"root\"}),MutationObserverFactory})();class ObserversModule{}class AppRoutingModule{}class BidiModule{}class MatSlideToggleModule{}class MatToolbarModule{}class MatCardModule{}class MatIconModule{}var AppModuleNgFactory=createNgModuleFactory(AppModule,[AppComponent],(function(_l){return function(providers){const providersByKey={},modules=[];let isRoot=!1;for(let i=0;i<providers.length;i++){const provider=providers[i];provider.token===APP_ROOT&&!0===provider.value&&(isRoot=!0),1073741824&provider.flags&&modules.push(provider.token),provider.index=i,providersByKey[tokenKey(provider.token)]=provider}return{factory:null,providersByKey:providersByKey,providers:providers,modules:modules,isRoot:isRoot}}([moduleProvideDef(512,ComponentFactoryResolver,CodegenComponentFactoryResolver,[[8,[angular_packages_router_router_lNgFactory,HomeComponentNgFactory,DarkModeComponentNgFactory,SingleCategoryComponentNgFactory,SinglPostsComponentNgFactory,TermsAndConditionsComponentNgFactory,ContactUsComponentNgFactory,AboutUsComponentNgFactory,PostCardComponentNgFactory,CategoryNavbarComponentNgFactory,AppComponentNgFactory]],[3,ComponentFactoryResolver],NgModuleRef]),moduleProvideDef(5120,LOCALE_ID$1,_localeFactory,[[3,LOCALE_ID$1]]),moduleProvideDef(4608,NgLocalization,NgLocaleLocalization,[LOCALE_ID$1,[2,DEPRECATED_PLURAL_FN]]),moduleProvideDef(5120,SCHEDULER,zoneSchedulerFactory,[NgZone]),moduleProvideDef(5120,APP_ID,_appIdRandomProviderFactory,[]),moduleProvideDef(5120,IterableDiffers,_iterableDiffersFactory,[]),moduleProvideDef(5120,KeyValueDiffers,_keyValueDiffersFactory,[]),moduleProvideDef(4608,DomSanitizer,platform_browser_DomSanitizerImpl,[DOCUMENT]),moduleProvideDef(6144,Sanitizer,null,[DomSanitizer]),moduleProvideDef(4608,HAMMER_GESTURE_CONFIG,core_GestureConfig,[[2,MAT_HAMMER_OPTIONS],[2,core_MatCommonModule]]),moduleProvideDef(5120,EVENT_MANAGER_PLUGINS,(function(p0_0,p0_1,p0_2,p1_0,p2_0,p2_1,p2_2,p2_3){return[new platform_browser_DomEventsPlugin(p0_0,p0_1,p0_2),new KeyEventsPlugin(p1_0),new HammerGesturesPlugin(p2_0,p2_1,p2_2,p2_3)]}),[DOCUMENT,NgZone,PLATFORM_ID,DOCUMENT,DOCUMENT,HAMMER_GESTURE_CONFIG,Console,[2,HAMMER_LOADER]]),moduleProvideDef(4608,EventManager,EventManager,[EVENT_MANAGER_PLUGINS,NgZone]),moduleProvideDef(135680,DomSharedStylesHost,DomSharedStylesHost,[DOCUMENT]),moduleProvideDef(4608,platform_browser_DomRendererFactory2,platform_browser_DomRendererFactory2,[EventManager,DomSharedStylesHost,APP_ID]),moduleProvideDef(6144,RendererFactory2,null,[platform_browser_DomRendererFactory2]),moduleProvideDef(6144,SharedStylesHost,null,[DomSharedStylesHost]),moduleProvideDef(4608,Testability,Testability,[NgZone]),moduleProvideDef(5120,router_ActivatedRoute,rootRoute,[router_Router]),moduleProvideDef(4608,router_NoPreloading,router_NoPreloading,[]),moduleProvideDef(6144,PreloadingStrategy,null,[router_NoPreloading]),moduleProvideDef(135680,router_RouterPreloader,router_RouterPreloader,[router_Router,NgModuleFactoryLoader,Compiler,Injector,PreloadingStrategy]),moduleProvideDef(4608,router_PreloadAllModules,router_PreloadAllModules,[]),moduleProvideDef(5120,RouterScroller,createRouterScroller,[router_Router,common_ViewportScroller,ROUTER_CONFIGURATION]),moduleProvideDef(5120,ROUTER_INITIALIZER,getBootstrapListener,[router_RouterInitializer]),moduleProvideDef(5120,APP_BOOTSTRAP_LISTENER,(function(p0_0){return[p0_0]}),[ROUTER_INITIALIZER]),moduleProvideDef(5120,FirebaseApp,_firebaseAppFactory,[FirebaseOptionsToken,NgZone,[2,FirebaseNameOrConfigToken]]),moduleProvideDef(4608,firestore_AngularFirestore,firestore_AngularFirestore,[FirebaseOptionsToken,[2,FirebaseNameOrConfigToken],[2,EnablePersistenceToken],[2,FirestoreSettingsToken],PLATFORM_ID,NgZone,[2,PersistenceSettingsToken]]),moduleProvideDef(4608,RadioControlRegistry,RadioControlRegistry,[]),moduleProvideDef(4608,observers_MutationObserverFactory,observers_MutationObserverFactory,[]),moduleProvideDef(1073742336,CommonModule,CommonModule,[]),moduleProvideDef(1024,ErrorHandler,errorHandler,[]),moduleProvideDef(1024,NgProbeToken,(function(){return[routerNgProbeToken()]}),[]),moduleProvideDef(512,router_RouterInitializer,router_RouterInitializer,[Injector]),moduleProvideDef(1024,APP_INITIALIZER,(function(p0_0,p1_0){return[(coreTokens=p0_0,exportNgVar(\"probe\",inspectNativeElement),exportNgVar(\"coreTokens\",Object.assign({},CORE_TOKENS,(coreTokens||[]).reduce((prev,t)=>(prev[t.name]=t.token,prev),{}))),()=>inspectNativeElement),getAppInitializer(p1_0)];var coreTokens}),[[2,NgProbeToken],router_RouterInitializer]),moduleProvideDef(512,ApplicationInitStatus,ApplicationInitStatus,[[2,APP_INITIALIZER]]),moduleProvideDef(131584,core_ApplicationRef,core_ApplicationRef,[NgZone,Console,Injector,ErrorHandler,ComponentFactoryResolver,ApplicationInitStatus]),moduleProvideDef(1073742336,ApplicationModule,ApplicationModule,[core_ApplicationRef]),moduleProvideDef(1073742336,platform_browser_BrowserModule,platform_browser_BrowserModule,[[3,platform_browser_BrowserModule]]),moduleProvideDef(1024,ROUTER_FORROOT_GUARD,provideForRootGuard,[[3,router_Router]]),moduleProvideDef(512,UrlSerializer,DefaultUrlSerializer,[]),moduleProvideDef(512,ChildrenOutletContexts,ChildrenOutletContexts,[]),moduleProvideDef(256,ROUTER_CONFIGURATION,{},[]),moduleProvideDef(1024,LocationStrategy,provideLocationStrategy,[PlatformLocation,[2,APP_BASE_HREF],ROUTER_CONFIGURATION]),moduleProvideDef(512,common_Location,common_Location,[LocationStrategy,PlatformLocation]),moduleProvideDef(512,Compiler,Compiler,[]),moduleProvideDef(512,NgModuleFactoryLoader,SystemJsNgModuleLoader,[Compiler,[2,SystemJsNgModuleLoaderConfig]]),moduleProvideDef(1024,ROUTES,(function(){return[[{path:\"\",component:HomeComponent},{path:\"dark\",component:DarkModeComponent},{path:\"category/:category/:id\",component:SingleCategoryComponent},{path:\"post/:id\",component:SinglPostsComponent},{path:\"terms-conditions\",component:TermsAndConditionsComponent},{path:\"contact\",component:ContactUsComponent},{path:\"about\",component:AboutUsComponent},{path:\"posts/:id\",component:PostCardComponent},{path:\"category\",component:CategoryNavbarComponent}]]}),[]),moduleProvideDef(1024,router_Router,setupRouter,[core_ApplicationRef,UrlSerializer,ChildrenOutletContexts,common_Location,Injector,NgModuleFactoryLoader,Compiler,ROUTES,ROUTER_CONFIGURATION,[2,UrlHandlingStrategy],[2,RouteReuseStrategy]]),moduleProvideDef(1073742336,router_RouterModule,router_RouterModule,[[2,ROUTER_FORROOT_GUARD],[2,router_Router]]),moduleProvideDef(1073742336,AppRoutingModule,AppRoutingModule,[]),moduleProvideDef(1073742336,firebase_app_module_AngularFireModule,firebase_app_module_AngularFireModule,[PLATFORM_ID]),moduleProvideDef(1073742336,firestore_module_AngularFirestoreModule,firestore_module_AngularFirestoreModule,[]),moduleProvideDef(1073742336,InternalFormsSharedModule,InternalFormsSharedModule,[]),moduleProvideDef(1073742336,FormsModule,FormsModule,[]),moduleProvideDef(1073742336,BidiModule,BidiModule,[]),moduleProvideDef(1073742336,core_MatCommonModule,core_MatCommonModule,[[2,MATERIAL_SANITY_CHECKS],[2,HAMMER_LOADER]]),moduleProvideDef(1073742336,PlatformModule,PlatformModule,[]),moduleProvideDef(1073742336,MatRippleModule,MatRippleModule,[]),moduleProvideDef(1073742336,ObserversModule,ObserversModule,[]),moduleProvideDef(1073742336,MatSlideToggleModule,MatSlideToggleModule,[]),moduleProvideDef(1073742336,MatToolbarModule,MatToolbarModule,[]),moduleProvideDef(1073742336,MatCardModule,MatCardModule,[]),moduleProvideDef(1073742336,MatIconModule,MatIconModule,[]),moduleProvideDef(1073742336,AppModule,AppModule,[]),moduleProvideDef(256,APP_ROOT,!0,[]),moduleProvideDef(256,FirebaseOptionsToken,{apiKey:\"AIzaSyCeVFKKnvIcJOtpJwe4yj3Q3uZ73b2YOoc\",authDomain:\"my-blog-2194a.firebaseapp.com\",projectId:\"my-blog-2194a\",storageBucket:\"my-blog-2194a.appspot.com\",messagingSenderId:\"735978478891\",appId:\"1:735978478891:web:184b8742a958775a3c396e\"},[]),moduleProvideDef(256,FirebaseNameOrConfigToken,void 0,[])])}));platformBrowser().bootstrapModuleFactory(AppModuleNgFactory).catch(err=>console.error(err))},zVF4:function(module,exports,__webpack_require__){\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});var tslib=__webpack_require__(\"mrSG\"),CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:\"${JSCORE_VERSION}\"},assert=function(assertion,message){if(!assertion)throw assertionError(message)},assertionError=function(message){return new Error(\"Firebase Database (\"+CONSTANTS.SDK_VERSION+\") INTERNAL ASSERT FAILED: \"+message)},stringToByteArray=function(str){for(var out=[],p=0,i=0;i<str.length;i++){var c=str.charCodeAt(i);c<128?out[p++]=c:c<2048?(out[p++]=c>>6|192,out[p++]=63&c|128):55296==(64512&c)&&i+1<str.length&&56320==(64512&str.charCodeAt(i+1))?(c=65536+((1023&c)<<10)+(1023&str.charCodeAt(++i)),out[p++]=c>>18|240,out[p++]=c>>12&63|128,out[p++]=c>>6&63|128,out[p++]=63&c|128):(out[p++]=c>>12|224,out[p++]=c>>6&63|128,out[p++]=63&c|128)}return out},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+\"+/=\"},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+\"-_.\"},HAS_NATIVE_SUPPORT:\"function\"==typeof atob,encodeByteArray:function(input,webSafe){if(!Array.isArray(input))throw Error(\"encodeByteArray takes an array as a parameter\");this.init_();for(var byteToCharMap=webSafe?this.byteToCharMapWebSafe_:this.byteToCharMap_,output=[],i=0;i<input.length;i+=3){var byte1=input[i],haveByte2=i+1<input.length,byte2=haveByte2?input[i+1]:0,haveByte3=i+2<input.length,byte3=haveByte3?input[i+2]:0,outByte3=(15&byte2)<<2|byte3>>6,outByte4=63&byte3;haveByte3||(outByte4=64,haveByte2||(outByte3=64)),output.push(byteToCharMap[byte1>>2],byteToCharMap[(3&byte1)<<4|byte2>>4],byteToCharMap[outByte3],byteToCharMap[outByte4])}return output.join(\"\")},encodeString:function(input,webSafe){return this.HAS_NATIVE_SUPPORT&&!webSafe?btoa(input):this.encodeByteArray(stringToByteArray(input),webSafe)},decodeString:function(input,webSafe){return this.HAS_NATIVE_SUPPORT&&!webSafe?atob(input):function(bytes){for(var out=[],pos=0,c=0;pos<bytes.length;){var c1=bytes[pos++];if(c1<128)out[c++]=String.fromCharCode(c1);else if(c1>191&&c1<224){var c2=bytes[pos++];out[c++]=String.fromCharCode((31&c1)<<6|63&c2)}else if(c1>239&&c1<365){var u=((7&c1)<<18|(63&(c2=bytes[pos++]))<<12|(63&(c3=bytes[pos++]))<<6|63&bytes[pos++])-65536;out[c++]=String.fromCharCode(55296+(u>>10)),out[c++]=String.fromCharCode(56320+(1023&u))}else{c2=bytes[pos++];var c3=bytes[pos++];out[c++]=String.fromCharCode((15&c1)<<12|(63&c2)<<6|63&c3)}}return out.join(\"\")}(this.decodeStringToByteArray(input,webSafe))},decodeStringToByteArray:function(input,webSafe){this.init_();for(var charToByteMap=webSafe?this.charToByteMapWebSafe_:this.charToByteMap_,output=[],i=0;i<input.length;){var byte1=charToByteMap[input.charAt(i++)],byte2=i<input.length?charToByteMap[input.charAt(i)]:0,byte3=++i<input.length?charToByteMap[input.charAt(i)]:64,byte4=++i<input.length?charToByteMap[input.charAt(i)]:64;if(++i,null==byte1||null==byte2||null==byte3||null==byte4)throw Error();output.push(byte1<<2|byte2>>4),64!==byte3&&(output.push(byte2<<4&240|byte3>>2),64!==byte4&&output.push(byte3<<6&192|byte4))}return output},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}},base64Decode=function(str){try{return base64.decodeString(str,!0)}catch(e){console.error(\"base64Decode failed: \",e)}return null};function deepExtend(target,source){if(!(source instanceof Object))return source;switch(source.constructor){case Date:return new Date(source.getTime());case Object:void 0===target&&(target={});break;case Array:target=[];break;default:return source}for(var prop in source)source.hasOwnProperty(prop)&&(target[prop]=deepExtend(target[prop],source[prop]));return target}var Deferred=function(){function Deferred(){var _this=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(resolve,reject){_this.resolve=resolve,_this.reject=reject}))}return Deferred.prototype.wrapCallback=function(callback){var _this=this;return function(error,value){error?_this.reject(error):_this.resolve(value),\"function\"==typeof callback&&(_this.promise.catch((function(){})),1===callback.length?callback(error):callback(error,value))}},Deferred}();function getUA(){return\"undefined\"!=typeof navigator&&\"string\"==typeof navigator.userAgent?navigator.userAgent:\"\"}function isNode(){try{return\"[object process]\"===Object.prototype.toString.call(global.process)}catch(e){return!1}}var FirebaseError=function(_super){function FirebaseError(code,message){var _this=_super.call(this,message)||this;return _this.code=code,_this.name=\"FirebaseError\",Object.setPrototypeOf(_this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(_this,ErrorFactory.prototype.create),_this}return tslib.__extends(FirebaseError,_super),FirebaseError}(Error),ErrorFactory=function(){function ErrorFactory(service,serviceName,errors){this.service=service,this.serviceName=serviceName,this.errors=errors}return ErrorFactory.prototype.create=function(code){for(var data=[],_i=1;_i<arguments.length;_i++)data[_i-1]=arguments[_i];for(var customData=data[0]||{},fullCode=this.service+\"/\"+code,template=this.errors[code],message=template?replaceTemplate(template,customData):\"Error\",fullMessage=this.serviceName+\": \"+message+\" (\"+fullCode+\").\",error=new FirebaseError(fullCode,fullMessage),_a=0,_b=Object.keys(customData);_a<_b.length;_a++){var key=_b[_a];\"_\"!==key.slice(-1)&&(key in error&&console.warn('Overwriting FirebaseError base field \"'+key+'\" can cause unexpected behavior.'),error[key]=customData[key])}return error},ErrorFactory}();function replaceTemplate(template,data){return template.replace(PATTERN,(function(_,key){var value=data[key];return null!=value?String(value):\"<\"+key+\"?>\"}))}var PATTERN=/\\{\\$([^}]+)}/g;function jsonEval(str){return JSON.parse(str)}var decode=function(token){var header={},claims={},data={},signature=\"\";try{var parts=token.split(\".\");header=jsonEval(base64Decode(parts[0])||\"\"),claims=jsonEval(base64Decode(parts[1])||\"\"),signature=parts[2],data=claims.d||{},delete claims.d}catch(e){}return{header:header,claims:claims,data:data,signature:signature}},Sha1=function(){function Sha1(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}return Sha1.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Sha1.prototype.compress_=function(buf,offset){offset||(offset=0);var W=this.W_;if(\"string\"==typeof buf)for(var i=0;i<16;i++)W[i]=buf.charCodeAt(offset)<<24|buf.charCodeAt(offset+1)<<16|buf.charCodeAt(offset+2)<<8|buf.charCodeAt(offset+3),offset+=4;else for(i=0;i<16;i++)W[i]=buf[offset]<<24|buf[offset+1]<<16|buf[offset+2]<<8|buf[offset+3],offset+=4;for(i=16;i<80;i++)W[i]=4294967295&((t=W[i-3]^W[i-8]^W[i-14]^W[i-16])<<1|t>>>31);var f,k,a=this.chain_[0],b=this.chain_[1],c=this.chain_[2],d=this.chain_[3],e=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(f=d^b&(c^d),k=1518500249):(f=b^c^d,k=1859775393):i<60?(f=b&c|d&(b|c),k=2400959708):(f=b^c^d,k=3395469782);var t=(a<<5|a>>>27)+f+e+k+W[i]&4294967295;e=d,d=c,c=4294967295&(b<<30|b>>>2),b=a,a=t}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+b&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+e&4294967295},Sha1.prototype.update=function(bytes,length){if(null!=bytes){void 0===length&&(length=bytes.length);for(var lengthMinusBlock=length-this.blockSize,n=0,buf=this.buf_,inbuf=this.inbuf_;n<length;){if(0===inbuf)for(;n<=lengthMinusBlock;)this.compress_(bytes,n),n+=this.blockSize;if(\"string\"==typeof bytes){for(;n<length;)if(buf[inbuf]=bytes.charCodeAt(n),++n,++inbuf===this.blockSize){this.compress_(buf),inbuf=0;break}}else for(;n<length;)if(buf[inbuf]=bytes[n],++n,++inbuf===this.blockSize){this.compress_(buf),inbuf=0;break}}this.inbuf_=inbuf,this.total_+=length}},Sha1.prototype.digest=function(){var digest=[],totalBits=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&totalBits,totalBits/=256;this.compress_(this.buf_);var n=0;for(i=0;i<5;i++)for(var j=24;j>=0;j-=8)digest[n]=this.chain_[i]>>j&255,++n;return digest},Sha1}(),ObserverProxy=function(){function ObserverProxy(executor,onNoObservers){var _this=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=onNoObservers,this.task.then((function(){executor(_this)})).catch((function(e){_this.error(e)}))}return ObserverProxy.prototype.next=function(value){this.forEachObserver((function(observer){observer.next(value)}))},ObserverProxy.prototype.error=function(error){this.forEachObserver((function(observer){observer.error(error)})),this.close(error)},ObserverProxy.prototype.complete=function(){this.forEachObserver((function(observer){observer.complete()})),this.close()},ObserverProxy.prototype.subscribe=function(nextOrObserver,error,complete){var observer,_this=this;if(void 0===nextOrObserver&&void 0===error&&void 0===complete)throw new Error(\"Missing Observer.\");void 0===(observer=function(obj,methods){if(\"object\"!=typeof obj||null===obj)return!1;for(var _i=0,methods_1=[\"next\",\"error\",\"complete\"];_i<methods_1.length;_i++){var method=methods_1[_i];if(method in obj&&\"function\"==typeof obj[method])return!0}return!1}(nextOrObserver)?nextOrObserver:{next:nextOrObserver,error:error,complete:complete}).next&&(observer.next=noop),void 0===observer.error&&(observer.error=noop),void 0===observer.complete&&(observer.complete=noop);var unsub=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{_this.finalError?observer.error(_this.finalError):observer.complete()}catch(e){}})),this.observers.push(observer),unsub},ObserverProxy.prototype.unsubscribeOne=function(i){void 0!==this.observers&&void 0!==this.observers[i]&&(delete this.observers[i],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ObserverProxy.prototype.forEachObserver=function(fn){if(!this.finalized)for(var i=0;i<this.observers.length;i++)this.sendOne(i,fn)},ObserverProxy.prototype.sendOne=function(i,fn){var _this=this;this.task.then((function(){if(void 0!==_this.observers&&void 0!==_this.observers[i])try{fn(_this.observers[i])}catch(e){\"undefined\"!=typeof console&&console.error&&console.error(e)}}))},ObserverProxy.prototype.close=function(err){var _this=this;this.finalized||(this.finalized=!0,void 0!==err&&(this.finalError=err),this.task.then((function(){_this.observers=void 0,_this.onNoObservers=void 0})))},ObserverProxy}();function noop(){}function errorPrefix(fnName,argumentNumber,optional){var argName=\"\";switch(argumentNumber){case 1:argName=optional?\"first\":\"First\";break;case 2:argName=optional?\"second\":\"Second\";break;case 3:argName=optional?\"third\":\"Third\";break;case 4:argName=optional?\"fourth\":\"Fourth\";break;default:throw new Error(\"errorPrefix called with argumentNumber > 4.  Need to update it?\")}return fnName+\" failed: \"+argName+\" argument \"}exports.CONSTANTS=CONSTANTS,exports.Deferred=Deferred,exports.ErrorFactory=ErrorFactory,exports.FirebaseError=FirebaseError,exports.MAX_VALUE_MILLIS=144e5,exports.RANDOM_FACTOR=.5,exports.Sha1=Sha1,exports.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},exports.assert=assert,exports.assertionError=assertionError,exports.async=function(fn,onError){return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];Promise.resolve(!0).then((function(){fn.apply(void 0,args)})).catch((function(error){onError&&onError(error)}))}},exports.base64=base64,exports.base64Decode=base64Decode,exports.base64Encode=function(str){var utf8Bytes=stringToByteArray(str);return base64.encodeByteArray(utf8Bytes,!0)},exports.calculateBackoffMillis=function(backoffCount,intervalMillis,backoffFactor){void 0===intervalMillis&&(intervalMillis=1e3),void 0===backoffFactor&&(backoffFactor=2);var currBaseValue=intervalMillis*Math.pow(backoffFactor,backoffCount),randomWait=Math.round(.5*currBaseValue*(Math.random()-.5)*2);return Math.min(144e5,currBaseValue+randomWait)},exports.contains=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)},exports.createSubscribe=function(executor,onNoObservers){var proxy=new ObserverProxy(executor,onNoObservers);return proxy.subscribe.bind(proxy)},exports.decode=decode,exports.deepCopy=function(value){return deepExtend(void 0,value)},exports.deepExtend=deepExtend,exports.errorPrefix=errorPrefix,exports.getUA=getUA,exports.isAdmin=function(token){var claims=decode(token).claims;return\"object\"==typeof claims&&!0===claims.admin},exports.isBrowser=function(){return\"object\"==typeof self&&self.self===self},exports.isBrowserExtension=function(){var runtime=\"object\"==typeof chrome?chrome.runtime:\"object\"==typeof browser?browser.runtime:void 0;return\"object\"==typeof runtime&&void 0!==runtime.id},exports.isElectron=function(){return getUA().indexOf(\"Electron/\")>=0},exports.isEmpty=function(obj){for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key))return!1;return!0},exports.isIE=function(){var ua=getUA();return ua.indexOf(\"MSIE \")>=0||ua.indexOf(\"Trident/\")>=0},exports.isIndexedDBAvailable=function(){return\"indexedDB\"in self&&null!=indexedDB},exports.isMobileCordova=function(){return\"undefined\"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())},exports.isNode=isNode,exports.isNodeSdk=function(){return!0===CONSTANTS.NODE_CLIENT||!0===CONSTANTS.NODE_ADMIN},exports.isReactNative=function(){return\"object\"==typeof navigator&&\"ReactNative\"===navigator.product},exports.isSafari=function(){return!isNode()&&navigator.userAgent.includes(\"Safari\")&&!navigator.userAgent.includes(\"Chrome\")},exports.isUWP=function(){return getUA().indexOf(\"MSAppHost/\")>=0},exports.isValidFormat=function(token){var claims=decode(token).claims;return!!claims&&\"object\"==typeof claims&&claims.hasOwnProperty(\"iat\")},exports.isValidTimestamp=function(token){var claims=decode(token).claims,now=Math.floor((new Date).getTime()/1e3),validSince=0,validUntil=0;return\"object\"==typeof claims&&(claims.hasOwnProperty(\"nbf\")?validSince=claims.nbf:claims.hasOwnProperty(\"iat\")&&(validSince=claims.iat),validUntil=claims.hasOwnProperty(\"exp\")?claims.exp:validSince+86400),!!now&&!!validSince&&!!validUntil&&now>=validSince&&now<=validUntil},exports.issuedAtTime=function(token){var claims=decode(token).claims;return\"object\"==typeof claims&&claims.hasOwnProperty(\"iat\")?claims.iat:null},exports.jsonEval=jsonEval,exports.map=function(obj,fn,contextObj){var res={};for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(res[key]=fn.call(contextObj,obj[key],key,obj));return res},exports.querystring=function(querystringParams){for(var params=[],_loop_1=function(key,value){Array.isArray(value)?value.forEach((function(arrayVal){params.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(arrayVal))})):params.push(encodeURIComponent(key)+\"=\"+encodeURIComponent(value))},_i=0,_a=Object.entries(querystringParams);_i<_a.length;_i++){var _b=_a[_i];_loop_1(_b[0],_b[1])}return params.length?\"&\"+params.join(\"&\"):\"\"},exports.querystringDecode=function(querystring){var obj={};return querystring.replace(/^\\?/,\"\").split(\"&\").forEach((function(token){if(token){var key=token.split(\"=\");obj[key[0]]=key[1]}})),obj},exports.safeGet=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)?obj[key]:void 0},exports.stringLength=function(str){for(var p=0,i=0;i<str.length;i++){var c=str.charCodeAt(i);c<128?p++:c<2048?p+=2:c>=55296&&c<=56319?(p+=4,i++):p+=3}return p},exports.stringToByteArray=function(str){for(var out=[],p=0,i=0;i<str.length;i++){var c=str.charCodeAt(i);if(c>=55296&&c<=56319){var high=c-55296;i++,assert(i<str.length,\"Surrogate pair missing trail surrogate.\"),c=65536+(high<<10)+(str.charCodeAt(i)-56320)}c<128?out[p++]=c:c<2048?(out[p++]=c>>6|192,out[p++]=63&c|128):c<65536?(out[p++]=c>>12|224,out[p++]=c>>6&63|128,out[p++]=63&c|128):(out[p++]=c>>18|240,out[p++]=c>>12&63|128,out[p++]=c>>6&63|128,out[p++]=63&c|128)}return out},exports.stringify=function(data){return JSON.stringify(data)},exports.validateArgCount=function(fnName,minCount,maxCount,argCount){var argError;if(argCount<minCount?argError=\"at least \"+minCount:argCount>maxCount&&(argError=0===maxCount?\"none\":\"no more than \"+maxCount),argError)throw new Error(fnName+\" failed: Was called with \"+argCount+(1===argCount?\" argument.\":\" arguments.\")+\" Expects \"+argError+\".\")},exports.validateCallback=function(fnName,argumentNumber,callback,optional){if((!optional||callback)&&\"function\"!=typeof callback)throw new Error(errorPrefix(fnName,argumentNumber,optional)+\"must be a valid function.\")},exports.validateContextObject=function(fnName,argumentNumber,context,optional){if((!optional||context)&&(\"object\"!=typeof context||null===context))throw new Error(errorPrefix(fnName,argumentNumber,optional)+\"must be a valid context object.\")},exports.validateIndexedDBOpenable=function(){return new Promise((function(resolve,reject){try{var preExist_1=!0,DB_CHECK_NAME_1=\"validate-browser-context-for-indexeddb-analytics-module\",request_1=window.indexedDB.open(DB_CHECK_NAME_1);request_1.onsuccess=function(){request_1.result.close(),preExist_1||window.indexedDB.deleteDatabase(DB_CHECK_NAME_1),resolve(!0)},request_1.onupgradeneeded=function(){preExist_1=!1},request_1.onerror=function(){var _a;reject((null===(_a=request_1.error)||void 0===_a?void 0:_a.message)||\"\")}}catch(error){reject(error)}}))},exports.validateNamespace=function(fnName,argumentNumber,namespace,optional){if((!optional||namespace)&&\"string\"!=typeof namespace)throw new Error(errorPrefix(fnName,argumentNumber,optional)+\"must be a valid firebase namespace.\")}},zn8P:function(module,exports){function webpackEmptyAsyncContext(req){return Promise.resolve().then((function(){var e=new Error(\"Cannot find module '\"+req+\"'\");throw e.code=\"MODULE_NOT_FOUND\",e}))}webpackEmptyAsyncContext.keys=function(){return[]},webpackEmptyAsyncContext.resolve=webpackEmptyAsyncContext,module.exports=webpackEmptyAsyncContext,webpackEmptyAsyncContext.id=\"zn8P\"}},[[0,0]]]);","extractedComments":["/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */","/**\n * @license\n * Copyright 2019 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */","/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */","/**\n * @license\n * Copyright 2018 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */","/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */","/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */","/**\n * @license Angular v8.2.14\n * (c) 2010-2019 Google LLC. https://angular.io/\n * License: MIT\n */","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */"]}